var Mc=Object.defineProperty;var Uc=(e,t,a)=>t in e?Mc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Y=(e,t,a)=>(Uc(e,typeof t!="symbol"?t+"":t,a),a);import{r as h,u as ba,g as cr,$ as Ue,s as Lr,j as n,a as d,A as Ve,U as Vc,m as ye,c as N,b as B,N as Bc,I as F,d as G,t as Z,e as f,q as j,W as Ye,o as Ne,f as A,h as ae,i as K,D as W,k as X,T as l,l as Q,F as ke,n as E,p as ee,B as _,v as Be,R as se,w as va,x as ya,y as lt,z as Ho,C as Er,E as Dt,G as ka,H as Hc,J as Tr,L as qc,P as jc,K as qe,M as xa,O as nn,Q as Wc,S as Qe,V as Le,X as Ee,Y as he,Z as Ar,_ as Pt,a0 as Fn,a1 as V,a2 as vt,a3 as M,a4 as qo,a5 as Ze,a6 as wa,a7 as Gc,a8 as Sa,a9 as T,aa as Kc,ab as Lt,ac as Zt,ad as zr,ae as Nn,af as rt,ag as st,ah as pe,ai as ge,aj as Qc,ak as Yc,al as Zc,am as Xc,an as Jc,ao as Ca,ap as nt,aq as jo,ar as Ya,as as Za,at as kn,au as In,av as ia,aw as la,ax as Wo,ay as It,az as Go,aA as Ko,aB as Qo,aC as eu,aD as Et,aE as tu,aF as nu,aG as au,aH as ca,aI as Te,aJ as ru,aK as su,aL as ou,aM as iu,aN as lu,aO as Xt,aP as cu,aQ as Ns,aR as Is,aS as Rs,aT as _a,aU as uu,aV as du,aW as Jt,aX as gt,aY as an,aZ as ot,a_ as Nt,a$ as fe,b0 as $r,b1 as mu,b2 as Ds,b3 as Fr,b4 as pu,b5 as hu,b6 as fu,b7 as Or,b8 as gu,b9 as Na,ba as Ia,bb as Yo,bc as Pe,bd as yt,be as bu,bf as $e,bg as Ce,bh as De,bi as rn,bj as Ra,bk as On,bl as vu,bm as ct,bn as Zo,bo as ur,bp as Da,bq as yu,br as Xo,bs as Xa,bt as Qt,bu as ku,bv as xu,bw as Rn,bx as wu,by as Mr,bz as Ur,bA as Su,bB as Cu,bC as _u,bD as dr,bE as Jo,bF as ei,bG as ti,bH as Mn,bI as Vr,bJ as Nu,bK as Tt,bL as Pa,bM as Xe,bN as At,bO as Iu,bP as Br,bQ as Ru,bR as Du,bS as Pu,bT as Lu,bU as Eu,bV as Tu,bW as Au,bX as zu,bY as ni,bZ as ai,b_ as $u,b$ as Fu,c0 as Ou,c1 as Mu,c2 as Uu,c3 as Vu,c4 as ri,c5 as Bu,c6 as Hu,c7 as qu,c8 as ju,c9 as Wu,ca as Gu,cb as Ku}from"./main.0615c25a.js";import{E as je,M as si,B as Dn,a as bt}from"./Edit.336acc69.js";import{u as Qu}from"./index.14466ddf.js";class Yu{getStringForLocale(t,a){let r=this.strings[a];r||(r=Zu(a,this.strings,this.defaultLocale),this.strings[a]=r);let s=r[t];if(!s)throw new Error(`Could not find intl message ${t} in ${a} locale`);return s}constructor(t,a="en-US"){this.strings={...t},this.defaultLocale=a}}function Zu(e,t,a="en-US"){if(t[e])return t[e];let r=Xu(e);if(t[r])return t[r];for(let s in t)if(s.startsWith(r+"-"))return t[s];return t[a]}function Xu(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const La=h.exports.createContext(null);function Ju(){h.exports.useEffect(()=>(document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[])}function ed({children:e,leftSidenavStatus:t,onLeftSidenavChange:a,rightSidenavStatus:r,onRightSidenavChange:s,name:o,leftSidenavCanBeCompact:i,...c}){Ju();const u=ba("(max-width: 1024px)"),p=h.exports.useMemo(()=>o?cr(`${o}.sidenav.compact`):!1,[o])?"compact":"open",[b,g]=Ue(t,u?"closed":p,a),v=h.exports.useMemo(()=>{const S=cr(`${o}.sidenav.right.position`,"open");return u?"closed":S},[u,o]),[y,w]=Ue(r,v,s),k=h.exports.useCallback(S=>{w(S),Lr(`${o}.sidenav.right.position`,S)},[w,o]),x=u&&(b==="open"||y==="open");return n(La.Provider,{value:{leftSidenavStatus:b,setLeftSidenavStatus:g,rightSidenavStatus:y,setRightSidenavStatus:k,leftSidenavCanBeCompact:i,name:o,isMobileMode:u},children:d("div",{...c,className:"dashboard-grid test-overflow h-full relative isolate",children:[e,n(Ve,{children:x&&n(Vc,{position:"fixed",onClick:()=>{g("closed"),k("closed")}},"dashboard-underlay")})]})})}function td({className:e,position:t,children:a,...r}){const{isMobileMode:s,leftSidenavStatus:o,setLeftSidenavStatus:i,rightSidenavStatus:c,setRightSidenavStatus:u}=h.exports.useContext(La),m=t==="left"?o:c,p={open:{display:"flex",width:null},compact:{display:"flex",width:null},closed:{width:0,transitionEnd:{display:"none"}}},b=nd(m==="compact"?"compact":r.size);return n(ye.div,{variants:p,initial:!1,animate:m,transition:{type:"tween",duration:.15},onClick:g=>{const v=g.target;s&&(v.closest("button")||v.closest("a"))&&(i("closed"),u("closed"))},className:N(e,t==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","overflow-hidden will-change-[width]",b.width,s&&"fixed top-0 bottom-0 z-20 shadow-xl",s&&t==="left"&&"left-0",s&&t==="right"&&"right-0"),children:h.exports.cloneElement(a,{className:N(a.props.className,b.minWidth,"h-full",m==="compact"&&"compact-scrollbar"),isCompactMode:m==="compact"})})}function nd(e){switch(e){case"compact":return{width:"w-80",minWidth:"min-w-80"};case"sm":return{width:"w-224",minWidth:"min-w-224"};case"lg":return{width:"w-288",minWidth:"min-w-288"};default:return{width:"w-240",minWidth:"min-w-240"}}}function ad({children:e}){return h.exports.cloneElement(e,{className:N(e.props.className,"dashboard-grid-content overflow-y-auto")})}const rd=B(n("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function sd({children:e,className:t,hideToggleButton:a,...r}){const{isMobileMode:s,leftSidenavStatus:o,setLeftSidenavStatus:i,name:c,leftSidenavCanBeCompact:u}=h.exports.useContext(La),m=u&&!s,p=!a&&(s||u),b=()=>{i(o==="open"?"closed":"open")},g=()=>{const v=o==="compact"?"open":"compact";Lr(`${c}.sidenav.compact`,v==="compact"),i(v)};return n(Bc,{className:N("dashboard-grid-navbar",t),border:"border-b",size:"sm",color:"primary",darkModeColor:"bg-alt",toggleButton:p?n(F,{size:"md",onClick:()=>{m?g():b()},children:n(rd,{})}):void 0,...r,children:e})}const od=B(n("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined"),Rt=B(n("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function id(e){return G(t=>ld(t),{onSuccess:()=>{Z(f("Created workspace")),j.invalidateQueries(Ye.fetchUserWorkspaces)},onError:t=>Ne(t,e)})}function ld(e){return A.post("workspace",e).then(t=>t.data)}function cd(){const e=ae(),{formId:t,close:a}=K(),r=id(e);return d(W,{children:[n(X,{children:n(l,{message:"Create workspace"})}),n(Q,{children:n(ke,{form:e,id:t,onSubmit:()=>{r.mutate(e.getValues(),{onSuccess:s=>{a(s.workspace.id)}})},children:n(E,{name:"name",autoFocus:!0,label:n(l,{message:"Workspace name"}),minLength:3,required:!0})})}),d(ee,{children:[n(_,{variant:"text",onClick:a,children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:t,disabled:r.isLoading,children:n(l,{message:"Create"})})]})]})}function ud(e){return A.get(`workspace/${e}`).then(t=>t.data)}function dd(e){return Be(Ye.workspaceWithMembers(e),()=>ud(e))}const md=B(n("path",{d:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z"}),"GroupOutlined");function pd({className:e,children:t,size:a,color:r,radius:s,selectable:o}){return n("div",{className:N(e,"flex items-center gap-8 flex-wrap"),children:h.exports.Children.map(t,i=>{if(h.exports.isValidElement(i))return h.exports.cloneElement(i,{size:a,color:r,selectable:o,radius:s})})})}const oi=se.forwardRef((e,t)=>{const{children:a,inputProps:r,wrapperProps:s,className:o,autoFocus:i,style:c,onClick:u}=e;return n("div",{...s,onClick:u,children:n("div",{...r,role:"group",className:N(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:t,style:c,children:n(va,{autoFocus:i,children:a})})})}),Un=h.exports.forwardRef(({className:e,circle:t,size:a="md",src:r,...s},o)=>n("img",{ref:o,src:r,alt:"",className:N(e,hd(a),t?"rounded-full":"rounded"),...s}));function hd(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";default:return e}}function mr(e){return{id:e,name:`${e}`,description:`${e}`}}function fd(e,t){const a=h.exports.useRef(null),r=ya(t),{displayWith:s=ne=>ne.name,validateWith:o,children:i,suggestions:c,isLoading:u,inputValue:m,onInputValueChange:p,onItemSelected:b,placeholder:g,onOpenChange:v,chipSize:y="md",openMenuOnFocus:w=!0,showEmptyMessage:k,value:x,defaultValue:S,onChange:R,valueKey:C,isAsync:D,allowCustomValue:U=!0,showDropdownArrow:I,...P}=e,L=lt({...e,flexibleHeight:!0}),[H,me]=vd(e),[xe,Ae]=h.exports.useState(!1),be=n(xa,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),z=I?n(nn,{}):null,{fieldProps:O,inputProps:te}=Ho({...P,focusRef:r,endAdornment:u&&xe?be:z});return n(Er,{fieldClassNames:L,...O,children:d(oi,{ref:a,className:N("flex items-center flex-wrap",L.input),onClick:()=>{var ne;(ne=r.current)==null||ne.focus()},children:[n(gd,{displayChipUsing:s,items:H,setItems:me,chipSize:y}),n(bd,{showEmptyMessage:k,inputProps:te,inputValue:m,onInputValueChange:p,fieldRef:a,inputRef:r,chips:H,setChips:me,validateWith:o,isLoading:u,suggestions:c,placeholder:g,openMenuOnFocus:w,listboxIsOpen:xe,setListboxIsOpen:Ae,allowCustomValue:U,children:i})]})})}function gd({items:e,setItems:t,displayChipUsing:a,chipSize:r}){const s=Dt(),o=h.exports.useCallback(i=>{const c=e.findIndex(m=>m.id===i),u=[...e];return c>-1&&(u.splice(c,1),t(u)),u},[e,t]);return n(pd,{className:"flex-shrink-0 flex-wrap max-w-full my-8",size:r,selectable:!0,children:e.map(i=>n(ka,{errorMessage:i.errorMessage,adornment:i.image?n(Un,{circle:!0,src:i.image}):null,onRemove:()=>{o(i.id).length?s.focusPrevious({tabbable:!0}):s.focusLast()},children:a(i)},i.id))})}function bd(e){const{inputRef:t,fieldRef:a,validateWith:r,setChips:s,chips:o,suggestions:i,inputProps:c,placeholder:u,openMenuOnFocus:m,listboxIsOpen:p,setListboxIsOpen:b,allowCustomValue:g}=e,v="outline-none text-sm mx-8 my-4 h-30 flex-auto",y=Dt(),w=h.exports.useCallback(z=>{z=(z||[]).filter(O=>{const te=!O||!O.id||!O.name;return!(o.findIndex(St=>St.id===(O==null?void 0:O.id))>-1)&&!te}),z.length&&(r&&(z=z.map(O=>r(O))),s([...o,...z]))},[o,s,r]),k=Hc({...e,clearInputOnItemSelection:!0,isOpen:p,onOpenChange:b,items:i,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:z=>{me(z)}}),{state:{activeIndex:x,setActiveIndex:S,isOpen:R,setIsOpen:C,inputValue:D,setInputValue:U},refs:I,listboxId:P,collection:L,onInputChange:H}=k,me=z=>{const O=L.size&&x!=null?[...L.values()][x]:null;O!=null&&O.item?w([O.item]):g&&w([mr(O?O.value:z)]),U(""),S(null),C(!1)};Tr(()=>{a.current&&I.reference.current!==a.current&&k.reference(a.current)},[a,k,I]);const{handleTriggerKeyDown:xe,handleListboxKeyboardNavigation:Ae}=Wc(k),be=Qe(()=>{m&&!R&&C(!0)});return n(qc,{listbox:k,mobileOverlay:jc,onPointerDown:z=>{z.preventDefault()},children:n("input",{type:"text",className:N(v,"bg-transparent"),placeholder:u,...qe(c,{ref:t,value:D,onChange:H,onPaste:z=>{const te=z.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(te){z.preventDefault();const ne=window.getSelection();ne!=null&&ne.rangeCount&&(ne.deleteFromDocument(),w(te.map(St=>mr(St))))}},"aria-autocomplete":"list","aria-controls":R?P:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:z=>{const O=z.target;if(z.key==="Enter"){z.preventDefault(),me(O.value);return}if(z.key==="Escape"&&R&&(C(!1),U("")),z.key==="ArrowUp"&&R&&(x===0||x==null)){S(null);return}if(x!=null&&(z.key==="ArrowLeft"||z.key==="ArrowRight")){z.preventDefault();return}if((z.key==="ArrowLeft"||z.key==="Backspace"||z.key==="Delete")&&O.selectionStart===0&&x==null&&o.length){y.focusPrevious({tabbable:!0});return}xe(z)||Ae(z)},onFocus:be,onClick:be})})})}function vd({onChange:e,value:t,defaultValue:a,valueKey:r}){const s=h.exports.useMemo(()=>Ps(t),[t]),o=h.exports.useMemo(()=>Ps(a),[a]),i=h.exports.useCallback(c=>{const u=r?c.map(m=>m[r]):c;e==null||e(u)},[e,r]);return Ue(s||void 0,o||[],i)}function Ps(e){if(e!=null)return typeof e[0]!="object"?e.map(t=>mr(t)):e}const ii=se.forwardRef(fd);function yd({workspaceId:e,...t}){return A.post(`workspace/${e}/invite`,t).then(a=>a.data)}function kd(){return G(e=>yd(e),{onSuccess:(e,t)=>{j.invalidateQueries(Ye.workspaceWithMembers(t.workspaceId))},onError:e=>Le(e)})}function xd({workspaceId:e,inviteId:t,...a}){return A.post(`workspace/${e}/${t}/resend`,a).then(r=>r.data)}function wd(){return G(e=>xd(e),{onSuccess:()=>{Z("Invite sent")},onError:e=>Le(e)})}const Sd=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Cd(e){return!e||e.length>320?!1:Sd.test(e)}function _d({workspaceId:e,member:t,...a}){const r=t.model_type,s=t.model_type==="invite"?t.id:t.member_id;return A.post(`workspace/${e}/${r}/${s}/change-role`,a).then(o=>o.data)}function Nd(){return G(e=>_d(e),{onSuccess:(e,t)=>{Z(f("Role changed")),j.invalidateQueries(Ye.workspaceWithMembers(t.workspaceId))},onError:e=>Le(e)})}function Id({workspaceId:e,memberId:t,memberType:a}){const r=a==="invite"?`workspace/invite/${t}`:`workspace/${e}/member/${t}`;return A.delete(r).then(s=>s.data)}function li(){const{workspaceId:e,setWorkspaceId:t}=Ee(),{user:a}=he();return G(r=>Id(r),{onSuccess:(r,s)=>{j.invalidateQueries(Ye.fetchUserWorkspaces),j.invalidateQueries(Ye.workspaceWithMembers(s.workspaceId)),s.memberId===(a==null?void 0:a.id)&&e===s.workspaceId&&t(Ar.id)},onError:r=>Le(r)})}function ci(){return n(Pt,{isDanger:!0,title:n(l,{message:"Leave workspace"}),body:d("div",{children:[n(l,{message:"Are you sure you want to leave this workspace?"}),n("div",{className:"font-semibold mt-8",children:n(l,{message:"All resources you've created in the workspace will be transferred to workspace owner."})})]}),confirm:n(l,{message:"Leave"})})}function Rd({workspace:e}){const{data:t,isLoading:a}=dd(e.id);return d(W,{size:"lg",children:[n(X,{children:n(l,{message:"Manage workspace members"})}),n(Q,{children:a?n("div",{className:"flex items-center justify-center min-h-[238px]",children:n(xa,{isIndeterminate:!0,"aria-label":"Loading workspace..."})}):n(Dd,{workspace:t.workspace})})]})}function Dd({workspace:e}){const t=Hr(e),a=[...e.members||[],...e.invites||[]];return d("div",{children:[t.invite&&n(Ed,{workspace:e}),d("div",{className:"flex items-center gap-10 mb-14 text-base",children:[n(md,{className:"icon-sm"}),n(l,{message:"Members of `:workspace`",values:{workspace:e.name}})]}),n(Ve,{initial:!1,children:a.map(r=>n(Pd,{workspace:e,member:r},`${r.model_type}.${r.id}`))})]})}function Pd({workspace:e,member:t}){return d(ye.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"tween",duration:.125},className:"flex items-start text-sm gap-14 mb-20",children:[n("img",{className:"w-36 h-36 rounded flex-shrink-0",src:t.avatar,alt:""}),d("div",{className:"md:flex flex-auto items-center justify-between gap-14 min-w-0",children:[d("div",{className:"overflow-hidden mb-10 md:mb-0 md:mr-10",children:[d("div",{className:"flex items-center justify-start gap-6",children:[n("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:t.display_name}),n(zd,{workspace:e,member:t})]}),n("div",{className:"text-muted",children:t.email})]}),n(Ld,{workspace:e,member:t})]})]},`${t.model_type}.${t.id}`)}function Hr(e){var o;const{user:t}=he(),a={update:!1,invite:!1,delete:!1},r=["update","invite","delete"],s=(o=e.members)==null?void 0:o.find(i=>i.id===(t==null?void 0:t.id));return s&&r.forEach(i=>{var c;a[i]=s.is_owner||!!((c=s.permissions)!=null&&c.find(u=>u.name===`workspace_members.${i}`))}),a}function Ld({workspace:e,member:t}){const[a,r]=h.exports.useState(t.role_id),s=Nd(),{user:o}=he(),i=Hr(e),c=t.model_type==="member"&&t.is_owner,u=t.model_type==="member"&&(o==null?void 0:o.id)===t.id,m=!i.update||c||u?n("div",{className:"text-muted ml-auto first:capitalize",children:n(l,{message:t.role_name})}):n(ui,{className:"ml-auto flex-shrink-0",size:"xs",value:a,isDisabled:s.isLoading,onChange:p=>{r(p),s.mutate({roleId:p,workspaceId:e.id,member:t})}});return d(Fn,{children:[m,!c&&(u||i.delete)&&n(Td,{type:u?"leave":"remove",member:t,workspace:e})]})}function Ed({workspace:e}){const{trans:t}=V(),[a,r]=h.exports.useState([]),s=a.every(p=>!p.invalid),o=p=>p.description||p.name,[i,c]=h.exports.useState(),u=kd(),{data:m}=vt(["workspaceRoles"]);return h.exports.useEffect(()=>{var p;!i&&((p=m==null?void 0:m.workspaceRoles)==null?void 0:p.length)&&c(m.workspaceRoles[0].id)},[m,i]),d("div",{className:"mb-30",children:[n(ii,{value:a,onChange:r,displayWith:o,validateWith:p=>{const b=!Cd(p.description);return{...p,invalid:b,errorMessage:b?t({message:"Not a valid email"}):void 0}},placeholder:t({message:"Enter email addresses"}),label:n(l,{message:"Invite people"})}),d("div",{className:"flex items-center gap-14 justify-between mt-14",children:[n(ui,{onChange:c,value:i}),a.length&&i?n(_,{variant:"flat",color:"primary",size:"sm",disabled:u.isLoading||!s,onClick:()=>{u.mutate({emails:a.map(p=>o(p)),roleId:i,workspaceId:e.id},{onSuccess:()=>{r([])}})},children:n(l,{message:"Invite"})}):null]})]})}function Td({member:e,workspace:t,type:a}){const r=li(),{close:s}=K();return d(M,{type:"modal",onClose:o=>{o&&(r.mutate({workspaceId:t.id,memberId:e.id,memberType:e.model_type}),a==="leave"&&(s(),Z(f("Left workspace"))))},children:[n(F,{size:"md",className:"text-muted flex-shrink-0",disabled:r.isLoading,children:a==="leave"?n(qo,{}):n(Ze,{})}),a==="leave"?n(ci,{}):n(Ad,{member:e})]})}function Ad({member:e}){return n(Pt,{isDanger:!0,title:n(l,{message:"Remove member"}),body:d("div",{children:[n(l,{message:"Are you sure you want to remove `:name`?",values:{name:e.display_name}}),n("div",{className:"font-semibold mt-8",children:n(l,{message:"All workspace resources created by `:name` will be transferred to workspace owner.",values:{name:e.display_name}})})]}),confirm:n(l,{message:"Remove"})})}function ui({value:e,onChange:t,size:a="xs",className:r,isDisabled:s}){var c;const{data:o}=vt(["workspaceRoles"]),i=(c=o==null?void 0:o.workspaceRoles)==null?void 0:c.find(u=>u.id===e);return!e||!i||!(o!=null&&o.workspaceRoles)?null:d(wa,{selectionMode:"single",selectedValue:e,onSelectionChange:u=>{t(u)},children:[n(_,{className:r,size:a,variant:"flat",color:"chip",disabled:s,endIcon:n(Gc,{}),children:i.name}),n(Sa,{children:o.workspaceRoles.map(u=>n(T,{value:u.id,description:u.description,children:u.name},u.id))})]})}function zd({member:e,workspace:t}){const{user:a}=he(),r=Hr(t);return(a==null?void 0:a.id)===e.id?d("div",{className:"font-medium",children:["(",n(l,{message:"You"}),")"]}):e.model_type==="invite"?d("div",{className:"flex items-center gap-4",children:[n("div",{children:"\xB7"}),n("div",{className:"font-medium",children:n(l,{message:"Invited"})}),r.invite?d(Fn,{children:[n("div",{children:"\xB7"}),n($d,{member:e,workspace:t})]}):null]}):null}function $d({member:e,workspace:t}){const a=wd();return d(M,{type:"modal",onClose:r=>{r&&a.mutate({workspaceId:t.id,inviteId:e.id})},children:[n(_,{variant:"link",size:"sm",color:"primary",disabled:a.isLoading,children:n(l,{message:"Resend invite"})}),n(Pt,{title:n(l,{message:"Resend invite"}),body:n(l,{message:"Are you sure you want to send this invite again?"}),confirm:n(l,{message:"Send"})})]})}const Fd=B(n("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z"}),"PersonAddOutlined"),Od=B(n("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");function Md({id:e,...t}){return A.put(`workspace/${e}`,t).then(a=>a.data)}function Ud(e){const{close:t}=K();return G(a=>Md(a),{onSuccess:a=>{t(),Z(f("Updated workspace")),j.invalidateQueries(Ye.fetchUserWorkspaces),j.invalidateQueries(Ye.workspaceWithMembers(a.workspace.id))},onError:a=>Ne(a,e)})}function Vd({workspace:e}){const t=ae({defaultValues:{id:e.id,name:e.name}}),{formId:a,close:r}=K(),s=Ud(t);return d(W,{children:[n(X,{children:n(l,{message:"Rename workspace"})}),n(Q,{children:n(ke,{form:t,id:a,onSubmit:()=>{s.mutate(t.getValues())},children:n(E,{name:"name",autoFocus:!0,label:n(l,{message:"Name"}),minLength:3,required:!0})})}),d(ee,{children:[n(_,{variant:"text",onClick:r,children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:a,disabled:s.isLoading,children:n(l,{message:"Rename"})})]})]})}function Bd({id:e}){return A.delete(`workspace/${e}`).then(t=>t.data)}function Hd(){const{workspaceId:e,setWorkspaceId:t}=Ee();return G(a=>Bd(a),{onSuccess:(a,r)=>{Z(f("Deleted workspace")),j.invalidateQueries(Ye.fetchUserWorkspaces),j.invalidateQueries(Ye.workspaceWithMembers(r.id)),e===r.id&&t(Ar.id)},onError:a=>Le(a)})}function di({onChange:e,className:t,trigger:a}){const{data:r,isFetched:s,isFetching:o}=Kc(),{workspaceId:i,setWorkspaceId:c}=Ee(),u=r==null?void 0:r.find(k=>k.id===i),[m,p]=h.exports.useState(null),[b,g]=h.exports.useState(!1),{hasPermission:v}=he();if(h.exports.useEffect(()=>{s&&!o&&!u&&c(Ar.id)},[u,r,c,s,o]),!u||!v("workspaces.create"))return null;const y=d(Lt,{className:N("flex items-center gap-10 hover:bg-hover rounded ring-inset focus-visible:ring-2",t),children:[d("span",{className:"block flex-auto mr-auto text-left overflow-hidden",children:[n("span",{className:"block text-sm text-main font-medium overflow-hidden overflow-ellipsis",children:u.default?n(l,{message:u.name}):u.name}),n("span",{className:"block text-muted text-xs",children:u.default?n(l,{message:"Personal workspace"}):n(l,{message:":count members",values:{count:u.members_count}})})]}),n(od,{className:"icon-md shrink-0"})]}),w=a||y;return d(h.exports.Fragment,{children:[d(M,{type:"popover",isOpen:b,onClose:()=>{g(!1)},children:[h.exports.cloneElement(w,{onClick:()=>g(!b)}),n(W,{size:"min-w-320",children:d(Q,{padding:"p-10",children:[n("div",{className:"mb-16 pb-10 border-b",children:r.map(k=>n(qd,{workspace:k,setDialog:p,setSelectorIsOpen:g,onChange:e},k.id))}),n("div",{className:"text-center mb-4 px-4",children:n(_,{onClick:k=>{k.preventDefault(),k.stopPropagation(),p({name:"newWorkspace"}),g(!1)},variant:"outline",startIcon:n(Rt,{}),color:"primary",className:"w-full h-40",children:n(l,{message:"Create new workspace"})})})]})})]}),n(jd,{dialog:m,setDialog:p,onChange:e})]})}function qd({workspace:e,onChange:t,setSelectorIsOpen:a,setDialog:r}){const{workspaceId:s,setWorkspaceId:o}=Ee(),i=s===e.id;return d("div",{onClick:()=>{o(e.id),t==null||t(e.id),a(!1)},className:N("p-10 mb-4 text-left flex items-center gap-12 rounded-lg cursor-pointer",i&&"bg-primary/5",!i&&"hover:bg-hover"),children:[n(Zt,{size:"sm",className:N("flex-shrink-0 text-primary",!i&&"invisible")}),d("div",{className:"flex-auto",children:[n("div",{className:N("text-sm",i&&"font-semibold"),children:e.name}),n("div",{className:"text-muted text-sm",children:e.default?n(l,{message:"Personal workspace"}):n(l,{message:":count members",values:{count:e.members_count}})})]}),e.id!==0&&n(Gd,{setSelectorIsOpen:a,workspace:e,setDialog:r})]})}function jd({dialog:e,setDialog:t,onChange:a}){const r=Hd(),s=li(),{user:o}=he(),{setWorkspaceId:i}=Ee();return d(M,{type:"modal",isOpen:!!(e!=null&&e.name),onClose:c=>{(e==null?void 0:e.name)==="deleteWorkspace"&&c&&r.mutate({id:e.workspace.id}),(e==null?void 0:e.name)==="leaveWorkspace"&&c&&(o==null?void 0:o.id)&&s.mutate({workspaceId:e.workspace.id,memberId:o.id,memberType:"member"}),(e==null?void 0:e.name)==="newWorkspace"&&c&&(i(c),a==null||a(c)),t(null)},children:[(e==null?void 0:e.name)==="newWorkspace"&&n(cd,{}),(e==null?void 0:e.name)==="updateWorkspace"&&n(Vd,{workspace:e.workspace}),(e==null?void 0:e.name)==="workspaceMembers"&&n(Rd,{workspace:e.workspace}),(e==null?void 0:e.name)==="deleteWorkspace"&&n(Wd,{workspace:e.workspace}),(e==null?void 0:e.name)==="leaveWorkspace"&&n(ci,{})]})}function Wd({workspace:e}){return n(Pt,{isDanger:!0,title:n(l,{message:"Delete workspace"}),body:n(l,{message:"Are you sure you want to delete \u201C:name\u201C?",values:{name:e.name}}),confirm:n(l,{message:"Delete"})})}function Gd({setSelectorIsOpen:e,setDialog:t,workspace:a}){const{user:r}=he();return d(wa,{onItemSelected:s=>{e(!1),t({name:s,workspace:a})},children:[n(_,{onClick:s=>{s.preventDefault(),s.stopPropagation()},color:"primary",size:"xs",variant:"outline",endIcon:n(nn,{}),children:n(l,{message:"Manage"})}),d(Sa,{children:[n(T,{onClick:s=>s.stopPropagation(),value:"workspaceMembers",startIcon:n(Fd,{}),children:n(l,{message:"Members"})}),a.owner_id===(r==null?void 0:r.id)&&n(T,{onClick:s=>s.stopPropagation(),value:"updateWorkspace",startIcon:n(je,{}),children:n(l,{message:"Rename"})}),a.owner_id!==(r==null?void 0:r.id)&&n(T,{onClick:s=>s.stopPropagation(),value:"leaveWorkspace",startIcon:n(qo,{}),children:n(l,{message:"Leave"})}),a.owner_id===(r==null?void 0:r.id)&&n(T,{onClick:s=>s.stopPropagation(),value:"deleteWorkspace",startIcon:n(Od,{}),children:n(l,{message:"Delete"})})]})]})}const mi="link/usage";function Ea(){return Be([mi],()=>Kd())}function Kd(){return A.get(mi).then(e=>e.data)}function pi(e){let{value:t=0,minValue:a=0,maxValue:r=100,size:s="md",label:o,showValueLabel:i=!!o,isIndeterminate:c=!1,labelPosition:u="top",className:m,role:p,formatOptions:b={style:"percent"},radius:g="rounded"}=e;const v=h.exports.useId();t=Nn(t,a,r);const y=(t-a)/(r-a),w=zr(b);let k="";if(!c&&i){const D=b.style==="percent"?y:t;k=w.format(D)}const x={};c||(x.width=`${Math.round(y*100)}%`);const S=Qd(s),R=lt({size:s}),C=(o||k)&&d("div",{className:N("flex gap-10 justify-between my-4",R.label),children:[o&&n("span",{id:v,children:o}),k&&n("div",{children:k})]});return d("div",{"aria-valuenow":c?void 0:t,"aria-valuemin":a,"aria-valuemax":r,"aria-valuetext":c?void 0:k,"aria-labelledby":o?v:void 0,role:p||"progressbar",className:N(m,"min-w-42"),children:[u==="top"&&C,n("div",{className:`${S} ${g} bg-primary-light overflow-hidden`,children:n("div",{className:N("fill h-full transition-width duration-200 rounded-l bg-primary",c&&"progress-bar-indeterminate-animate"),style:x})}),u==="bottom"&&C]})}function Qd(e){switch(e){case"sm":return"h-6";case"xs":return"h-4";default:return"h-8"}}function Yd(e){return n(pi,{...e,role:"meter progressbar"})}const Zd=B(n("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined"),hi={links:f("Links"),biolinks:f("Biolinks"),link_clicks:f("Visitors"),link_overlays:f("Link overlays"),custom_pages:f("Custom link pages"),custom_domains:f("Custom domains"),link_groups:f("Link groups"),tracking_pixels:f("Tracking pixels")};function Xd(){const{data:e}=Ea();if(!e)return null;const t=n(l,{message:"Unlimited"});return n("ul",{children:Object.entries(hi).map(([a,r])=>{const s=e==null?void 0:e.usage[a];if(!s)return null;const o=n(l,{...r});return n("li",{className:"mt-8",children:s.total?n(l,{message:":used out of :total :name",values:{used:n(rt,{value:s.used}),total:s.total?n(rt,{value:s.total}):t,name:o}}):n(l,{message:":count :name created",values:{count:s.used,name:o}})},a)})})}function fi({className:e}){var o,i;const{user:t}=he(),a=(o=t==null?void 0:t.subscriptions)==null?void 0:o[0],r=(i=a==null?void 0:a.product)==null?void 0:i.name,s=a!=null&&a.renews_at?n(st,{date:a.renews_at}):null;return d(M,{type:"popover",triggerOnHover:!0,children:[n(F,{size:"md",className:e,children:n(Zd,{})}),n(W,{size:"auto",children:d(Q,{children:[d("div",{className:"border-b pb-10 mb-10",children:[n("div",{className:"font-semibold",children:n(l,{message:"Current plan: :planName",values:{planName:r||n(l,{message:"Free"})}})}),n("div",{className:"text-muted text-xs",children:n(l,{message:"Next payment: :date",values:{date:s||n(l,{message:"Never"})}})})]}),n(Xd,{})]})})]})}function Jd(){const{isLoading:e,data:t}=Ea(),a=t==null?void 0:t.usage.links;if(!a)return n("div",{className:"h-[53px] pt-24 mt-24 border-t"});const r=n("span",{className:N("whitespace-nowrap",e&&"invisible"),children:a.total?n(l,{message:":used of :available links created",values:{used:n(rt,{value:a.used}),available:n(rt,{value:a.total})}}):n(l,{message:":count links created",values:{count:a.used}})});return d("div",{className:"border-t items-start gap-8 flex pl-6 pt-24 mt-24",children:[n(fi,{className:"-mt-14"}),n(Yd,{className:"flex-auto max-w-144",size:"xs",value:a.total&&a.used?a.used/a.total*100:0,label:r,showValueLabel:!1,labelPosition:"bottom"})]})}function gi(e){const{isSubscribed:t}=he();return n(_,{elementType:pe,to:t?"/billing/change-plan":"/pricing",variant:"outline",color:"primary",size:"xs",...e,children:n(l,{message:"Upgrade"})})}function em({className:e,isCompactMode:t}){const{billing:a}=ge();return d("div",{className:N("text-sm pt-26 text-muted font-medium bg-alt flex flex-col gap-20 border-r overflow-y-auto relative",e),children:[d("div",{className:"flex-auto px-12",children:[n(Qc,{matchDescendants:r=>r==="/dashboard",menu:"dashboard-sidebar",orientation:"vertical",onlyShowIcons:t,gap:"gap-8",itemClassName:({isActive:r})=>N("block w-full rounded py-12 px-16 border-l-4",r?"bg-primary/hover border-l-primary":"border-l-transparent hover:bg-hover")}),!t&&n(Jd,{}),a.enable&&!t&&n("div",{className:"mt-14 pl-60",children:n(gi,{})})]}),!t&&n(di,{className:"w-full px-24 py-18 border-t flex-shrink-0 mt-auto"}),t&&n(fi,{className:"flex-shrink-0 mx-auto mb-10"})]})}function tm(){const{links:{dash_footer:e}}=ge();return d(ed,{name:"belink-dashboard",leftSidenavCanBeCompact:!0,children:[n(nm,{}),n(td,{position:"left",children:n(em,{})}),n(ad,{children:d("div",{className:"bg dark:bg-alt",children:[n(Yc,{slot:"dashboard",className:"mt-50 mb-20"}),n(Zc,{}),e&&n(Xc,{padding:"px-16 md:px-28 pt-24 pb-28 md:pb-24"})]})})]})}function nm(e){const{billing:t}=ge(),{leftSidenavStatus:a}=h.exports.useContext(La);return n(sd,{...e,size:"sm",color:"primary",menuPosition:"dashboard-navbar",rightChildren:a==="compact"&&n(gi,{variant:"flat",color:"paper"}),children:a==="compact"&&(t==null?void 0:t.enable)&&n(di,{trigger:n(_,{variant:"text",endIcon:n(nn,{}),children:n(l,{message:"Workspaces"})})})})}function am(e){return e instanceof Jc?"day":"minute"}function pr(e,t,a){return t!=null&&e.compare(t)<0||a!=null&&e.compare(a)>0}function bi(e,t){var m;const a=Ca(),[r,s]=h.exports.useState(!1),o=(m=t.closeDialogOnSelection)!=null?m:!0,i=t.granularity||am(e),c=t.min?nt(t.min,a):void 0,u=t.max?nt(t.max,a):void 0;return{timezone:a,granularity:i,min:c,max:u,calendarIsOpen:r,setCalendarIsOpen:s,closeDialogOnSelection:o}}function vi(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function Oe(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function sn(){const e=Ca();return h.exports.useMemo(()=>jo(e),[e])}function yi(e){var be,z;const t=sn(),[a,r]=h.exports.useState({start:(!e.value||!e.value.start)&&!((be=e.defaultValue)!=null&&be.start),end:(!e.value||!e.value.end)&&!((z=e.defaultValue)!=null&&z.end)}),s=e.onChange,[o,i]=Ue(e.value?er(e.value,t):void 0,e.value?void 0:er(e.defaultValue,t),e.onChange),{min:c,max:u,granularity:m,timezone:p,calendarIsOpen:b,setCalendarIsOpen:g,closeDialogOnSelection:v}=bi(o.start,e),y=h.exports.useCallback(()=>{r({start:!0,end:!0}),i(er(null,t)),s==null||s(null),g(!1)},[t,i,s,g]),[w,k]=h.exports.useState(null),[x,S]=h.exports.useState(!1),[R,C]=h.exports.useState(o),[D,U]=h.exports.useState(()=>Ls(o,u)),I=h.exports.useCallback(O=>{let te=O.start,ne=O.end;c&&(te=Ya(te,c));const St=u?Za(u,ne):ne;te=Za(te,St);const Re=c?Ya(c,te):te;return ne=Ya(ne,Re),u&&(ne=Za(ne,u)),{start:nt(te,p),end:nt(ne,p)}},[c,u,p]),P=h.exports.useCallback(O=>{const te={...I(O),preset:O.preset};i(te),C(te),U(Ls(te,u)),r({start:!1,end:!1})},[i,I,u]),L=h.exports.useCallback(O=>!a.start&&kn(O,R.start)||!a.end&&kn(O,R.end),[R,a]),H=h.exports.useCallback(O=>(x||!a.start&&!a.end)&&O.compare(R.start)>=0&&O.compare(R.end)<=0,[R,a,x]),me=h.exports.useCallback(O=>kn(O,R.start),[R]),xe=h.exports.useCallback(O=>kn(O,R.end),[R]),Ae=h.exports.useCallback((O,te)=>({onPointerEnter:()=>{x&&te&&C(Ja({start:w,end:O,timezone:p}))},onClick:()=>{if(!x)S(!0),k(O),C(Ja({start:O,end:O,timezone:p}));else{const ne=Ja({start:vi(nt(w,p)),end:Oe(nt(O,p)),timezone:p});S(!1),k(null),P==null||P(ne),v&&(g==null||g(!1))}}}),[w,x,P,g,v,p]);return{selectedValue:o,setSelectedValue:P,calendarIsOpen:b,setCalendarIsOpen:g,dayIsActive:L,dayIsHighlighted:H,dayIsRangeStart:me,dayIsRangeEnd:xe,getCellProps:Ae,calendarDates:D,setIsPlaceholder:r,isPlaceholder:a,clear:y,setCalendarDates:U,min:c,max:u,granularity:m,timezone:p,closeDialogOnSelection:v}}function Ls(e,t){let a=In(ia(e.start)),r=In(la(e.end));return Wo(a,r)&&(r=la(r.add({months:1}))),t&&r.compare(t)>0&&(r=a,a=ia(a.subtract({months:1}))),[a,r]}function Ja(e){const t=nt(e.start,e.timezone),a=nt(e.end,e.timezone);return t.compare(a)>0?{start:a,end:t}:{start:t,end:a}}function er(e,t){return(e==null?void 0:e.start)&&(e==null?void 0:e.end)?e:!(e!=null&&e.start)&&(e==null?void 0:e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e==null?void 0:e.start)?(e.end=e.start.add({months:1}),e):{start:t,end:t.add({months:1})}}const qr=B(n("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),jr=h.exports.memo(({start:e,end:t,options:a,preset:r})=>{const{dates:s}=ge(),o=Ca(),i=It(a||Go[r||(s==null?void 0:s.format)]);if(!e||!t)return null;let c;try{c=i.formatRange(Es(e,o),Es(t,o))}catch{c=""}return n(h.exports.Fragment,{children:c})},Ko);function Es(e,t){return typeof e=="string"?Qo(e,t).toDate():"toDate"in e?e.toDate(t):e}const Wr=se.forwardRef(({inputRef:e,wrapperProps:t,children:a,onBlur:r,...s},o)=>{const i=lt(s),c=ya(o),{fieldProps:u,inputProps:m}=Ho({...s,focusRef:c,labelElementType:"span"});return i.wrapper=N(i.wrapper,s.disabled&&"pointer-events-none"),n(Er,{wrapperProps:qe(t,{onBlur:p=>{c.current.contains(p.relatedTarget)||r==null||r(p)},onClick:()=>{eu(c).focusFirst()}}),fieldClassNames:i,ref:c,...u,children:n(oi,{inputProps:m,className:N(i.input,"gap-10"),ref:e,children:a})})}),Vn=B(n("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),zt=B(n("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function rm({date:e,currentMonth:t,state:{dayIsActive:a,dayIsHighlighted:r,dayIsRangeStart:s,dayIsRangeEnd:o,getCellProps:i,timezone:c,min:u,max:m}}){const{localeCode:p}=Et(),b=tu(e,p),g=a(e),v=r(e),y=s(e),w=o(e),k=nu(e,c),x=Wo(e,t),S=pr(e,u,m);return d("div",{role:"button","aria-disabled":S,className:N("w-40 h-40 text-sm relative isolate flex-shrink-0",S&&"text-disabled pointer-events-none",!x&&"invisible pointer-events-none"),...i(e,x),children:[n("span",{className:N("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!g&&!k&&"hover:bg-hover",g&&"bg-primary text-on-primary font-semibold",k&&!g&&"bg-chip"),children:e.day}),v&&x&&n("span",{className:N("absolute w-full h-full inset-0 bg-primary/focus",(y||b===0||e.day===1)&&"rounded-l-full",(w||b===6||e.day===t.calendar.getDaysInMonth(t))&&"rounded-r-full")})]})}function sm({startDate:e,state:t,isFirst:a,isLast:r}){const{localeCode:s}=Et(),o=au(e,s),i=ca(e,s);return d("div",{className:"w-280 flex-shrink-0",children:[n(om,{isFirst:a,isLast:r,state:t,currentMonth:e}),d("div",{className:"block",role:"grid",children:[n(im,{state:t,startDate:e}),[...new Array(o).keys()].map(c=>n(ye.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(u=>n(rm,{date:i.add({weeks:c,days:u}),currentMonth:e,state:t},u))},c))]})]})}function om({currentMonth:e,isFirst:t,isLast:a,state:{calendarDates:r,setCalendarDates:s,timezone:o,min:i,max:c}}){const u=g=>{const v=r.length;let y;g==="forward"?y=r.map(w=>la(w.add({months:v}))):y=r.map(w=>la(w.subtract({months:v}))),s(y)},m=It({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),p=pr(e.subtract({days:1}),i,c),b=pr(ia(e.add({months:1})),i,c);return d("div",{className:"flex items-center justify-between gap-10",children:[n(F,{size:"md",className:N("text-muted",!t&&"invisible"),disabled:!t||p,"aria-hidden":!t,onClick:()=>{u("backward")},children:n(Vn,{})}),n("div",{className:"text-sm font-semibold select-none",children:m.format(e.toDate(o))}),n(F,{size:"md",className:N("text-muted",!a&&"invisible"),disabled:!a||b,"aria-hidden":!a,onClick:()=>{u("forward")},children:n(zt,{})})]})}function im({state:{timezone:e},startDate:t}){const{localeCode:a}=Et(),r=It({weekday:"short"}),s=ca(t,a);return n("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const c=s.add({days:o}).toDate(e),u=r.format(c);return n("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:n("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:u})},o)})})}function ki({state:e,visibleMonths:t=1}){return Te()&&(t=1),n(Fn,{children:[...new Array(t).keys()].map(r=>{const s=In(ia(e.calendarDates[r])),o=r===0,i=r===t-1;return n(sm,{state:e,startDate:s,isFirst:o,isLast:i},r)})})}const xi=B(n("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function lm(e,t,a,r){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,a,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{const s=e.hour,o=s>=12;return e.set({hour:o?s-12:s+12})}case"hour":case"minute":case"second":return e.cycle(t,a,{round:t!=="hour",hourCycle:r.hour12?12:24})}return e}function cm(e,t,a,r){switch(t){case"day":case"month":case"year":return e.set({[t]:a})}if("hour"in e)switch(t){case"dayPeriod":{const s=e.hour,o=s>=12;return a>=12===o?e:e.set({hour:o?s-12:s+12})}case"hour":if(r.hour12){const o=e.hour>=12;!o&&a===12&&(a=0),o&&a<12&&(a+=12)}case"minute":case"second":return e.set({[t]:a})}return e}const Ts={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function um({segment:e,domProps:t,value:a,onChange:r,isPlaceholder:s,state:{timezone:o,calendarIsOpen:i,setCalendarIsOpen:c}}){const u=Te(),m=h.exports.useRef(""),{localeCode:p}=Et(),b=Dt(),g=It({timeZone:o}),v=h.exports.useMemo(()=>new ru(p,{maximumFractionDigits:0}),[p]),y=I=>{r(cm(a,e.type,I,g.resolvedOptions()))},w=I=>{r(lm(a,e.type,I,g.resolvedOptions()))},k=()=>{if(v.isValidPartialNumber(e.text)){const I=e.text.slice(0,-1),P=v.parse(I);if(I.length===0||P===0){const L=su(o);e.type in L&&y(L[e.type])}else y(P);m.current=I}else e.type==="dayPeriod"&&w(-1)},x=I=>{var P;if(!(I.ctrlKey||I.metaKey||I.shiftKey||I.altKey)){switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),b.focusPrevious();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),b.focusNext();break;case"Enter":(P=I.target.closest("form"))==null||P.requestSubmit(),c(!i);break;case"Tab":break;case"Backspace":case"Delete":{I.preventDefault(),I.stopPropagation(),k();break}case"ArrowUp":I.preventDefault(),m.current="",w(1);break;case"ArrowDown":I.preventDefault(),m.current="",w(-1);break;case"PageUp":I.preventDefault(),m.current="",w(Ts[e.type]||1);break;case"PageDown":I.preventDefault(),m.current="",w(-(Ts[e.type]||1));break;case"Home":I.preventDefault(),m.current="",y(e.maxValue);break;case"End":I.preventDefault(),m.current="",y(e.minValue);break}D(I.key)}},S=It({hour:"numeric",hour12:!0}),R=h.exports.useMemo(()=>{const I=new Date;return I.setHours(0),S.formatToParts(I).find(P=>P.type==="dayPeriod").value},[S]),C=h.exports.useMemo(()=>{const I=new Date;return I.setHours(12),S.formatToParts(I).find(P=>P.type==="dayPeriod").value},[S]),D=I=>{const P=m.current+I;switch(e.type){case"dayPeriod":if(R.toLowerCase().startsWith(I))y(0);else if(C.toLowerCase().startsWith(I))y(12);else break;b.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!v.isValidPartialNumber(P))return;let L=v.parse(P),H=L,me=e.minValue===0;if(e.type==="hour"&&g.resolvedOptions().hour12){switch(g.resolvedOptions().hourCycle){case"h11":L>11&&(H=v.parse(I));break;case"h12":me=!1,L>12&&(H=v.parse(I));break}e.value>=12&&L>1&&(L+=12)}else L>e.maxValue&&(H=v.parse(I));if(Number.isNaN(L))return;const xe=H!==0||me;xe&&y(H),Number(`${L}0`)>e.maxValue||P.length>=String(e.maxValue).length?(m.current="",xe&&b.focusNext()):m.current=P;break}}},U=u?{}:{"aria-label":e.type,"aria-valuetext":s?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":s?void 0:e.value,tabIndex:0,onKeyDown:x};return n("div",{...qe(t,{...U,onFocus:I=>{m.current="",I.target.scrollIntoView({block:"nearest"})},onClick:I=>{I.preventDefault(),I.stopPropagation()}}),className:"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center",children:e.text.padStart(e.minLength,"0")})}function dm({segment:e,domProps:t}){const a=Dt();return n("div",{...t,onPointerDown:r=>{r.pointerType==="mouse"&&(r.preventDefault(),a.focusNext({from:r.target})||a.focusPrevious({from:r.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function mm(e,t,a){switch(t){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:iu(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:ou(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(a.hour12){const r=e.hour>=12;return{value:e.hour,minValue:r?12:0,maxValue:r?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function Pn({segmentProps:e,state:t,value:a,onChange:r,isPlaceholder:s}){const{granularity:o}=t,i=h.exports.useMemo(()=>{const p={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(p.hour="numeric",p.minute="numeric"),p},[o]),c=It(i),u=h.exports.useMemo(()=>a.toDate(),[a]),m=h.exports.useMemo(()=>c.formatToParts(u).map(p=>{const b=mm(a,p.type,c.resolvedOptions()),g=s&&p.type!=="literal"?b.placeholder:p.value;return{type:p.type,text:p.value===", "?" ":g,...b,minLength:p.type!=="literal"?String(b.maxValue).length:1}}),[u,c,s,a]);return n("div",{className:"flex items-center",children:m.map((p,b)=>p.type==="literal"?n(dm,{domProps:e,segment:p},b):n(um,{isPlaceholder:s,domProps:e,state:t,value:a,onChange:r,segment:p},b))})}function Bn({children:e,className:t,padding:a,dataTestId:r}){return n(va,{children:n("ul",{"data-testid":r,className:N("text-base sm:text-sm outline-none",t,a!=null?a:"py-4"),children:e})})}function Ta({children:e,onSelected:t,borderRadius:a,...r}){const s=Dt(),o=!!t,i=h.exports.useRef(null),[c,u]=h.exports.useState(!1),m=p=>{switch(p.key){case"ArrowDown":p.preventDefault(),s.focusNext();break;case"ArrowUp":p.preventDefault(),s.focusPrevious();break;case"Home":p.preventDefault(),s.focusFirst();break;case"End":p.preventDefault(),s.focusLast();break;case"Enter":case"Space":p.preventDefault(),t==null||t();break}};return n("li",{children:n(lu,{className:a||"rounded",isActive:c,isDisabled:r.isDisabled,...r,onFocus:p=>{u(p.target.matches(":focus-visible"))},onBlur:()=>{u(!1)},onClick:()=>{t==null||t()},ref:i,role:o?"button":void 0,onKeyDown:o?m:void 0,tabIndex:o&&!r.isDisabled?0:void 0,children:e})})}function pm(){var a;const e=Xt().settings.dates.default_timezone,t=((a=Xt().user)==null?void 0:a.timezone)||e||"auto";return!t||t==="auto"?cu():t}const ie=vi(jo(pm()));var Bo;const Xn=((Bo=Xt().i18n)==null?void 0:Bo.language)||"en",Aa=[{key:0,label:f("Today"),getRangeValue:()=>({preset:0,start:ie,end:Oe(ie)})},{key:1,label:f("Yesterday"),getRangeValue:()=>({preset:1,start:ie.subtract({days:1}),end:Oe(ie).subtract({days:1})})},{key:2,label:f("This week"),getRangeValue:()=>({preset:2,start:ca(ie,Xn),end:Ns(Oe(ie),Xn)})},{key:3,label:f("Last week"),getRangeValue:()=>({preset:3,start:ca(ie,Xn).subtract({weeks:1}),end:Ns(Oe(ie),Xn).add({weeks:1})})},{key:4,label:f("Last 7 days"),getRangeValue:()=>({preset:4,start:ie.subtract({days:7}),end:Oe(ie)})},{key:5,label:f("Last 14 days"),getRangeValue:()=>({preset:5,start:ie.subtract({days:14}),end:Oe(ie)})},{key:6,label:f("Last 30 days"),getRangeValue:()=>({preset:6,start:ie.subtract({days:30}),end:Oe(ie)})},{key:7,label:f("Last 3 months"),getRangeValue:()=>({preset:7,start:ie.subtract({months:3}),end:Oe(ie)})},{key:8,label:f("Last 12 months"),getRangeValue:()=>({preset:8,start:ie.subtract({months:12}),end:Oe(ie)})},{key:9,label:f("This year"),getRangeValue:()=>({preset:9,start:Is(ie),end:Rs(Oe(ie))})},{key:10,label:f("Last year"),getRangeValue:()=>({preset:10,start:Is(ie).subtract({years:1}),end:Rs(Oe(ie)).subtract({years:1})})}];function hm({onPresetSelected:e,selectedValue:t}){return n(Bn,{className:"min-w-192",padding:"py-14",dataTestId:"date-range-preset-list",children:Aa.map(a=>n(Ta,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===a.key,onSelected:()=>{const r=a.getRangeValue();e(r)},children:n(l,{...a.label})},a.key))})}function wi(e){return ba("(max-width: 1024px)",e)}function Si({state:e,showInlineDatePickerField:t=!1}){const a=wi(),{close:r}=K(),s=h.exports.useRef(e),o=e.isPlaceholder.start||e.isPlaceholder.end,i=d(ee,{dividerTop:!0,startAction:!o&&!a?n("div",{className:"text-xs",children:n(jr,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[n(_,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(s.current.selectedValue),e.setIsPlaceholder(s.current.isPlaceholder),r()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",size:"xs",onClick:()=>{r(e.selectedValue)},children:n(l,{message:"Select"})})]});return d(W,{size:"auto",children:[d(Q,{className:"flex",padding:"p-0",children:[!a&&n(hm,{selectedValue:e.selectedValue,onPresetSelected:c=>{e.setSelectedValue(c),e.closeDialogOnSelection&&r(c)}}),n(Ve,{initial:!1,children:n(fm,{state:e,showInlineDatePickerField:t})})]}),!e.closeDialogOnSelection&&i]})}function fm({state:e,showInlineDatePickerField:t}){return d(ye.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pt-10 pb-20",children:[t&&n(gm,{state:e}),n("div",{className:"flex items-start gap-36",children:n(ki,{state:e,visibleMonths:2})})]})}function gm({state:e}){const{selectedValue:t,setSelectedValue:a}=e;return d(Wr,{className:"mb-20 mt-10",children:[n(Pn,{state:e,value:t.start,onChange:r=>{a({...t,start:r})}}),n(xi,{className:"block flex-shrink-0 text-muted",size:"md"}),n(Pn,{state:e,value:t.end,onChange:r=>{a({...t,end:r})}})]})}const bm={month:"short",day:"2-digit"};function vm({value:e,onChange:t,compactOnMobile:a=!0}){const r=Te();return d(M,{type:"popover",onClose:s=>{s&&t(s)},children:[n(_,{variant:"outline",color:"chip",endIcon:n(qr,{}),children:n(jr,{start:e.start,end:e.end,options:r&&a?bm:Go.short})}),n(ym,{value:e})]})}function ym({value:e}){const t=Te(),a=yi({defaultValue:e,closeDialogOnSelection:!1});return n(Si,{state:a,showInlineDatePickerField:!t})}function Gr(e){const{title:t,description:a,children:r,className:s,contentIsFlex:o=!0,contentClassName:i,contentRef:c}=e;return d("div",{className:N("border rounded min-h-440 h-full flex flex-col flex-auto",s),children:[d("div",{className:"text-xs p-14 flex-shrink-0 flex justify-between",children:[n("div",{className:"font-semibold text-sm",children:t}),a&&n("div",{className:"text-muted",children:a})]}),n("div",{ref:c,className:N("p-14 relative",o&&"flex-auto flex items-center justify-center",i),children:r})]})}function ua(){return d("div",{className:"flex items-center gap-10 text-sm absolute mx-auto",children:[n(xa,{isIndeterminate:!0,size:"sm"}),n(l,{message:"Chart loading"})]})}const km=h.exports.lazy(()=>_a(()=>import("./lazy-chart.79c44e34.js"),["lazy-chart.79c44e34.js","main.0615c25a.js","main.e1cf65d7.css"],import.meta.url));function Kr(e){const{title:t,description:a,className:r,contentRef:s,isLoading:o}=e;return n(Gr,{title:t,description:a,className:r,contentRef:s,children:d(h.exports.Suspense,{fallback:n(ua,{}),children:[n(km,{...e}),o&&n(ua,{})]})})}function Qr(e,{localeCode:t="en",shareFirstDatasetLabels:a=!0}){if(!e)return{datasets:[]};const r=[];return{...e,datasets:e.datasets.map((s,o)=>{const i=s.data.map((c,u)=>{let m;return o===0||!a?(m=xm(c,e.granularity,t),r[u]=m):m=r[u],{...m,value:c.value}});return{...s,data:i}})}}function xm(e,t,a){return e.label!=null?{label:e.label}:e.date?wm(e,t,a):{label:""}}function wm({date:e,endDate:t,value:a},r="day",s){const o=Jt(e).toDate(),i=t?Jt(t).toDate():null;switch(r){case"minute":return{label:Fe(s,{second:"2-digit"}).format(o),tooltipTitle:Fe(s,{day:"2-digit",hour:"numeric",minute:"numeric",second:"2-digit"}).format(o)};case"hour":return{label:Fe(s,{hour:"numeric",minute:"numeric"}).format(o),tooltipTitle:Fe(s,{month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}).format(o)};case"day":return{label:Fe(s,{day:"2-digit",weekday:"short"}).format(o),tooltipTitle:Fe(s,{day:"2-digit",weekday:"short",month:"short"}).format(o)};case"week":return{label:Fe(s,{month:"short",day:"2-digit"}).format(o),tooltipTitle:Fe(s,{day:"2-digit",month:"long",year:"numeric"}).formatRange(o,i)};case"month":return{label:Fe(s,{month:"short",year:"numeric"}).format(o),tooltipTitle:Fe(s,{month:"long",year:"numeric"}).format(o)};case"year":return{label:Fe(s,{year:"numeric"}).format(o),tooltipTitle:Fe(s,{year:"numeric"}).format(o)}}}const Fe=uu((e,t)=>new du(e,t),{equals:(e,t)=>Ko(e,t),callTimeout:void 0}),at=[["rgb(66,165,245)","rgba(66,165,245,0.2)"],["rgb(102,187,106)","rgba(102,187,106,0.2)"],["rgb(255,112,67)","rgb(255,112,67,0.2)"],["rgb(92,107,192)","rgb(92,107,192,0.2)"],["rgb(141,110,99)","rgb(141,110,99,0.2)"],["rgb(255,167,38)","rgb(255,167,38,0.2)"]],Sm={parsing:{xAxisKey:"label",yAxisKey:"value"},datasets:{line:{fill:"origin",tension:.1,pointBorderWidth:4,pointHitRadius:10}},plugins:{tooltip:{intersect:!1,mode:"index"}}};function Cm({data:e,className:t,...a}){const{localeCode:r}=Et(),s=h.exports.useMemo(()=>{const o=Qr(e,{localeCode:r});return o.datasets=o.datasets.map((i,c)=>({...i,backgroundColor:at[c][1],borderColor:at[c][0],pointBackgroundColor:at[c][0]})),o},[e,r]);return n(Kr,{...a,className:N(t,"min-w-500"),data:s,type:"line",options:Sm})}const _m={parsing:{key:"value"},plugins:{tooltip:{intersect:!0}}};function As({data:e,className:t,...a}){const{localeCode:r}=Et(),s=h.exports.useMemo(()=>{var i;const o=Qr(e,{localeCode:r});return o.labels=(i=o.datasets[0])==null?void 0:i.data.map(c=>c.label),o.datasets=o.datasets.map((c,u)=>({...c,backgroundColor:at.map(m=>m[1]),borderColor:at.map(m=>m[0]),borderWidth:2})),o},[e,r]);return n(Kr,{type:"polarArea",data:s,options:_m,className:N(t,"min-w-500"),...a})}function Nm({data:e,isLoading:t,...a}){const r=(e==null?void 0:e.datasets[0].data)||[];return d(Gr,{...a,className:"min-w-500 md:min-w-0 w-1/2",title:n(l,{message:"Referrers"}),contentIsFlex:t,contentClassName:"max-h-[370px] overflow-y-auto",children:[t&&n(ua,{}),r.map((s,o)=>d("div",{className:"mb-20 text-sm flex items-center justify-between gap-24",children:[s.label?d("div",{className:"flex items-center gap-8",children:[n(gt,{url:s.label}),n("a",{className:N(an,"lowercase"),href:s.label,target:"_blank",rel:"noreferrer",children:ot(s.label)})]}):n(l,{message:"Direct, Email, SMS"}),n(ka,{radius:"rounded",size:"xs",color:"primary",className:"font-semibold",children:s.value})]},s.label||o))]})}function Im(e){return e&&e.__esModule?e.default:e}var Ci={},_i={};_i={alpha:"\u0623\u0644\u0641\u0627",blue:"\u0623\u0632\u0631\u0642",brightness:"\u0627\u0644\u0633\u0637\u0648\u0639",green:"\u0623\u062E\u0636\u0631",hue:"\u062F\u0631\u062C\u0629 \u0627\u0644\u0644\u0648\u0646",lightness:"\u0627\u0644\u0625\u0636\u0627\u0621\u0629",red:"\u0623\u062D\u0645\u0631",saturation:"\u0627\u0644\u062A\u0634\u0628\u0639"};var Ni={};Ni={alpha:"\u0410\u043B\u0444\u0430",blue:"\u0421\u0438\u043D\u044C\u043E",brightness:"\u042F\u0440\u043A\u043E\u0441\u0442",green:"\u0417\u0435\u043B\u0435\u043D\u043E",hue:"\u041E\u0442\u0442\u0435\u043D\u044A\u043A",lightness:"\u041B\u0435\u043A\u043E\u0442\u0430",red:"\u0427\u0435\u0440\u0432\u0435\u043D\u043E",saturation:"\u041D\u0430\u0441\u0438\u0442\u0435\u043D\u043E\u0441\u0442"};var Ii={};Ii={alpha:"Alfa",blue:"Modr\xE1",brightness:"Jas",green:"Zelen\xE1",hue:"Odst\xEDn",lightness:"Sv\u011Btlost",red:"\u010Cerven\xE1",saturation:"Sytost"};var Ri={};Ri={alpha:"Alfa",blue:"Bl\xE5",brightness:"Lysstyrke",green:"Gr\xF8n",hue:"Tone",lightness:"Lyshed",red:"R\xF8d",saturation:"Farvem\xE6tning"};var Di={};Di={alpha:"Alpha",blue:"Blau",brightness:"Helligkeit",green:"Gr\xFCn",hue:"Farbton",lightness:"Leuchtkraft",red:"Rot",saturation:"S\xE4ttigung"};var Pi={};Pi={alpha:"\u0386\u03BB\u03C6\u03B1",blue:"\u039C\u03C0\u03BB\u03B5",brightness:"\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",green:"\u03A0\u03C1\u03AC\u03C3\u03B9\u03BD\u03BF",hue:"\u03A4\u03CC\u03BD\u03BF\u03C2",lightness:"\u03A6\u03C9\u03C4\u03B5\u03B9\u03BD\u03CC\u03C4\u03B7\u03C4\u03B1",red:"\u039A\u03CC\u03BA\u03BA\u03B9\u03BD\u03BF",saturation:"\u039A\u03BF\u03C1\u03B5\u03C3\u03BC\u03CC\u03C2"};var Li={};Li={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha"};var Ei={};Ei={alpha:"Alpha",blue:"Azul",brightness:"Brillo",green:"Verde",hue:"Tono",lightness:"Luminosidad",red:"Rojo",saturation:"Saturaci\xF3n"};var Ti={};Ti={alpha:"Alfa",blue:"Sinine",brightness:"Heledus",green:"Roheline",hue:"V\xE4rv",lightness:"Valgus",red:"Punane",saturation:"K\xFCllastus"};var Ai={};Ai={alpha:"Alpha",blue:"Sininen",brightness:"Kirkkaus",green:"Vihre\xE4",hue:"S\xE4vy",lightness:"Valom\xE4\xE4r\xE4",red:"Punainen",saturation:"V\xE4rikyll\xE4isyys"};var zi={};zi={alpha:"Alpha",blue:"Bleu",brightness:"Luminosit\xE9",green:"Vert",hue:"Teinte",lightness:"Luminosit\xE9",red:"Rouge",saturation:"Saturation"};var $i={};$i={alpha:"\u05D0\u05DC\u05E4\u05D0",blue:"\u05DB\u05D7\u05D5\u05DC",brightness:"\u05D1\u05D4\u05D9\u05E8\u05D5\u05EA",green:"\u05D9\u05E8\u05D5\u05E7",hue:"\u05D2\u05D5\u05D5\u05DF",lightness:"\u05DB\u05DE\u05D5\u05EA \u05D0\u05D5\u05E8",red:"\u05D0\u05D3\u05D5\u05DD",saturation:"\u05E8\u05D5\u05D5\u05D9\u05D4"};var Fi={};Fi={alpha:"Alfa",blue:"Plava",brightness:"Svjetlina",green:"Zelena",hue:"Nijansa",lightness:"Osvijetljenost",red:"Crvena",saturation:"Zasi\u0107enost"};var Oi={};Oi={alpha:"Alfa",blue:"K\xE9k",brightness:"F\xE9nyess\xE9g",green:"Z\xF6ld",hue:"Sz\xEDn\xE1rnyalat",lightness:"Vil\xE1goss\xE1g",red:"Piros",saturation:"Tel\xEDtetts\xE9g"};var Mi={};Mi={alpha:"Alfa",blue:"Blu",brightness:"Luminosit\xE0",green:"Verde",hue:"Tonalit\xE0",lightness:"Luminosit\xE0",red:"Rosso",saturation:"Saturazione"};var Ui={};Ui={alpha:"\u30A2\u30EB\u30D5\u30A1",blue:"\u9752",brightness:"\u660E\u308B\u3055",green:"\u7DD1",hue:"\u8272\u76F8",lightness:"\u660E\u5EA6",red:"\u8D64",saturation:"\u5F69\u5EA6"};var Vi={};Vi={alpha:"\uC54C\uD30C",blue:"\uD30C\uB791",brightness:"\uBA85\uB3C4",green:"\uCD08\uB85D",hue:"\uC0C9\uC870",lightness:"\uBC1D\uAE30",red:"\uBE68\uAC15",saturation:"\uCC44\uB3C4"};var Bi={};Bi={alpha:"Alfa",blue:"M\u0117lyna",brightness:"Ry\u0161kumas",green:"\u017Dalia",hue:"Atspalvis",lightness:"\u0160viesumas",red:"Raudona",saturation:"\u012Esotinimas"};var Hi={};Hi={alpha:"Alfa",blue:"Zila",brightness:"Spilgtums",green:"Za\u013Ca",hue:"Nokr\u0101sa",lightness:"Gai\u0161ums",red:"Sarkana",saturation:"Pies\u0101tin\u0101jums"};var qi={};qi={alpha:"Alfa",blue:"Bl\xE5",brightness:"Lysstyrke",green:"Gr\xF8nn",hue:"Fargetone",lightness:"Lyshet",red:"R\xF8d",saturation:"Metning"};var ji={};ji={alpha:"Alfa",blue:"Blauw",brightness:"Helderheid",green:"Groen",hue:"Kleurtoon",lightness:"Lichtsterkte",red:"Rood",saturation:"Verzadiging"};var Wi={};Wi={alpha:"Alfa",blue:"Niebieski",brightness:"Jasno\u015B\u0107",green:"Zielony",hue:"Odcie\u0144",lightness:"Jaskrawo\u015B\u0107",red:"Czerwony",saturation:"Nasycenie"};var Gi={};Gi={alpha:"Alfa",blue:"Azul",brightness:"Brilho",green:"Verde",hue:"Matiz",lightness:"Luminosidade",red:"Vermelho",saturation:"Satura\xE7\xE3o"};var Ki={};Ki={alpha:"Alfa",blue:"Azul",brightness:"Luminosidade",green:"Verde",hue:"Tonalidade",lightness:"Claridade",red:"Vermelho",saturation:"Satura\xE7\xE3o"};var Qi={};Qi={alpha:"Alfa",blue:"Albastru",brightness:"Luminozitate",green:"Verde",hue:"Nuan\u021B\u0103",lightness:"Luminozitate",red:"Ro\u0219u",saturation:"Satura\u021Bie"};var Yi={};Yi={alpha:"\u0410\u043B\u044C\u0444\u0430",blue:"\u0421\u0438\u043D\u0438\u0439",brightness:"\u042F\u0440\u043A\u043E\u0441\u0442\u044C",green:"\u0417\u0435\u043B\u0435\u043D\u044B\u0439",hue:"\u041E\u0442\u0442\u0435\u043D\u043E\u043A",lightness:"\u041E\u0441\u0432\u0435\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C",red:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439",saturation:"\u041D\u0430\u0441\u044B\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C"};var Zi={};Zi={alpha:"Alfa",blue:"Modr\xE1",brightness:"Jas",green:"Zelen\xE1",hue:"Odtie\u0148",lightness:"Svetlos\u0165",red:"\u010Cerven\xE1",saturation:"S\xFDtos\u0165"};var Xi={};Xi={alpha:"Alfa",blue:"Modra",brightness:"Svetlost",green:"Zelena",hue:"Barva",lightness:"Lahkost",red:"Rde\u010Da",saturation:"Nasi\u010Denost"};var Ji={};Ji={alpha:"Alfa",blue:"Plava",brightness:"Osvetljenost",green:"Zelena",hue:"Nijansa",lightness:"Osvetljenje",red:"Crvena",saturation:"Zasi\u0107enje"};var el={};el={alpha:"Alfa",blue:"Bl\xE5tt",brightness:"Ljusstyrka",green:"Gr\xF6nt",hue:"Nyans",lightness:"Ljushet",red:"R\xF6tt",saturation:"M\xE4ttnad"};var tl={};tl={alpha:"Alfa",blue:"Mavi",brightness:"Parlakl\u0131k",green:"Ye\u015Fil",hue:"Ton",lightness:"Canl\u0131l\u0131k",red:"K\u0131rm\u0131z\u0131",saturation:"Doygunluk"};var nl={};nl={alpha:"\u0410\u043B\u044C\u0444\u0430",blue:"\u0421\u0438\u043D\u0456\u0439",brightness:"\u042F\u0441\u043A\u0440\u0430\u0432\u0456\u0441\u0442\u044C",green:"\u0417\u0435\u043B\u0435\u043D\u0438\u0439",hue:"\u0422\u043E\u043D",lightness:"\u041E\u0441\u0432\u0456\u0442\u043B\u0435\u043D\u0456\u0441\u0442\u044C",red:"\u0427\u0435\u0440\u0432\u043E\u043D\u0438\u0439",saturation:"\u041D\u0430\u0441\u0438\u0447\u0435\u043D\u0456\u0441\u0442\u044C"};var al={};al={alpha:"Alpha",blue:"\u84DD\u8272",brightness:"\u4EAE\u5EA6",green:"\u7EFF\u8272",hue:"\u8272\u76F8",lightness:"\u660E\u4EAE\u5EA6",red:"\u7EA2\u8272",saturation:"\u9971\u548C\u5EA6"};var rl={};rl={alpha:"Alpha",blue:"\u85CD\u8272",brightness:"\u4EAE\u5EA6",green:"\u7DA0\u8272",hue:"\u8272\u76F8",lightness:"\u660E\u4EAE",red:"\u7D05\u8272",saturation:"\u98FD\u548C\u5EA6"};Ci={"ar-AE":_i,"bg-BG":Ni,"cs-CZ":Ii,"da-DK":Ri,"de-DE":Di,"el-GR":Pi,"en-US":Li,"es-ES":Ei,"et-EE":Ti,"fi-FI":Ai,"fr-FR":zi,"he-IL":$i,"hr-HR":Fi,"hu-HU":Oi,"it-IT":Mi,"ja-JP":Ui,"ko-KR":Vi,"lt-LT":Bi,"lv-LV":Hi,"nb-NO":qi,"nl-NL":ji,"pl-PL":Wi,"pt-BR":Gi,"pt-PT":Ki,"ro-RO":Qi,"ru-RU":Yi,"sk-SK":Zi,"sl-SI":Xi,"sr-SP":Ji,"sv-SE":el,"tr-TR":tl,"uk-UA":nl,"zh-CN":al,"zh-TW":rl};const Rm=new Yu(Im(Ci));function on(e){let t=mt.parse(e)||pt.parse(e)||ht.parse(e);if(t)return t;throw new Error("Invalid color value: "+e)}class Yr{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(t){if(t in this)return this[t];throw new Error("Unsupported color channel: "+t)}withChannelValue(t,a){if(t in this){let r=this.clone();return r[t]=a,r}throw new Error("Unsupported color channel: "+t)}getChannelName(t,a){return Rm.getStringForLocale(t,a)}getColorSpaceAxes(t){let{xChannel:a,yChannel:r}=t,s=a||this.getColorChannels().find(c=>c!==r),o=r||this.getColorChannels().find(c=>c!==s),i=this.getColorChannels().find(c=>c!==s&&c!==o);return{xChannel:s,yChannel:o,zChannel:i}}}class mt extends Yr{static parse(t){let a=[];if(/^#[\da-f]+$/i.test(t)&&[4,5,7,9].includes(t.length)){const o=(t.length<6?t.replace(/[^#]/gi,"$&$&"):t).slice(1).split("");for(;o.length>0;)a.push(parseInt(o.splice(0,2).join(""),16));a[3]=a[3]!==void 0?a[3]/255:void 0}const r=t.match(/^rgba?\((.*)\)$/);r!=null&&r[1]&&(a=r[1].split(",").map(o=>Number(o.trim())),a=a.map((o,i)=>Nt(o,0,i<3?255:1)));var s;return a.length<3?void 0:new mt(a[0],a[1],a[2],(s=a[3])!==null&&s!==void 0?s:1)}toString(t){switch(t){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+t)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const t=this.red/255,a=this.green/255,r=this.blue/255,s=Math.min(t,a,r),o=Math.max(t,a,r),i=o-s,c=o===0?0:i/o;let u=0;if(i!==0){switch(o){case t:u=(a-r)/i+(a<r?6:0);break;case a:u=(r-t)/i+2;break;case r:u=(t-a)/i+4;break}u/=6}return new pt(fe(u*360,2),fe(c*100,2),fe(o*100,2),this.alpha)}toHSL(){const t=this.red/255,a=this.green/255,r=this.blue/255,s=Math.min(t,a,r),o=Math.max(t,a,r),i=(o+s)/2,c=o-s;let u,m;if(c===0)u=m=0;else{switch(m=c/(i<.5?o+s:2-o-s),o){case t:u=(a-r)/c+(a<r?6:0);break;case a:u=(r-t)/c+2;break;case r:u=(t-a)/c+4;break}u/=6}return new ht(fe(u*360,2),fe(m*100,2),fe(i*100,2),this.alpha)}clone(){return new mt(this.red,this.green,this.blue,this.alpha)}getChannelRange(t){switch(t){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,a){let r,s=this.getChannelValue(t);switch(t){case"red":case"green":case"blue":r={style:"decimal"};break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+t)}return new $r(a,r).format(s)}getColorSpace(){return"rgb"}getColorChannels(){return mt.colorChannels}constructor(t,a,r,s){super(),this.red=t,this.green=a,this.blue=r,this.alpha=s}}mt.colorChannels=["red","green","blue"];const Dm=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class pt extends Yr{static parse(t){let a;if(a=t.match(Dm)){var r;const[s,o,i,c]=((r=a[1])!==null&&r!==void 0?r:a[2]).split(",").map(u=>Number(u.trim().replace("%","")));return new pt(sl(s,360),Nt(o,0,100),Nt(i,0,100),Nt(c!=null?c:1,0,1))}}toString(t){switch(t){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${fe(this.saturation,2)}%, ${fe(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${fe(this.saturation,2)}%, ${fe(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+t)}}toHSL(){let t=this.saturation/100,a=this.brightness/100,r=a*(1-t/2);return t=r===0||r===1?0:(a-r)/Math.min(r,1-r),new ht(fe(this.hue,2),fe(t*100,2),fe(r*100,2),this.alpha)}toRGB(){let t=this.hue,a=this.saturation/100,r=this.brightness/100,s=(o,i=(o+t/60)%6)=>r-a*r*Math.max(Math.min(i,4-i,1),0);return new mt(Math.round(s(5)*255),Math.round(s(3)*255),Math.round(s(1)*255),this.alpha)}clone(){return new pt(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,a){let r,s=this.getChannelValue(t);switch(t){case"hue":r={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"brightness":r={style:"percent"},s/=100;break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+t)}return new $r(a,r).format(s)}getColorSpace(){return"hsb"}getColorChannels(){return pt.colorChannels}constructor(t,a,r,s){super(),this.hue=t,this.saturation=a,this.brightness=r,this.alpha=s}}pt.colorChannels=["hue","saturation","brightness"];const Pm=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;function sl(e,t){return(e%t+t)%t}class ht extends Yr{static parse(t){let a;if(a=t.match(Pm)){var r;const[s,o,i,c]=((r=a[1])!==null&&r!==void 0?r:a[2]).split(",").map(u=>Number(u.trim().replace("%","")));return new ht(sl(s,360),Nt(o,0,100),Nt(i,0,100),Nt(c!=null?c:1,0,1))}}toString(t){switch(t){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${fe(this.saturation,2)}%, ${fe(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${fe(this.saturation,2)}%, ${fe(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+t)}}toHSB(){let t=this.saturation/100,a=this.lightness/100,r=a+t*Math.min(a,1-a);return t=r===0?0:2*(1-a/r),new pt(fe(this.hue,2),fe(t*100,2),fe(r*100,2),this.alpha)}toRGB(){let t=this.hue,a=this.saturation/100,r=this.lightness/100,s=a*Math.min(r,1-r),o=(i,c=(i+t/30)%12)=>r-s*Math.max(Math.min(c-3,9-c,1),-1);return new mt(Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255),this.alpha)}clone(){return new ht(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,a){let r,s=this.getChannelValue(t);switch(t){case"hue":r={style:"unit",unit:"degree",unitDisplay:"narrow"};break;case"saturation":case"lightness":r={style:"percent"},s/=100;break;case"alpha":r={style:"percent"};break;default:throw new Error("Unknown color channel: "+t)}return new $r(a,r).format(s)}getColorSpace(){return"hsl"}getColorChannels(){return ht.colorChannels}constructor(t,a,r,s){super(),this.hue=t,this.saturation=a,this.lightness=r,this.alpha=s}}ht.colorChannels=["hue","saturation","lightness"];on("#ffffff");on("hsl(0, 100%, 50%)");const Lm=on("#000000"),Em=on("#FFFFFF");Lm.toHexInt();Em.toHexInt();function zs(e){try{return on(`rgb(${e.split(" ").join(",")})`).toString("hex")}catch{return e}}const $s="https://www.gstatic.com/charts/loader.js";function Tm({placeholderRef:e,data:t}){const{trans:a}=V(),{analytics:r}=ge(),s=r==null?void 0:r.gchart_api_key,{selectedTheme:o}=mu(),i=h.exports.useRef(),c=h.exports.useCallback(()=>{var v,y;if(typeof google>"u")return;const m=t.map(w=>[w.label,w.value]);m.unshift([a(f("Country")),a(f("Clicks"))]);const p=`${zs(o.colors["--be-paper"])}`,g={colorAxis:{colors:[`${zs(o.colors["--be-primary"])}`]},backgroundColor:p};!i.current&&e.current&&((v=google==null?void 0:google.visualization)==null?void 0:v.GeoChart)&&(i.current=new google.visualization.GeoChart(e.current)),(y=i.current)==null||y.draw(google.visualization.arrayToDataTable(m),g)},[o,t,e]),u=h.exports.useCallback(()=>{Ds.alreadyLoading($s)||Ds.loadAsset($s,{type:"js"}).then(()=>{google.charts.load("current",{packages:["geochart"],mapsApiKey:s}),google.charts.setOnLoadCallback(()=>{c()})})},[s,c]);return h.exports.useEffect(()=>{u()},[u]),h.exports.useEffect(()=>{c()},[o,c,t]),{drawGoogleChart:c}}function Am({data:e,isLoading:t,...a}){const r=h.exports.useRef(null),s=e==null?void 0:e.datasets[0].data,o=h.exports.useMemo(()=>s||[],[s]);return Tm({placeholderRef:r,data:o}),d(Gr,{...a,className:"min-w-500",title:n(l,{message:"Top Locations"}),contentIsFlex:t,children:[t&&n(ua,{}),d("div",{className:"flex",children:[n("div",{ref:r,className:"flex-auto w-[480px] min-h-[340px]"}),n("div",{className:"text-sm max-h-[370px] w-[170px] flex-initial overflow-y-auto",children:o.map(i=>d("div",{className:"flex items-center gap-4 mb-4",children:[n("div",{className:"max-w-110 whitespace-nowrap overflow-hidden overflow-ellipsis",children:i.label}),d("div",{children:["(",i.percentage,")%"]})]},i.label))})]})]})}function zm({data:e,direction:t="vertical",individualBarColors:a=!1,className:r,...s}){const{localeCode:o}=Et(),i=h.exports.useMemo(()=>{const m=Qr(e,{localeCode:o});return m.datasets=m.datasets.map((p,b)=>({...p,backgroundColor:a?at.map(g=>g[1]):at[b][1],borderColor:a?at.map(g=>g[0]):at[b][0],borderWidth:2})),m},[e,o,a]),c=t==="horizontal",u=h.exports.useMemo(()=>({indexAxis:c?"y":"x",parsing:{xAxisKey:c?"value":"label",yAxisKey:c?"label":"value"}}),[c]);return n(Kr,{type:"bar",className:N(r,"min-w-500"),data:i,options:u,...s})}const Fs="reports/clicks";function $m(e,t){return Be([Fs,e],()=>Fm(Fs,e),{keepPreviousData:!0,enabled:t.isEnabled})}function Fm(e,t){var r;const a={model:t.model,metrics:(r=t.metrics)==null?void 0:r.join(",")};return a.startDate=t.dateRange.start.toAbsoluteString(),a.endDate=t.dateRange.end.toAbsoluteString(),a.timezone=t.dateRange.start.timeZone,A.get(e,{params:a}).then(s=>s.data)}function Om({dateRange:e,model:t}){const r="flex flex-col lg:flex-row lg:items-center overflow-x-auto gap-12 md:gap-24 mb-12 md:mb-24";return d(h.exports.Fragment,{children:[d("div",{className:r,children:[n(qt,{metric:"clicks",model:t,dateRange:e,children:({data:s})=>n(Cm,{className:"flex-auto",title:n(l,{message:"Click count"}),hideLegend:!0,description:n(l,{message:":count total clicks",values:{count:n(rt,{value:(s==null?void 0:s.report.clicks.total)||0})}})})}),n(qt,{metric:"devices",model:t,dateRange:e,children:n(As,{title:n(l,{message:"Top devices"})})})]}),d("div",{className:r,children:[n(qt,{metric:"referrers",model:t,dateRange:e,children:n(Nm,{})}),n(qt,{metric:"locations",model:t,dateRange:e,children:n(Am,{className:"flex-auto w-1/2 lg:max-w-[740px]"})})]}),d("div",{className:r,children:[n(qt,{metric:"browsers",model:t,dateRange:e,children:n(zm,{className:"max-w-500",direction:"horizontal",individualBarColors:!0,hideLegend:!0,title:n(l,{message:"Top browsers"})})}),n(qt,{metric:"platforms",model:t,dateRange:e,children:n(As,{className:"max-w-500",title:n(l,{message:"Top platforms"})})})]})]})}function qt({children:e,metric:t,model:a,dateRange:r}){var p,b;const[s,o]=h.exports.useState(!1),i=$m({metrics:[t],model:a,dateRange:r},{isEnabled:s}),c=typeof e=="function"?e(i):e,u=h.exports.useRef(),m=h.exports.useCallback(g=>{var v;if(g){const y=new IntersectionObserver(([w])=>{var k;w.isIntersecting&&(o(!0),(k=u.current)==null||k.disconnect(),u.current=void 0)},{threshold:.1});u.current=y,y.observe(g)}else u.current&&((v=u.current)==null||v.disconnect())},[]);return h.exports.cloneElement(c,{data:(b=(p=i.data)==null?void 0:p.report)==null?void 0:b[t],isLoading:i.isLoading,contentRef:m})}function za({model:e,title:t,actions:a}){const[r,s]=h.exports.useState(()=>Aa[2].getRangeValue());return d("div",{className:"min-h-full gap-12 md:gap-24 p-12 md:p-24",children:[n(Fr,{children:n(l,{message:"Clicks report"})}),d("div",{className:"md:flex items-center justify-between gap-24 mb-24",children:[t,d("div",{className:"flex-shrink-0 flex items-center md:justify-end mt-10 md:mt-0 gap-12",children:[a,n("div",{className:"text-sm font-semibold",children:n(vm,{value:r,onChange:s,compactOnMobile:!1})})]})]}),n(Om,{dateRange:r,model:e})]})}function Mm(){const{workspaceId:e}=Ee(),{user:t}=he(),a=e&&e>0?`workspace=${e}`:`user=${t==null?void 0:t.id}`;return n(za,{model:a,title:n("h1",{className:"text-3xl font-light",children:n(l,{message:"Clicks report"})})})}const tr="filters";function Um(e){if(!e)return[];let t=[];try{t=JSON.parse(atob(decodeURIComponent(e))),t.map(a=>(a.valueKey!=null&&(a.value=a.valueKey),a))}catch{}return t}function Vm(e,t){return!e||(e=t?e.filter(a=>a.value!=="").map(a=>Bm(a,t)):e,e=e.filter(a=>!a.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Bm(e,t){const a=t.find(r=>r.key===e.key);if((a==null?void 0:a.type)==="select"){const r=(a.options||[]).find(s=>s.key===e.value);return{...e,value:r==null?void 0:r.value,valueKey:r==null?void 0:r.key}}return e}function $a(e,t){const[a]=pu(),r=hu(),s=a.get(tr),o=h.exports.useMemo(()=>{if(!e)return[];const p=Um(s);return(t||[]).forEach(b=>{if(!p.find(g=>g.key===b)){const g=e.find(v=>v.key===b);p.push({key:b,value:g.defaultValue,operator:g.defaultOperator,isInactive:!0})}}),p.sort((b,g)=>e.findIndex(v=>v.key===b.key)-e.findIndex(v=>v.key===g.key)),p},[s,t,e]),i=h.exports.useCallback(p=>{const b=[...o];return p.forEach(g=>{const v=typeof g=="object"?g.key:g,y=b.findIndex(w=>w.key===v);y>-1&&b.splice(y,1)}),b},[o]),c=h.exports.useCallback(p=>{const b=Vm(p,e);b?a.set(tr,b):a.delete(tr),r({search:`?${a}`},{replace:!0})},[e,r,a]),u=h.exports.useCallback(p=>{const g=[...i(p),...p];c(g)},[i,c]),m=h.exports.useCallback(p=>c(i([p])),[i,c]);return{add:u,remove:m,replaceAll:c,decodedFilters:o,encodedFilters:s}}const J=(e,t)=>{const a=e.split("/");return t&&a.push(t),a};function ol(e,t,a){return Be(J(e,t),()=>Hm(e,t),{...a,keepPreviousData:!0})}function Hm(e,t){return A.get(e,{params:t}).then(a=>a.data)}const Fa=se.createContext(null);function Hn(){return h.exports.useContext(Fa)}function hr(e){return n(pi,{...e})}function Oa({isFirst:e,isLast:t,isRowHeader:a,width:r,column:s}){const o=(s==null?void 0:s.width)||r||"",i=s==null?void 0:s.padding;let c="text-left";return(s==null?void 0:s.align)==="center"?c="text-center":(s==null?void 0:s.align)==="end"&&(c="text-right"),N("overflow-hidden whitespace-nowrap h-48 outline-none focus-visible:outline focus-visible:outline-offset-2 rounded",c,!i&&e&&"pl-24 pr-16",!i&&t&&"pr-24 pl-16",!e&&!t&&!i&&"px-16",i,o)}function il({isHeader:e,isSelected:t,enabledSelection:a}){return N("break-inside-avoid border-b outline-none",t&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",!t&&!e&&a&&"focus-visible:bg-focus hover:bg-hover")}function fr(e){return fu()?e.metaKey:e.ctrlKey}function qm(e){const{cellCount:t,rowCount:a}=e;return{onKeyDown:s=>{switch(s.key){case"ArrowLeft":Ke(s,{cell:{op:"decrement"}},e);break;case"ArrowRight":Ke(s,{cell:{op:"increment"}},e);break;case"ArrowUp":Ke(s,{row:{op:"decrement"}},e);break;case"ArrowDown":Ke(s,{row:{op:"increment"}},e);break;case"PageUp":Ke(s,{row:{op:"decrement",count:5}},e);break;case"PageDown":Ke(s,{row:{op:"increment",count:5}},e);break;case"Tab":jm(s);break;case"Home":fr(s)?Ke(s,{row:{op:"decrement",count:a},cell:{op:"decrement",count:t}},e):Ke(s,{cell:{op:"decrement",count:t}},e);break;case"End":fr(s)?Ke(s,{row:{op:"increment",count:a},cell:{op:"increment",count:t}},e):Ke(s,{cell:{op:"increment",count:t}},e);break}}}}function Ke(e,t,{cellCount:a,rowCount:r}){var y,w,k,x,S,R,C,D,U;if(((y=document.activeElement)==null?void 0:y.tagName)==="input")return;e.preventDefault();const s=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!s)return;const i=o.closest("[aria-rowindex]");if(!i)return;let c=parseInt(i.getAttribute("aria-rowindex")),u=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(c)||Number.isNaN(u))return;const m=(k=(w=t.row)==null?void 0:w.count)!=null?k:1;((x=t.row)==null?void 0:x.op)==="increment"?c=Math.min(r,c+m):((S=t.row)==null?void 0:S.op)==="decrement"&&(c=Math.max(1,c-m));const p=(C=(R=t.cell)==null?void 0:R.count)!=null?C:1;((D=t.cell)==null?void 0:D.op)==="increment"?u=Math.min(a,u+p):((U=t.cell)==null?void 0:U.op)==="decrement"&&(u=Math.max(1,u-p));const b=s.querySelector(`[aria-rowindex="${c}"] [aria-colindex="${u}"]`);if(!b)return;const v=Or(b).nextNode()||b;o.setAttribute("tabindex","-1"),v.setAttribute("tabindex","0"),v.focus()}function jm(e){const t=e.currentTarget;if(e.shiftKey)t.focus();else{const a=Or(t,{tabbable:!0});let r,s;do s=a.lastChild(),s&&(r=s);while(s);r&&!r.contains(document.activeElement)&&gu(r)}}const ln=h.exports.createContext(null);function Wm({item:e}){const t=Te(),{selectedRows:a,enableSelection:r,toggleRow:s,selectionStyle:o}=h.exports.useContext(ln);return!r||o==="highlight"||t?null:n("td",{className:Oa({isFirst:!0,width:"w-64 flex-shrink-0 flex-grow-0"}),children:n(Na,{checked:a.includes(e.id),onChange:()=>{s(e)}})})}function Gm({index:e,item:t,id:a}){const{enableSelection:r,columns:s,selectedRows:o}=h.exports.useContext(ln),i=r?!1:e===0,c=e===s.length-1,u=s[e];return n("td",{id:a,tabIndex:-1,"data-testid":`col-${u.key}`,className:Oa({isFirst:i,isLast:c,column:u}),children:u.body(t,o)})}function ll({onMoveStart:e,onMove:t,onMoveEnd:a,minimumMovement:r=0,preventDefault:s,stopPropagation:o=!0,onPress:i,onLongPress:c,...u}){const p=h.exports.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:b,removeGlobalListener:g}=Ia(),v=x=>{!p.el||(e==null?void 0:e(x,p.el))===!1||(p.originalTouchAction=p.el.style.touchAction,p.el.style.touchAction="none",p.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",p.started=!0)},y=x=>{var S;if(x.button===0&&p.id==null){if(p.started=!1,((S=u.onPointerDown)==null?void 0:S.call(u,x))===!1)return;o&&x.stopPropagation(),s&&x.preventDefault(),p.id=x.pointerId,p.el=x.currentTarget,p.lastPosition={x:x.clientX,y:x.clientY},c&&(p.longPressTimer=setTimeout(()=>{c(x,p.el),p.longPressTriggered=!0},400)),(e||t)&&b(window,"pointermove",w,!1),b(window,"pointerup",k,!1),b(window,"pointercancel",k,!1)}},w=x=>{if(x.pointerId===p.id){const S=x.clientX-p.lastPosition.x,R=x.clientY-p.lastPosition.y;(Math.abs(S)>=r||Math.abs(R)>=r)&&!p.started&&v(x),p.started&&(t==null||t(x,S,R),p.lastPosition={x:x.clientX,y:x.clientY})}},k=x=>{var S;if(x.pointerId===p.id){p.longPressTimer&&clearTimeout(p.longPressTimer);const R=p.longPressTriggered;p.longPressTriggered=!1,p.started&&(a==null||a(x)),p.el&&(x.type!=="pointercancel"&&((S=u.onPointerUp)==null||S.call(u,x,p.el),x.target&&p.el.contains(x.target)&&(R?c==null||c(x,p.el):i==null||i(x,p.el))),document.documentElement.style.userSelect=p.originalUserSelect||"",p.el.style.touchAction=p.originalTouchAction||""),p.id=void 0,p.started=!1,g(window,"pointermove",w,!1),g(window,"pointerup",k,!1),g(window,"pointercancel",k,!1)}};return{domProps:{onPointerDown:Qe(y)}}}function Km(e){return e.shiftKey||fr(e)}function Qm(){return ba("((hover: none) and (pointer: coarse))")}const Ym=["button","a","input","select","textarea"];function Zm({item:e,index:t,renderAs:a}){const r=Qm(),{selectedRows:s,columns:o,toggleRow:i,selectRow:c,onAction:u,enableSelection:m,selectionStyle:p}=h.exports.useContext(ln),b=s.includes(e.id),g=D=>D.target.closest(Ym.join(",")),v=D=>{p==="highlight"&&u&&!r&&!g(D)&&(D.preventDefault(),D.stopPropagation(),u(e,t))},y=!!s.length,w=D=>{g(D)||(p=="checkbox"?m&&(y||!u)?i(e):u&&u(e,t):p==="highlight"&&(r?m&&y?i(e):u==null||u(e,t):m&&c(e,Km(D))))},{domProps:k}=ll({onPress:w,onLongPress:r&&m?()=>i(e):void 0}),x=D=>{m&&D.key===" "?(D.preventDefault(),D.stopPropagation(),p==="checkbox"?i(e):c(e)):D.key==="Enter"&&!s.length&&u&&(D.preventDefault(),D.stopPropagation(),u(e,t))},S=D=>{r&&(D.preventDefault(),D.stopPropagation())},R={"aria-selected":b,className:il({isSelected:b}),onDoubleClick:Qe(v),onKeyDown:Qe(x),onContextMenu:Qe(S),...k},C=a||"tr";return d(C,{item:C==="tr"?void 0:e,...R,"data-testid":"table-row",children:[n(Wm,{item:e}),o.map((D,U)=>n(Gm,{index:U,item:e},`${e.id}-${D.key}`))]})}const wn=B(n("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Xm({index:e}){const{enableSelection:t,columns:a,sortDescriptor:r,onSortChange:s}=h.exports.useContext(ln),o=t?!1:e===0,i=e===a.length-1,c=a[e],u=Oa({isFirst:o,isLast:i,column:c}),[m,p]=h.exports.useState(!1),b=c.sortingKey||c.key,g=c.allowsSorting,{orderBy:v,orderDir:y}=r||{},w=g&&v===b;let k;w&&y==="asc"?k="ascending":w&&y==="desc"?k="descending":g&&(k="none");const x=()=>{if(!g)return;let C;w&&y==="desc"?C={orderDir:"asc",orderBy:b}:w&&y==="asc"?C={orderBy:void 0,orderDir:void 0}:C={orderDir:"desc",orderBy:b},s==null||s(C)},S=w||m,R={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return d("th",{onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},onKeyDown:C=>{(C.key===" "||C.key==="Enter")&&(C.preventDefault(),x())},onClick:x,tabIndex:-1,"aria-sort":k,"data-testid":`header-col-${c.key}`,className:N(u,"text-muted font-medium text-xs",g&&"cursor-pointer"),children:[c.hideHeader?n("div",{className:"sr-only",children:c.header()}):c.header(),n(Ve,{children:g&&n(ye.span,{variants:R,animate:S?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!S,children:n(wn,{size:"xs",className:N("text-muted",y==="asc"&&v===b&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Jm(){const e=Te(),{trans:t}=V(),{data:a,selectedRows:r,onSelectionChange:s,enableSelection:o,selectionStyle:i}=h.exports.useContext(ln);if(!o||i==="highlight"||e)return null;const c=!!a.length&&a.length===r.length,u=!c&&!!r.length;return n("th",{"aria-colindex":1,className:Oa({width:"w-64 flex-shrink-0 flex-grow-0",isFirst:!0}),children:n(Na,{"aria-label":t({message:"Select all"}),inputTestId:"select-all-checkbox",isIndeterminate:u,checked:c,onChange:()=>{s(c?[]:a.map(m=>m.id))}})})}function ep({className:e,columns:t,hideHeaderRow:a,data:r,selectedRows:s,defaultSelectedRows:o,onSelectionChange:i,sortDescriptor:c,onSortChange:u,enableSelection:m=!0,selectionStyle:p="checkbox",ariaLabelledBy:b,onAction:g,renderRowAs:v,...y}){const[w,k]=Ue(s,o||[],i),[x,S]=Ue(c,void 0,u),R=h.exports.useCallback(P=>{const L=[...w];if(!L.includes(P.id))L.push(P.id);else{const H=L.indexOf(P.id);L.splice(H,1)}k(L)},[w,k]),C=h.exports.useCallback((P,L)=>{const H=L?[...w,P.id]:[P.id];k(H)},[w,k]),D=h.exports.useMemo(()=>({selectedRows:w,onSelectionChange:k,enableSelection:m,selectionStyle:p,data:r,columns:t,sortDescriptor:x,onSortChange:S,toggleRow:R,selectRow:C,onAction:g}),[t,r,m,p,g,k,S,w,x,R,C]),U=qm({cellCount:m?t.length+1:t.length,rowCount:r.length+1}),I=a?null:n("thead",{children:d("tr",{"aria-rowindex":1,className:il({isHeader:!0}),children:[n(Jm,{}),t.map((P,L)=>n(Xm,{index:L},P.key))]})});return n(ln.Provider,{value:D,children:d("table",{...y,"aria-multiselectable":m?!0:void 0,"aria-labelledby":b,className:N(e,"select-none isolate outline-none text-sm w-full max-w-full align-top"),...U,children:[I,n("tbody",{children:r.map((P,L)=>n(Zm,{item:P,index:L,renderAs:v},P.id))})]})})}const tp=15,np=[{key:10},{key:15},{key:20},{key:50},{key:100}];function ap({query:e}){var c;const t=Te(),a=zr(),{params:r,setParams:s}=Hn(),o=(c=e.data)==null?void 0:c.pagination;if(!o)return null;const i=n(Yo,{"data-testid":"paginate-per-page",minWidth:"min-w-auto",selectionMode:"single",disabled:e.isLoading,labelPosition:"side",size:"xs",label:n(l,{message:"Items per page"}),selectedValue:r.perPage||tp,onSelectionChange:u=>{s({...r,perPage:u})},children:np.map(u=>n(T,{value:u.key,children:u.key},u.key))});return d("div",{className:"flex items-center justify-end gap-20 px-20 h-54 select-none",children:[!t&&i,o.from&&o.to&&n("div",{className:"text-sm","data-testid":"pagination-info","data-total":o.total,children:n(l,{message:":from - :to of :total",values:{from:o.from,to:o.to,total:a.format(o.total)}})}),d("div",{className:"text-muted",children:[n(F,{"data-testid":"paginate-prev",disabled:e.isLoading||!o.prev_page,onClick:()=>{s({...r,page:o.prev_page})},children:n(Vn,{})}),n(F,{"data-testid":"paginate-next",disabled:e.isLoading||!o.next_page,onClick:()=>{s({...r,page:o.next_page})},children:n(zt,{})})]})]})}const cl=B(n("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined"),Os=B(n("path",{d:"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAltOutlined");class re{constructor(t){Y(this,"defaultValue");Y(this,"defaultOperator");Y(this,"key");Y(this,"label");Y(this,"description");Y(this,"type");Y(this,"inputType");Y(this,"options");Y(this,"operators");Y(this,"model");this.defaultValue=t.defaultValue!==void 0?t.defaultValue:"",this.key=t.key,this.label=t.label,this.description=t.description,this.defaultOperator=t.defaultOperator||Ie.eq,this.type=t.type||q.Select,this.inputType=t.inputType,this.options=t.options||[],this.operators=t.operators||[],this.model=t.model}}var q=(e=>(e.Select="select",e.DatePicker="datePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e))(q||{}),Ie=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.doesntHave="doesntHave",e.between="between",e))(Ie||{});const da=["=","!=",">",">=","<","<="],cn=se.forwardRef(({variant:e="default",mode:t="single",children:a,className:r,...s},o)=>{const[i,c]=Ue(s.expandedValues,s.defaultExpandedValues||[],s.onExpandedChange);return n("div",{className:N(e==="outline"&&"space-y-10",r),ref:o,role:"presentation",children:n(Ve,{children:n(va,{children:se.Children.map(a,(u,m)=>h.exports.isValidElement(u)?h.exports.cloneElement(u,{key:u.key||m,value:u.props.value||m,mode:t,variant:e,expandedValues:i,setExpandedValues:c}):null)})})})});function Me({children:e,label:t,disabled:a,bodyClassName:r,startIcon:s,description:o,endAppend:i,chevronPosition:c="right",dataTestId:u,...m}){const{expandedValues:p,setExpandedValues:b,variant:g,value:v,mode:y}=m,w=h.exports.useRef(null),k=!a&&p.includes(v),x=Dt(),S=h.exports.useId(),R=`${S}-button`,C=`${S}-panel`,D=L=>{switch(L.key){case"ArrowDown":x.focusNext();break;case"ArrowUp":x.focusPrevious();break;case"Home":x.focusFirst();break;case"End":x.focusLast();break}},U={open:{height:"auto",visibility:"visible",transitionEnd:{overflow:"auto"}},closed:{height:0,overflow:"hidden",transitionEnd:{visibility:"hidden"}}},I=()=>{const L=p.indexOf(v);if(L>-1){const H=[...p];H.splice(L,1),b(H)}else b(y==="single"?[v]:[...p,v])},P=n("div",{className:N(g==="minimal"&&""),children:n(nn,{"aria-hidden":"true",size:"md",className:N(a?"text-disabled":"text-muted",k&&"rotate-180 transition-transform")})});return d("div",{className:N(g==="default"&&"border-b",g==="outline"&&"border rounded",a&&"text-disabled"),children:[d("h3",{className:N("flex items-center text-sm justify-between w-full",a&&"pointer-events-none",k&&g!=="minimal"&&"border-b",g==="outline"?k?"rounded-t":"rounded":void 0),children:[d("button",{"data-testid":u,disabled:a,"aria-expanded":k,id:R,"aria-controls":C,type:"button",ref:w,onKeyDown:D,onClick:()=>{a||I()},className:"flex items-center text-left gap-10 flex-auto pl-14 pr-10 py-10 hover:bg-hover outline-none focus-visible:bg-primary/focus",children:[c==="left"&&P,s&&h.exports.cloneElement(s,{size:"md",className:N(s.props.className,a?"text-disabled":"text-muted")}),d("div",{className:"flex-auto overflow-hidden overflow-ellipsis",children:[n("div",{"data-testid":"accordion-label",children:t}),o&&n("div",{className:"text-muted text-xs",children:o})]}),c==="right"&&P]}),i&&n("div",{className:"flex-shrink-0 text-sm text-muted px-4",children:i})]}),n(ye.div,{"aria-labelledby":S,role:"region",variants:U,transition:{type:"tween",duration:.2},initial:!1,animate:k?"open":"closed",children:n("div",{className:N("p-16",r),children:e})})]})}function ul({filter:e}){return n(Pe,{size:"sm",autoFocus:!0,name:`${e.key}.value`,selectionMode:"single",children:e.options.map(t=>n(T,{value:t.key,children:n(l,{...t.label})},t.key))})}function rp(e){var g,v;const{granularity:t,closeDialogOnSelection:a,...r}=e,s=yi(e),o=h.exports.useRef(null),c=Te()&&t!=="day",u=n(M,{offset:8,placement:"bottom-start",isOpen:s.calendarIsOpen,onOpenChange:s.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:n(Si,{state:s})}),m={onClick:y=>{y.stopPropagation(),y.preventDefault(),sp(y)?s.setCalendarIsOpen(!1):s.setCalendarIsOpen(!0)}},p=s.selectedValue,b=s.setSelectedValue;return d(h.exports.Fragment,{children:[d(Wr,{ref:o,wrapperProps:m,endAdornment:c?void 0:n(qr,{}),...r,children:[n(Pn,{isPlaceholder:(g=s.isPlaceholder)==null?void 0:g.start,state:s,segmentProps:m,value:p.start,onChange:y=>{b({...p,start:y})}}),n(xi,{className:"block flex-shrink-0 text-muted",size:"md"}),n(Pn,{isPlaceholder:(v=s.isPlaceholder)==null?void 0:v.end,state:s,segmentProps:m,value:p.end,onChange:y=>{b({...p,end:y})}})]}),u]})}function sp(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function op(e){const{field:{onChange:t,onBlur:a,value:r,ref:s},fieldState:{invalid:o,error:i}}=yt({name:e.name}),c={onChange:u=>{t(u?dl(u):null)},onBlur:a,value:ip(r),invalid:o,errorMessage:i==null?void 0:i.message,inputRef:s};return n(rp,{...qe(c,e)})}function ip(e){const{start:t,end:a,preset:r}=e||{},s={preset:r};return t&&(s.start=typeof t=="string"?Jt(t):t),a&&(s.end=typeof a=="string"?Jt(a):a),s}function dl({start:e,end:t,preset:a}={}){const r={preset:a};return e&&(r.start=e.toAbsoluteString()),t&&(r.end=t.toAbsoluteString()),r}function ml({filter:e}){return n(op,{size:"sm",name:`${e.key}.value`,autoFocus:!0,granularity:"day",closeDialogOnSelection:!0})}const pl=e=>`normalized-models/${e}`;function lp(e,t,a){return Be([pl(e),t],()=>cp(e,t),{keepPreviousData:!0,...a})}async function cp(e,t){return A.get(pl(e),{params:t}).then(a=>a.data)}const hl=(e,t)=>`normalized-models/${e}/${t}`;function fl(e,t){return Be([hl(e,t)],()=>up(e,t),{enabled:e!=null&&t!=null})}async function up(e,t){return A.get(hl(e,t),{}).then(a=>a.data)}function dp({modelType:e,label:t,className:a,value:r,defaultValue:s="",onChange:o,description:i,errorMessage:c,invalid:u,openMenuOnFocus:m,autoFocus:p}){var R;const b=h.exports.useRef(null),[g,v]=h.exports.useState(""),[y,w]=Ue(r,s,o),k=lp(e,{query:g}),{trans:x}=V(),S=lt({size:"md"});return y?d("div",{className:a,children:[n("div",{className:S.label,children:t}),n("div",{className:N("p-10 border rounded mb-20",u&&"border-danger"),children:n(Ve,{initial:!1,mode:"wait",children:n(mp,{modelType:e,modelId:y,onEditClick:()=>{w(""),v(""),requestAnimationFrame(()=>{var C;(C=b.current)==null||C.focus()})}})})}),i&&!c&&n("div",{className:S.description,children:i}),c&&n("div",{className:S.error,children:c})]}):n(bu,{className:a,invalid:u,errorMessage:c,description:i,isAsync:!0,placeholder:x(f("Find item..")),label:t,isLoading:k.isFetching,items:(R=k.data)==null?void 0:R.results,inputValue:g,onInputValueChange:v,clearInputOnItemSelection:!0,selectionMode:"single",selectedValue:y,onSelectionChange:w,ref:b,openMenuOnFocus:m,autoFocus:p,children:C=>n(T,{value:C.id,description:C.description,startIcon:n(Un,{src:C.image}),children:C.name},C.id)})}function mp({modelType:e,modelId:t,onEditClick:a}){const{data:r,isLoading:s}=fl(e,t);return s||!(r!=null&&r.model)?n(pp,{},"skeleton"):d(ye.div,{className:"flex items-center gap-10",...$e,children:[n(Un,{src:r.model.image}),d("div",{children:[n("div",{children:r.model.name}),n("div",{className:"text-muted text-xs",children:r.model.description})]}),n(Ce,{label:n(l,{message:"Change item"}),children:n(F,{className:"ml-auto text-muted",size:"sm",onClick:a,children:n(je,{})})})]},"preview")}function pp(){return d(ye.div,{className:"flex items-center gap-10",...$e,children:[n(De,{variant:"rect",size:"w-32 h-32"}),d("div",{className:"flex-auto max-h-[36px]",children:[n(De,{className:"text-xs"}),n(De,{className:"text-xs max-h-8"})]}),n(De,{variant:"icon",size:"w-24 h-24"})]})}function hp({name:e,...t}){const{field:{onChange:a,value:r=""},fieldState:{invalid:s,error:o}}=yt({name:e});return n(dp,{value:r,onChange:a,invalid:s,errorMessage:o==null?void 0:o.message,...t})}function gl({filter:e}){return n(hp,{name:`${e.key}.value`,className:"mb-20",modelType:e.model,openMenuOnFocus:!0,autoFocus:!0})}const bl={"=":f("is"),"!=":f("is not"),">":f("is greater than"),">=":f("is greater than or equal to"),"<":f("is less than"),"<=":f("is less than or equal to"),has:f("Include"),doesntHave:f("Do not include"),between:f("Is between")};function vl({filter:e}){return d(h.exports.Fragment,{children:[n(Pe,{autoFocus:!0,selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:e.operators.map(t=>n(T,{value:t,children:n(l,{...bl[t]})},t))}),n(E,{size:"sm",name:`${e.key}.value`,type:e.inputType,required:!0})]})}function fp({filter:e}){return null}function gp({filters:e}){const{decodedFilters:t}=$a(e),{formId:a}=K(),[r,s]=h.exports.useState(()=>t.map(c=>c.key));return d(W,{className:"min-w-[300px]",maxWidth:"max-w-400",size:"auto",children:[n(X,{padding:"px-14 py-10",leftAdornment:n(_,{size:"xs",variant:"outline",className:"mr-auto",onClick:()=>{s([])},"data-testid":"clear-filters-button",children:n(l,{message:"Clear"})}),rightAdornment:n(_,{size:"xs",variant:"flat",color:"primary",className:"ml-auto",type:"submit",form:a,"data-testid":"apply-filters-button",children:n(l,{message:"Apply"})}),children:n(l,{message:"Filter"})}),n(Q,{padding:"p-0",children:n(bp,{filters:e,expandedFilters:r,setExpandedFilters:s})})]})}function bp({filters:e,expandedFilters:t,setExpandedFilters:a}){const{decodedFilters:r,replaceAll:s}=$a(e),o={};e.forEach(m=>{const p=r.find(b=>b.key===m.key);o[m.key]=(p==null?void 0:p.value)!==void 0?{value:p.value,operator:p.operator}:{value:m.defaultValue,operator:m.defaultOperator}});const i=ae({defaultValues:o}),{formId:c,close:u}=K();return n(ke,{form:i,id:c,onSubmit:m=>{const p=Object.entries(m).filter(([b,g])=>t.includes(b)&&g!==void 0).map(([b,g])=>({key:b,...g}));s(p),u()},children:n(cn,{mode:"multiple",expandedValues:t,onExpandedChange:a,children:e.map(m=>d(Me,{dataTestId:`filter-${m.key}-toggle`,startIcon:n(Na,{checked:t.includes(m.key)}),value:m.key,label:n(l,{...m.label}),children:[m.description&&n("div",{className:N("text-muted text-xs",m.type!==q.BooleanToggle&&"mb-14"),children:n(l,{...m.description})}),n(vp,{filter:m})]},m.key))})})}function vp({filter:e}){switch(e.type){case q.Select:return n(ul,{filter:e});case q.DatePicker:return n(ml,{filter:e});case q.SelectModel:return n(gl,{filter:e});case q.Input:return n(vl,{filter:e});case q.BooleanToggle:return n(fp,{filter:e})}}function yp({filters:e}){const t=Te();return d(M,{type:"popover",children:[t?n(F,{color:"primary",size:"sm",variant:"outline",radius:"rounded",className:"flex-shrink-0","data-testid":"add-filter-button",children:n(Os,{})}):n(_,{variant:"outline",color:"primary",startIcon:n(Os,{}),size:"sm",className:"text-muted","data-testid":"add-filter-button",children:n(l,{message:"Filter"})}),n(gp,{filters:e})]})}function kp({actions:e,filters:t}){const{trans:a}=V(),{params:r,setParams:s,searchPlaceholder:o}=Hn();return d(yl,{children:[n(rn,{inputTestId:"datatable-search",className:"flex-auto max-w-440 mr-auto",inputWrapperClassName:"mr-24 md:mr-0",placeholder:a(o),startAdornment:n(cl,{}),value:r.query||"",onChange:i=>{s({...r,query:i.target.value})}}),t&&n(yp,{filters:t}),e]})}function xp({actions:e}){const{selectedRows:t}=Hn();return d(yl,{"data-testid":"datatable-selected-header",children:[n("div",{className:"mr-auto",children:n(l,{message:"[one 1 item|other :count items] selected",values:{count:t.length}})}),e]})}function yl({children:e,...t}){return n("div",{className:"mb-24 flex items-center gap-8 md:gap-12 text-muted relative h-42",...t,children:e})}const kl=h.exports.forwardRef((e,t)=>{const{isInactive:a,filter:r,...s}=e;return a?n(wp,{filter:r,...s,ref:t}):n(Sp,{filter:r,...s,ref:t})}),wp=h.exports.forwardRef(({filter:e,...t},a)=>n(_,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:a,endIcon:n(nn,{}),...t,children:n(l,{...e.label})})),Sp=h.exports.forwardRef(({filter:e,children:t,...a},r)=>{const s=e.type===q.BooleanToggle;return d(_,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!s&&n(nn,{}),ref:r,...a,children:[n("span",{className:N(!s&&"border-r border-r-primary-light mr-8 pr-8"),children:n(l,{...e.label})}),t]})});function Ma(e){const{onValueChange:t,isInactive:a,filter:r,label:s}=e;return d(M,{offset:10,type:"popover",onClose:o=>{o!==void 0&&t(o)},children:[n(kl,{isInactive:a,filter:r,children:s}),n(Cp,{...e})]})}function Cp({filter:e,panel:t,value:a,operator:r}){const s=ae({defaultValues:{[e.key]:{value:a,operator:r}}}),{close:o,formId:i}=K();return d(W,{size:"xs",children:[n(X,{children:n(l,{...e.label})}),n(Q,{padding:"px-14 pt-14 pb-4",children:d(ke,{form:s,id:i,onSubmit:c=>{o(c[e.key])},children:[e.description&&n("div",{className:"text-muted text-xs mb-14",children:n(l,{...e.description})}),t]})}),n(ee,{children:n(_,{form:i,type:"submit",variant:"flat",color:"primary",size:"xs",children:n(l,{message:"Apply"})})})]})}function _p(e){switch(e.filter.type){case q.DatePicker:return n(Np,{...e});case q.BooleanToggle:return n(Ip,{...e});case q.Select:return n(Rp,{...e});case q.Input:return n(Dp,{...e});case q.SelectModel:return n(Pp,{...e})}}function Np(e){const{value:t,filter:a}=e;let r;return t.preset!==void 0?r=n(l,{...Aa[t.preset].label}):r=n(jr,{start:new Date(t.start),end:new Date(t.end),options:{dateStyle:"medium"}}),n(Ma,{...e,label:r,panel:n(ml,{filter:a})})}function Ip({filter:e,isInactive:t,onValueChange:a}){return n(kl,{onClick:()=>{a({value:!0})},filter:e,isInactive:t})}function Rp(e){const{filter:t,value:a}=e,r=t.options.find(s=>s.key===a);return n(Ma,{...e,label:r?n(l,{...r.label}):null,panel:n(ul,{filter:t})})}function Dp(e){const{filter:t,value:a,operator:r}=e,s=r?n(l,{...bl[r]}):null;return n(Ma,{...e,label:d(h.exports.Fragment,{children:[s," ",a]}),panel:n(vl,{filter:t})})}function Pp(e){const{value:t,filter:a}=e,{isLoading:r,data:s}=fl(a.model,t),o=d(h.exports.Fragment,{children:[n(De,{variant:"avatar",size:"w-18 h-18 mr-6"}),n(De,{variant:"rect",size:"w-50"})]}),i=d(h.exports.Fragment,{children:[n(Un,{size:"xs",src:s==null?void 0:s.model.image,className:"mr-6"}),s==null?void 0:s.model.name]});return n(Ma,{...e,label:r||!s?o:i,panel:n(gl,{filter:a})})}function Lp({filters:e,pinnedFilters:t,className:a}){const{decodedFilters:r,remove:s,replaceAll:o}=$a(e,t);return r.length?n("div",{className:N("flex items-center gap-6 overflow-x-auto",a),children:r.map((i,c)=>{const u=e.find(p=>p.key===i.key),m=p=>{const b=[...r];b.splice(c,1,{key:u.key,value:p.value,isInactive:!1,operator:p.operator||u.defaultOperator}),o(b)};return d("div",{children:[!i.isInactive&&n(F,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{s(i.key)},children:n(Ze,{})}),n(_p,{filter:u,isInactive:i.isInactive,value:i.valueKey!=null?i.valueKey:i.value,operator:i.operator,onValueChange:m})]},i.key)})}):null}function xl({filters:e,columns:t,searchPlaceholder:a,queryParams:r,endpoint:s,actions:o,selectedActions:i,emptyStateMessage:c,tableDomProps:u,onRowAction:m,enableSelection:p=!0,children:b}){var D;const{trans:g}=V(),{encodedFilters:v}=$a(e),[y,w]=h.exports.useState({perPage:15}),[k,x]=h.exports.useState([]),S=ol(s,{...y,...r,filters:v},{onSuccess:()=>{x([])}}),R=!!(y.query||y.filters||v),C=(D=S.data)==null?void 0:D.pagination;return a||(a=f("Type to search...")),d(Fa.Provider,{value:{selectedRows:k,setSelectedRows:x,endpoint:s,searchPlaceholder:a,params:y,setParams:w,query:S},children:[b,n(Ve,{initial:!1,mode:"wait",children:k.length?n(xp,{actions:i},"selected"):n(kp,{actions:o,filters:e},"default")}),e&&n(Lp,{className:"mb-14",filters:e}),d("div",{className:"relative border rounded",children:[S.isLoading&&n(hr,{isIndeterminate:!0,className:"absolute top-0 left-0 w-full z-10","aria-label":g({message:"Loading"}),size:"xs"}),n("div",{className:"relative overflow-x-auto md:overflow-hidden",children:n(ep,{...u,"data-loaded":!S.isLoading,columns:t,data:(C==null?void 0:C.data)||[],sortDescriptor:y,onSortChange:U=>{w({...y,...U})},selectedRows:k,enableSelection:p,onSelectionChange:x,onAction:m})}),(S.isFetched||S.isPreviousData)&&!(C!=null&&C.data.length)?n("div",{className:"pt-50","data-testid":"empty-state-message",children:h.exports.cloneElement(c,{isFiltering:R})}):void 0,n(ap,{query:S})]})]})}function $t({title:e,headerContent:t,headerItemsAlign:a="items-end",...r}){const s=h.exports.useId();return d("div",{className:"p-12 md:p-24",children:[e&&d("div",{className:N("mb-16",t&&`flex ${a} gap-4`),children:[n(Fr,{children:e}),n("h1",{className:"text-3xl font-light",id:s,children:e}),t]}),n(xl,{...r,tableDomProps:{"aria-labelledby":e?s:void 0}})]})}const kt=se.forwardRef(({children:e,to:t,elementType:a,onClick:r},s)=>Te()?n(F,{ref:s,variant:"flat",color:"primary",radius:"rounded",className:"flex-shrink-0",size:"sm",to:t,elementType:a,onClick:r,children:n(Rt,{})}):n(_,{ref:s,startIcon:n(Rt,{}),variant:"flat",color:"primary",size:"sm",to:t,elementType:a,onClick:r,children:e}));function Ep(e,t){return A.delete(`${e}/${t.join(",")}`).then(a=>a.data)}function Tp(){const{endpoint:e,selectedRows:t,setSelectedRows:a}=Hn();return G(()=>Ep(e,t),{onSuccess:()=>{Z(f("Deleted [one 1 record|other :count records]",{values:{count:t.length}})),a([]),j.invalidateQueries(J(e))},onError:r=>Le(r,f("Could not delete records"))})}function Ft(){const e=Tp(),{selectedRows:t}=Hn();return d(M,{type:"modal",onClose:a=>{a&&e.mutate()},children:[n(_,{variant:"flat",color:"danger",className:"ml-auto",disabled:e.isLoading,"data-testid":"delete-rows-button",children:n(l,{message:"Delete"})}),n(Pt,{title:n(l,{message:"Delete [one 1 item|other :count items]?",values:{count:t.length}}),body:n(l,{message:"This will permanently remove the items and cannot be undone."}),confirm:n(l,{message:"Delete"}),isDanger:!0})]})}function xt({isFiltering:e,title:t,filteringTitle:a,image:r}){const s=Te();return n(Ra,{size:s?"sm":"md",image:n(On,{src:r}),title:e&&a?a:t,description:e&&a?n(l,{message:"Try another search query or different filters"}):void 0})}class ma extends re{constructor(a){a.defaultValue||(a.defaultValue=dl(Aa[3].getRangeValue()));super(a);Y(this,"type",q.DatePicker);Y(this,"defaultOperator",Ie.between)}}class Ot extends ma{constructor(){super(...arguments);Y(this,"key","created_at");Y(this,"label",f("Date created"))}}class Mt extends ma{constructor(){super(...arguments);Y(this,"key","updated_at");Y(this,"label",f("Last updated"))}}const Ut="user",gr=[new re({type:q.Select,key:"type",label:f("Type"),description:f("Type of the link"),defaultValue:"01",defaultOperator:Ie.eq,options:[{key:"01",label:f("Direct"),value:"direct"},{key:"02",label:f("Overlay"),value:"overlay"},{key:"03",label:f("Frame"),value:"frame"},{key:"04",label:f("Custom page"),value:"link_page"}]}),new re({type:q.Select,key:"active",label:f("Status"),description:f("Whether link is disabled or not"),defaultValue:"01",defaultOperator:Ie.eq,options:[{key:"01",label:f("Enabled"),value:!0},{key:"02",label:f("Disabled"),value:!1}]}),new re({type:q.Select,key:"password",label:f("Password"),description:f("Whether link is password protected"),defaultValue:"01",defaultOperator:Ie.eq,options:[{key:"01",label:f("Has a password"),value:{value:null,operator:Ie.ne}},{key:"02",label:f("Does not have a password"),value:{value:null,operator:Ie.eq}}]}),new re({type:q.Input,inputType:"number",key:"clicks_count",label:f("Click count"),description:f("Total number of clicks for link"),defaultValue:1,defaultOperator:Ie.gte,operators:da}),new ma({key:"clicked_at",label:f("Clicked at"),description:f("Date link was last clicked")}),new ma({key:"expires_at",label:f("Expires at"),description:f("Date link will expire")}),new Ot({description:f("Date link was created")}),new Mt({description:f("Date link was last updated")}),new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("User"),description:f("User link was created by")})],wl=B(n("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"SettingsOutlined"),Sl=["countries","domains","pages","overlays","pixels","groups"];function un(){const{user:e}=he();return vt(Sl,{userId:e==null?void 0:e.id,pageType:"link_page"})}function Ua(){var e;vu(Sl,{userId:(e=Xt().user)==null?void 0:e.id,pageType:"link_page"})}function Ap(){var o,i,c;const{branding:{site_name:e}}=ge(),{data:t}=un(),{watch:a,setValue:r}=ct(),s=a("type");return d("div",{className:"flex items-center gap-12",children:[d(Pe,{className:"mb-24 flex-auto",name:"type",label:n(l,{message:"Type"}),selectionMode:"single",onSelectionChange:()=>{r("type_id",null)},children:[n(T,{value:"direct",description:n(l,{message:"Redirect user to url instantly"}),children:n(l,{message:"Direct"})}),n(T,{value:"frame",description:n(l,{message:" Show url inside iframe with :siteName navigation bar.",values:{siteName:e}}),children:n(l,{message:"Frame"})}),n(T,{value:"splash",description:n(l,{message:"Show splash page with optional ads and redirect user to url after a delay."}),children:n(l,{message:"Splash"})}),(o=t==null?void 0:t.pages)!=null&&o.length?n(T,{value:"page",description:n(l,{message:"Show specified link page with :siteName navigation bar and button to open long url.",values:{siteName:e}}),children:n(l,{message:"Link page"})}):null,t!=null&&t.overlays.length?n(T,{value:"overlay",description:n(l,{message:"Redirect user instantly and show specified overlay over the link."}),children:n(l,{message:"Overlay"})}):null]}),s==="page"&&n(Pe,{label:n(l,{message:"Link page"}),name:"type_id",selectionMode:"single",className:"mb-24 flex-auto",required:!0,children:(i=t==null?void 0:t.pages)==null?void 0:i.map(u=>n(T,{value:u.id,children:u.title},u.id))}),s==="overlay"&&n(Pe,{label:n(l,{message:"Link overlay"}),name:"type_id",selectionMode:"single",className:"mb-24 flex-auto",required:!0,children:(c=t==null?void 0:t.overlays)==null?void 0:c.map(u=>n(T,{value:u.id,children:u.name},u.id))})]})}const en=se.forwardRef((e,t)=>{const{children:a,size:r="sm",description:s,className:o,invalid:i,autoFocus:c,errorMessage:u,...m}=e,p=ya(t);Zo({autoFocus:c},p);const b=zp(r),g=lt(e),v=h.exports.useId();return d("div",{className:N(o,"isolate"),children:[d("label",{className:"flex items-center select-none",children:[n("input",{...m,type:"checkbox",role:"switch","aria-invalid":i||void 0,"aria-describedby":s?v:void 0,ref:p,"aria-checked":m.checked,className:N(b,!i&&"checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark",i&&"checked:bg-danger checked:border-danger","outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none","before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2","checked:before:border-white","focus-visible:ring",e.disabled&&"opacity-80 cursor-not-allowed")}),a&&n("span",{className:N(g.size.font,"ml-12",i&&"text-danger",e.disabled&&"text-disabled"),children:a})]}),s&&!u&&n("div",{id:v,className:g.description,children:s}),u&&n("div",{id:v,className:g.error,children:u})]})});function Je(e){const{field:{onChange:t,onBlur:a,value:r=!1,ref:s},fieldState:{invalid:o,error:i}}=yt({name:e.name}),c={onChange:t,onBlur:a,checked:r,invalid:o,errorMessage:i==null?void 0:i.message,name:e.name};return n(en,{ref:s,...qe(e,c)})}function zp(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const Zr=B(n("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");function $p(e){const t=sn(),[a,r]=h.exports.useState(!e.value&&!e.defaultValue),s=e.onChange,[o,i]=Ue(e.value||t,e.defaultValue||t,s),{min:c,max:u,granularity:m,timezone:p,calendarIsOpen:b,setCalendarIsOpen:g,closeDialogOnSelection:v}=bi(o,e),y=h.exports.useCallback(()=>{r(!0),i(t),s==null||s(null),g(!1)},[t,i,s,g]),[w,k]=h.exports.useState(()=>[In(o)]),x=h.exports.useCallback(C=>{c&&C.compare(c)<0?C=c:u&&C.compare(u)>0&&(C=u);const D=o?o.set(C):nt(C,p);i(D),k([In(D)]),r(!1)},[i,c,u,o,p]),S=h.exports.useCallback(C=>!a&&kn(o,C),[o,a]),R=h.exports.useCallback(C=>({onClick:()=>{x==null||x(C),v&&(g==null||g(!1))}}),[x,g,v]);return{selectedValue:o,setSelectedValue:i,calendarIsOpen:b,setCalendarIsOpen:g,dayIsActive:S,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:R,calendarDates:w,setCalendarDates:k,isPlaceholder:a,clear:y,setIsPlaceholder:r,min:c,max:u,granularity:m,timezone:p,closeDialogOnSelection:v}}function Fp({showCalendarFooter:e,...t}){const a=$p(t),r=h.exports.useRef(null),s=sn(),o=e&&n(ee,{padding:"px-14 pb-14",startAction:n(_,{disabled:a.isPlaceholder,variant:"text",color:"primary",onClick:()=>{a.clear()},children:n(l,{message:"Clear"})}),children:n(_,{variant:"text",color:"primary",onClick:()=>{a.setSelectedValue(s),a.setCalendarIsOpen(!1)},children:n(l,{message:"Today"})})}),i=n(M,{offset:8,placement:"bottom-start",isOpen:a.calendarIsOpen,onOpenChange:a.setCalendarIsOpen,type:"popover",triggerRef:r,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:d(W,{size:"auto",children:[n(Q,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:n(ki,{state:a,visibleMonths:1})}),o]})}),c={onClick:u=>{u.stopPropagation(),u.preventDefault(),Op(u)?a.setCalendarIsOpen(!1):a.setCalendarIsOpen(!0)}};return d(h.exports.Fragment,{children:[n(Wr,{ref:r,wrapperProps:c,endAdornment:n(qr,{className:N(t.disabled&&"text-disabled")}),...t,children:n(Pn,{segmentProps:c,state:a,value:a.selectedValue,onChange:a.setSelectedValue,isPlaceholder:a.isPlaceholder})}),i]})}function Ln(e){const{min:t,max:a}=e,{trans:r}=V(),{format:s}=It(),{field:{onChange:o,onBlur:i,value:c=null,ref:u},fieldState:{invalid:m,error:p}}=yt({name:e.name,rules:{validate:v=>{if(!v)return;const y=Jt(v);if(t&&y.compare(t)<0)return r({message:"Enter a date after :date",values:{date:s(v)}});if(a&&y.compare(a)>0)return r({message:"Enter a date before :date",values:{date:s(v)}})}}}),b=c?Jt(c):null,g={onChange:v=>{o(v&&v.toAbsoluteString())},onBlur:i,value:b,invalid:m,errorMessage:p==null?void 0:p.message,inputRef:u};return n(Fp,{...qe(g,e)})}function Op(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const Mp=""+new URL("upgrade.1a8523e3.svg",import.meta.url).href;function Cl({message:e,messageSuffix:t}){const{close:a}=K();return d(W,{size:"sm",children:[n(X,{children:n(l,{message:"Join the PROs"})}),d(Q,{children:[n("div",{className:"text-center mb-20",children:n(On,{src:Mp,className:"h-100 mx-auto"})}),d("div",{children:[e," ",t]})]}),d(ee,{children:[n(_,{variant:"text",size:"xs",onClick:()=>{a()},children:n(l,{message:"Maybe later"})}),n(_,{variant:"flat",size:"xs",color:"primary",elementType:pe,to:"/pricing",target:"_blank",onClick:()=>{a()},children:n(l,{message:"Find out more"})})]})]})}function Up({message:e}){return n(Cl,{message:e,messageSuffix:n(l,{message:"Upgrade to unlock this feature and many more."})})}function Xr({message:e,className:t}){const{billing:a}=ge();return a.enable?d(M,{type:"popover",children:[n(_,{variant:"flat",color:"primary",size:"2xs",startIcon:n(Zr,{}),className:t,children:n(l,{message:"Upgrade"})}),n(Up,{message:e})]}):n(Vp,{})}function Vp(){return n(Ce,{label:n(l,{message:"You don't have permissions to access this feature."}),children:n(Zr,{size:"sm",className:"text-muted"})})}function qn({title:e,description:t,children:a,upgradeMessage:r}){return d("div",{className:"border-t pt-24",children:[d("div",{className:N("font-semibold",r&&"flex items-center gap-10 mb-8"),children:[n("div",{className:"text-sm",children:e}),r&&n(Xr,{message:r})]}),n("div",{className:"text-muted text-sm",children:t}),a]})}function Vt(e){const{data:t}=Ea(),{hasPermission:a}=he();return{disabled:!(t!=null&&t.usage.links[e])&&!a("admin")}}function Bp({linkName:e}){const{disabled:t}=Vt("password");return d(h.exports.Fragment,{children:[n(E,{type:"password",name:"password",label:n(l,{message:"Password"}),autoComplete:"new-password",className:"mb-24",labelSuffix:t&&n(Xr,{message:n(l,{message:"Your current plan doesn't include link password protection."})}),disabled:t}),n(Hp,{linkName:e}),n(qp,{linkName:e})]})}function Hp({linkName:e}){const t=sn(),{disabled:a}=Vt("expiration");return n(qn,{title:n(l,{message:"Schedule"}),description:n(l,{message:"Specify a date when :name should become active and when it should expire. Both activation and expiration dates are optional.",values:{name:e}}),upgradeMessage:a&&n(l,{message:"Your current plan doesn't include :name scheduling.",values:{name:e}}),children:d("div",{className:"block md:flex items-center gap-24 mt-24",children:[n(Ln,{showCalendarFooter:!0,label:n(l,{message:"Activation date"}),min:t,name:"activates_at",className:"mb-24 flex-auto",disabled:a}),n(Ln,{showCalendarFooter:!0,label:n(l,{message:"Expiration date"}),min:t,name:"expires_at",className:"mb-24 flex-auto",disabled:a})]})})}function qp({linkName:e}){const{trans:t}=V(),{disabled:a}=Vt("expiration");return n(qn,{title:n(l,{message:"Expiration clicks"}),description:n(l,{message:`After :name is visited specified amount of times, it will no longer be accessible.
Optionally, after click amount is reached :name can redirect to specified url instead.`,values:{name:e}}),upgradeMessage:a&&n(l,{message:"Your current plan doesn't include expiration clicks."}),children:d("div",{className:"block md:flex items-center gap-24 mt-24",children:[n(E,{type:"number",label:n(l,{message:"Max clicks"}),name:"exp_clicks_rule.key",className:"mb-24 flex-auto",disabled:a}),n(E,{type:"url",label:n(l,{message:"Redirect URL"}),placeholder:t(f("Optional")),name:"exp_clicks_rule.value",className:"mb-24 flex-auto",disabled:a})]})})}const jp=B(n("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"}),"SwapVertOutlined");function Wp(){return d("div",{children:[n(Gp,{}),n(Kp,{}),n(Qp,{})]})}function Gp(){const{data:e}=un();return n(Jr,{defaultKey:"us",name:"geo_rules",title:n(l,{message:"Location targeting"}),description:n(l,{message:"Redirect users to different url based on their location."}),buttonLabel:n(l,{message:"Add location"}),children:n(ur,{required:!0,useOptionLabelAsInputValue:!0,items:e==null?void 0:e.countries,name:"temp",label:n(l,{message:"Country"}),className:"flex-auto mt-24",children:t=>n(T,{value:t.code,children:t.name},t.code)})})}function Kp(){return n(Jr,{name:"device_rules",title:n(l,{message:"Device targeting"}),description:n(l,{message:"Redirect users to different url based on their device."}),buttonLabel:n(l,{message:"Add device"}),defaultKey:"desktop",children:d(Pe,{required:!0,selectionMode:"single",name:"temp",label:n(l,{message:"Device"}),className:"flex-auto mt-24",children:[n(T,{value:"desktop",children:n(l,{message:"Desktop"})}),n(T,{value:"table",children:n(l,{message:"Tablet"})}),n(T,{value:"mobile",children:n(l,{message:"Mobile"})})]})})}function Qp(){return n(Jr,{name:"platform_rules",title:n(l,{message:"Platform targeting"}),description:n(l,{message:"Redirect users to different url based on their platform."}),defaultKey:"windows",buttonLabel:n(l,{message:"Add platform"}),children:d(Pe,{name:"temp",required:!0,selectionMode:"single",label:n(l,{message:"Platform"}),className:"flex-auto mt-24",children:[n(T,{value:"windows",children:n(l,{message:"Windows"})}),n(T,{value:"osx",children:n(l,{message:"MacOs"})}),n(T,{value:"ios",children:n(l,{message:"iOS"})}),n(T,{value:"android",children:n(l,{message:"Android"})}),n(T,{value:"linux",children:n(l,{message:"Linux"})})]})})}function Jr({name:e,title:t,description:a,buttonLabel:r,defaultKey:s,children:o}){const{fields:i,append:c,remove:u}=Da({name:e}),{disabled:m}=Vt("retargeting");return d(qn,{title:t,description:a,upgradeMessage:m&&n(l,{message:"Your current plan doesn't include link retargeting."}),children:[i.map((p,b)=>d("div",{className:"block md:flex items-end gap-14",children:[h.exports.cloneElement(o,{name:`${e}.${b}.key`,disabled:m}),n(E,{required:!0,type:"url",name:`${e}.${b}.value`,label:n(l,{message:"URL"}),className:"flex-auto mt-24",disabled:m}),n(Yp,{onClick:()=>u(b)})]},p.id)),n(_,{className:"my-8",variant:"text",color:"primary",startIcon:n(Rt,{}),onClick:()=>{c({key:s,value:""})},disabled:m,children:r})]})}function Yp({onClick:e}){return Te()?n("div",{className:"mt-12",children:n(_,{variant:"outline",color:"danger",size:"xs",onClick:e,children:n(l,{message:"Remove"})})}):n(F,{color:"danger",onClick:e,children:n(Ze,{})})}const Zp=B(n("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z"}),"PublicOutlined");function Xp(){const e=h.exports.createContext(void 0);return{Provider:({createStore:s,children:o})=>{const i=h.exports.useRef();return i.current||(i.current=s()),h.exports.createElement(e.Provider,{value:i.current},o)},useStore:(s,o)=>{const i=h.exports.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return yu(i,s,o)},useStoreApi:()=>{const s=h.exports.useContext(e);if(!s)throw new Error("Seems like you have not used zustand provider as an ancestor.");return h.exports.useMemo(()=>({getState:s.getState,setState:s.setState,subscribe:s.subscribe,destroy:s.destroy}),[s])}}}const Jp=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var eh=e=>!Jp.has(e&&e.code);function Ms(e,t,a,r,s,o,i){try{var c=e[o](i),u=c.value}catch(m){a(m);return}c.done?t(u):Promise.resolve(u).then(r,s)}function _l(e){return function(){var t=this,a=arguments;return new Promise(function(r,s){var o=e.apply(t,a);function i(u){Ms(o,r,s,i,c,"next",u)}function c(u){Ms(o,r,s,i,c,"throw",u)}i(void 0)})}}function Us(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,r)}return a}function Vs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Us(Object(a),!0).forEach(function(r){th(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Us(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function th(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var br="axios-retry";function Nl(e){return!e.response&&Boolean(e.code)&&e.code!=="ECONNABORTED"&&eh(e)}var Il=["get","head","options"],nh=Il.concat(["put","delete"]);function es(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status>=500&&e.response.status<=599)}function ah(e){return e.config?es(e)&&Il.indexOf(e.config.method)!==-1:!1}function Rl(e){return e.config?es(e)&&nh.indexOf(e.config.method)!==-1:!1}function Dl(e){return Nl(e)||Rl(e)}function rh(){return 0}function sh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=Math.pow(2,e)*100,a=t*.2*Math.random();return t+a}function Bs(e){var t=e[br]||{};return t.retryCount=t.retryCount||0,e[br]=t,t}function oh(e,t){return Vs(Vs({},t),e[br])}function ih(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}function lh(e,t,a,r){return vr.apply(this,arguments)}function vr(){return vr=_l(function*(e,t,a,r){var s=a.retryCount<e&&t(r);if(typeof s=="object")try{var o=yield s;return o!==!1}catch{return!1}return s}),vr.apply(this,arguments)}function Bt(e,t){e.interceptors.request.use(a=>{var r=Bs(a);return r.lastRequestTime=Date.now(),a}),e.interceptors.response.use(null,function(){var a=_l(function*(r){var{config:s}=r;if(!s)return Promise.reject(r);var{retries:o=3,retryCondition:i=Dl,retryDelay:c=rh,shouldResetTimeout:u=!1,onRetry:m=()=>{}}=oh(s,t),p=Bs(s);if(yield lh(o,i,p,r)){p.retryCount+=1;var b=c(p.retryCount,r);if(ih(e,s),!u&&s.timeout&&p.lastRequestTime){var g=Date.now()-p.lastRequestTime;s.timeout=Math.max(s.timeout-g-b,1)}return s.transformRequest=[v=>v],m(p.retryCount,r,s),new Promise(v=>setTimeout(()=>v(e(s)),b))}return Promise.reject(r)});return function(r){return a.apply(this,arguments)}}())}Bt.isNetworkError=Nl;Bt.isSafeRequestError=ah;Bt.isIdempotentRequestError=Rl;Bt.isNetworkOrIdempotentRequestError=Dl;Bt.exponentialDelay=sh;Bt.isRetryableError=es;const Pl=1024*1024,ch=20*Pl,uh=10,dh=5;class Va{constructor(t,a){Y(this,"abortController");Y(this,"chunks",[]);Y(this,"uploadId");Y(this,"fileKey");Y(this,"chunkAxios");Y(this,"abortedByUser",!1);Y(this,"uploadedParts");this.file=t,this.config=a,this.abortController=new AbortController,this.chunkAxios=Xo.create(),Bt(this.chunkAxios,{retries:3})}get storageKey(){return`s3-multipart::${this.file.fingerprint}`}async start(){var r,s,o,i,c;const t=cr(this.storageKey);if(t&&await this.getUploadedParts(t),!((r=this.uploadedParts)!=null&&r.length)&&(await this.createMultipartUpload(),!this.uploadId))return;if(this.prepareChunks(),await this.uploadParts()==="done"){if(!await this.completeMultipartUpload())return;try{const m=await this.createFileEntry();if(m!=null&&m.fileEntry){(o=(s=this.config).onSuccess)==null||o.call(s,m==null?void 0:m.fileEntry),Xa(this.storageKey);return}}catch{}}this.abortController.signal.aborted||this.abortController.abort(),this.abortedByUser||(c=(i=this.config).onError)==null||c.call(i)}async abort(){this.abortedByUser=!0,this.abortController.abort(),await this.abortUploadOnS3()}async uploadParts(){const t=this.chunks.filter(r=>!r.done);if(!t.length)return Promise.resolve("done");const a=await this.batchSignUrls(t.slice(0,uh));if(!!a){for(;a.length;){const s=a.splice(0,dh).map(i=>this.uploadPartToS3(i));if(!(await Promise.all(s)).every(i=>i))return}return await this.uploadParts()}}async batchSignUrls(t){const a=await this.chunkAxios.post("api/v1/s3/multipart/batch-sign-part-urls",{partNumbers:t.map(r=>r.partNumber),uploadId:this.uploadId,key:this.fileKey},{signal:this.abortController.signal}).then(r=>r.data).catch(r=>{this.abortController.signal.aborted||this.abortController.abort()});return a==null?void 0:a.urls}async uploadPartToS3({url:t,partNumber:a}){const r=this.chunks.find(s=>s.partNumber===a);if(!!r)return this.chunkAxios.put(t,r.blob,{withCredentials:!1,signal:this.abortController.signal,onUploadProgress:s=>{var i,c;if(!s.lengthComputable)return;r.bytesUploaded=s.loaded;const o=this.chunks.reduce((u,m)=>u+m.bytesUploaded,0);(c=(i=this.config).onProgress)==null||c.call(i,{bytesUploaded:o,bytesTotal:this.file.size})}}).then(s=>{const o=s.headers.etag;if(o)return r.done=!0,r.etag=o,!0}).catch(s=>{!this.abortController.signal.aborted&&s!==void 0&&this.abortController.abort()})}async createMultipartUpload(){const t=await A.post("s3/multipart/create",{filename:this.file.name,mime:this.file.mime,size:this.file.size,extension:this.file.extension,...this.config.metadata}).then(a=>a.data).catch(a=>{var r,s;a.code!=="ERR_CANCELED"&&((s=(r=this.config).onError)==null||s.call(r,Qt(a)))});t&&(this.uploadId=t.uploadId,this.fileKey=t.key,Lr(this.storageKey,{createdAt:new Date().toISOString(),fileKey:this.fileKey,uploadId:this.uploadId}))}async getUploadedParts({fileKey:t,uploadId:a}){var s;const r=await A.post("s3/multipart/get-uploaded-parts",{key:t,uploadId:a}).then(o=>o.data).catch(()=>(Xa(this.storageKey),null));(s=r==null?void 0:r.parts)!=null&&s.length&&(this.uploadedParts=r.parts,this.uploadId=a,this.fileKey=t)}async completeMultipartUpload(){return A.post("s3/multipart/complete",{key:this.fileKey,uploadId:this.uploadId,parts:this.chunks.map(t=>({ETag:t.etag,PartNumber:t.partNumber}))}).then(t=>t.data).catch(()=>{var t,a;(a=(t=this.config).onError)==null||a.call(t),this.abortUploadOnS3()}).finally(()=>{Xa(this.storageKey)})}async createFileEntry(){return await A.post("s3/entries",{...this.config.metadata,clientMime:this.file.mime,clientName:this.file.name,filename:this.fileKey.split("/").pop(),size:this.file.size,clientExtension:this.file.extension}).then(t=>t.data).catch()}prepareChunks(){var r;this.chunks=[];const t=Math.max(5*Pl,Math.ceil(this.file.size/1e4)),a=Math.max(ch,t);if(this.file.size===0)this.chunks.push({blob:this.file.native,done:!1,partNumber:1,bytesUploaded:0});else{let s=1;for(let o=0;o<this.file.size;o+=a){const i=Math.min(this.file.size,o+a),c=(r=this.uploadedParts)==null?void 0:r.find(u=>u.PartNumber===s);this.chunks.push({blob:this.file.native.slice(o,i),done:!!c,partNumber:s,etag:c?c.ETag:void 0,bytesUploaded:c!=null&&c.Size?parseInt(c==null?void 0:c.Size):0}),s++}}}abortUploadOnS3(){return A.post("s3/multipart/abort",{key:this.fileKey,uploadId:this.uploadId})}static async create(t,a){return new Va(t,a)}}const Ll="3.7.2",mh=Ll,ph=typeof atob=="function",hh=typeof btoa=="function",dn=typeof Buffer=="function",Hs=typeof TextDecoder=="function"?new TextDecoder:void 0,qs=typeof TextEncoder=="function"?new TextEncoder:void 0,fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",xn=Array.prototype.slice.call(fh),Jn=(e=>{let t={};return e.forEach((a,r)=>t[a]=r),t})(xn),gh=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,we=String.fromCharCode.bind(String),js=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,t=a=>a)=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),El=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Tl=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Al=e=>{let t,a,r,s,o="";const i=e.length%3;for(let c=0;c<e.length;){if((a=e.charCodeAt(c++))>255||(r=e.charCodeAt(c++))>255||(s=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=a<<16|r<<8|s,o+=xn[t>>18&63]+xn[t>>12&63]+xn[t>>6&63]+xn[t&63]}return i?o.slice(0,i-3)+"===".substring(i):o},ts=hh?e=>btoa(e):dn?e=>Buffer.from(e,"binary").toString("base64"):Al,yr=dn?e=>Buffer.from(e).toString("base64"):e=>{let a=[];for(let r=0,s=e.length;r<s;r+=4096)a.push(we.apply(null,e.subarray(r,r+4096)));return ts(a.join(""))},aa=(e,t=!1)=>t?El(yr(e)):yr(e),bh=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?we(192|t>>>6)+we(128|t&63):we(224|t>>>12&15)+we(128|t>>>6&63)+we(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return we(240|t>>>18&7)+we(128|t>>>12&63)+we(128|t>>>6&63)+we(128|t&63)}},vh=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,zl=e=>e.replace(vh,bh),Ws=dn?e=>Buffer.from(e,"utf8").toString("base64"):qs?e=>yr(qs.encode(e)):e=>ts(zl(e)),Yt=(e,t=!1)=>t?El(Ws(e)):Ws(e),Gs=e=>Yt(e,!0),yh=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,kh=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return we((a>>>10)+55296)+we((a&1023)+56320);case 3:return we((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return we((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},$l=e=>e.replace(yh,kh),Fl=e=>{if(e=e.replace(/\s+/g,""),!gh.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,a="",r,s;for(let o=0;o<e.length;)t=Jn[e.charAt(o++)]<<18|Jn[e.charAt(o++)]<<12|(r=Jn[e.charAt(o++)])<<6|(s=Jn[e.charAt(o++)]),a+=r===64?we(t>>16&255):s===64?we(t>>16&255,t>>8&255):we(t>>16&255,t>>8&255,t&255);return a},ns=ph?e=>atob(Tl(e)):dn?e=>Buffer.from(e,"base64").toString("binary"):Fl,Ol=dn?e=>js(Buffer.from(e,"base64")):e=>js(ns(e),t=>t.charCodeAt(0)),Ml=e=>Ol(Ul(e)),xh=dn?e=>Buffer.from(e,"base64").toString("utf8"):Hs?e=>Hs.decode(Ol(e)):e=>$l(ns(e)),Ul=e=>Tl(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),kr=e=>xh(Ul(e)),wh=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Vl=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Bl=function(){const e=(t,a)=>Object.defineProperty(String.prototype,t,Vl(a));e("fromBase64",function(){return kr(this)}),e("toBase64",function(t){return Yt(this,t)}),e("toBase64URI",function(){return Yt(this,!0)}),e("toBase64URL",function(){return Yt(this,!0)}),e("toUint8Array",function(){return Ml(this)})},Hl=function(){const e=(t,a)=>Object.defineProperty(Uint8Array.prototype,t,Vl(a));e("toBase64",function(t){return aa(this,t)}),e("toBase64URI",function(){return aa(this,!0)}),e("toBase64URL",function(){return aa(this,!0)})},Sh=()=>{Bl(),Hl()},Ch={version:Ll,VERSION:mh,atob:ns,atobPolyfill:Fl,btoa:ts,btoaPolyfill:Al,fromBase64:kr,toBase64:Yt,encode:Yt,encodeURI:Gs,encodeURL:Gs,utob:zl,btou:$l,decode:kr,isValid:wh,fromUint8Array:aa,toUint8Array:Ml,extendString:Bl,extendUint8Array:Hl,extendBuiltins:Sh};function xr(e){return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(e)}function Ks(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _h(e,t,a){return t&&Ks(e.prototype,t),a&&Ks(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ih(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}function Rh(e){var t=ql();return function(){var r=Tn(e),s;if(t){var o=Tn(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return Dh(this,s)}}function Dh(e,t){if(t&&(xr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ph(e)}function Ph(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e){var t=typeof Map=="function"?new Map:void 0;return wr=function(r){if(r===null||!Lh(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,s)}function s(){return ra(r,arguments,Tn(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),En(s,r)},wr(e)}function ra(e,t,a){return ql()?ra=Reflect.construct.bind():ra=function(s,o,i){var c=[null];c.push.apply(c,o);var u=Function.bind.apply(s,c),m=new u;return i&&En(m,i.prototype),m},ra.apply(null,arguments)}function ql(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lh(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function En(e,t){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},En(e,t)}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Tn(e)}var ea=function(e){Ih(a,e);var t=Rh(a);function a(r){var s,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Nh(this,a),s=t.call(this,r),s.originalRequest=i,s.originalResponse=c,s.causingError=o,o!=null&&(r+=", caused by ".concat(o.toString())),i!=null){var u=i.getHeader("X-Request-ID")||"n/a",m=i.getMethod(),p=i.getURL(),b=c?c.getStatus():"n/a",g=c?c.getBody()||"":"n/a";r+=", originated from request (method: ".concat(m,", url: ").concat(p,", response code: ").concat(b,", response text: ").concat(g,", request id: ").concat(u,")")}return s.message=r,s}return _h(a)}(wr(Error));function Eh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,a=e==="x"?t:t&3|8;return a.toString(16)})}function jl(e,t){return $h(e)||zh(e,t)||Ah(e,t)||Th()}function Th(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ah(e,t){if(!!e){if(typeof e=="string")return Qs(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qs(e,t)}}function Qs(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function zh(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r=[],s=!0,o=!1,i,c;try{for(a=a.call(e);!(s=(i=a.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(u){o=!0,c=u}finally{try{!s&&a.return!=null&&a.return()}finally{if(o)throw c}}return r}}function $h(e){if(Array.isArray(e))return e}function Ys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,r)}return a}function jt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ys(Object(a),!0).forEach(function(r){Fh(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ys(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Fh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Oh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zs(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mh(e,t,a){return t&&Zs(e.prototype,t),a&&Zs(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var Uh={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},pa=function(){function e(t,a){Oh(this,e),"resume"in a&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=a,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return Mh(e,[{key:"findPreviousUploads",value:function(){var a=this;return this.options.fingerprint(this.file,this.options).then(function(r){return a._urlStorage.findUploadsByFingerprint(r)})}},{key:"resumeFromPreviousUpload",value:function(a){this.url=a.uploadUrl||null,this._parallelUploadUrls=a.parallelUploadUrls||null,this._urlStorageKey=a.urlStorageKey}},{key:"start",value:function(){var a=this,r=this.file;if(!r){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var s=this.options.retryDelays;if(s!=null&&Object.prototype.toString.call(s)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var o=0,i=["uploadUrl","uploadSize","uploadLengthDeferred"];o<i.length;o++){var c=i[o];if(this.options[c]){this._emitError(new Error("tus: cannot use the ".concat(c," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(r,this.options).then(function(u){return a._fingerprint=u,a._source?a._source:a.options.fileReader.openFile(r,a.options.chunkSize)}).then(function(u){if(a._source=u,a.options.uploadLengthDeferred)a._size=null;else if(a.options.uploadSize!=null){if(a._size=Number(a.options.uploadSize),Number.isNaN(a._size)){a._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(a._size=a._source.size,a._size==null){a._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}a.options.parallelUploads>1||a._parallelUploadUrls!=null?a._startParallelUpload():a._startSingleUpload()}).catch(function(u){a._emitError(u)})}},{key:"_startParallelUpload",value:function(){var a,r=this,s=this._size,o=0;this._parallelUploads=[];var i=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,c=(a=this.options.parallelUploadBoundaries)!==null&&a!==void 0?a:Bh(this._source.size,i);this._parallelUploadUrls&&c.forEach(function(p,b){p.uploadUrl=r._parallelUploadUrls[b]||null}),this._parallelUploadUrls=new Array(c.length);var u=c.map(function(p,b){var g=0;return r._source.slice(p.start,p.end).then(function(v){var y=v.value;return new Promise(function(w,k){var x=jt(jt({},r.options),{},{uploadUrl:p.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:jt(jt({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:w,onError:k,onProgress:function(C){o=o-g+C,g=C,r._emitProgress(o,s)},_onUploadUrlAvailable:function(){r._parallelUploadUrls[b]=S.url,r._parallelUploadUrls.filter(function(C){return Boolean(C)}).length===c.length&&r._saveUploadInUrlStorage()}}),S=new e(y,x);S.start(),r._parallelUploads.push(S)})})}),m;Promise.all(u).then(function(){m=r._openRequest("POST",r.options.endpoint),m.setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var p=Xs(r.options.metadata);return p!==""&&m.setHeader("Upload-Metadata",p),r._sendRequest(m,null)}).then(function(p){if(!Wt(p.getStatus(),200)){r._emitHttpError(m,p,"tus: unexpected response while creating upload");return}var b=p.getHeader("Location");if(b==null){r._emitHttpError(m,p,"tus: invalid or missing Location header");return}r.url=no(r.options.endpoint,b),"Created upload at ".concat(r.url),r._emitSuccess()}).catch(function(p){r._emitError(p)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(a){var r=this;return this._parallelUploads!=null&&this._parallelUploads.forEach(function(s){s.abort(a)}),this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!a||this.url==null?Promise.resolve():e.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(a,r,s,o){this._emitError(new ea(s,o,a,r))}},{key:"_emitError",value:function(a){var r=this;if(!this._aborted){if(this.options.retryDelays!=null){var s=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(s&&(this._retryAttempt=0),to(a,this._retryAttempt,this.options)){var o=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){r.start()},o);return}}if(typeof this.options.onError=="function")this.options.onError(a);else throw a}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(a,r){typeof this.options.onProgress=="function"&&this.options.onProgress(a,r)}},{key:"_emitChunkComplete",value:function(a,r,s){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(a,r,s)}},{key:"_createUpload",value:function(){var a=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length",1):r.setHeader("Upload-Length",this._size);var s=Xs(this.options.metadata);s!==""&&r.setHeader("Upload-Metadata",s);var o;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,o=this._addChunkToRequest(r)):o=this._sendRequest(r,null),o.then(function(i){if(!Wt(i.getStatus(),200)){a._emitHttpError(r,i,"tus: unexpected response while creating upload");return}var c=i.getHeader("Location");if(c==null){a._emitHttpError(r,i,"tus: invalid or missing Location header");return}if(a.url=no(a.options.endpoint,c),"Created upload at ".concat(a.url),typeof a.options._onUploadUrlAvailable=="function"&&a.options._onUploadUrlAvailable(),a._size===0){a._emitSuccess(),a._source.close();return}a._saveUploadInUrlStorage().then(function(){a.options.uploadDataDuringCreation?a._handleUploadResponse(r,i):(a._offset=0,a._performUpload())})}).catch(function(i){a._emitHttpError(r,null,"tus: failed to create upload",i)})}},{key:"_resumeUpload",value:function(){var a=this,r=this._openRequest("HEAD",this.url),s=this._sendRequest(r,null);s.then(function(o){var i=o.getStatus();if(!Wt(i,200)){if(i===423){a._emitHttpError(r,o,"tus: upload is currently locked; retry later");return}if(Wt(i,400)&&a._removeFromUrlStorage(),!a.options.endpoint){a._emitHttpError(r,o,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}a.url=null,a._createUpload();return}var c=parseInt(o.getHeader("Upload-Offset"),10);if(Number.isNaN(c)){a._emitHttpError(r,o,"tus: invalid or missing offset value");return}var u=parseInt(o.getHeader("Upload-Length"),10);if(Number.isNaN(u)&&!a.options.uploadLengthDeferred){a._emitHttpError(r,o,"tus: invalid or missing length value");return}typeof a.options._onUploadUrlAvailable=="function"&&a.options._onUploadUrlAvailable(),a._saveUploadInUrlStorage().then(function(){if(c===u){a._emitProgress(u,u),a._emitSuccess();return}a._offset=c,a._performUpload()})}).catch(function(o){a._emitHttpError(r,null,"tus: failed to resume upload",o)})}},{key:"_performUpload",value:function(){var a=this;if(!this._aborted){var r;this.options.overridePatchMethod?(r=this._openRequest("POST",this.url),r.setHeader("X-HTTP-Method-Override","PATCH")):r=this._openRequest("PATCH",this.url),r.setHeader("Upload-Offset",this._offset);var s=this._addChunkToRequest(r);s.then(function(o){if(!Wt(o.getStatus(),200)){a._emitHttpError(r,o,"tus: unexpected response while uploading chunk");return}a._handleUploadResponse(r,o)}).catch(function(o){a._aborted||a._emitHttpError(r,null,"tus: failed to upload chunk at offset ".concat(a._offset),o)})}}},{key:"_addChunkToRequest",value:function(a){var r=this,s=this._offset,o=this._offset+this.options.chunkSize;return a.setProgressHandler(function(i){r._emitProgress(s+i,r._size)}),a.setHeader("Content-Type","application/offset+octet-stream"),(o===1/0||o>this._size)&&!this.options.uploadLengthDeferred&&(o=this._size),this._source.slice(s,o).then(function(i){var c=i.value,u=i.done;return r.options.uploadLengthDeferred&&u&&(r._size=r._offset+(c&&c.size?c.size:0),a.setHeader("Upload-Length",r._size)),c===null?r._sendRequest(a):(r._emitProgress(r._offset,r._size),r._sendRequest(a,c))})}},{key:"_handleUploadResponse",value:function(a,r){var s=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(s)){this._emitHttpError(a,r,"tus: invalid or missing offset value");return}if(this._emitProgress(s,this._size),this._emitChunkComplete(s-this._offset,s,this._size),this._offset=s,s===this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(a,r){var s=Js(a,r,this.options);return this._req=s,s}},{key:"_removeFromUrlStorage",value:function(){var a=this;!this._urlStorageKey||(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(r){a._emitError(r)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var a=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var r={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?r.parallelUploadUrls=this._parallelUploadUrls:r.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,r).then(function(s){a._urlStorageKey=s})}},{key:"_sendRequest",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return eo(a,r,this.options)}}],[{key:"terminate",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Js("DELETE",a,r);return eo(s,null,r).then(function(o){if(o.getStatus()!==204)throw new ea("tus: unexpected response while terminating upload",null,s,o)}).catch(function(o){if(o instanceof ea||(o=new ea("tus: failed to terminate upload",o,s,null)),!to(o,0,r))throw o;var i=r.retryDelays[0],c=r.retryDelays.slice(1),u=jt(jt({},r),{},{retryDelays:c});return new Promise(function(m){return setTimeout(m,i)}).then(function(){return e.terminate(a,u)})})}}]),e}();function Xs(e){return Object.entries(e).map(function(t){var a=jl(t,2),r=a[0],s=a[1];return"".concat(r," ").concat(Ch.encode(String(s)))}).join(",")}function Wt(e,t){return e>=t&&e<t+100}function Js(e,t,a){var r=a.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var s=a.headers||{};if(Object.entries(s).forEach(function(i){var c=jl(i,2),u=c[0],m=c[1];r.setHeader(u,m)}),a.addRequestId){var o=Eh();r.setHeader("X-Request-ID",o)}return r}function eo(e,t,a){var r=typeof a.onBeforeRequest=="function"?Promise.resolve(a.onBeforeRequest(e)):Promise.resolve();return r.then(function(){return e.send(t).then(function(s){var o=typeof a.onAfterResponse=="function"?Promise.resolve(a.onAfterResponse(e,s)):Promise.resolve();return o.then(function(){return s})})})}function Vh(){var e=!0;return typeof window<"u"&&"navigator"in window&&window.navigator.onLine===!1&&(e=!1),e}function to(e,t,a){if(a.retryDelays==null||t>=a.retryDelays.length||e.originalRequest==null)return!1;if(a&&typeof a.onShouldRetry=="function")return a.onShouldRetry(e,t,a);var r=e.originalResponse?e.originalResponse.getStatus():0;return(!Wt(r,400)||r===409||r===423)&&Vh()}function no(e,t){return new Qu(t,e).toString()}function Bh(e,t){for(var a=Math.floor(e/t),r=[],s=0;s<t;s++)r.push({start:a*s,end:a*(s+1)});return r[t-1].end=e,r}pa.defaultOptions=Uh;function Hh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ao(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qh(e,t,a){return t&&ao(e.prototype,t),a&&ao(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var jh=function(){function e(){Hh(this,e)}return qh(e,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(a){return Promise.resolve([])}},{key:"removeUpload",value:function(a){return Promise.resolve()}},{key:"addUpload",value:function(a,r){return Promise.resolve(null)}}]),e}();function Wh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gh(e,t,a){return t&&ro(e.prototype,t),a&&ro(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var Sr=!1;try{Sr="localStorage"in window;var so="tusSupport";localStorage.setItem(so,localStorage.getItem(so))}catch(e){if(e.code===e.SECURITY_ERR||e.code===e.QUOTA_EXCEEDED_ERR)Sr=!1;else throw e}var Kh=Sr,Qh=function(){function e(){Wh(this,e)}return Gh(e,[{key:"findAllUploads",value:function(){var a=this._findEntries("tus::");return Promise.resolve(a)}},{key:"findUploadsByFingerprint",value:function(a){var r=this._findEntries("tus::".concat(a,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function(a){return localStorage.removeItem(a),Promise.resolve()}},{key:"addUpload",value:function(a,r){var s=Math.round(Math.random()*1e12),o="tus::".concat(a,"::").concat(s);return localStorage.setItem(o,JSON.stringify(r)),Promise.resolve(o)}},{key:"_findEntries",value:function(a){for(var r=[],s=0;s<localStorage.length;s++){var o=localStorage.key(s);if(o.indexOf(a)===0)try{var i=JSON.parse(localStorage.getItem(o));i.urlStorageKey=o,r.push(i)}catch{}}return r}}]),e}();function as(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rs(e,t,a){return t&&oo(e.prototype,t),a&&oo(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var Yh=function(){function e(){as(this,e)}return rs(e,[{key:"createRequest",value:function(a,r){return new Zh(a,r)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Zh=function(){function e(t,a){as(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,a,!0),this._method=t,this._url=a,this._headers={}}return rs(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(a,r){this._xhr.setRequestHeader(a,r),this._headers[a]=r}},{key:"getHeader",value:function(a){return this._headers[a]}},{key:"setProgressHandler",value:function(a){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(r){!r.lengthComputable||a(r.loaded)})}},{key:"send",value:function(){var a=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(s,o){a._xhr.onload=function(){s(new Xh(a._xhr))},a._xhr.onerror=function(i){o(i)},a._xhr.send(r)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Xh=function(){function e(t){as(this,e),this._xhr=t}return rs(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(a){return this._xhr.getResponseHeader(a)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Wl=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function Jh(e){return new Promise(function(t,a){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var s=r.response;t(s)},r.onerror=function(s){a(s)},r.open("GET",e),r.send()})}var ef=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function tf(e){return new Promise(function(t,a){var r=new FileReader;r.onload=function(){var s=new Uint8Array(r.result);t({value:s})},r.onerror=function(s){a(s)},r.readAsArrayBuffer(e)})}function nf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function af(e,t,a){return t&&io(e.prototype,t),a&&io(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var lo=function(){function e(t){nf(this,e),this._file=t,this.size=t.size}return af(e,[{key:"slice",value:function(a,r){if(ef())return tf(this._file.slice(a,r));var s=this._file.slice(a,r);return Promise.resolve({value:s})}},{key:"close",value:function(){}}]),e}();function rf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function co(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sf(e,t,a){return t&&co(e.prototype,t),a&&co(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function uo(e){return e===void 0?0:e.size!==void 0?e.size:e.length}function of(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var a=new e.constructor(e.length+t.length);return a.set(e),a.set(t,e.length),a}throw new Error("Unknown data type")}var lf=function(){function e(t){rf(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return sf(e,[{key:"slice",value:function(a,r){return a<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(a,r)}},{key:"_readUntilEnoughDataOrDone",value:function(a,r){var s=this,o=r<=this._bufferOffset+uo(this._buffer);if(this._done||o){var i=this._getDataFromBuffer(a,r),c=i==null?this._done:!1;return Promise.resolve({value:i,done:c})}return this._reader.read().then(function(u){var m=u.value,p=u.done;return p?s._done=!0:s._buffer===void 0?s._buffer=m:s._buffer=of(s._buffer,m),s._readUntilEnoughDataOrDone(a,r)})}},{key:"_getDataFromBuffer",value:function(a,r){a>this._bufferOffset&&(this._buffer=this._buffer.slice(a-this._bufferOffset),this._bufferOffset=a);var s=uo(this._buffer)===0;return this._done&&s?null:this._buffer.slice(0,r-a)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function cf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mo(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uf(e,t,a){return t&&mo(e.prototype,t),a&&mo(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var df=function(){function e(){cf(this,e)}return uf(e,[{key:"openFile",value:function(a,r){return Wl()&&a&&typeof a.uri<"u"?Jh(a.uri).then(function(s){return new lo(s)}).catch(function(s){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(s))}):typeof a.slice=="function"&&typeof a.size<"u"?Promise.resolve(new lo(a)):typeof a.read=="function"?(r=Number(r),Number.isFinite(r)?Promise.resolve(new lf(a,r)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),e}();function mf(e,t){return Wl()?Promise.resolve(pf(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}function pf(e,t){var a=e.exif?hf(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",a,t.endpoint].join("/")}function hf(e){var t=0;if(e.length===0)return t;for(var a=0;a<e.length;a++){var r=e.charCodeAt(a);t=(t<<5)-t+r,t&=t}return t}function Cr(e){return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(e)}function ff(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function po(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gf(e,t,a){return t&&po(e.prototype,t),a&&po(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function bf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_r(e,t)}function _r(e,t){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_r(e,t)}function vf(e){var t=xf();return function(){var r=ha(e),s;if(t){var o=ha(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return yf(this,s)}}function yf(e,t){if(t&&(Cr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kf(e)}function kf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ha(e){return ha=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ha(e)}function ho(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,r)}return a}function Gt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ho(Object(a),!0).forEach(function(r){wf(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ho(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function wf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fo=Gt(Gt({},pa.defaultOptions),{},{httpStack:new Yh,fileReader:new df,urlStorage:Kh?new Qh:new jh,fingerprint:mf}),Sf=function(e){bf(a,e);var t=vf(a);function a(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ff(this,a),s=Gt(Gt({},fo),s),t.call(this,r,s)}return gf(a,null,[{key:"terminate",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o=Gt(Gt({},fo),o),pa.terminate(s,o)}}]),a}(pa);class Ba{constructor(t){this.upload=t}start(){this.upload.start()}abort(){return this.upload.abort(!0)}static async create(t,{onProgress:a,onSuccess:r,onError:s,metadata:o,chunkSize:i,baseUrl:c}){const u=["tus",t.fingerprint,"drive"].join("-"),m=new Sf(t.native,{fingerprint:()=>Promise.resolve(u),removeFingerprintOnSuccess:!0,endpoint:`${c}/api/v1/tus/upload`,chunkSize:i,retryDelays:[0,3e3,5e3,1e4,2e4],overridePatchMethod:!0,metadata:{name:window.btoa(t.id),clientName:t.name,clientExtension:t.extension,clientMime:t.mime||"",clientSize:`${t.size}`,...o},headers:{"X-XSRF-TOKEN":ku.getCookie("XSRF-TOKEN")},onError:b=>{var g;if("originalResponse"in b)try{const v=(g=JSON.parse(b.originalResponse.getBody()))==null?void 0:g.message;s==null||s(v)}catch{s==null||s()}else s==null||s()},onProgress(b,g){a==null||a({bytesUploaded:b,bytesTotal:g})},onSuccess:async()=>{var g;const b=(g=m.url)==null?void 0:g.split("/").pop();try{if(b){const v=await Cf(b);r==null||r(v.fileEntry)}}catch(v){localStorage.removeItem(u),s==null||s(Qt(v))}}}),p=await m.findPreviousUploads();return p.length&&m.resumeFromPreviousUpload(p[0]),new Ba(m)}}function Cf(e){return A.post("tus/entries",{uploadKey:e}).then(t=>t.data)}var tn=(e=>(e.public="public",e.uploads="uploads",e))(tn||{});class ss{constructor(t,a){Y(this,"abortController");Y(this,"presignedRequest");this.file=t,this.config=a,this.abortController=new AbortController}async start(){var r,s,o,i;if(this.presignedRequest=await this.presignPostUrl(),!this.presignedRequest||await this.uploadFileToS3()!=="uploaded")return;const a=await this.createFileEntry();a!=null&&a.fileEntry?(s=(r=this.config).onSuccess)==null||s.call(r,a.fileEntry):this.abortController.signal||(i=(o=this.config).onError)==null||i.call(o)}abort(){return this.abortController.abort(),Promise.resolve()}presignPostUrl(){var t;return A.post("s3/simple/presign",{filename:this.file.name,mime:this.file.mime,disk:(t=this.config.metadata)==null?void 0:t.disk,size:this.file.size,extension:this.file.extension,...this.config.metadata},{signal:this.abortController.signal}).then(a=>a.data).catch(a=>{var r,s;a.code!=="ERR_CANCELED"&&((s=(r=this.config).onError)==null||s.call(r,Qt(a)))})}uploadFileToS3(){const{url:t,acl:a}=this.presignedRequest;return Xo.put(t,this.file.native,{signal:this.abortController.signal,withCredentials:!1,headers:{"Content-Type":this.file.mime,"x-amz-acl":a},onUploadProgress:r=>{var s,o;r.lengthComputable&&((o=(s=this.config).onProgress)==null||o.call(s,{bytesUploaded:r.loaded,bytesTotal:r.total}))}}).then(()=>"uploaded").catch(r=>{var s,o;r.code!=="ERR_CANCELED"&&((o=(s=this.config).onError)==null||o.call(s,Qt(r)))})}async createFileEntry(){return await A.post("s3/entries",{...this.config.metadata,clientMime:this.file.mime,clientName:this.file.name,filename:this.presignedRequest.key.split("/").pop(),size:this.file.size,clientExtension:this.file.extension}).then(t=>t.data).catch(t=>{var a,r;t.code!=="ERR_CANCELED"&&((r=(a=this.config).onError)==null||r.call(a,Qt(t)))})}static async create(t,a){return new ss(t,a)}}class os{constructor(t,a){Y(this,"abortController");this.file=t,this.config=a,this.abortController=new AbortController}async start(){const t=new FormData,{onSuccess:a,onError:r,onProgress:s,metadata:o}=this.config;t.set("file",this.file.native),o&&Object.entries(o).forEach(([c,u])=>{t.set(c,`${u}`)});const i=await A.post("file-entries",t,{onUploadProgress:c=>{c.lengthComputable&&(s==null||s({bytesUploaded:c.loaded,bytesTotal:c.total}))},signal:this.abortController.signal,headers:{"Content-Type":"multipart/form-data"}}).catch(c=>{c.code!=="ERR_CANCELED"&&(r==null||r(Qt(c)))});this.abortController.signal.aborted||i&&i.data.fileEntry&&(a==null||a(i.data.fileEntry))}abort(){return this.abortController.abort(),Promise.resolve()}static async create(t,a){return new os(t,a)}}class _f{constructor(){Y(this,"aliveTimer");Y(this,"isDone",!1);Y(this,"timeout",3e4);Y(this,"timeoutHandler",null)}progress(){this.isDone||!this.timeoutHandler||this.timeout>0&&(clearTimeout(this.aliveTimer),this.aliveTimer=setTimeout(this.timeoutHandler,this.timeout))}done(){this.isDone||(clearTimeout(this.aliveTimer),this.aliveTimer=null,this.isDone=!0)}}async function Nf(e,t){var m,p;const a=Xt().settings,r=e.options,s=e.file;if(r!=null&&r.restrictions){const b=xu(s,r.restrictions);if(b)return t.updateFileUpload(s.id,{errorMessage:b,status:"failed",request:void 0,timer:void 0}),r.showToastOnRestrictionFail&&Z.danger(b),t.runQueue(),null}const o=new _f,i={metadata:{...r==null?void 0:r.metadata,relativePath:s.relativePath,disk:((m=r==null?void 0:r.metadata)==null?void 0:m.disk)||tn.uploads,parentId:((p=r==null?void 0:r.metadata)==null?void 0:p.parentId)||""},chunkSize:a.uploads.chunk_size,baseUrl:a.base_url,onError:b=>{var g;t.updateFileUpload(s.id,{errorMessage:b,status:"failed"}),t.runQueue(),o.done(),(g=r==null?void 0:r.onError)==null||g.call(r,b)},onSuccess:b=>{var g;t.updateFileUpload(s.id,{status:"completed",entry:b}),t.runQueue(),o.done(),(g=r==null?void 0:r.onSuccess)==null||g.call(r,b)},onProgress:({bytesUploaded:b,bytesTotal:g})=>{var y;const v=b/g*100;t.updateFileUpload(s.id,{percentage:v,bytesUploaded:b}),o.progress(),(y=r==null?void 0:r.onProgress)==null||y.call(r,{bytesUploaded:b,bytesTotal:g})}},u=await Df(s,i).create(s,i);return o.timeoutHandler=()=>{u.abort(),t.updateFileUpload(s.id,{status:"failed",errorMessage:f("Upload timed out")}),t.runQueue()},t.updateFileUpload(s.id,{status:"inProgress"}),u.start(),u}const Gl=1024*1024,If=4*Gl,Rf=100*Gl,Df=(e,t)=>{var o;const a=Xt().settings,s=(((o=t.metadata)==null?void 0:o.disk)||tn.uploads)===tn.uploads?a.uploads.uploads_driver:a.uploads.public_driver;return(s==null?void 0:s.endsWith("s3"))&&a.uploads.s3_direct_upload?e.size>=Rf?Va:ss:e.size>=If&&!a.uploads.disable_tus?Ba:os};function go(e,t){return{file:e instanceof Rn?e:new Rn(e),percentage:0,bytesUploaded:0,status:"pending",options:t||{}}}wu();const Pf=({settings:e})=>Mr()(Ur((t,a)=>({concurrency:3,fileUploads:new Map,activeUploadsCount:0,completedUploadsCount:0,clearInactive:()=>{t(r=>{r.fileUploads.forEach((s,o)=>{s.status!=="inProgress"&&r.fileUploads.delete(o)})}),a().runQueue()},abortUpload:r=>{var o;const s=a().fileUploads.get(r);s&&((o=s.request)==null||o.abort(),a().updateFileUpload(r,{status:"aborted"}),a().runQueue())},updateFileUpload:(r,s)=>{t(o=>{const i=o.fileUploads.get(r);i&&(o.fileUploads.set(r,{...i,...s}),"status"in s&&nr(o))})},uploadSingle:(r,s)=>{const o=go(r,s),i=new Map(a().fileUploads);return i.set(o.file.id,o),t(c=>(nr(c),{fileUploads:i})),a().runQueue(),o.file.id},uploadMultiple:(r,s)=>{const o=new Map(a().fileUploads);return[...r].forEach(i=>{const c=go(i,s);o.set(c.file.id,c)}),t(i=>(nr(i),{fileUploads:o})),console.log(o),a().runQueue(),[...o.keys()]},runQueue:async()=>{const r=[...a().fileUploads.values()],s=r.filter(i=>i.status==="inProgress");let o=a().concurrency;if(s.filter(i=>i.file.relativePath||i.request instanceof Va||i.request instanceof Ba&&e.uploads.chunk_size&&i.file.size>e.uploads.chunk_size).length&&(o=1),s.length<o){const i=r.find(c=>c.status==="pending");i&&await Nf(i,a())}}}))),nr=e=>{e.completedUploadsCount=[...e.fileUploads.values()].filter(t=>t.status==="completed").length,e.activeUploadsCount=[...e.fileUploads.values()].filter(t=>t.status==="inProgress"||t.status==="pending").length},{Provider:Lf,useStore:Ef}=Xp(),ar=Ef;function jn({children:e}){const t=ge();return n(Lf,{createStore:()=>Pf({settings:t}),children:e})}function Tf(e){return A.post("file-entries/delete",e).then(t=>t.data)}function Af(){return G(e=>Tf(e),{onError:e=>Le(e)})}function Kl(){const e=Af(),t=h.exports.useRef(),a=ar(u=>u.uploadSingle),r=ar(u=>u.updateFileUpload),s=ar(u=>t.current?u.fileUploads.get(t.current):null),o=h.exports.useCallback((u,m)=>{t.current=a(u,m)},[a]),i=h.exports.useCallback(async u=>{var p;const m=await Su({types:(p=u==null?void 0:u.restrictions)==null?void 0:p.allowedFileTypes});o(m[0],u)},[o]),c=h.exports.useCallback(({onSuccess:u,entryPath:m})=>{var b,g,v;const p=()=>{s&&r(s.file.id,{...s,entry:void 0}),u()};if(!m&&!((b=s==null?void 0:s.entry)!=null&&b.id)){p();return}e.mutate({paths:m?[m]:void 0,entryIds:(g=s==null?void 0:s.entry)!=null&&g.id?[(v=s==null?void 0:s.entry)==null?void 0:v.id]:void 0,deleteForever:!0},{onSuccess:p})},[e,s,r]);return{uploadFile:o,selectAndUploadFile:i,percentage:(s==null?void 0:s.percentage)||0,uploadStatus:s==null?void 0:s.status,entry:s==null?void 0:s.entry,deleteEntry:c,isDeletingEntry:e.isLoading}}function Wn({children:e,...t}){const{field:{onChange:a,onBlur:r,value:s=[],ref:o},fieldState:{invalid:i,error:c}}=yt({name:t.name}),u={onChange:a,onBlur:r,value:s,invalid:i,errorMessage:c==null?void 0:c.message};return n(ii,{ref:o,...qe(u,t),children:e})}function zf({hideTitle:e}){return d("div",{children:[d("div",{className:"block md:flex gap-24 mb-24",children:[n(jn,{children:n($f,{})}),d("div",{className:"flex-auto my-24 md:my-0",children:[!e&&n(E,{name:"name",label:n(l,{message:"Title"}),className:"mb-24"}),n(E,{inputElementType:"textarea",name:"description",rows:2,label:n(l,{message:"description"})})]})]}),n(Wn,{name:"tags",label:n(l,{message:"Tags"}),valueKey:"name"})]})}function $f(){const{uploadFile:e,uploadStatus:t}=Kl(),{setValue:a,watch:r}=ct(),s=r("image");return n(Cu,{className:"flex-shrink-0",imageRadius:"rounded",defaultImage:n("div",{className:"bg-alt w-full h-full rounded"}),value:s,onUpload:o=>{e(o,{metadata:{disk:tn.public,diskPrefix:"link"},restrictions:{maxFileSize:_u,allowedFileTypes:[dr.image]},showToastOnRestrictionFail:!0,onSuccess:({url:i})=>{a("image",i,{shouldDirty:!0})}})},onRemove:()=>{a("image",null,{shouldDirty:!0})},isLoading:t==="inProgress"})}const Ff=B(n("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z"}),"AccountTreeOutlined");function Of(){const{trans:e}=V(),{disabled:t}=Vt("utm");return d(qn,{title:n(l,{message:"UTM tags"}),description:n(l,{message:"Add UTMs to track web traffic in analytics tools."}),upgradeMessage:t&&n(l,{message:"Your current plan doesn't include UTM functionality."}),children:[d("div",{className:"block md:flex gap-24 items-center mt-24",children:[n(E,{name:"utm.source",label:n(l,{message:"Source"}),placeholder:e(f("e.g: adwords, google, facebook")),className:"mb-24 flex-auto",disabled:t}),n(E,{name:"utm.medium",label:n(l,{message:"Medium"}),placeholder:e(f("e.g: banner, email, social post")),className:"mb-24 flex-auto",disabled:t})]}),d("div",{className:"block md:flex gap-24 items-center",children:[n(E,{name:"utm.campaign",label:n(l,{message:"Campaign"}),placeholder:e(f("e.g: holiday special, birthday promo")),className:"mb-24 flex-auto",disabled:t}),n(E,{name:"utm.term",label:n(l,{message:"Term"}),placeholder:e(f("Use to identify ppc keywords")),className:"mb-24 flex-auto",disabled:t})]}),n(E,{name:"utm.content",label:n(l,{message:"Content"}),placeholder:e(f("Use to differentiate ads or words on a page")),className:"mb-24",disabled:t}),n(Mf,{})]})}function Mf(){const{fields:e,append:t,remove:a}=Da({name:"utm_custom"}),{disabled:r}=Vt("utm");return d(qn,{title:n(l,{message:"Custom parameters"}),description:n(l,{message:"Add query parameters to track web traffic in analytics tools."}),upgradeMessage:r&&n(l,{message:"Your current plan doesn't include query parameters functionality."}),children:[e.map((s,o)=>d("div",{className:"block md:flex items-end gap-14",children:[n(E,{required:!0,name:`utm_custom.${o}.key`,label:n(l,{message:"Key"}),className:"flex-auto mt-24",disabled:r}),n(E,{required:!0,name:`utm_custom.${o}.value`,label:n(l,{message:"Value"}),className:"flex-auto mt-24",disabled:r}),n(Uf,{onClick:()=>a(o)})]},s.id)),n(_,{className:"mb-24 mt-12",variant:"text",color:"primary",startIcon:n(Rt,{}),onClick:()=>{t({key:"",value:""})},disabled:r,children:n(l,{message:"Add parameter"})})]})}function Uf({onClick:e}){return Te()?n("div",{className:"mt-12",children:n(_,{variant:"outline",color:"danger",size:"xs",onClick:e,children:n(l,{message:"Remove"})})}):n(F,{color:"danger",onClick:e,children:n(Ze,{})})}function Ql(e){const{custom_domains:t,base_url:a}=ge();return h.exports.useMemo(()=>{var s;const r=t==null?void 0:t.default_host;if(r){const o=(s=e==null?void 0:e.find(i=>i.host===r))==null?void 0:s.host;if(o)return o}return a.replace(/\/$/,"").replace(/(^\w+:|^)\/\//,"")},[t,a,e])}function is({...e}){var o;const{data:t}=un(),a=Ql(t==null?void 0:t.domains),{custom_domains:r}=ge(),s=(t==null?void 0:t.domains)||[];return!(r!=null&&r.allow_select)||!s.length?null:d(Pe,{selectionMode:"single",label:n(l,{message:"Domain"}),...e,children:[r.allow_all_option&&n(T,{value:void 0,children:n(l,{message:"All my domains (including default)"})},"all"),n(T,{value:0,startIcon:n(gt,{url:a}),children:ot(a)},"default"),(o=t==null?void 0:t.domains)==null?void 0:o.map(i=>i.host===a?null:n(T,{value:i.id,startIcon:n(gt,{url:i.host}),children:ot(i.host)},i.id))]})}function ls({defaultExpanded:e,multipleLinks:t,hiddenFields:a=[],linkName:r=n(l,{message:"link"})}){const{links:{retargeting:s}}=ge(),[o,i]=h.exports.useState(e||[]);return d(cn,{className:"-ml-14 -mr-14",mode:"multiple",variant:"minimal",expandedValues:o,onExpandedChange:c=>{i(c)},children:[n(Me,{value:"options",label:n(l,{message:"Settings"}),startIcon:n(wl,{}),children:n(Vf,{multipleLinks:t,hiddenFields:a,linkName:r})}),n(Me,{value:"restrictions",label:n(l,{message:"Restrictions"}),startIcon:n(Zr,{}),children:n(Bp,{linkName:r})}),s&&n(Me,{value:"retargeting",label:n(l,{message:"Retargeting"}),startIcon:n(jp,{}),children:n(Wp,{})}),!a.includes("seo")&&n(Me,{label:n(l,{message:"SEO"}),startIcon:n(Zp,{}),value:"seo",children:n(zf,{hideTitle:a==null?void 0:a.includes("title")})}),n(Me,{value:"utm",label:n(l,{message:"UTM"}),startIcon:n(Ff,{}),children:n(Of,{})})]})}function Vf({multipleLinks:e,hiddenFields:t,linkName:a}){const{links:{enable_type:r,pixels:s}}=ge(),o=e?2:1,i=t.includes("groups"),c=t.includes("type"),u=t.includes("enabled");return d(h.exports.Fragment,{children:[r&&!c&&n(Ap,{}),n(is,{name:"domain_id",className:"mb-24",description:n(l,{message:"Select which domain should [one :name|other :names] be accessible with.",values:{name:a,count:o}})}),!i&&n(Bf,{multipleLinks:e}),s&&n(Hf,{multipleLinks:e,linkName:a}),!u&&n(Je,{name:"active",description:n(l,{message:"When [one :name is|other :names are] disabled, 404 page will be shown when short URL is visited.",values:{name:a,count:o}}),children:n(l,{message:"Enabled"})})]})}function Bf({multipleLinks:e}){const{data:t}=un();return n(Wn,{suggestions:t==null?void 0:t.groups,openMenuOnFocus:!0,allowCustomValue:!1,showDropdownArrow:!0,className:"mb-24",name:"groups",label:n(l,{message:"Groups"}),description:n(l,{message:"Which groups should [one link|other these links] belong to.",values:{count:e?2:1}}),children:a=>n(T,{value:a.id,children:a.name})})}function Hf({multipleLinks:e,linkName:t}){const{data:a}=un();return n(Wn,{suggestions:a==null?void 0:a.pixels,openMenuOnFocus:!0,className:"mb-24",name:"pixels",label:n(l,{message:"Pixels"}),description:n(l,{message:"Which tracking pixels should be used for [one this :name|other these :names].",values:{count:e?2:1,name:t}}),children:r=>n(T,{value:r.id,children:r.name})})}function qf({suffix:e,host:t,value:a,onChange:r,className:s,inputRef:o,onInputBlur:i,showLinkIcon:c=!0,pattern:u,minLength:m,maxLength:p,hideButton:b}){const{base_url:g}=ge(),v=e?`/${e}`:"",[y,w]=h.exports.useState(!1),[k,x]=h.exports.useState(a);t=t||g,h.exports.useEffect(()=>{x(a)},[a]);const S=()=>{y?(w(!1),k&&(r==null||r(k))):w(!0)};return d("div",{className:N("flex items-center",s),children:[c&&n(Jo,{className:"icon-md text-muted"}),d("div",{className:"text-primary ml-6 mr-14",children:[t,v,!y&&k&&d(h.exports.Fragment,{children:[n("span",{children:"/"}),n("span",{className:"font-medium",children:k})]})]}),y&&n(rn,{pattern:u,minLength:m,maxLength:p,onKeyDown:R=>{R.key==="Enter"&&S()},ref:o,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:k,onBlur:i,onChange:R=>{x(R.target.value)}}),!b&&n(_,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{S()},children:y?n(l,{message:"Save"}):n(l,{message:"Edit"})})]})}function Ha({form:e,name:t}){var b,g;const{links:{alias_min:a,alias_max:r},custom_domains:s}=ge(),{disabled:o}=Vt("alias"),{watch:i,setValue:c,formState:u}=e,m=i("alias")||i("hash"),p=((b=u.errors.alias)==null?void 0:b.message)||((g=u.errors.hash)==null?void 0:g.message);return d("div",{className:"mb-24",children:[d("div",{className:"flex items-center",children:[n(qf,{host:s==null?void 0:s.default_host,pattern:"[A-Za-z0-9_-]+",minLength:a,maxLength:r,value:m,onChange:v=>{c(t,v)},hideButton:o}),o&&n(Xr,{message:n(l,{message:"Your current plan does not include alias editing."})})]}),p&&n("div",{className:"text-xs text-danger mt-6",children:p})]})}function Yl({form:e,onSubmit:t,formId:a,showButtonLabelField:r,hiddenFields:s}){const{clearErrors:o}=e,{trans:i}=V(),{links:{min_len:c,max_len:u}}=ge(),m=s==null?void 0:s.includes("alias");return d(ke,{form:e,onSubmit:p=>{ei(p.long_url)?t(p):e.setError("long_url",{message:i(f("This url is invalid."))})},onBeforeSubmit:()=>{o("alias")},id:a,children:[r&&n(E,{name:"name",label:n(l,{message:"Button label"}),className:"mb-24 flex-auto",placeholder:i(f("e.g. My Webpage")),autoFocus:!0}),n(E,{label:n(l,{message:"Destination URL"}),name:"long_url",placeholder:"https://example.com",autoComplete:"off",spellCheck:"false",required:!0,className:N(m?"mb-24":"mb-12"),autoFocus:!r,minLength:c,maxLength:u}),!m&&n(Ha,{form:e,name:"alias"}),n(ls,{hiddenFields:s})]})}const jf=["source","medium","campaign","term","content"];function cs(e){var a;let t={...e,utm:null,groups:null,pixels:null,tags:null};return t=Wf(t,e),t.pixels=e.pixels?e.pixels.map(r=>r.id):[],t.tags=(a=e.tags)==null?void 0:a.map(r=>typeof r=="string"?r:r.name),t}function Wf(e,t){var r;if(!t.utm&&!t.utm_custom)return e;const a=ti(t.utm||{});return(r=t.utm_custom)==null||r.forEach(({key:s,value:o})=>{a[s]=o}),e.utm=new URLSearchParams(a).toString(),e}function us(e){var a;const t=cs(e);return t.groups=(a=e.groups)==null?void 0:a.map(r=>r.id),t}function Gf(e,{endpoint:t,invalidateQueries:a=!0}={}){const{trans:r}=V();return G(s=>Kf(s,t),{onSuccess:()=>{Z.positive(r(f("Link created"))),a&&(j.invalidateQueries(J("link")),j.invalidateQueries(J("link-group")),j.invalidateQueries(J("biolink")))},onError:s=>Ne(s,e)})}function Kf(e,t){return A.post(t||"link",us(e)).then(a=>a.data)}function ds({group:e,position:t,showButtonLabelField:a,hiddenFields:r,endpoint:s,onSuccess:o,invalidateQueries:i}){const{close:c,formId:u}=K(),{links:{default_type:m},custom_domains:p}=ge(),{verify:b,isVerifying:g}=Mn("link_creation"),v=ae({defaultValues:{hash:Vr(5),active:!0,type:m||"direct",geo_rules:[],device_rules:[],platform_rules:[],groups:e?[e]:[],position:t,utm:{},utm_custom:[],domain_id:p!=null&&p.allow_all_option?void 0:0}}),y=Gf(v,{endpoint:s,invalidateQueries:i});return d(W,{size:"lg",children:[n(X,{children:n(l,{message:"Create link"})}),n(Q,{children:n(Yl,{hiddenFields:r,showButtonLabelField:a,formId:u,form:v,onSubmit:async w=>{await b()&&y.mutate(w,{onSuccess:x=>{o==null||o(x),c()}})}})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{c()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:u,disabled:y.isLoading||g,children:n(l,{message:"Create"})})]})]})}function Qf(e,t,{endpoint:a,invalidateQueries:r=!0}={}){const{trans:s}=V();return G(o=>Yf(t,o,a),{onSuccess:()=>{Z.positive(s(f("Link updated"))),r&&(j.invalidateQueries(J("link")),j.invalidateQueries(J("link-group")),j.invalidateQueries(J("biolink")))},onError:o=>Ne(o,e)})}function Yf(e,t,a){return A.put(a||`link/${e}`,us(t)).then(r=>r.data)}function Zl(e){const t=e.rules||[],a={},r=[];if(e.utm){const s=new URLSearchParams(e.utm);for(const[o,i]of s.entries())jf.includes(o)?a[o]=i:r.push({key:o,value:i})}return{hash:e.hash,active:e.active,activates_at:e.activates_at,expires_at:e.expires_at,name:e.name,description:e.description,image:e.image,geo_rules:t.filter(s=>s.type==="geo"),device_rules:t.filter(s=>s.type==="device"),platform_rules:t.filter(s=>s.type==="platform"),exp_clicks_rule:t.find(s=>s.type==="exp_clicks"),password:e.has_password?"********":"",utm:a,utm_custom:r,domain_id:e.domain_id,pixels:e.pixels,tags:e.tags}}function Xl({link:e,showButtonLabelField:t,hiddenFields:a,invalidateQueries:r,onSuccess:s,endpoint:o}){const{close:i,formId:c}=K(),{verify:u,isVerifying:m}=Mn("link_creation"),p=h.exports.useMemo(()=>Zf(e),[e]),b=ae({defaultValues:p}),g=Qf(b,e.id,{endpoint:o,invalidateQueries:r});return d(W,{size:"lg",children:[n(X,{children:n(l,{message:"Update link"})}),n(Q,{children:n(Yl,{hiddenFields:a,showButtonLabelField:t,formId:c,form:b,onSubmit:async v=>{await u()&&g.mutate(v,{onSuccess:w=>{s==null||s(w),i()}})}})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{i()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:c,disabled:g.isLoading||m,children:n(l,{message:"Update"})})]})]})}function Zf(e){return{...Zl(e),long_url:e.long_url,alias:e.alias,type:e.type,type_id:e.type_id,groups:e.groups}}function Jl({link:e,className:t}){return e.image?n("img",{className:t,alt:"",src:e.image}):n(gt,{className:t,url:e.long_url})}function Ht({image:e,label:t,description:a}){return d("div",{className:"flex items-center gap-12 w-max",children:[e&&n(Un,{size:"md",src:e}),d("div",{children:[n("div",{children:t}),n("div",{className:"text-muted text-xs",children:a})]})]})}function Xf({resourceName:e}){const{trans:t}=V();return n(Cl,{message:n(l,{message:"You've reached the maximum number of :resource allowed for your current plan.",values:{resource:t(e)}}),messageSuffix:n(l,{message:"Upgrade to increase this limit and unlock other features."})})}const de=h.exports.forwardRef(({children:e,resource:t,action:a,...r},s)=>{const{user:o}=he(),[i,c]=h.exports.useState(!1),{data:u}=Ea(),m=h.exports.useMemo(()=>{const g=typeof t=="string"?t:t.model_type;return`${Jf(g)}s`},[t]),p=u==null?void 0:u.usage[m][a],b=u==null?void 0:u.usage[m].createMsgType;return p||typeof t=="object"&&t.user_id===(o==null?void 0:o.id)?h.exports.cloneElement(e,{...r,ref:s}):!p&&b!=="overQuota"?null:d("div",{onPointerDown:Qe(g=>{g.preventDefault(),g.stopPropagation()}),onClickCapture:Qe(g=>{g.preventDefault(),g.stopPropagation(),c(!0)}),onKeyDownCapture:Qe(g=>{const v=g;v.preventDefault(),v.stopPropagation(),(v.key==="Enter"||v.key===" ")&&c(!0)}),children:[e,n(M,{type:"modal",isOpen:i,onOpenChange:c,children:n(Xf,{resourceName:hi[m]})})]})});function Jf(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}const An=B(n("path",{d:"M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z"}),"BarChartOutlined"),Nr=[{key:"summary",header:()=>n(l,{message:"Summary"}),width:"w-5/6 max-w-200",body:e=>d("div",{children:[d("div",{className:"flex items-center gap-6 whitespace-nowrap",children:[n(Jl,{link:e,className:"w-16 h-16"}),n("a",{className:"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min",href:e.long_url,target:"_blank",rel:"noreferrer","data-testid":"long-url",children:ot(e.long_url)})]}),n(Nu,{link:e,variant:"text",className:"block text-muted hover:underline w-min","data-testid":"short-url"})]})},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user?n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"clicks",sortingKey:"clicks_count",allowsSorting:!0,header:()=>n(l,{message:"Clicks"}),body:e=>e.clicks_count?n(rt,{value:e.clicks_count}):""},{key:"type",sortingKey:"type",allowsSorting:!0,header:()=>n(l,{message:"Type"}),body:e=>n(ka,{size:"xs",radius:"rounded",className:"capitalize",children:n(l,{message:e.type})})},{key:"password",allowsSorting:!0,header:()=>n(l,{message:"Password"}),body:e=>e.has_password?n(Zt,{className:"icon-md text-positive"}):n(Ze,{className:"icon-md text-danger"})},{key:"expires_at",allowsSorting:!0,header:()=>n(l,{message:"Expires at"}),body:e=>e.expires_at?n(st,{date:e.expires_at}):""},{key:"clicked_at",allowsSorting:!0,header:()=>n(l,{message:"Last clicked"}),body:e=>e.clicked_at?n(st,{date:e.clicked_at}):""},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>d("div",{className:"text-muted",children:[n(Ce,{label:n(l,{message:"Link statistics"}),children:n(pe,{to:`${e.id}`,children:n(F,{size:"md",children:n(An,{})})})}),n(Tt,{link:e}),n(de,{resource:e,action:"update",children:d(M,{type:"modal",children:[n(Ce,{label:n(l,{message:"Edit link"}),children:n(F,{size:"md",children:n(je,{})})}),n(Xl,{link:e})]})})]})}];function ms(e){return G(t=>eg(e,t),{onError:t=>Le(t)})}function eg(e,t){return A.post(e,t).then(a=>a.data)}const ec=B(n("path",{d:"M8 11h8v2H8v-2zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3z"}),"AddLinkOutlined"),tc=B(n("path",{d:"M 7 2 C 5.895 2 5 2.895 5 4 L 5 9 L 4 9 C 2.895 9 2 9.895 2 11 L 2 16 C 2 17.105 2.895 18 4 18 L 5 18 L 5 20 C 5 21.105 5.895 22 7 22 L 15.171875 22 L 13.171875 20 L 7 20 L 7 18 L 17 18 L 17 16 C 17 14.895 17.895 14 19 14 L 21 14 L 21 7 L 16 2 L 7 2 z M 7 4 L 15 4 L 15 8 L 19 8 L 19 9 L 7 9 L 7 4 z M 6 11 C 7.105 11 8 11.895 8 13 L 7 13 C 7 12.449 6.551 12 6 12 C 5.449 12 5 12.449 5 13 L 5 14 C 5 14.551 5.449 15 6 15 C 6.551 15 7 14.551 7 14 L 8 14 C 8 15.105 7.105 16 6 16 C 4.895 16 4 15.105 4 14 L 4 13 C 4 11.895 4.895 11 6 11 z M 10.644531 11 C 12.067531 11.041 12.154297 12.282906 12.154297 12.503906 L 11.1875 12.503906 C 11.1875 12.400906 11.204906 11.806641 10.628906 11.806641 C 10.453906 11.806641 10.059844 11.884188 10.089844 12.367188 C 10.118844 12.810188 10.703547 13.019406 10.810547 13.066406 C 11.034547 13.148406 12.141391 13.642391 12.150391 14.650391 C 12.152391 14.864391 12.097062 15.985 10.664062 16 C 9.1050625 16.017 9 14.675438 9 14.398438 L 9.9746094 14.398438 C 9.9746094 14.545438 9.9870625 15.256172 10.664062 15.201172 C 11.071063 15.167172 11.159828 14.87425 11.173828 14.65625 C 11.196828 14.28925 10.846563 14.068625 10.476562 13.890625 C 9.9565625 13.640625 9.1341406 13.333375 9.1191406 12.359375 C 9.1061406 11.482375 9.7505312 10.975 10.644531 11 z M 13 11 L 14.052734 11 L 14.992188 14.646484 L 15.9375 11 L 17 11 L 15.646484 16 L 14.345703 16 L 13 11 z M 19 16 L 19 20 L 16 20 L 20 24 L 24 20 L 21 20 L 21 16 L 19 16 z"}));function ps(e,t){const a=document.createElement("a");a.href=e,t&&(a.download=t),document.body.appendChild(a),a.click(),document.body.removeChild(a)}function hs(){const{close:e}=K();return d(W,{children:[n(X,{children:n(l,{message:"Csv export"})}),n(Q,{children:n(l,{message:"Your request is being processed. We'll email you when the report is ready to download. In certain cases, it might take a little longer, depending on the number of items beings exported and the volume of activity."})}),n(ee,{children:n(_,{variant:"flat",color:"primary",onClick:e,children:n(l,{message:"Got it"})})})]})}function tg(e){const{trans:t}=V();return G(a=>ng(a),{onSuccess:a=>{Z.positive(t(f("[one 1 link|other :count links] shortened",{values:{count:a.links.length}}))),j.invalidateQueries(J("link")),j.invalidateQueries(J("link-group"))},onError:a=>Ne(a,e)})}function ng(e){return A.post("link/batch/shorten",ag(e)).then(t=>t.data)}function ag(e){const t=us(e),a=e.long_urls.split(/\n/g);return{...t,long_urls:a}}function nc({group:e}){const{trans:t}=V(),{close:a,formId:r}=K(),s=ae({defaultValues:{active:!0,type:"direct",geo_rules:[],device_rules:[],platform_rules:[],groups:e?[e]:void 0,utm:{},utm_custom:[]}}),o=tg(s);return d(W,{size:"lg",children:[n(X,{children:n(l,{message:"Shorten links"})}),n(Q,{children:d(ke,{id:r,form:s,onSubmit:i=>{i.long_urls.split(/\r?\n/).some(u=>!ei(u))?s.setError("long_urls",{message:t(f("Some of the urls are not valid."))}):o.mutate(i,{onSuccess:()=>a()})},children:[n(E,{label:n(l,{message:"Multiple URLs (one per line)"}),inputElementType:"textarea",rows:10,name:"long_urls",autoComplete:"off",spellCheck:"false",required:!0,className:"mb-24",autoFocus:!0}),n(ls,{multipleLinks:!0})]})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{a()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:r,disabled:o.isLoading,children:n(l,{message:"Shorten"})})]})]})}function rg({forCurrentUser:e}){const{user:t}=he(),{workspaceId:a}=Ee(),{filters:r,columns:s}=h.exports.useMemo(()=>{const i=e?Nr.filter(u=>u.key!=="user_id"):Nr;return{filters:e?gr.filter(u=>u.key!=="user_id"):gr,columns:i}},[e]),o=e?t==null?void 0:t.id:"";return h.exports.useEffect(()=>{Ua()},[]),n($t,{endpoint:"link",queryParams:{userId:o,workspaceId:a,with:"user"},title:n(l,{message:"Links"}),filters:r,columns:s,actions:n(sg,{}),selectedActions:n(de,{resource:"link",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:Pa,title:n(l,{message:"No links have been created yet"}),filteringTitle:n(l,{message:"No matching links"})})})}function sg(){const[e,t]=h.exports.useState(null),a=ms("link/csv/export");return d(h.exports.Fragment,{children:[d(wa,{children:[n(F,{variant:"outline",color:"primary",radius:"rounded",size:"sm",className:"flex-shrink-0",children:n(si,{})}),d(Sa,{children:[n(T,{value:"addMultiple",startIcon:n(ec,{}),onSelected:()=>{t("addMultiple")},children:n(l,{message:"Shorten multiple links"})}),n(T,{value:"export",startIcon:n(tc,{}),onSelected:()=>{a.mutate({},{onSuccess:r=>{r.downloadPath?ps(r.downloadPath):t("export")}})},children:n(l,{message:"Export links"})})]})]}),d(M,{type:"modal",isOpen:e!==null,onOpenChange:r=>{r||t(null)},children:[e==="export"&&n(hs,{}),e==="addMultiple"&&n(nc,{})]}),n(de,{resource:"link",action:"create",children:d(M,{type:"modal",children:[n(kt,{children:n(l,{message:"Shorten link"})}),n(ds,{})]})})]})}const og=B(n("path",{d:"M3 11c0 2.45 1.76 4.47 4.08 4.91l-1.49-1.49L7 13l4 4.01L7 21l-1.41-1.41 1.58-1.58v-.06C3.7 17.54 1 14.58 1 11c0-3.87 3.13-7 7-7h3v2H8c-2.76 0-5 2.24-5 5zm19 0V4h-9v7h9zm-2-2h-5V6h5v3zm-7 4h9v7h-9z"}),"MoveDownOutlined");function ig(e){const{trans:t}=V();return G(a=>lg(e.id,a),{onSuccess:()=>{Z.positive(t(f("Moved links to \u201C:group\u201C",{values:{group:e.name}}))),j.invalidateQueries(J("link-group"))},onError:a=>Le(a)})}function lg(e,t){return A.post(`link-group/${e}/attach`,t).then(a=>a.data)}function cg({group:e}){const{close:t}=K(),[a,r]=h.exports.useState([]),[s,o]=h.exports.useState({groupId:`!${e.id}`,query:"",perPage:8}),{data:i,isLoading:c}=ol("link",s),u=i==null?void 0:i.pagination,m=ig(e),p=d("div",{className:"text-muted",children:[n(F,{disabled:c||!(u!=null&&u.prev_page),onClick:()=>{o({...s,page:u==null?void 0:u.prev_page})},children:n(Vn,{})}),n(F,{disabled:c||!(u!=null&&u.next_page),onClick:()=>{o({...s,page:u==null?void 0:u.next_page})},children:n(zt,{})})]}),b=n(Ra,{image:n(On,{src:Pa}),title:n(l,{message:"No links found"})}),g=n("div",{className:"min-h-[464px]",children:n(Bn,{children:n(Ve,{mode:"wait",children:c?n(mg,{}):n(ug,{links:u==null?void 0:u.data,selectedIds:a,setSelectedIds:r})})})});return d(W,{size:"lg",children:[n(X,{children:n(l,{message:"Move links to \u201C:group\u201C",values:{group:e.name}})}),d(Q,{children:[n(rn,{className:"mb-14",label:n(l,{message:"Search for links..."}),value:s.query,onChange:v=>{o({...s,query:v.target.value})}}),!c&&!(u!=null&&u.data.length)?b:g]}),d(ee,{startAction:p,children:[n(_,{variant:"text",onClick:t,children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",onClick:()=>{m.mutate({linkIds:a},{onSuccess:t})},disabled:m.isLoading,children:n(l,{message:"Move"})})]})]})}function ug({links:e,selectedIds:t,setSelectedIds:a}){return n(ye.div,{...$e,children:n(Bn,{children:(e||[]).map(r=>{const s=t.includes(r.id);return n(Ta,{isSelected:s,onSelected:()=>{a(s?t.filter(o=>o!==r.id):[...t,r.id])},startIcon:n(Na,{checked:s}),description:ot(r.short_url),children:d("div",{className:"flex items-center gap-8",children:[n(Jl,{className:"w-14 h-14",link:r}),n("div",{children:ot(r.long_url)})]})},r.id)})})},"links-list")}const dg=8;function mg(){return n(ye.div,{...$e,children:n(Bn,{children:Array.from({length:dg}).map((e,t)=>n(Ta,{isDisabled:!0,children:n(De,{variant:"text",className:"min-h-40"})},t))})},"links-skeleton")}function pg(){const{groupId:e}=Xe();return n("div",{className:"p-12 md:p-24",children:n(xl,{endpoint:`link-group/${e}/links`,filters:gr,columns:Nr,actions:n(fg,{groupId:e?+e:void 0}),selectedActions:n(de,{resource:"link",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:Pa,title:n(l,{message:"There are no links in this group yet"}),filteringTitle:n(l,{message:"No matching links"})}),children:n(hg,{})})})}function hg(){var s;const e=At(),{query:t}=h.exports.useContext(Fa),a=(s=t.data)==null?void 0:s.linkGroup;if(!a)return n(Dn,{size:"xl",className:"mb-16"});const r=n(l,{message:"\u201C:group\u201C links",values:{group:a.name}});return d(h.exports.Fragment,{children:[n(Fr,{children:r}),d(Dn,{size:"xl",className:"mb-16",children:[n(bt,{onSelected:()=>{e("/dashboard/link-groups")},children:n(l,{message:"Link groups"})}),n(bt,{className:"first-letter:capitalize",children:r})]})]})}function fg({groupId:e}){var i;const[t,a]=h.exports.useState(null),r=ms("link/csv/export"),{query:s}=h.exports.useContext(Fa),o=(i=s.data)==null?void 0:i.linkGroup;return d(h.exports.Fragment,{children:[d(wa,{children:[n(F,{variant:"outline",color:"primary",radius:"rounded",size:"sm",className:"flex-shrink-0",children:n(si,{})}),d(Sa,{children:[n(T,{value:"moveLinks",startIcon:n(og,{}),onSelected:()=>{a("move")},children:n(l,{message:"Move links to this group"})}),n(T,{value:"addMultiple",startIcon:n(ec,{}),onSelected:()=>{a("addMultiple")},children:n(l,{message:"Add multiple links"})}),n(T,{value:"export",startIcon:n(tc,{}),onSelected:()=>{r.mutate({groupId:e},{onSuccess:c=>{c.downloadPath?ps(c.downloadPath):a("export")}})},children:n(l,{message:"Export links"})})]})]}),d(M,{type:"modal",isOpen:t!==null,onOpenChange:c=>{c||a(null)},children:[t==="move"&&n(cg,{group:o}),t==="export"&&n(hs,{}),t==="addMultiple"&&n(nc,{group:o})]}),n(de,{resource:"link",action:"create",children:d(M,{type:"modal",children:[n(kt,{children:n(l,{message:"Add link"})}),n(ds,{group:o})]})})]})}const gg=B(n("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function bg({endpoint:e,payload:t}){const[a,r]=h.exports.useState(!1),s=ms(e);return d(h.exports.Fragment,{children:[n(F,{variant:"outline",color:"primary",radius:"rounded",size:"sm",className:"flex-shrink-0",disabled:s.isLoading,onClick:()=>{s.mutate(t,{onSuccess:o=>{o.downloadPath?ps(o.downloadPath):r(!0)}})},children:n(gg,{})}),n(M,{type:"modal",isOpen:a,onOpenChange:r,children:n(hs,{})})]})}const vg=B(n("path",{d:"M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM19 19H5V5h14v14z"}),"ListAltOutlined");function ac({onSubmit:e,form:t,formId:a}){const{clearErrors:r}=t;return d(ke,{form:t,id:a,onBeforeSubmit:()=>{r("hash")},onSubmit:e,children:[d("div",{className:"mb-24",children:[n(E,{name:"name",label:n(l,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),n(Ha,{form:t,name:"hash"})]}),n(is,{name:"domain_id",className:"mb-24"}),n(E,{name:"description",className:"mb-24",label:n(l,{message:"Description"}),inputElementType:"textarea",rows:2}),n(Je,{name:"active",description:n(l,{message:"Whether this link group is viewable publicly."}),className:"mb-24",children:n(l,{message:"Active"})}),n(Je,{name:"rotator",description:n(l,{message:"When checked, url above will redirect to random link from the group, instead of showing all links belonging to group."}),children:n(l,{message:"Rotator"})})]})}function yg(e,t){const{trans:a}=V();return G(r=>kg(t,r),{onSuccess:()=>{Z.positive(a(f("Link group updated"))),j.invalidateQueries(J("link-group"))},onError:r=>Ne(r,e)})}function kg(e,t){return A.put(`link-group/${e}`,t).then(a=>a.data)}function xg({group:e}){const{verify:t,isVerifying:a}=Mn("link_creation"),{formId:r,close:s}=K(),o=ae({defaultValues:{name:e.name,hash:e.hash,description:e.description,active:e.active,rotator:e.rotator}}),i=yg(o,e.id);return d(W,{size:"md",children:[n(X,{children:n(l,{message:"Update link group"})}),n(Q,{children:n(ac,{formId:r,form:o,onSubmit:async c=>{await t()&&i.mutate(c,{onSuccess:()=>s()})}})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{s()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:r,disabled:i.isLoading||a,children:n(l,{message:"Update"})})]})]})}const bo=[{key:"name",allowsSorting:!0,header:()=>n(l,{message:"Name"}),width:"w-5/6 max-w-200",body:e=>n("a",{href:e.short_url,target:"_blank",rel:"noreferrer",className:an,children:e.name})},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user?n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"links_count",allowsSorting:!0,header:()=>n(l,{message:"Links"}),body:e=>e.links_count?n(rt,{value:e.links_count}):"-"},{key:"active",allowsSorting:!0,header:()=>n(l,{message:"Active"}),body:e=>e.active?n(Zt,{className:"icon-md text-positive"}):n(Ze,{className:"icon-md text-danger"})},{key:"rotator",allowsSorting:!0,header:()=>n(l,{message:"Rotator"}),body:e=>e.rotator?n(Zt,{className:"icon-md text-positive"}):n(Ze,{className:"icon-md text-danger"})},{key:"updated_at",allowsSorting:!0,header:()=>n(l,{message:"Last updated"}),body:e=>e.updated_at?n(st,{date:e.updated_at}):""},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>d("div",{className:"text-muted",children:[n(Ce,{label:n(l,{message:"Clicks report"}),children:n(pe,{to:`${e.id}`,children:n(F,{size:"md",children:n(An,{})})})}),n(Ce,{label:n(l,{message:"Manage links"}),children:n(pe,{to:`${e.id}/links`,children:n(F,{size:"md",children:n(vg,{})})})}),n(Tt,{link:e}),n(de,{resource:e,action:"update",children:d(M,{type:"modal",children:[n(Ce,{label:n(l,{message:"Edit link"}),children:n(F,{size:"md",children:n(je,{})})}),n(xg,{group:e})]})})]})}],vo=[new re({type:q.Select,key:"rotator",label:f("Type"),description:f("Type of the group"),defaultValue:"01",defaultOperator:Ie.eq,options:[{key:"01",label:f("Default"),value:!1},{key:"02",label:f("Rotator"),value:!0}]}),new re({type:q.Select,key:"active",label:f("Status"),description:f("Whether group is disabled or not"),defaultValue:"01",defaultOperator:Ie.eq,options:[{key:"01",label:f("Enabled"),value:!0},{key:"02",label:f("Disabled"),value:!1}]}),new re({type:q.Input,inputType:"number",key:"links_count",label:f("Link count"),description:f("Number of links in the group"),defaultValue:1,defaultOperator:Ie.gte,operators:da}),new Ot({description:f("Date group was created")}),new Mt({description:f("Date group was last updated")}),new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("User"),description:f("User group was created by")})];function wg(e){const{trans:t}=V();return G(a=>Sg(a),{onSuccess:()=>{Z.positive(t(f("Link group created"))),j.invalidateQueries(J("link-group"))},onError:a=>Ne(a,e)})}function Sg(e){return A.post("link-group",e).then(t=>t.data)}function Cg(){const{formId:e,close:t}=K(),{custom_domains:a}=ge(),{verify:r,isVerifying:s}=Mn("link_creation"),o=ae({defaultValues:{active:!0,hash:Vr(6),rotator:!1,domain_id:a!=null&&a.allow_all_option?void 0:0}}),i=wg(o);return d(W,{size:"md",children:[n(X,{children:n(l,{message:"Create link group"})}),n(Q,{children:n(ac,{formId:e,form:o,onSubmit:async c=>{await r()&&i.mutate(c,{onSuccess:()=>t()})}})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{t()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:e,disabled:i.isLoading||s,children:n(l,{message:"Create"})})]})]})}const _g=B(n("path",{d:"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),"InfoDialogTrigger");function mn({title:e,body:t,dialogSize:a="sm",className:r}){return d(M,{type:"popover",triggerOnHover:!0,children:[n(F,{className:N("text-muted opacity-70",r),size:"xs",children:n(_g,{viewBox:"0 0 16 16"})}),d(W,{size:a,children:[e&&n(X,{padding:"px-18 pt-12",size:"md",hideDismissButton:!0,children:e}),n(Q,{children:t})]})]})}function Ng({forCurrentUser:e}){const{user:t}=he(),{workspaceId:a}=Ee(),{filters:r,columns:s}=h.exports.useMemo(()=>{const i=e?bo.filter(u=>u.key!=="user_id"):bo;return{filters:e?vo.filter(u=>u.key!=="user_id"):vo,columns:i}},[e]);h.exports.useEffect(()=>{Ua()},[]);const o=e?t==null?void 0:t.id:"";return n($t,{endpoint:"link-group",queryParams:{userId:o,withCount:"links",with:"user",workspaceId:a},title:n(l,{message:"Link groups"}),headerContent:n(Ig,{}),filters:r,columns:s,actions:n(Rg,{}),selectedActions:n(de,{resource:"linkGroup",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:Pa,title:n(l,{message:"No groups have been created yet"}),filteringTitle:n(l,{message:"No matching groups"})})})}function Ig(){return n(mn,{dialogSize:"auto",title:n(l,{message:"Group links together to:"}),body:d("ul",{className:"list-disc list-inside whitespace-nowrap",children:[n("li",{children:n(l,{message:"Simplify multiple link management."})}),n("li",{children:n(l,{message:"View aggregated clicks report for the whole group."})}),n("li",{children:n(l,{message:"Redirect to a random link from within the group."})}),n("li",{children:n(l,{message:"Share all links in the group with one link."})})]})})}function Rg(){return d(h.exports.Fragment,{children:[n(bg,{endpoint:"link-group/csv/export"}),n(de,{resource:"linkGroup",action:"create",children:d(M,{type:"modal",children:[n(kt,{children:n(l,{message:"New group"})}),n(Cg,{})]})})]})}function Dg(e){return Be(["link-group",e],()=>Pg(e),{initialData:Lg(e)})}function Pg(e){return A.get(`link-group/${e}`).then(t=>t.data)}function Lg(e){var a,r;const t=(r=(a=j.getQueryData(J("link-group"),{exact:!1}))==null?void 0:a.pagination)==null?void 0:r.data.find(s=>s.id===+e);return t?{linkGroup:t}:void 0}function Eg(){var s;const e=At(),{groupId:t}=Xe(),a=Dg(t),r=(s=a.data)==null?void 0:s.linkGroup;return n(za,{model:`link-group=${t}`,title:d(Dn,{size:"xl",className:N(a.isLoading&&"invisible"),children:[n(bt,{onSelected:()=>{e("..",{relative:"path"})},children:n(l,{message:"Link groups"})}),n(bt,{className:"first-letter:capitalize",children:n(l,{message:"\u201C:name\u201C clicks",values:{name:r==null?void 0:r.name}})})]}),actions:r&&n(Tt,{className:"flex-shrink-0 text-muted",link:r})})}function Tg(e){return Be(["link",e],()=>Ag(e),{initialData:zg(e)})}function Ag(e){return A.get(`link/${e}`).then(t=>t.data)}function zg(e){var a,r;const t=(r=(a=j.getQueryData(J("link"),{exact:!1}))==null?void 0:a.pagination)==null?void 0:r.data.find(s=>s.id===+e);return t?{link:t}:void 0}function $g(){var s;const e=At(),{linkId:t}=Xe(),a=Tg(t),r=(s=a.data)==null?void 0:s.link;return n(za,{model:`link=${t}`,title:d(Dn,{size:"xl",className:N(a.isLoading&&"invisible"),children:[n(bt,{onSelected:()=>{e("..",{relative:"path"})},children:n(l,{message:"Links"})}),n(bt,{className:"first-letter:capitalize",children:n(l,{message:"\u201C:name\u201C clicks",values:{name:r==null?void 0:r.name}})})]}),actions:r&&n(Tt,{className:"flex-shrink-0 text-muted",link:r})})}const Fg=""+new URL("world.ea41c34b.svg",import.meta.url).href;function Og(e){return n(xt,{...e,image:Fg,title:n(l,{message:"No domains have been connected yet"}),filteringTitle:n(l,{message:"No matching domains"})})}function Mg({value:e}){return e?n(Zt,{className:"icon-md text-positive"}):n(Ze,{className:"icon-md text-danger"})}function Ug(){const{trans:e}=V();return G(t=>Vg(t),{onSuccess:(t,a)=>{Z.positive(e(f("\u201C:domain\u201D removed",{values:{domain:a.domain.host}}))),j.invalidateQueries(J("custom-domain"))},onError:t=>Le(t)})}function Vg({domain:e}){return A.delete(`custom-domain/${e.id}`).then(t=>t.data)}function rc({domain:e}){const t=Ug();return d(M,{type:"modal",onClose:a=>{a&&t.mutate({domain:e})},children:[n(_,{variant:"outline",color:"danger",size:"xs",disabled:t.isLoading,children:n(l,{message:"Remove"})}),n(Pt,{title:n(l,{message:"Remove domain?"}),body:n(l,{message:"Are you sure you want to remove \u201C:domain\u201C?",values:{domain:e.host}}),confirm:n(l,{message:"Remove"}),isDanger:!0})]})}const Bg=[{key:"host",allowsSorting:!0,header:()=>n(l,{message:"Domain"}),width:"w-5/6 max-w-200",body:e=>n("div",{children:d("div",{className:"flex items-center gap-6 whitespace-nowrap",children:[n(gt,{url:e.host}),n("a",{className:"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min",href:e.host,target:"_blank",rel:"noreferrer","data-testid":"host-name",children:e.host})]})})},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user?n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"global",allowsSorting:!0,header:()=>n(l,{message:"Global"}),body:e=>n(Mg,{value:e.global})},{key:"updated_at",allowsSorting:!0,header:()=>n(l,{message:"Last updated"}),body:e=>e.updated_at?n(st,{date:e.updated_at}):""},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>n(rc,{domain:e})}],yo=[new re({type:q.BooleanToggle,key:"global",defaultValue:!0,label:f("Global"),description:f("Whether domain is marked as global")}),new Ot({description:f("Date domain was created")}),new Mt({description:f("Date domain was last updated")}),new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("Owner"),description:f("User domain belongs to")})];function sc(e){return(e.replace("www.","").match(/\./g)||[]).length>1}function fs({message:e=n(l,{message:"Checking DNS configuration..."})}){return d("div",{className:"flex items-center gap-18 text-base p-12 rounded bg-primary/10 text-primary",children:[n(xa,{isIndeterminate:!0,size:"sm"}),n("div",{children:e})]})}function Hg({stepper:{state:{isLoading:e,host:t,serverIp:a}}}){const{base_url:r}=ge();return e?n(fs,{}):sc(t)?n(ko,{title:n(l,{message:"Add this CNAME record to your domain by visiting your DNS provider or registrar."}),record:"CNAME",target:r}):n(ko,{title:n(l,{message:"Add this A record to your domain by visiting your DNS provider or registrar."}),record:"A",target:a})}function ko({title:e,record:t,target:a}){return d("div",{children:[n("div",{className:"text-muted mb-10",children:e}),d("div",{className:"flex items-center gap-12 text-base p-12 rounded bg-primary/10 text-primary font-semibold",children:[n("div",{children:t}),a]})]})}function qg({stepper:e}){return d(h.exports.Fragment,{children:[n(E,{autoFocus:!0,name:"host",required:!0,maxLength:100,label:n(l,{message:"Host"}),placeholder:"https://example.com",description:n(l,{message:"Enter the exact domain name you want your items to be accessible with. It can be a subdomain (example.yourdomain.com) or root domain (yourdomain.com)."})}),e.showGlobalField&&n(Je,{className:"mt-24 border-t pt-24",name:"global",description:n(l,{message:"Whether all users should be able to select this domain."}),children:n(l,{message:"Global"})})]})}var ve=(e=>(e[e.Host=1]="Host",e[e.Info=2]="Info",e[e.ValidationFailed=3]="ValidationFailed",e[e.Finalize=4]="Finalize",e))(ve||{});function oc(){return G(e=>jg(e))}function jg(e){return A.post("secure/custom-domain/validate/2BrM45vvfS/api",e).then(t=>t.data)}function Wg({stepper:{goToNextStep:e,state:{host:t,serverIp:a,isLoading:r,validationFailReason:s}}}){oc();const{base_url:o}=ge(),{hasPermission:i}=he(),c=sc(t),u=c?"CNAME":"A",m=c?o:a;if(r)return n(fs,{});const p=s==="serverNotConfigured"&&i("admin")?n(xo,{children:n(l,{message:"DNS records for the domain are setup, however it seems that your server is not configured to handle requests from \u201C:host\u201C",values:{host:m}})}):n(xo,{children:n(l,{message:"The domain is missing :record record pointing to :location or the changes haven't propagated yet.",values:{record:u,location:m}})});return d(h.exports.Fragment,{children:[p,n("div",{className:"whitespace-nowrap text-xs text-muted mt-10",children:n(l,{message:"You can wait and try again later, or <b>refresh</b>",values:{b:b=>n("button",{disabled:r,type:"button",className:"text-primary underline",onClick:()=>{e()},children:b})}})})]})}function xo({children:e}){return d("div",{className:"flex items-center gap-12 text-base p-12 rounded bg-warning/15 text-warning font-medium",children:[n(Iu,{size:"lg"}),e]})}function Gg(e){return G(t=>Kg(t),{onError:t=>Ne(t,e)})}function Kg(e){return A.post("secure/custom-domain/authorize/store",e).then(t=>t.data)}function Qg(){const{trans:e}=V();return G(t=>Yg(t),{onSuccess:t=>{Z.positive(e(f("\u201C:domain\u201D connected",{values:{domain:t.domain.host}}))),j.invalidateQueries(J("custom-domain"))},onError:t=>Le(t)})}function Yg(e){return A.post("custom-domain",e).then(t=>t.data)}function Zg({showGlobalField:e}){const{close:t}=K(),a=ae(),r=Gg(a),s=oc(),o=Qg(),[i,c]=h.exports.useState({isLoading:!1,currentStep:ve.Host,host:"",serverIp:""}),u=()=>{c({...i,isLoading:!0})},m=()=>new Promise(y=>{s.mutate({host:i.host},{onSuccess:()=>{y({status:"success",newState:{validationFailReason:void 0}})},onError:w=>{var k;y({status:"error",newState:{validationFailReason:(k=w.response)==null?void 0:k.data.failReason}})}})}),p=()=>new Promise(y=>{r.mutate(a.getValues(),{onSuccess:w=>{y({status:"success",newState:{host:a.getValues().host,serverIp:w.serverIp}})},onError:()=>{y({status:"error"})}})}),b=i.currentStep!==ve.Host;return{form:a,state:i,goToNextStep:async()=>{if(i.currentStep===ve.Host){u();const y=await p();c({...i,...y.newState,isLoading:!1,currentStep:y.status==="success"?ve.Info:ve.Host})}else if(i.currentStep===ve.Info||i.currentStep===ve.ValidationFailed){u();const y=await m(),w=y.status==="success"?ve.Finalize:ve.ValidationFailed;c({...i,...y.newState,isLoading:!1,currentStep:w}),w===ve.Finalize&&o.mutate(a.getValues(),{onSettled:()=>{t()}})}},hasPreviousStep:b,goToPreviousStep:()=>{!b||i.isLoading||(i.currentStep===ve.Info?c({...i,currentStep:ve.Host}):i.currentStep===ve.ValidationFailed&&c({...i,currentStep:ve.Info}))},showGlobalField:e}}function Xg(){return d("div",{children:[n(fs,{message:n(l,{message:"Connecting domain..."})}),n("div",{className:"text-muted mt-10 text-xs",children:n(l,{message:"Don't close this window until domain is connected."})})]})}function Jg({showGlobalField:e}){const{close:t,formId:a}=K(),r=Zg({showGlobalField:e}),s=eb(r.state.currentStep);return d(W,{children:[n(X,{children:n(l,{message:"Connect domain"})}),n(Q,{children:n(ke,{form:r.form,id:a,onSubmit:()=>{r.goToNextStep()},children:n(s,{stepper:r})})}),d(ee,{startAction:n(_,{variant:"text",onClick:()=>{t()},children:n(l,{message:"Cancel"})}),children:[r.hasPreviousStep&&n(_,{startIcon:n(Vn,{}),color:"primary",variant:"text",onClick:()=>{r.goToPreviousStep()},disabled:r.state.isLoading,children:n(l,{message:"Previous"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:a,endIcon:n(zt,{}),disabled:r.state.isLoading,children:n(l,{message:"Next"})})]})]})}function eb(e){switch(e){case ve.Host:return qg;case ve.Info:return Hg;case ve.ValidationFailed:return Wg;case ve.Finalize:return Xg}}const wo=Bg.map(e=>e.key==="actions"?{...e,body:t=>n(de,{resource:t,action:"delete",children:n(rc,{domain:t})})}:e);function tb({forCurrentUser:e}){const{user:t}=he(),{workspaceId:a}=Ee(),{filters:r,columns:s}=h.exports.useMemo(()=>{const i=e?wo.filter(u=>u.key!=="user_id"):wo;return{filters:e?yo.filter(u=>u.key!=="user_id"):yo,columns:i}},[e]),o=e?t==null?void 0:t.id:"";return n($t,{enableSelection:!1,endpoint:"custom-domain",queryParams:{userId:o,workspaceId:a,with:"user"},title:n(l,{message:"Branded domains"}),headerContent:n(ab,{}),filters:r,columns:s,actions:n(nb,{}),emptyStateMessage:n(Og,{})})}function nb(){return n(de,{resource:"customDomain",action:"create",children:d(M,{type:"modal",children:[n(kt,{children:n(l,{message:"Connect domain"})}),n(Jg,{})]})})}function ab(){return n(mn,{body:n(l,{message:"Create trusted links with your own branded domains. Once connected, you can set the domain as default or only use it for specific links."})})}const fa=[{name:"facebook",type:"number",docsUrl:"https://www.facebook.com/business/help/952192354843755?id=1205376682832142"},{name:"twitter",type:"number",docsUrl:"https://business.twitter.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html"},{name:"google-tag-manager",type:"text",pattern:"GTM-[a-zA-Z0-9]+",docsUrl:"https://tagmanager.google.com"},{name:"google-analytics",type:"text",docsUrl:"https://analytics.google.com"},{name:"adwords",type:"number",docsUrl:"https://ads.google.com"},{name:"bing",type:"number",docsUrl:"https://about.ads.microsoft.com/en-us/solutions/tools/universal-event-tracking"},{name:"pinterest",type:"number",docsUrl:"https://help.pinterest.com/en/business/article/track-conversions-with-pinterest-tag"},{name:"linkedin",type:"text",docsUrl:"https://www.linkedin.com/help/lms/answer/a418880/add-the-linkedin-insight-tag-to-your-website"},{name:"quora",type:"text",pattern:"[a-z0-9]+",docsUrl:"https://quoraadsupport.zendesk.com/hc/en-us/articles/115010303387-About-the-Quora-Pixel"},{name:"adroll",type:"text",docsUrl:"https://help.adroll.com/hc/en-us/articles/211846018-What-is-the-AdRoll-Pixel"},{name:"nexus-segment",type:"text",docsUrl:"https://segment.com/catalog/integrations/appnexus"},{name:"custom",type:"text"}],rb=B(n("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined"),sb=B(n("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutlineOutlined");function ic({formId:e,form:t,onSubmit:a}){const{watch:r}=t,s=r("type"),o=fa.find(i=>i.name===s);return d(ke,{id:e,form:t,onSubmit:a,children:[n(E,{autoFocus:!0,required:!0,name:"name",label:n(l,{message:"Name"}),className:"mb-24"}),n(Pe,{name:"type",selectionMode:"single",className:"mb-24",label:n(l,{message:"Type"}),description:o!=null&&o.docsUrl?d("div",{className:"flex items-center gap-6",children:[n(sb,{size:"sm"}),n("a",{"data-testid":"pixel-docs-link",href:o.docsUrl,target:"_blank",rel:"noreferrer",className:"underline",children:n(l,{message:"More information"})})]}):null,children:fa.map(i=>n(T,{capitalizeFirst:!0,value:i.name,startIcon:i.docsUrl?n(gt,{url:i.docsUrl}):n(rb,{size:"xs"}),children:i.name},i.name))}),s!=="custom"&&n(E,{required:!0,pattern:o==null?void 0:o.pattern,type:(o==null?void 0:o.type)==="number"?"number":"text",name:"pixel_id",label:n(l,{message:"Pixel ID"})}),s==="custom"&&n(ob,{})]})}function ob(){return d(h.exports.Fragment,{children:[n(E,{name:"head_code",label:n(l,{message:"Custom code for page head"}),className:"mb-24",inputElementType:"textarea",rows:5}),n(E,{name:"body_code",label:n(l,{message:"Custom code for page body"}),inputElementType:"textarea",rows:5})]})}function ib(e,t){const{trans:a}=V();return G(r=>lb(e,r),{onSuccess:()=>{Z.positive(a(f("Pixel updated"))),j.invalidateQueries(J("tp"))},onError:r=>Ne(r,t)})}function lb(e,t){return A.put(`tp/${e}`,t).then(a=>a.data)}function cb({pixel:e}){const t=ae({defaultValues:{name:e.name,type:e.type,pixel_id:e.pixel_id,head_code:e.head_code,body_code:e.body_code}}),{formId:a,close:r}=K(),s=ib(e.id,t);return d(W,{children:[n(X,{children:n(l,{message:"Update \u201C:name\u201C",values:{name:e.name}})}),n(Q,{children:n(ic,{formId:a,form:t,onSubmit:o=>{s.mutate(o,{onSuccess:()=>{r()}})}})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{r()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:a,disabled:s.isLoading,children:n(l,{message:"Update"})})]})]})}const So=[{key:"name",allowsSorting:!0,header:()=>n(l,{message:"Name"}),body:e=>e.name},{key:"type",allowsSorting:!0,header:()=>n(l,{message:"Type"}),body:e=>{var a;const t=(a=fa.find(r=>r.name===e.type))==null?void 0:a.docsUrl;return n("div",{children:d("div",{className:"flex items-center gap-10",children:[t?n(gt,{url:t}):null,t?n("a",{href:t,target:"_blank",rel:"noreferrer",className:an,children:e.type}):e.type]})})}},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user?n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"pixel_id",header:()=>n(l,{message:"Pixel ID"}),body:e=>e.pixel_id},{key:"updated_at",allowsSorting:!0,header:()=>n(l,{message:"Last updated"}),body:e=>e.updated_at?n(st,{date:e.updated_at}):""},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>n(de,{resource:e,action:"update",children:d(M,{type:"modal",children:[n(F,{className:"text-muted",children:n(je,{})}),n(cb,{pixel:e})]})})}],ub=""+new URL("location-tracking.0df79a5f.svg",import.meta.url).href,Co=[new re({type:q.Select,key:"type",label:f("Type"),description:f("Type of the pixel"),options:fa.map((e,t)=>({key:e.name,value:e.name,label:f(e.name)}))}),new Ot({description:f("Date pixel was created")}),new Mt({description:f("Date pixel was last updated")}),new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("Owner"),description:f("User pixel belongs to")})];function db(e){const{trans:t}=V();return G(a=>mb(a),{onSuccess:()=>{Z.positive(t(f("Pixel created"))),j.invalidateQueries(J("tp"))},onError:a=>Ne(a,e)})}function mb(e){return A.post("tp",e).then(t=>t.data)}function pb(){const e=ae({defaultValues:{type:"facebook"}}),{formId:t,close:a}=K(),r=db(e);return d(W,{children:[n(X,{children:n(l,{message:"Create pixel"})}),n(Q,{children:n(ic,{formId:t,form:e,onSubmit:s=>{r.mutate(s,{onSuccess:()=>{a()}})}})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{a()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:t,disabled:r.isLoading,children:n(l,{message:"Create"})})]})]})}function hb({forCurrentUser:e}){const{user:t}=he(),{workspaceId:a}=Ee(),{filters:r,columns:s}=h.exports.useMemo(()=>{const i=e?So.filter(u=>u.key!=="user_id"):So;return{filters:e?Co.filter(u=>u.key!=="user_id"):Co,columns:i}},[e]),o=e?t==null?void 0:t.id:"";return n($t,{endpoint:"tp",queryParams:{userId:o,with:"user",workspaceId:a},title:n(l,{message:"Tracking pixels"}),filters:r,columns:s,headerContent:n(gb,{}),actions:n(fb,{}),selectedActions:n(de,{resource:"trackingPixel",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:ub,title:n(l,{message:"No tracking pixels have been added yet"}),filteringTitle:n(l,{message:"No matching tracking pixels"})})})}function fb(){return n(de,{resource:"trackingPixel",action:"create",children:d(M,{type:"modal",children:[n(kt,{children:n(l,{message:"Add pixel"})}),n(pb,{})]})})}function gb(){return n(mn,{body:n(l,{message:"Add third party tracking integration to your links using pixels or custom code snippet."})})}function bb(e){return A.get(`custom-pages/${e}`).then(t=>t.data)}function vb(){const{pageId:e}=Xe();return Be(["custom-pages",e],()=>bb(e),{enabled:!!e})}const yb=se.lazy(()=>_a(()=>import("./text-editor.0e9418f4.js"),["text-editor.0e9418f4.js","text-editor.b603c7db.css","main.0615c25a.js","main.e1cf65d7.css","format.5298ab92.js","Edit.336acc69.js","sticky-sentinel.79e09ebd.js","UnfoldLess.a7fd5998.js","MoreVert.14110417.js","index.14466ddf.js"],import.meta.url));function _o({allowSlugEditing:e=!0,endpoint:t}){const{data:a,isFetched:r,fetchStatus:s}=vb(),o=!r&&s!=="idle",i=ae();return h.exports.useEffect(()=>{a!=null&&a.page&&i.reset(a.page)},[i,a==null?void 0:a.page]),n(h.exports.Suspense,{fallback:n(Br,{}),children:n("div",{className:"min-h-full",children:!o&&n(yb,{page:a==null?void 0:a.page,allowSlugEditing:e,endpoint:t})})})}const No=e=>{const t=e.customPages.types.length>1?[new re({type:q.Select,key:"type",label:f("Type"),description:f("Type of the page"),defaultValue:"default",options:e.customPages.types.map(a=>({value:a.type,label:a.label,key:a.type}))})]:[];return[new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("User"),description:f("User page was created by")}),...t,new Ot({description:f("Date page was created")}),new Mt({description:f("Date page was last updated")})]},lc=[{key:"slug",allowsSorting:!0,header:()=>n(l,{message:"Slug"}),body:e=>n(pe,{target:"_blank",to:`/pages/${e.slug}`,className:an,children:e.slug})},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user&&n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email})},{key:"type",header:()=>n(l,{message:"Type"}),body:e=>n(l,{message:e.type}),width:"w-1"},{key:"updated_at",allowsSorting:!0,header:()=>n(l,{message:"Last updated"}),body:e=>n(st,{date:e.updated_at}),width:"w-1"},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-1",body:e=>n(F,{size:"md",className:"text-muted",elementType:pe,to:`${e.id}/edit`,children:n(je,{})})}],kb=""+new URL("articles.8bfd9f17.svg",import.meta.url).href;function xb(e,t){const{trans:a}=V();return G(r=>wb(e,r),{onSuccess:()=>{Z.positive(a(f("Page options updated"))),j.invalidateQueries(J("link-page"))},onError:r=>Ne(r,t)})}function wb(e,t){return A.put(`link-page/${e}`,{meta:t}).then(a=>a.data)}function Sb({page:e}){return d(M,{type:"modal",children:[n(Ce,{label:n(l,{message:"Page options"}),children:n(F,{className:"text-muted",children:n(wl,{})})}),n(Cb,{page:e})]})}function Cb({page:e}){var o,i;const{formId:t,close:a}=K(),r=ae({defaultValues:{hideFooter:Boolean((o=e.meta)==null?void 0:o.hideFooter),hideNavbar:Boolean((i=e.meta)==null?void 0:i.hideNavbar)}}),s=xb(e.id,r);return d(W,{size:"sm",children:[n(X,{children:n(l,{message:"Link page options"})}),n(Q,{children:d(ke,{id:t,form:r,onSubmit:c=>{s.mutate(c,{onSuccess:a})},children:[n(Je,{className:"mb-24",name:"hideNavbar",description:n(l,{message:"Whether navbar should be hidden on this link page."}),children:n(l,{message:"Hide navbar"})}),n(Je,{name:"hideFooter",description:n(l,{message:"Whether footer should be hidden on this link page."}),children:n(l,{message:"Hide footer"})})]})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>a(),children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:t,disabled:s.isLoading,children:n(l,{message:"Save"})})]})]})}const _b={...lc[4],body:e=>d(h.exports.Fragment,{children:[n(Sb,{page:e}),n(de,{resource:e,action:"update",children:n(Ce,{label:n(l,{message:"Edit page"}),children:n(F,{size:"md",className:"text-muted",elementType:pe,to:`${e.id}/edit`,children:n(je,{})})})})]})},Io=[...lc.filter(e=>e.key!=="actions"&&e.key!=="type"),_b];function Nb({forCurrentUser:e}){const t=h.exports.useContext(Ru),{user:a}=he(),{workspaceId:r}=Ee(),{filters:s,columns:o}=h.exports.useMemo(()=>{const c=e?Io.filter(m=>m.key!=="user_id"):Io;return{filters:e?No(t).filter(m=>m.key!=="user_id"):No(t),columns:c}},[e,t]),i=e?a==null?void 0:a.id:"";return n($t,{endpoint:"link-page",title:n(l,{message:"Link pages"}),filters:s,columns:o,headerContent:n(Rb,{}),queryParams:{userId:i,with:"user",workspaceId:r},actions:n(Ib,{}),selectedActions:n(de,{resource:"customPage",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:kb,title:n(l,{message:"No link pages have been created yet"}),filteringTitle:n(l,{message:"No matching link pages"})})})}function Ib(){return n(de,{resource:"customPage",action:"create",children:n(kt,{elementType:pe,to:"new",children:n(l,{message:"New page"})})})}function Rb(){return n(mn,{body:n(l,{message:"Show a transitional page with fully custom markup. Users who visit the short url will briefly see the page before being redirected to destination url."})})}const Db=""+new URL("preferences-popup.824a74c6.svg",import.meta.url).href,gs=B(n("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"})),Ro=[{key:"name",allowsSorting:!0,header:()=>n(l,{message:"Name"}),body:e=>e.name},{key:"message",allowsSorting:!0,header:()=>n(l,{message:"Message"}),body:e=>e.message},{key:"btn_text",allowsSorting:!0,header:()=>n(l,{message:"Button text"}),body:e=>e.btn_text},{key:"color",header:()=>n(l,{message:"Color"}),body:e=>n(gs,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:e.colors["bg-color"]}})},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user?n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"updated_at",allowsSorting:!0,header:()=>n(l,{message:"Last updated"}),body:e=>e.updated_at?n(st,{date:e.updated_at}):""},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>n(de,{resource:e,action:"update",children:n(F,{className:"text-muted",elementType:pe,to:`${e.id}/edit`,children:n(je,{})})})}],cc=[{key:"default",label:f("Default")},{key:"full-width",label:f("Full width")},{key:"rounded",label:f("Rounded")},{key:"pill",label:f("Pill")}],uc=[{key:"top-left",label:f("Top left")},{key:"top-right",label:f("Top right")},{key:"bottom-left",label:f("Bottom left")},{key:"bottom-right",label:f("Bottom right")}],Pb=[{key:"bg-color",label:f("Background color")},{key:"text-color",label:f("Text color")},{key:"btn-bg-color",label:f("Button background")},{key:"btn-text-color",label:f("Button text")},{key:"label-bg-color",label:f("Label background")},{key:"label-color",label:f("Label text")}],Do=[new re({type:q.Select,key:"theme",label:f("Theme"),description:f("Theme for the overlay"),defaultValue:"default",options:cc.map(e=>({key:e.key,value:e.key,label:e.label}))}),new re({type:q.Select,key:"position",label:f("Position"),description:f("Position for the overlay"),defaultValue:"bottom-left",options:uc.map(e=>({key:e.key,value:e.key,label:e.label}))}),new Ot({description:f("Date overlay was created")}),new Mt({description:f("Date overlay was last updated")}),new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("Owner"),description:f("User overlay belongs to")})];function Lb({forCurrentUser:e}){const{user:t}=he(),{workspaceId:a}=Ee(),{filters:r,columns:s}=h.exports.useMemo(()=>{const i=e?Ro.filter(u=>u.key!=="user_id"):Ro;return{filters:e?Do.filter(u=>u.key!=="user_id"):Do,columns:i}},[e]),o=e?t==null?void 0:t.id:"";return n($t,{endpoint:"link-overlay",queryParams:{userId:o,with:"user",workspaceId:a},title:n(l,{message:"Call-to-action overlays"}),headerContent:n(Eb,{}),filters:r,columns:s,actions:n(Tb,{}),selectedActions:n(de,{resource:"linkOverlay",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:Db,title:n(l,{message:"No overlays have been added yet"}),filteringTitle:n(l,{message:"No matching overlays"})})})}function Eb(){return n(mn,{body:n(l,{message:"Display fully customizable, non-intrusive overlay with a message and call-to-action button over destination website."})})}function Tb(){return n(de,{resource:"linkOverlay",action:"create",children:n(kt,{to:"new",elementType:pe,children:n(l,{message:"Add overlay"})})})}function Ab(e){const{trans:t}=V();return G(a=>zb(a),{onSuccess:()=>{Z.positive(t(f("Overlay created"))),j.invalidateQueries(J("link-overlay"))},onError:a=>Ne(a,e)})}function zb(e){return A.post("link-overlay",e).then(t=>t.data)}const Gn=se.createContext(null);function dc(e){const{size:t="md",children:a,className:r,isLazy:s,overflow:o="overflow-hidden"}=e,i=h.exports.useRef([]),c=h.exports.useId(),[u,m]=Ue(e.selectedTab,e.defaultSelectedTab||0,e.onTabChange),p=h.exports.useMemo(()=>({selectedTab:u,setSelectedTab:m,tabsRef:i,size:t,isLazy:s,id:c}),[u,c,s,m,t]);return n(Gn.Provider,{value:p,children:n("div",{className:N(r,o,"max-w-full"),children:a})})}function $b(){const{tabsRef:e,selectedTab:t}=h.exports.useContext(Gn),[a,r]=h.exports.useState({width:void 0,transform:void 0,className:void 0});return Tr(()=>{if(t!=null&&e.current){const s=e.current[t];r(o=>({width:`${s.offsetWidth}px`,transform:`translateX(${s.offsetLeft}px)`,className:o.width===void 0?"":"transition-all"}))}},[r,t,e]),n("div",{className:N("absolute bottom-0 left-0 h-2 bg-primary",a.className),role:"presentation",style:{width:a.width,transform:a.transform}})}function mc({children:e,center:t,expand:a,className:r}){const s=h.exports.Children.toArray(e);return n(va,{children:d("div",{className:N("flex relative max-w-full overflow-auto border-b",r),role:"tablist","aria-orientation":"horizontal",children:[s.map((o,i)=>h.exports.isValidElement(o)?h.exports.cloneElement(o,{index:i,className:N(o.props.className,a&&"flex-auto",t&&i===0&&"ml-auto",t&&i===s.length-1&&"mr-auto")}):null),n($b,{})]})})}function Sn({index:e,className:t,isDisabled:a,children:r,padding:s,elementType:o="button",to:i,relative:c}){const{selectedTab:u,setSelectedTab:m,tabsRef:p,size:b="md",id:g}=h.exports.useContext(Gn),v=e===u,y=Dt(),w=s||(b==="sm"?"px-12":"px-18"),k=N("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded",Fb({isDisabled:a,isSelected:v}),t,b==="md"&&`${w} h-48`,b==="sm"&&`${w} h-32`,!a&&"cursor-pointer"),x=C=>{switch(C.key){case"ArrowLeft":y.focusPrevious();break;case"ArrowRight":y.focusNext();break;case"Home":y.focusFirst();break;case"End":y.focusLast();break}},S=v?0:-1;return n(o,{disabled:a,id:`${g}-${e}-tab`,"aria-controls":`${g}-${e}-tabpanel`,type:"button",role:"tab","aria-selected":v,tabIndex:a?void 0:S,onKeyDown:x,onClick:()=>{m(e)},to:i,relative:c,className:k,ref:C=>{p.current&&C&&(p.current[e]=C)},children:r})}function Fb({isDisabled:e,isSelected:t}){return e?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function pc({children:e,className:t}){const{selectedTab:a,isLazy:r}=h.exports.useContext(Gn),s=h.exports.Children.toArray(e);let o;return r?o=h.exports.cloneElement(s[a],{index:a}):o=s.map((i,c)=>{if(h.exports.isValidElement(i)){const u=c===a;return h.exports.cloneElement(i,{index:c,"aria-hidden":!u,className:u?i.props.className:N(i.props.className,"hidden")})}return null}),n("div",{className:t,children:o})}function Cn({className:e,children:t,index:a,...r}){const{id:s}=h.exports.useContext(Gn),[o,i]=h.exports.useState(0),c=h.exports.useRef(null);return Tr(()=>{if(c!=null&&c.current){const u=()=>{const p=Or(c.current,{tabbable:!0});i(p.nextNode()?void 0:0)};u();const m=new MutationObserver(u);return m.observe(c.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{m.disconnect()}}},[c]),n("div",{tabIndex:o,ref:c,id:`${s}-${a}-tabpanel`,"aria-labelledby":`${s}-${a}-tab`,className:N(e,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:t})}function Ob(){return d("div",{className:"bg-card h-full overflow-hidden",children:[d("div",{className:"navbar flex items-center bg-alt h-40 w-full",children:[n("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#d7665d"}}),n("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#deab54"}}),n("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#6fb54c"}})]}),d("div",{className:"page-body p-24",children:[d("div",{className:"top-row flex items-center h-60 bg-alt p-10 mb-24",children:[n("div",{className:"circle w-40 h-40 rounded-full mr-auto bg-disabled-bg"}),n("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"}),n("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"}),n("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"})]}),d("div",{className:"middle-row flex items-center justify-center flex-col h-[260px] bg-alt my-24",children:[n("div",{className:"line rounded h-36 mb-20 w-3/5 bg-disabled-bg"}),n("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"}),n("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"}),n("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"})]}),d("div",{className:"flex-container flex",children:[d("div",{className:"left w-1/3",children:[n("div",{className:"rect h-144 bg-disabled-bg/5 mb-6"}),n("div",{className:"line fat-line h-36 mb-10 rounded bg-disabled-bg/5"}),n("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),n("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),n("div",{className:"separator h-1 bg-divider my-24"}),n("div",{className:"rect h-144 bg-disabled-bg/5 mb-10"}),n("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),n("div",{className:"rect h-144 bg-disabled-bg/5 mb-6"})]}),d("div",{className:"right w-2/3 pl-24",children:[n("div",{className:"rect h-288 mb-32 bg-disabled-bg/5"}),n("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),n("div",{className:"line fat-line h-36 mb-10 rounded bg-disabled-bg/5"}),n("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),n("div",{className:"separator h-1 bg-divider my-24"}),n("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),n("div",{className:"rect h-288 mb-32 bg-disabled-bg/5"})]})]})]})]})}function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function qa(e,t){if(e==null)return{};var a,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(a=o[r])>=0||(s[a]=e[a]);return s}function zn(e){var t=h.exports.useRef(e),a=h.exports.useRef(function(r){t.current&&t.current(r)});return t.current=e,a.current}var $n=function(e,t,a){return t===void 0&&(t=0),a===void 0&&(a=1),e>a?a:e<t?t:e},_n=function(e){return"touches"in e},Ir=function(e){return e&&e.ownerDocument.defaultView||self},Po=function(e,t,a){var r=e.getBoundingClientRect(),s=_n(t)?function(o,i){for(var c=0;c<o.length;c++)if(o[c].identifier===i)return o[c];return o[0]}(t.touches,a):t;return{left:$n((s.pageX-(r.left+Ir(e).pageXOffset))/r.width),top:$n((s.pageY-(r.top+Ir(e).pageYOffset))/r.height)}},Lo=function(e){!_n(e)&&e.preventDefault()},hc=se.memo(function(e){var t=e.onMove,a=e.onKey,r=qa(e,["onMove","onKey"]),s=h.exports.useRef(null),o=zn(t),i=zn(a),c=h.exports.useRef(null),u=h.exports.useRef(!1),m=h.exports.useMemo(function(){var v=function(k){Lo(k),(_n(k)?k.touches.length>0:k.buttons>0)&&s.current?o(Po(s.current,k,c.current)):w(!1)},y=function(){return w(!1)};function w(k){var x=u.current,S=Ir(s.current),R=k?S.addEventListener:S.removeEventListener;R(x?"touchmove":"mousemove",v),R(x?"touchend":"mouseup",y)}return[function(k){var x=k.nativeEvent,S=s.current;if(S&&(Lo(x),!function(C,D){return D&&!_n(C)}(x,u.current)&&S)){if(_n(x)){u.current=!0;var R=x.changedTouches||[];R.length&&(c.current=R[0].identifier)}S.focus(),o(Po(S,x,c.current)),w(!0)}},function(k){var x=k.which||k.keyCode;x<37||x>40||(k.preventDefault(),i({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},w]},[i,o]),p=m[0],b=m[1],g=m[2];return h.exports.useEffect(function(){return g},[g]),n("div",{...pn({},r,{onTouchStart:p,onMouseDown:p,className:"react-colorful__interactive",ref:s,onKeyDown:b,tabIndex:0,role:"slider"})})}),bs=function(e){return e.filter(Boolean).join(" ")},fc=function(e){var t=e.color,a=e.left,r=e.top,s=r===void 0?.5:r,o=bs(["react-colorful__pointer",e.className]);return n("div",{className:o,style:{top:100*s+"%",left:100*a+"%"},children:n("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}})})},Se=function(e,t,a){return t===void 0&&(t=0),a===void 0&&(a=Math.pow(10,t)),Math.round(a*e)/a},Mb=function(e){return qb(Rr(e))},Rr=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Se(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?Se(parseInt(e.substring(6,8),16)/255,2):1}},Ub=function(e){return Hb(Bb(e))},Vb=function(e){var t=e.s,a=e.v,r=e.a,s=(200-t)*a/100;return{h:Se(e.h),s:Se(s>0&&s<200?t*a/100/(s<=100?s:200-s)*100:0),l:Se(s/2),a:Se(r,2)}},Dr=function(e){var t=Vb(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},Bb=function(e){var t=e.h,a=e.s,r=e.v,s=e.a;t=t/360*6,a/=100,r/=100;var o=Math.floor(t),i=r*(1-a),c=r*(1-(t-o)*a),u=r*(1-(1-t+o)*a),m=o%6;return{r:Se(255*[r,c,i,i,u,r][m]),g:Se(255*[u,r,r,c,i,i][m]),b:Se(255*[i,i,u,r,r,c][m]),a:Se(s,2)}},ta=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Hb=function(e){var t=e.r,a=e.g,r=e.b,s=e.a,o=s<1?ta(Se(255*s)):"";return"#"+ta(t)+ta(a)+ta(r)+o},qb=function(e){var t=e.r,a=e.g,r=e.b,s=e.a,o=Math.max(t,a,r),i=o-Math.min(t,a,r),c=i?o===t?(a-r)/i:o===a?2+(r-t)/i:4+(t-a)/i:0;return{h:Se(60*(c<0?c+6:c)),s:Se(o?i/o*100:0),v:Se(o/255*100),a:s}},jb=se.memo(function(e){var t=e.hue,a=e.onChange,r=bs(["react-colorful__hue",e.className]);return se.createElement("div",{className:r},se.createElement(hc,{onMove:function(s){a({h:360*s.left})},onKey:function(s){a({h:$n(t+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":Se(t),"aria-valuemax":"360","aria-valuemin":"0"},se.createElement(fc,{className:"react-colorful__hue-pointer",left:t/360,color:Dr({h:t,s:100,v:100,a:1})})))}),Wb=se.memo(function(e){var t=e.hsva,a=e.onChange,r={backgroundColor:Dr({h:t.h,s:100,v:100,a:1})};return se.createElement("div",{className:"react-colorful__saturation",style:r},se.createElement(hc,{onMove:function(s){a({s:100*s.left,v:100-100*s.top})},onKey:function(s){a({s:$n(t.s+100*s.left,0,100),v:$n(t.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Se(t.s)+"%, Brightness "+Se(t.v)+"%"},se.createElement(fc,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Dr(t)})))}),gc=function(e,t){if(e===t)return!0;for(var a in e)if(e[a]!==t[a])return!1;return!0},Gb=function(e,t){return e.toLowerCase()===t.toLowerCase()||gc(Rr(e),Rr(t))};function Kb(e,t,a){var r=zn(a),s=h.exports.useState(function(){return e.toHsva(t)}),o=s[0],i=s[1],c=h.exports.useRef({color:t,hsva:o});h.exports.useEffect(function(){if(!e.equal(t,c.current.color)){var m=e.toHsva(t);c.current={hsva:m,color:t},i(m)}},[t,e]),h.exports.useEffect(function(){var m;gc(o,c.current.hsva)||e.equal(m=e.fromHsva(o),c.current.color)||(c.current={hsva:o,color:m},r(m))},[o,e,r]);var u=h.exports.useCallback(function(m){i(function(p){return Object.assign({},p,m)})},[]);return[o,u]}var Qb=typeof window<"u"?h.exports.useLayoutEffect:h.exports.useEffect,Yb=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Eo=new Map,Zb=function(e){Qb(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!Eo.has(t)){var a=t.createElement("style");a.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Eo.set(t,a);var r=Yb();r&&a.setAttribute("nonce",r),t.head.appendChild(a)}},[])},Xb=function(e){var t=e.className,a=e.colorModel,r=e.color,s=r===void 0?a.defaultColor:r,o=e.onChange,i=qa(e,["className","colorModel","color","onChange"]),c=h.exports.useRef(null);Zb(c);var u=Kb(a,s,o),m=u[0],p=u[1],b=bs(["react-colorful",t]);return d("div",{...pn({},i,{ref:c,className:b}),children:[n(Wb,{hsva:m,onChange:p}),n(jb,{hue:m.h,onChange:p,className:"react-colorful__last-control"})]})},Jb={defaultColor:"000",toHsva:Mb,fromHsva:function(e){return Ub({h:e.h,s:e.s,v:e.v,a:1})},equal:Gb},ev=function(e){return n(Xb,{...pn({},e,{colorModel:Jb})})},tv=/^#?([0-9A-F]{3,8})$/i,nv=function(e){var t=e.color,a=t===void 0?"":t,r=e.onChange,s=e.onBlur,o=e.escape,i=e.validate,c=e.format,u=e.process,m=qa(e,["color","onChange","onBlur","escape","validate","format","process"]),p=h.exports.useState(function(){return o(a)}),b=p[0],g=p[1],v=zn(r),y=zn(s),w=h.exports.useCallback(function(x){var S=o(x.target.value);g(S),i(S)&&v(u?u(S):S)},[o,u,i,v]),k=h.exports.useCallback(function(x){i(x.target.value)||g(o(a)),y(x)},[a,o,i,y]);return h.exports.useEffect(function(){g(o(a))},[a,o]),n("input",{...pn({},m,{value:c?c(b):b,spellCheck:"false",onChange:w,onBlur:k})})},To=function(e){return"#"+e},bc=function(e){var t=e.prefixed,a=e.alpha,r=qa(e,["prefixed","alpha"]),s=h.exports.useCallback(function(i){return i.replace(/([^0-9A-F]+)/gi,"").substring(0,a?8:6)},[a]),o=h.exports.useCallback(function(i){return function(c,u){var m=tv.exec(c),p=m?m[1].length:0;return p===3||p===6||!!u&&p===4||!!u&&p===8}(i,a)},[a]);return se.createElement(nv,pn({},r,{escape:s,format:t?To:void 0,process:To,validate:o}))};function av({onChange:e,value:t,colors:a}){const r=a.map(s=>{const o=t===s;return n(Lt,{onClick:()=>{e==null||e(s)},className:N("relative block flex-shrink-0 w-26 h-26 border rounded",o&&"shadow-md"),style:{backgroundColor:s},children:o&&n("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},s)});return n("div",{className:"flex flex-wrap gap-6",children:r})}const vc=[{color:"rgb(255, 255, 255)",name:f("White")},{color:"rgb(239,245,245)",name:f("Solitude")},{color:"rgb(245,213,174)",name:f("Wheat")},{color:"rgb(253,227,167)",name:f("Cape Honey")},{color:"rgb(242,222,186)",name:f("Milk punch")},{color:"rgb(97,118,75)",name:f("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:f("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:f("Cosmic Latte")},{color:"rgb(233,119,119)",name:f("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:f("Sundown")},{color:"rgb(30,139,195)",name:f("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:f("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:f("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:f("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:f("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:f("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:f("Comet"),foreground:"rgb(255, 255, 255)"}],rv=vc.map(({color:e})=>e).slice(0,14);function sv({defaultValue:e,onChange:t,colorPresets:a,showInput:r}){const[s,o]=h.exports.useState(e),i=a||rv,c=lt({size:"sm"});return d("div",{children:[n(ev,{className:"!w-auto",color:s,onChange:u=>{t==null||t(u),o(u)}}),d("div",{className:"py-20 px-12",children:[i&&n(av,{colors:i,onChange:u=>{if(u){const m=on(u).toString("hex");t==null||t(m),o(m)}},value:s}),r&&n("div",{className:"pt-20",children:n(bc,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:s,onChange:u=>{t==null||t(u),o(u)}})})]})]})}function Kn({defaultValue:e,onChange:t,hideFooter:a=!1,showInput:r=!0}){const{close:s}=K(),[o,i]=h.exports.useState(e||"");return d(W,{size:"2xs",children:[n(sv,{showInput:r,defaultValue:o,onChange:c=>{i(c),t==null||t(c)}}),!a&&d(ee,{dividerTop:!0,children:[n(_,{variant:"text",size:"xs",onClick:()=>{s()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",size:"xs",onClick:()=>{s(o)},children:n(l,{message:"Apply"})})]})]})}const ov=e=>(t,a,r)=>{const s=r.subscribe;return r.subscribe=(i,c,u)=>{let m=i;if(c){const p=(u==null?void 0:u.equalityFn)||Object.is;let b=i(r.getState());m=g=>{const v=i(g);if(!p(b,v)){const y=b;c(b=v,y)}},u!=null&&u.fireImmediately&&c(b,b)}return s(m)},e(t,a,r)},iv=ov;function yc(e,t){return e.reduce((a,r,s)=>{const o=Math.floor(s/t);return a[o]||(a[o]=[]),a[o].push(r),a},[])}const lv={preview:{defaultRoute:"/",navigationRoutes:[]},sections:{general:{label:f("General"),position:1,buildBreadcrumb:()=>[{label:f("General"),location:"general"}]},themes:{label:f("Themes"),position:2,buildBreadcrumb:(e,t)=>{var o;const a=e.split("/").filter(i=>!!i),[,,,r]=a,s=[{label:f("Themes"),location:"themes"}];return r!=null&&s.push({label:(o=t.appearance.themes.all[+r])==null?void 0:o.name,location:`themes/${r}`}),s}},menus:{label:f("Menus"),position:3,buildBreadcrumb:(e,t)=>{const a=e.split("/").filter(i=>!!i),[,,...r]=a,s=[{label:f("Menus"),location:"menus"}],o=yc(r,2);return o.forEach(([i,c],u)=>{var m,p;if(i==="menus"&&c!=null)s.push({label:(m=t.settings.menus[+c])==null?void 0:m.name,location:`menus/${c}`});else if(i==="items"&&c!=null){const[,b]=o[u-1];s.push({label:(p=t.settings.menus[+b].items[+c])==null?void 0:p.label,location:`menus/${b}/${c}`})}}),s},config:{availableRoutes:["/login","/register","/contact","/billing/pricing","/account-settings","/admin","/admin/appearance","/admin/settings","/admin/plans","/admin/subscriptions","/admin/users","/admin/roles","/admin/pages","/admin/tags","/admin/files","/admin/localizations","/admin/ads","/admin/settings/authentication","/admin/settings/branding","/admin/settings/cache","/admin/settings/providers","/api-routes"],positions:["admin-navbar","admin-sidebar","custom-page-navbar","auth-page-footer","auth-dropdown","account-settings-page","billing-page","checkout-page-navbar","checkout-page-footer","pricing-table-page","contact-us-page","notifications-page"]}},"custom-code":{label:f("Custom Code"),position:4,buildBreadcrumb:()=>[{label:f("Custom code"),location:"custom-code"}]},"seo-settings":{label:f("Seo Settings"),position:5,buildBreadcrumb:()=>[{label:f("Seo"),location:"seo"}]}}};function cv(){const{fields:e,remove:t,append:a}=Da({name:"settings.homepage.appearance.primaryFeatures"}),[r,s]=h.exports.useState([0]);return d("div",{children:[n(cn,{variant:"outline",expandedValues:r,onExpandedChange:o=>{s(o),o.length&&_e().preview.setHighlight(`[data-testid="primary-root-${o[0]}"]`)},children:e.map((o,i)=>d(Me,{value:i,label:n(l,{message:`Primary feature ${i+1}`}),children:[n(uv,{index:i}),n("div",{className:"text-right",children:n(_,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(i)},children:n(l,{message:"Remove"})})})]},o.id))}),n("div",{className:"mt-20 text-right",children:n(_,{size:"xs",variant:"outline",color:"primary",startIcon:n(Rt,{}),onClick:()=>{a({}),s([e.length])},children:n(l,{message:"Add feature"})})})]})}function uv({index:e}){const t=ja(a=>{var r,s,o;return(o=(s=(r=a.defaults)==null?void 0:r.settings.homepage.appearance)==null?void 0:s.primaryFeatures[e])==null?void 0:o.image});return d(Fn,{children:[n(wt,{name:`settings.homepage.appearance.primaryFeatures.${e}.image`,className:"mb-30",label:n(l,{message:"Image"}),highlightSelector:`[data-testid="primary-image-${e}"]`,defaultValue:t,diskPrefix:"homepage"}),n(E,{name:`settings.homepage.appearance.primaryFeatures.${e}.title`,label:n(l,{message:"Title"}),className:"mb-20",onFocus:()=>{_e().preview.setHighlight(`[data-testid="primary-title-${e}"]`)}}),n(E,{name:`settings.homepage.appearance.primaryFeatures.${e}.subtitle`,label:n(l,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{_e().preview.setHighlight(`[data-testid="primary-subtitle-${e}"]`)}})]})}function dv(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}const mv=se.forwardRef(({valueListKey:e="permissions",...t},a)=>{const{data:r}=vt([e]),s=(r==null?void 0:r.permissions)||(r==null?void 0:r.workspacePermissions),[o,i]=Ue(t.value,[],t.onChange),[c,u]=h.exports.useState(!1);if(!s)return null;const m=kc(s,o,c),p=b=>{const g=[...o],v=g.findIndex(y=>y.id===b.id);v>-1&&g.splice(v,1,b),i(g)};return d(h.exports.Fragment,{children:[n(cn,{variant:"outline",ref:a,children:m.map(({groupName:b,items:g,anyChecked:v})=>n(Me,{label:ga(b),startIcon:v?n(Du,{size:"sm"}):void 0,children:n(Bn,{children:g.map(y=>{const w=o.findIndex(x=>x.id===y.id),k=w>-1;return d("div",{children:[n(Ta,{onSelected:()=>{if(k){const x=[...o];x.splice(w,1),i(x)}else i([...o,y])},endSection:n(en,{tabIndex:-1,checked:k,onChange:()=>{}}),description:y.description,children:y.display_name||y.name}),k&&n(pv,{permission:y,onChange:p})]},y.id)})})},b))}),n(en,{className:"mt-30",checked:c,onChange:b=>{u(b.target.checked)},children:n(l,{message:"Show advanced permissions"})})]})});function pv({permission:e,onChange:t}){var r;if(!((r=e==null?void 0:e.restrictions)!=null&&r.length))return null;const a=(s,o)=>{const i=Pu(e,c=>{const u=c.restrictions.find(m=>m.name===s);u&&(u.value=o)});t==null||t(i)};return n("div",{className:"px-40 py-20",children:e.restrictions.map((s,o)=>{const i=o===e.restrictions.length-1;return s.type==="bool"?n(en,{description:s.description,className:N(!i&&"mb-30"),checked:Boolean(s.value),onChange:c=>{a(s.name,c.target.checked)},children:ga(s.name)},s.name):n(rn,{size:"sm",label:ga(s.name),description:s.description,type:"number",className:N(!i&&"mb-30"),value:s.value||"",onChange:c=>{a(s.name,c.target.value===""?void 0:parseInt(c.target.value))}},s.name)})})}function V0(e){const{field:{onChange:t,value:a=[],ref:r}}=yt({name:e.name});return n(mv,{ref:r,...qe({onChange:t,value:a},e)})}const ga=e=>dv(e.replace("_"," "));function kc(e,t,a){const r=[];return e.forEach(s=>{const o=t.findIndex(c=>c.id===s.id);if(!a&&s.advanced)return;let i=r.find(c=>c.groupName===s.group);if(i||(i={groupName:s.group,anyChecked:!1,items:[]},r.push(i)),o>-1){const c={...s,restrictions:hv(s.restrictions,t[o].restrictions)};i.anyChecked=!0,i.items.push(c)}else i.items.push(s)}),r}function hv(e,t){return e==null?void 0:e.map(a=>{const r=t.find(s=>s.name===a.name);return r?{...a,value:r.value}:a})}function fv(){const e=xc.sections.menus.config;return e?e.availableRoutes.map(t=>({id:t,label:t,action:t,type:"route",target:"_self"})):[]}const rr={grid:"flex flex-wrap gap-24",button:"flex flex-col items-center rounded hover:bg-hover h-90 aspect-square"},gv=[...Array(60).keys()],bv=se.lazy(()=>_a(()=>import("./icon-list.4edba4d5.js"),["icon-list.4edba4d5.js","main.0615c25a.js","main.e1cf65d7.css","UnfoldLess.a7fd5998.js","OpenInNew.ddbc34d6.js","TrendingDown.0d98a549.js","Edit.336acc69.js","MoreVert.14110417.js","TaskAlt.94a18e32.js","index.14466ddf.js"],import.meta.url));function vv({onIconSelected:e}){const{trans:t}=V(),[a,r]=se.useState("");return d("div",{className:"py-4",children:[n(rn,{className:"mb-20",value:a,onChange:s=>{r(s.target.value)},placeholder:t({message:"Search icons..."})}),n(Ve,{mode:"wait",children:n(h.exports.Suspense,{fallback:n(ye.div,{...$e,className:rr.grid,children:gv.map((s,o)=>n("div",{className:rr.button,children:n(De,{variant:"rect"})},o))}),children:n(ye.div,{...$e,className:rr.grid,children:n(bv,{searchQuery:a,onIconSelected:e})})})})]})}function yv(){return d(W,{size:"w-850",className:"min-h-dialog",children:[n(X,{children:n(l,{message:"Select icon"})}),n(Q,{children:n(kv,{})})]})}function kv(){const{close:e}=K();return n(vv,{onIconSelected:t=>{e(t)}})}function xv(e){const t=h.exports.useRef();return h.exports.useEffect(()=>{t.current=e},[e]),t.current}function sr({formPathPrefix:e,hideRoleAndPermissionFields:t}){const{trans:a}=V(),r=s=>e?`${e}.${s}`:s;return d(h.exports.Fragment,{children:[n(E,{className:"mb-20",name:r("label"),label:n(l,{message:"Label"}),placeholder:a(f("No label...")),startAppend:n(wv,{prefixName:r})}),n(Sv,{prefixName:r}),!t&&d(h.exports.Fragment,{children:[n(Cv,{prefixName:r}),n(_v,{prefixName:r})]}),n(Nv,{prefixName:r})]})}function wv({prefixName:e,...t}){const{watch:a,setValue:r}=ct(),s=e("icon"),o=a(s),i=o&&Lu(o);return d(M,{type:"modal",onClose:c=>{(c||c===null)&&r(s,c,{shouldDirty:!0})},children:[n(F,{className:"text-muted icon-sm",variant:"outline",size:"md",...t,children:i?n(i,{}):n(je,{})}),n(yv,{})]})}function Sv({prefixName:e}){const t=ct(),a=t.watch(e("type")),r=xv(a),{data:s}=vt(["menuItemCategories"]),o=(s==null?void 0:s.menuItemCategories)||[],i=o.find(m=>m.type===a),{trans:c}=V(),u=fv();return h.exports.useEffect(()=>{r&&r!==a&&t.setValue(e("action"),"")},[a,r,t,e]),d(h.exports.Fragment,{children:[d(Pe,{className:"mb-20",name:e("type"),selectionMode:"single",label:n(l,{message:"Type"}),children:[n(T,{value:"link",children:n(l,{message:"Custom link"})}),n(T,{value:"route",children:n(l,{message:"Site page"})}),o.map(m=>n(T,{value:m.type,children:m.name},m.type))]}),a==="link"&&n(E,{className:"mb-20",required:!0,type:"url",name:e("action"),placeholder:c({message:"Enter a url..."}),label:n(l,{message:"Url"})}),a==="route"&&n(ur,{className:"mb-20",required:!0,items:u,name:e("action"),openMenuOnFocus:!0,label:n(l,{message:"Page"}),children:m=>n(T,{value:m.id,children:m.label},m.id)}),i&&n(ur,{className:"mb-20",required:!0,items:i.items,name:e("action"),openMenuOnFocus:!0,label:i.name,children:m=>n(T,{value:m.action,children:m.label})})]})}function Cv({prefixName:e}){const{data:t}=vt(["roles","permissions"]),a=(t==null?void 0:t.roles)||[],{trans:r}=V();return n(Wn,{className:"mb-20",placeholder:r({message:"Add role..."}),label:n(l,{message:"Only show if user has role"}),name:e("roles"),chipSize:"sm",suggestions:a,valueKey:"id",displayWith:s=>{var o;return(o=a.find(i=>i.id===s.id))==null?void 0:o.name},children:s=>n(T,{value:s.id,capitalizeFirst:!0,children:s.name},s.id)})}function _v({prefixName:e}){const{data:t}=vt(["roles","permissions"]),{trans:a}=V(),r=h.exports.useMemo(()=>kc((t==null?void 0:t.permissions)||[],[],!1),[t==null?void 0:t.permissions]);return n(Wn,{label:n(l,{message:"Only show if user has permissions"}),placeholder:a({message:"Add permission..."}),chipSize:"sm",suggestions:r,name:e("permissions"),valueKey:"name",children:({groupName:s,items:o})=>n(Eu,{label:ga(s),children:o.map(i=>n(T,{value:i.name,description:i.description,children:i.display_name||i.name},i.name))},s)})}function Nv({prefixName:e}){return ct().watch(e("type"))!=="link"?null:d(Pe,{className:"mt-20",selectionMode:"single",name:e("target"),label:n(l,{message:"Open link in"}),children:[n(T,{value:"_self",children:n(l,{message:"Same window"})}),n(T,{value:"_blank",children:n(l,{message:"New window"})})]})}function Iv(){const[e,t]=h.exports.useState(["cta1"]);return d(cn,{variant:"outline",expandedValues:e,onExpandedChange:a=>{t(a),a.length&&_e().preview.setHighlight(`[data-testid="${a[0]}"]`)},children:[n(Me,{value:"cta1",label:n(l,{message:"Header button 1"}),children:n(sr,{formPathPrefix:"settings.homepage.appearance.actions.cta1"})}),n(Me,{value:"ct2",label:n(l,{message:"Header button 2"}),children:n(sr,{formPathPrefix:"settings.homepage.appearance.actions.cta2"})}),n(Me,{value:"cta3",label:n(l,{message:"Footer button"}),children:n(sr,{formPathPrefix:"settings.homepage.appearance.actions.cta3"})})]})}function Rv(e){const{size:t="md",inline:a,label:r,showValueLabel:s=!!r,className:o,slider:i,children:c}=e,{domProps:u,trackRef:m,getThumbPercent:p,getThumbValueLabel:b,labelId:g,groupId:v,thumbIds:y,isDisabled:w,numberFormatter:k,minValue:x,maxValue:S,step:R,values:C,getValueLabel:D}=i;let U="",I=Math.max([...k.format(x)].length,[...k.format(S)].length,[...k.format(R)].length);D?U=D(C[0]):C.length===1?U=b(0):C.length===2&&(U=`${b(0)} \u2013 ${b(1)}`,I=3+2*Math.max(I,[...k.format(x)].length,[...k.format(S)].length));const P=lt({size:t,disabled:w,labelDisplay:"flex"}),L=N("w-full flex-shrink-0 touch-none",o,{"flex items-center":a});return d("div",{className:L,role:"group",id:v,children:[d("div",{className:N(P.label,"select-none"),children:[r&&n("label",{onClick:()=>{var H;(H=document.getElementById(y[0]))==null||H.focus()},id:g,htmlFor:v,children:r}),s&&n("output",{htmlFor:y[0],className:"ml-auto text-right","aria-live":"off",style:I?{width:`${I}ch`,minWidth:`${I}ch`}:void 0,children:U})]}),d("div",{ref:m,className:"h-30 relative",...u,role:"presentation",children:[n("div",{className:`absolute inset-0 m-auto h-4 rounded ${w?"bg-disabled":"bg-primary-light"}`}),n("div",{className:`absolute inset-0 my-auto h-4 rounded ${w?"bg-disabled-fg":"bg-primary"}`,style:{width:`${p(0)*100}%`}}),c]})]})}function Dv({minValue:e=0,maxValue:t=100,isDisabled:a=!1,step:r=1,formatOptions:s,onChangeEnd:o,label:i,getValueLabel:c,...u}){var _s;const m=zr(s),{addGlobalListener:p,removeGlobalListener:b}=Ia(),g=h.exports.useRef(null),[v,y]=Ue(u.value?u.value:void 0,(_s=u.defaultValue)!=null?_s:[e],u.onChange),w=h.exports.useRef(null);w.current=v;const[k,x]=h.exports.useState(new Array(v.length).fill(!1)),S=h.exports.useRef(null);S.current=k;function R($){return m.format($)}const C=$=>{var oe;return((oe=S.current)==null?void 0:oe[$])||!1},D=$=>R(v[$]),U=$=>$===0?e:v[$-1],I=$=>$===v.length-1?t:v[$+1],P=($,oe)=>{if(a||!ne($)||!w.current)return;const Ge=U($),dt=I($);oe=Tu(oe,Ge,dt,r),w.current=Ao(w.current,$,oe),y(w.current)},L=($,oe)=>{var dt;if(a||!ne($))return;const Ge=(dt=S.current)==null?void 0:dt[$];S.current=Ao(S.current||[],$,oe),x(S.current),o&&Ge&&!S.current.some(Boolean)&&o(w.current||[])},[H,me]=h.exports.useState(void 0),xe=$=>($-e)/(t-e),Ae=$=>xe(w.current[$]),be=($,oe)=>{P($,O(oe))},z=$=>Math.round(($-e)/r)*r+e,O=$=>{const oe=$*(t-e)+e;return Nn(z(oe),e,t)},te=h.exports.useRef(new Array(v.length).fill(!0)),ne=$=>te.current[$],St=($,oe)=>{te.current[$]=oe},Re=h.exports.useRef(null),Ss=h.exports.useRef(void 0),Tc=$=>{if(!($.pointerType==="mouse"&&($.button!==0||$.altKey||$.ctrlKey||$.metaKey))&&g.current&&!a&&v.every((oe,Ge)=>!k[Ge])){const oe=g.current.offsetWidth,Ge=g.current.getBoundingClientRect().left,Ka=($.clientX-Ge)/oe,Zn=O(Ka);let et;const Ct=v.findIndex(Qa=>Zn-Qa<0);if(Ct===0)et=Ct;else if(Ct===-1)et=v.length-1;else{const Qa=v[Ct-1],Oc=v[Ct];Math.abs(Qa-Zn)<Math.abs(Oc-Zn)?et=Ct-1:et=Ct}et>=0&&ne(et)?($.preventDefault(),Re.current=et,me(et),Ss.current=$.pointerId,L(Re.current,!0),P(et,Zn),p(window,"pointerup",Cs,!1)):Re.current=null}},vn=h.exports.useRef(null),{domProps:Ac}=ll({onPointerDown:Tc,onMoveStart(){vn.current=null},onMove($,oe){var dt;const Ge=((dt=g.current)==null?void 0:dt.offsetWidth)||0;if(vn.current==null&&(vn.current=Ae(Re.current||0)*Ge),vn.current+=oe,Re.current!=null&&g.current){const Ka=Nn(vn.current/Ge,0,1);be(Re.current,Ka)}},onMoveEnd(){Re.current!=null&&(L(Re.current,!1),Re.current=null)}}),Cs=$=>{$.pointerId===Ss.current&&(Re.current!=null&&(L(Re.current,!1),Re.current=null),b(window,"pointerup",Cs,!1))},Ga=h.exports.useId(),zc=i?`${Ga}-label`:void 0,$c=`${Ga}-group`,Fc=[...Array(v.length)].map(($,oe)=>`${Ga}-thumb-${oe}`);return{domProps:Ac,trackRef:g,isDisabled:a,step:r,values:v,minValue:e,maxValue:t,focusedThumb:H,labelId:zc,groupId:$c,thumbIds:Fc,numberFormatter:m,getThumbPercent:Ae,getThumbMinValue:U,getThumbMaxValue:I,getThumbValueLabel:D,isThumbDragging:C,setThumbValue:P,updateDraggedThumbs:L,setThumbEditable:St,setFocusedThumb:me,getValueLabel:c}}function Ao(e,t,a){return e[t]===a?e:[...e.slice(0,t),a,...e.slice(t+1)]}function Pv({index:e,slider:t,isDisabled:a,ariaLabel:r,inputRef:s,onBlur:o}){const i=ya(s),{addGlobalListener:c,removeGlobalListener:u}=Ia(),{step:m,values:p,focusedThumb:b,labelId:g,thumbIds:v,isDisabled:y,getThumbPercent:w,getThumbMinValue:k,getThumbMaxValue:x,getThumbValueLabel:S,setThumbValue:R,updateDraggedThumbs:C,isThumbDragging:D,setThumbEditable:U,setFocusedThumb:I}=t,P=p[e];U(e,!a);const L=a||y,H=h.exports.useCallback(()=>{i.current&&i.current.focus({preventScroll:!0})},[i]),me=b===e;h.exports.useEffect(()=>{me&&H()},[me,H]);const xe=h.exports.useRef(void 0),Ae=z=>{z.pointerId===xe.current&&(H(),C(e,!1),u(window,"pointerup",Ae,!1))},be=N("outline-none rounded-full w-18 h-18 top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",!L&&"focus-within:ring focus-within:ring-primary-light shadow-md",Lv({isDisabled:L,isDragging:D(e)}));return n("div",{role:"presentation",className:be,style:{left:`${Math.max(w(e)*100,0)}%`},onPointerDown:z=>{z.button!==0||z.altKey||z.ctrlKey||z.metaKey||(H(),xe.current=z.pointerId,C(e,!0),c(window,"pointerup",Ae,!1))},children:n("input",{id:v[e],onKeyDown:Qe(()=>{C(e,!0)}),onKeyUp:Qe(()=>{C(e,!1)}),ref:i,tabIndex:L?void 0:0,min:k(e),max:x(e),step:m,value:P,disabled:L,"aria-label":r,"aria-labelledby":g,"aria-orientation":"horizontal","aria-valuetext":S(e),onFocus:()=>{I(e)},onBlur:z=>{I(void 0),C(e,!1),o==null||o(z)},onChange:z=>{R(e,parseFloat(z.target.value))},type:"range",className:"sr-only"})})}function Lv({isDisabled:e,isDragging:t}){return e?"bg-slider-disabled cursor-default":N("hover:bg-primary-dark",t?"bg-primary-dark":"bg-primary")}function Ev({inputRef:e,onBlur:t,...a}){const{onChange:r,onChangeEnd:s,value:o,defaultValue:i,...c}=a,u={...c,value:o!=null?[o]:void 0,defaultValue:i!=null?[i]:void 0,onChange:p=>{r==null||r(p[0])},onChangeEnd:p=>{s==null||s(p[0])}},m=Dv(u);return n(Rv,{...u,slider:m,children:n(Pv,{index:0,slider:m,inputRef:e,onBlur:t})})}function Tv({name:e,...t}){const{field:{onChange:a,onBlur:r,value:s="",ref:o}}=yt({name:e});return n(Ev,{inputRef:o,...qe({onChange:a,onBlur:r,value:s||""},t)})}const sa=h.exports.forwardRef(({startIcon:e,children:t,className:a,...r},s)=>d(Lt,{ref:s,className:N("flex items-center gap-10 w-full rounded border text-sm h-54 px-14 mb-10 bg relative hover:bg-hover",a),variant:null,...r,children:[e,n("div",{children:t}),n(zt,{className:"icon-sm text-muted ml-auto"})]}));function Av(){return d(h.exports.Fragment,{children:[n(zv,{}),d("div",{className:"my-24 py-24 border-y",children:[n(sa,{to:"action-buttons",elementType:pe,className:"mb-20",children:n(l,{message:"Action buttons"})}),n(sa,{to:"primary-features",elementType:pe,children:n(l,{message:"Primary features"})}),n(sa,{to:"secondary-features",elementType:pe,children:n(l,{message:"Secondary features"})})]}),n($v,{}),n(Fv,{})]})}function zv(){const e=ja(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.headerImage});return d(h.exports.Fragment,{children:[n(E,{label:n(l,{message:"Header title"}),className:"mb-20",name:"settings.homepage.appearance.headerTitle",onFocus:()=>{_e().preview.setHighlight('[data-testid="headerTitle"]')}}),n(E,{label:n(l,{message:"Header subtitle"}),className:"mb-30",inputElementType:"textarea",rows:4,name:"settings.homepage.appearance.headerSubtitle",onFocus:()=>{_e().preview.setHighlight('[data-testid="headerSubtitle"]')}}),n(Je,{className:"mb-24",name:"settings.links.homepage_creation",children:n(l,{message:"Link shortening"})}),n(wt,{name:"settings.homepage.appearance.headerImage",className:"mb-30",label:n(l,{message:"Header image"}),highlightSelector:'[data-testid="headerImage"]',defaultValue:e,diskPrefix:"homepage"}),n(Tv,{name:"settings.homepage.appearance.headerImageOpacity",label:n(l,{message:"Header image opacity"}),minValue:0,step:.1,maxValue:1,formatOptions:{style:"percent"}}),n("div",{className:"text-muted text-xs mb-20",children:n(l,{message:"In order for overlay colors to appear, header image opacity will need to be less then 100%"})}),n(zo,{formKey:"settings.homepage.appearance.headerOverlayColor1",label:n(l,{message:"Header overlay color 1"})}),n(zo,{formKey:"settings.homepage.appearance.headerOverlayColor2",label:n(l,{message:"Header overlay color 2"})})]})}function $v(){const e=ja(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.footerImage});return d(h.exports.Fragment,{children:[n(Je,{className:"mb-24",name:"settings.links.homepage_stats",children:n(l,{message:"Show link statistics"})}),n(E,{label:n(l,{message:"Footer title"}),className:"mb-20",name:"settings.homepage.appearance.footerTitle",onFocus:()=>{_e().preview.setHighlight('[data-testid="footerTitle"]')}}),n(E,{label:n(l,{message:"Footer subtitle"}),className:"mb-20",name:"settings.homepage.appearance.footerSubtitle",onFocus:()=>{_e().preview.setHighlight('[data-testid="footerSubtitle"]')}}),n(wt,{name:"settings.homepage.appearance.footerImage",className:"mb-30",label:n(l,{message:"Footer background image"}),highlightSelector:'[data-testid="footerImage"]',defaultValue:e,diskPrefix:"homepage"})]})}function Fv(){return d("div",{className:"mt-24 pt-24 border-t",children:[n(E,{label:n(l,{message:"Pricing title"}),className:"mb-20",name:"settings.homepage.appearance.pricingTitle",onFocus:()=>{_e().preview.setHighlight('[data-testid="pricingTitle"]')}}),n(E,{label:n(l,{message:"Pricing subtitle"}),className:"mb-20",name:"settings.homepage.appearance.pricingSubtitle",onFocus:()=>{_e().preview.setHighlight('[data-testid="pricingSubtitle"]')}}),n(Je,{className:"mb-24",name:"settings.links.homepage_pricing",children:n(l,{message:"Show pricing table"})})]})}function zo({label:e,formKey:t}){const a=t,{watch:r,setValue:s}=ct(),o=r(a),i=c=>{s(t,c,{shouldDirty:!0})};return d(M,{currentValue:o,type:"popover",onClose:c=>{i(c)},children:[n(sa,{className:"capitalize",startIcon:n(gs,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:o}}),children:e}),n(Kn,{defaultValue:o,onChange:c=>{i(c)}})]})}function Ov(){const{fields:e,remove:t,append:a}=Da({name:"settings.homepage.appearance.secondaryFeatures"}),[r,s]=h.exports.useState([0]);return d("div",{children:[n(cn,{variant:"outline",expandedValues:r,onExpandedChange:o=>{s(o),o.length&&_e().preview.setHighlight(`[data-testid="secondary-root-${o[0]}"]`)},children:e.map((o,i)=>d(Me,{value:i,label:n(l,{message:`Secondary feature ${i+1}`}),children:[n(Mv,{index:i}),n("div",{className:"text-right",children:n(_,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(i)},children:n(l,{message:"Remove"})})})]},o.id))}),n("div",{className:"mt-20 text-right",children:n(_,{size:"xs",variant:"outline",color:"primary",startIcon:n(Rt,{}),onClick:()=>{a({}),s([e.length])},children:n(l,{message:"Add feature"})})})]})}function Mv({index:e}){return d(Fn,{children:[n(wt,{name:`settings.homepage.appearance.secondaryFeatures.${e}.image`,className:"mb-30",label:n(l,{message:"Image"}),highlightSelector:`[data-testid="secondary-image-${e}"]`,defaultValue:Uv(e),diskPrefix:"homepage"}),n(E,{name:`settings.homepage.appearance.secondaryFeatures.${e}.title`,label:n(l,{message:"Title"}),className:"mb-20",onFocus:()=>{_e().preview.setHighlight(`[data-testid="secondary-title-${e}"]`)}}),n(E,{name:`settings.homepage.appearance.secondaryFeatures.${e}.subtitle`,label:n(l,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{_e().preview.setHighlight(`[data-testid="secondary-subtitle-${e}"]`)}}),n(E,{name:`settings.homepage.appearance.secondaryFeatures.${e}.description`,label:n(l,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{_e().preview.setHighlight(`[data-testid="secondary-description-${e}"]`)}})]})}function Uv(e){var t,a;return(a=((t=_e().defaults)==null?void 0:t.settings.homepage.appearance).secondaryFeatures[e])==null?void 0:a.image}const Vv={preview:{defaultRoute:"dashboard",navigationRoutes:["dashboard"]},sections:{"landing-page":{label:f("Landing Page"),position:1,previewRoute:"/",routes:[{path:"landing-page",element:n(Av,{})},{path:"landing-page/action-buttons",element:n(Iv,{})},{path:"landing-page/primary-features",element:n(cv,{})},{path:"landing-page/secondary-features",element:n(Ov,{})}],buildBreadcrumb:e=>{const a=e.split("/").filter(s=>!!s).pop(),r=[{label:f("Landing page"),location:"landing-page"}];return a==="action-buttons"&&r.push({label:f("Action buttons"),location:"landing-page/action-buttons"}),a==="primary-features"&&r.push({label:f("Primary features"),location:"landing-page/primary-features"}),a==="secondary-features"&&r.push({label:f("Secondary features"),location:"landing-page/secondary-features"}),r}},menus:{config:{positions:["link-page-navbar","dashboard-navbar","dashboard-sidebar","homepage-navbar","footer","footer-secondary"],availableRoutes:["/dashboard","/dashboard/biolinks","/dashboard/links","/dashboard/link-groups","/dashboard/custom-domains","/dashboard/link-overlays","/dashboard/link-pages","/dashboard/tracking-pixels"]}}}},xc=Au.all([lv,Vv]),ja=Mr()(iv(Ur((e,t)=>({defaults:null,iframeWindow:null,config:xc,setDefaults:a=>{e(r=>{r.defaults={...a}})},setIframeWindow:a=>{e(()=>({iframeWindow:a}))},preview:{navigate:a=>{var i;const r=(i=t().config)==null?void 0:i.sections[a],s=(r==null?void 0:r.previewRoute)||"/",o=t().iframeWindow;s&&yn(o,{type:"navigate",to:s})},setValues:a=>{const r=t().iframeWindow;yn(r,{type:"setValues",values:a})},setThemeColor:(a,r)=>{const s=t().iframeWindow;yn(s,{type:"setThemeColor",name:a,value:r})},setActiveTheme:a=>{const r=t().iframeWindow;yn(r,{type:"setActiveTheme",themeId:a})},setCustomCode:(a,r)=>{const s=t().iframeWindow;yn(s,{type:"setCustomCode",mode:a,value:r})},setHighlight:a=>{e(()=>{var o;let r=null;const s=(o=t().iframeWindow)==null?void 0:o.document;s&&a&&(r=s.querySelector(a)),r&&requestAnimationFrame(()=>{!r||r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})})}}}))));function yn(e,t){e&&e.postMessage({source:"be-appearance-editor",...t},"*")}function _e(){return ja.getState()}const Bv=2*1024*1024;function Hv({className:e,label:t,description:a,value:r,onChange:s,highlightSelector:o,defaultValue:i,diskPrefix:c,showRemoveButton:u,invalid:m,errorMessage:p,required:b,autoFocus:g}){const{uploadFile:v,selectAndUploadFile:y,entry:w,percentage:k,uploadStatus:x,deleteEntry:S,isDeletingEntry:R}=Kl(),C=h.exports.useRef(null);Zo({autoFocus:g},C);const D=h.exports.useId(),U=t?`${D}-label`:void 0,I=a?`${D}-description`:void 0,P=r||(w==null?void 0:w.url),L={showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[dr.image],maxFileSize:Bv},metadata:{diskPrefix:c,disk:tn.public},onSuccess:be=>{s==null||s(be.url)},onError:be=>{be&&Z.danger(be)}},H=lt({description:a,descriptionPosition:"top",invalid:m}),me=d(Er,{fieldClassNames:H,errorMessage:p,invalid:m,children:[n("input",{ref:C,"aria-labelledby":U,"aria-describedby":I,required:b,accept:dr.image,type:"file",disabled:x==="inProgress",onChange:be=>{var z;(z=be.target.files)!=null&&z.length&&v(be.target.files[0],L)},className:N(H.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")}),x==="inProgress"&&n(hr,{className:"absolute bottom-0 left-0 right-0",size:"xs",isIndeterminate:!0})]}),xe=n(_,{onClick:()=>{y(L)},disabled:x==="inProgress",className:"mr-10",variant:"outline",color:"primary",size:"xs",children:n(l,{message:"Replace"})}),Ae=n(_,{variant:"outline",color:"danger",size:"xs",disabled:R,onClick:()=>{S({onSuccess:()=>s==null?void 0:s("")})},children:n(l,{message:"Remove"})});return d("div",{className:N("text-sm",e),onClick:()=>{_e().preview.setHighlight(o)},children:[t&&n("div",{id:U,className:H.label,children:t}),a&&n("div",{className:H.description,children:a}),n("div",{children:P?d("div",{"aria-labelledby":U,"aria-describedby":I,children:[d("div",{className:"h-80 border rounded bg-chip p-6 relative overflow-hidden",children:[n("img",{className:"h-full mx-auto rounded object-contain",src:P,alt:""}),x==="inProgress"&&n(hr,{value:k,size:"xs",className:"absolute left-0 bottom-0 w-full","aria-label":"upload progress"})]}),d("div",{className:"mt-10",children:[xe,u&&Ae,i&&r!==i&&n(_,{variant:"outline",color:"primary",size:"xs",onClick:()=>{s==null||s(i)},children:n(l,{message:"Use default"})})]})]}):me})]})}function wt(e){const{field:{onChange:t,value:a=null},fieldState:{error:r}}=yt({name:e.name}),s={onChange:t,value:a,invalid:r!=null,errorMessage:r?n(l,{message:"Please select an image."}):null};return n(Hv,{...qe(s,e)})}function wc({form:e,isLoading:t,onSubmit:a}){return d(ke,{form:e,onSubmit:a,className:"flex h-full",children:[n("div",{className:"flex-shrink-0 w-full md:w-288 px-16 md:border-r md:shadow-lg h-full overflow-y-auto",children:d(dc,{children:[d(mc,{expand:!0,children:[n(Sn,{children:n(l,{message:"General"})}),n(Sn,{children:n(l,{message:"Style"})})]}),d(pc,{className:"my-24",children:[d(Cn,{children:[n(Gv,{}),n($o,{disabled:t})]}),d(Cn,{children:[n(Wv,{}),n($o,{disabled:t,className:"mt-14"})]})]})]})}),d("div",{className:"flex-auto relative hidden md:block",children:[n(Ob,{}),n(Kv,{})]})]})}function $o(e){return n(_,{type:"submit",variant:"flat",color:"primary",...e,children:n(l,{message:"Save"})})}function qv(){return n(wt,{className:"mb-20",name:"colors.bg-image",label:n(l,{message:"Background image"}),diskPrefix:"overlays",showRemoveButton:!0})}function jv({name:e,children:t}){const{watch:a,setValue:r}=ct(),s=a(`colors.${e}`);return d(M,{currentValue:s,type:"popover",placement:"right",offset:10,onClose:o=>{r(`colors.${e}`,o)},children:[d(Lt,{className:"flex items-center gap-10 w-full rounded border text-sm h-54 px-14 mb-10 bg relative hover:bg-hover",children:[n(gs,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:s}}),n("div",{children:t}),n(zt,{className:"icon-sm text-muted ml-auto"})]}),n(Kn,{defaultValue:s,onChange:o=>{r(`colors.${e}`,o)}})]})}function Wv(){return d(h.exports.Fragment,{children:[n(jn,{children:n(qv,{})}),Pb.map(({key:e,label:t})=>n(jv,{name:e,children:n(l,{...t})},e))]})}function Gv(){return d(h.exports.Fragment,{children:[n(E,{name:"name",label:n(l,{message:"Name"}),className:"mb-24",required:!0}),n(Pe,{name:"position",selectionMode:"single",label:n(l,{message:"Position"}),className:"mb-24",children:uc.map(e=>n(T,{value:e.key,children:n(l,{...e.label})},e.key))}),n(Pe,{name:"theme",selectionMode:"single",label:n(l,{message:"Theme"}),className:"mb-24",children:cc.map(e=>n(T,{value:e.key,children:n(l,{...e.label})},e.key))}),n(E,{name:"message",label:n(l,{message:"Message"}),inputElementType:"textarea",maxLength:200,rows:2,className:"mb-24"}),n(E,{name:"label",label:n(l,{message:"Label"}),maxLength:8,className:"mb-24"}),n(E,{type:"url",name:"btn_link",label:n(l,{message:"Button link"}),className:"mb-24"}),n(E,{name:"btn_text",label:n(l,{message:"Button text"}),maxLength:30,className:"mb-24"})]})}function Kv(){const{watch:e}=ct(),t=e();return n(zu,{overlay:t})}function Qv(){const{trans:e}=V(),t=At(),a=ae({defaultValues:{position:"bottom-left",theme:"default",label:e(f("Label")),message:e(f("Your message here")),btn_text:e(f("Button text")),btn_link:"https://google.com",colors:{"bg-color":"rgb(61, 75, 101)","text-color":"rgb(255, 255, 255)","label-bg-color":"rgb(255, 255, 255)","label-color":"rgb(0, 0, 0)"}}}),r=Ab(a);return n(wc,{form:a,isLoading:r.isLoading,onSubmit:s=>{r.mutate(s,{onSuccess:()=>t("..",{relative:"path"})})}})}const vs=e=>`link-overlay/${e}`;function Yv(e){return Be([vs(e)],()=>Zv(e))}function Zv(e){return A.get(vs(e)).then(t=>t.data)}function Xv(e,t){const{trans:a}=V();return G(r=>Jv(e,r),{onSuccess:()=>{Z.positive(a(f("Overlay updated"))),j.invalidateQueries(J("link-overlay")),j.invalidateQueries([vs(e)])},onError:r=>Ne(r,t)})}function Jv(e,t){return A.put(`link-overlay/${e}`,t).then(a=>a.data)}function ey(){const{overlayId:e}=Xe(),{data:t,isLoading:a,isError:r}=Yv(e);return a?n(Br,{}):r?null:n(ty,{overlay:t.linkOverlay})}function ty({overlay:e}){const t=At(),a=ae({defaultValues:{name:e.name,position:e.position,theme:e.theme,label:e.label,message:e.message,btn_text:e.btn_text,btn_link:e.btn_link,colors:e.colors}}),r=Xv(e.id,a);return n(wc,{form:a,isLoading:r.isLoading,onSubmit:s=>{r.mutate(s,{onSuccess:()=>t("../..",{relative:"path"})})}})}const ny=""+new URL("marketing.2040a197.svg",import.meta.url).href,Fo=[{key:"name",allowsSorting:!0,header:()=>n(l,{message:"Name"}),width:"w-5/6 max-w-200",body:e=>n("a",{className:an,href:e.short_url,target:"_blank",rel:"noreferrer",children:e.name})},{key:"clicks_count",allowsSorting:!0,header:()=>n(l,{message:"Clicks"}),body:e=>e.clicks_count?n(rt,{value:e.clicks_count}):"-"},{key:"domain_id",allowsSorting:!0,header:()=>n(l,{message:"Domain"}),body:e=>n(ay,{model:e})},{key:"user_id",allowsSorting:!0,header:()=>n(l,{message:"Owner"}),body:e=>e.user?n(Ht,{image:e.user.avatar,label:e.user.display_name,description:e.user.email}):""},{key:"links_count",allowsSorting:!0,header:()=>n(l,{message:"Links"}),body:e=>e.links_count?n(rt,{value:e.links_count}):"-"},{key:"active",allowsSorting:!0,header:()=>n(l,{message:"Active"}),body:e=>e.active?n(Zt,{className:"icon-md text-positive"}):n(Ze,{className:"icon-md text-danger"})},{key:"updated_at",allowsSorting:!0,header:()=>n(l,{message:"Last updated"}),body:e=>e.updated_at?n(st,{date:e.updated_at}):""},{key:"actions",header:()=>n(l,{message:"Actions"}),hideHeader:!0,align:"end",body:e=>d("div",{className:"text-muted",children:[n(Ce,{label:n(l,{message:"Clicks report"}),children:n(pe,{to:`${e.id}`,children:n(F,{size:"md",children:n(An,{})})})}),n(Tt,{link:e}),n(de,{resource:e,action:"update",children:n(pe,{to:`${e.id}/edit/content`,children:n(F,{size:"md",children:n(je,{})})})})]})}];function ay({model:e}){const{data:t}=un(),a=Ql(t==null?void 0:t.domains);return e.domain_id===0&&a?n(h.exports.Fragment,{children:a}):e.domain_id&&e.domain?n(h.exports.Fragment,{children:ot(e.domain.host)}):n(l,{message:"All domains"})}const Oo=[new re({type:q.Select,key:"active",label:f("Status"),description:f("Whether biolink is disabled or not"),defaultValue:"01",defaultOperator:Ie.eq,options:[{key:"01",label:f("Enabled"),value:!0},{key:"02",label:f("Disabled"),value:!1}]}),new re({type:q.Input,inputType:"number",key:"clicks_count",label:f("Clicks count"),description:f("Number of times this biolink was visited"),defaultValue:1,defaultOperator:Ie.gte,operators:da}),new re({type:q.Input,inputType:"number",key:"links_count",label:f("Link count"),description:f("Number of links in the biolink"),defaultValue:1,defaultOperator:Ie.gte,operators:da}),new Ot({description:f("Date biolink was created")}),new Mt({description:f("Date biolink was last updated")}),new re({type:q.SelectModel,model:Ut,key:"user_id",label:f("User"),description:f("User biolink was created by")})];function ry(e){const{trans:t}=V();return G(a=>sy(a),{onSuccess:()=>{Z.positive(t(f("Biolink created"))),j.invalidateQueries(J("biolink"))},onError:a=>Ne(a,e)})}function sy(e){return A.post("biolink",cs(e)).then(t=>t.data)}function oy(){const e=At(),{formId:t,close:a}=K(),{custom_domains:r}=ge(),{verify:s,isVerifying:o}=Mn("link_creation"),i=ae({defaultValues:{active:!0,hash:Vr(6),domain_id:r!=null&&r.allow_all_option?void 0:0}}),c=ry(i);return d(W,{size:"md",children:[n(X,{children:n(l,{message:"Create biolink"})}),n(Q,{children:d(ke,{form:i,id:t,onBeforeSubmit:()=>{i.clearErrors("hash")},onSubmit:async m=>{await s()&&c.mutate(m,{onSuccess:b=>{a(),e(`${b.biolink.id}/edit`)}})},children:[d("div",{className:"mb-24",children:[n(E,{name:"name",label:n(l,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),n(Ha,{form:i,name:"hash"})]}),n(is,{name:"domain_id",className:"mb-24"}),n(E,{name:"description",className:"mb-24",label:n(l,{message:"Description"}),inputElementType:"textarea",rows:2}),n(Je,{name:"active",description:n(l,{message:"Whether this biolink is viewable publicly."}),className:"mb-24",children:n(l,{message:"Active"})})]})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{a()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:t,disabled:c.isLoading||o,children:n(l,{message:"Create"})})]})]})}function iy({forCurrentUser:e}){const{user:t}=he(),{workspaceId:a}=Ee(),{filters:r,columns:s}=h.exports.useMemo(()=>{const i=e?Fo.filter(u=>u.key!=="user_id"):Fo;return{filters:e?Oo.filter(u=>u.key!=="user_id"):Oo,columns:i}},[e]);h.exports.useEffect(()=>{Ua()},[]);const o=e?t==null?void 0:t.id:"";return n($t,{endpoint:"biolink",queryParams:{userId:o,withCount:"links",with:"user,domain",workspaceId:a},title:n(l,{message:"Biolinks"}),headerContent:n(ly,{}),filters:r,columns:s,actions:n(cy,{}),selectedActions:n(de,{resource:"biolink",action:"delete",children:n(Ft,{})}),emptyStateMessage:n(xt,{image:ny,title:n(l,{message:"No biolinks have been created yet"}),filteringTitle:n(l,{message:"No matching biolinks"})})})}function ly(){return n(mn,{title:n(l,{message:"Link in bio"}),body:n(l,{message:"Offer multiple choices to your followers when they click on your Biolink. Share all your Social Media profiles, videos, songs, articles and other important links with just one url."})})}function cy(){return n(de,{resource:"biolink",action:"create",children:d(M,{type:"modal",children:[n(kt,{children:n(l,{message:"New biolink"})}),n(oy,{})]})})}const ys=(e,t)=>J(`biolink/${e}`,t);function uy(){const{biolinkId:e}=Xe();return Be(ys(e),()=>Sc(e),{initialData:dy(e)})}function Sc(e,t){return A.get(`biolink/${e}`,{params:t}).then(a=>a.data)}function dy(e){var a,r;const t=(r=(a=j.getQueryData(J("biolink"),{exact:!1}))==null?void 0:a.pagination)==null?void 0:r.data.find(s=>s.id===+e);return t?{biolink:t}:void 0}function my(){var s;const e=At(),{biolinkId:t}=Xe(),a=uy(),r=(s=a.data)==null?void 0:s.biolink;return n(za,{model:`biolink=${t}`,title:d(Dn,{size:"xl",className:N(a.isLoading&&"invisible"),children:[n(bt,{onSelected:()=>{e("..",{relative:"path"})},children:n(l,{message:"Biolinks"})}),n(bt,{className:"first-letter:capitalize",children:n(l,{message:"\u201C:name\u201C clicks",values:{name:r==null?void 0:r.name}})})]}),actions:r&&n(Tt,{className:"flex-shrink-0 text-muted",link:r})})}const py=B(n("path",{d:"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"}),"WidgetsOutlined"),hy=B(n("path",{d:"M15 2c-2.71 0-5.05 1.54-6.22 3.78-1.28.67-2.34 1.72-3 3C3.54 9.95 2 12.29 2 15c0 3.87 3.13 7 7 7 2.71 0 5.05-1.54 6.22-3.78 1.28-.67 2.34-1.72 3-3C20.46 14.05 22 11.71 22 9c0-3.87-3.13-7-7-7zM9 20c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.87 3.13 7 7 7-.84.63-1.88 1-3 1zm3-3c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.86 3.13 6.99 7 7-.84.63-1.88 1-3 1zm4.7-3.3c-.53.19-1.1.3-1.7.3-2.76 0-5-2.24-5-5 0-.6.11-1.17.3-1.7.53-.19 1.1-.3 1.7-.3 2.76 0 5 2.24 5 5 0 .6-.11 1.17-.3 1.7zM19 12c0-3.86-3.13-6.99-7-7 .84-.63 1.87-1 3-1 2.76 0 5 2.24 5 5 0 1.12-.37 2.16-1 3z"}),"AnimationOutlined"),fy=B(n("path",{d:"m15 5-1.41 1.41L15 7.83 17.17 10H8c-2.76 0-5 2.24-5 5v4h2v-4c0-1.65 1.35-3 3-3h9.17L15 14.17l-1.41 1.41L15 17l6-6-6-6z"}),"ShortcutOutlined"),gy=B([n("path",{d:"M10 8v6l4.7 2.9.8-1.2-4-2.4V8z"},"0"),n("path",{d:"M17.92 12c.05.33.08.66.08 1 0 3.9-3.1 7-7 7s-7-3.1-7-7 3.1-7 7-7c.7 0 1.37.1 2 .29V4.23c-.64-.15-1.31-.23-2-.23-5 0-9 4-9 9s4 9 9 9 9-4 9-9c0-.34-.02-.67-.06-1h-2.02z"},"1"),n("path",{d:"M20 5V2h-2v3h-3v2h3v3h2V7h3V5z"},"2")],"MoreTimeOutlined");function ks({title:e,description:t,actions:a,color:r="primary",className:s}){return d("div",{className:N(s,"p-10 rounded border-l-4",r==="positive"&&"bg-positive/focus border-l-positive",r==="warning"&&"bg-warning/focus border-l-warning",r==="danger"&&"bg-danger/focus border-l-danger",r==="primary"&&"bg-primary/focus border-l-primary"),children:[e&&n("div",{className:"text-sm mb-4 font-medium",children:e}),t&&n("div",{className:"text-sm",children:t}),a&&n("div",{className:"mt-14",children:a})]})}const it=Mr()(Ur((e,t)=>({appearance:null,appearanceIsDirty:!1,setAppearanceIsDirty:a=>{e(r=>{r.appearanceIsDirty=a})},biolink:null,setBiolink:a=>{e(r=>{var s;r.biolink=a,r.appearanceIsDirty||(r.appearance=((s=a.appearance)==null?void 0:s.config)||null)})},updateAppearance(a){e(r=>{r.appearanceIsDirty=!0,r.appearance={...r.appearance,...a}})}})));function ze(){return it.getState()}const Pr={loadContent:!0};function hn(){const e=fn(),t=it(r=>r.biolink),a=Be(ys(e,Pr),()=>Sc(e,Pr),{onSuccess:r=>{ze().setBiolink(r.biolink)}});return{isLoading:a.isLoading,biolink:t,status:a.status,biolinkId:e}}function fn(){const{biolinkId:e}=Xe();return+e}function Qn(e){ze().setBiolink(e),j.setQueryData(ys(e.id,Pr),{biolink:e})}function gn(){const e=fn();return G(({item:t,values:a})=>by(e,t,a),{onSuccess:t=>{Qn(t.biolink)},onError:t=>Le(t,f("Could not update content item"))})}function by(e,t,a){const r={...a,item_id:t.id,item_model_type:t.model_type};return A.put(`biolink/${e}/content-item`,r).then(s=>s.data)}function vy({link:e}){const t=sn(),a=Ca(),{close:r,formId:s}=K(),o=ae({defaultValues:{activates_at:e.activates_at,expires_at:e.expires_at}}),i=gn(),c=o.watch("activates_at"),u=h.exports.useMemo(()=>c?Qo(c,a):t,[c,t,a]);return d(W,{children:[n(X,{children:n(l,{message:"Schedule"})}),d(Q,{children:[d(ke,{id:s,form:o,onSubmit:async m=>{i.mutate({item:e,values:m},{onSuccess:()=>{Z.positive(f("Schedule updated")),r()}})},children:[n(Ln,{name:"activates_at",min:t,className:"mb-24",label:n(l,{message:"Start date"}),showCalendarFooter:!0}),n(Ln,{name:"expires_at",min:u,className:"mb-24",label:n(l,{message:"End date"}),showCalendarFooter:!0})]}),n(yy,{})]}),d(ee,{dividerTop:!0,children:[n(_,{variant:"text",onClick:()=>{r()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:s,disabled:i.isLoading||!o.formState.isDirty,children:n(l,{message:"Save"})})]})]})}function yy(){const e={b:t=>n("span",{className:"font-bold",children:t})};return n(ks,{description:d(h.exports.Fragment,{children:[n("div",{children:n(l,{message:"Leave <b>start date</b> blank to display this link immediately.",values:e})}),n("div",{children:n(l,{message:"Leave <b>end date</b> blank to display this link forever.",values:e})})]})})}function ky({link:e}){const t=sn(),{close:a,formId:r}=K(),s=ae({defaultValues:{leap_until:e.leap_until}}),o=s.formState.isDirty,i=gn();return d(W,{children:[n(X,{children:n(l,{message:"Redirect link"})}),d(Q,{children:[n(ke,{id:r,form:s,onSubmit:async c=>{i.mutate({item:e,values:c},{onSuccess:()=>{Z.positive(f("Redirect link updated")),a()}})},children:n(Ln,{required:!0,name:"leap_until",min:t,className:"mb-24",label:n(l,{message:"Redirect until"}),showCalendarFooter:!0})}),n(xy,{})]}),d(ee,{dividerTop:!0,children:[n(_,{variant:"text",onClick:()=>{a()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:r,disabled:!o||i.isLoading,children:n(l,{message:"Save"})})]})]})}function xy(){return n(ks,{description:n(l,{message:"Send all visitors straight to this link, instead of your Biolink, until the specified date. After that date, Biolink will resume to showing normally."})})}function wy({link:e}){const{close:t,formId:a}=K(),r=ae({defaultValues:{image:e.image}}),s=gn(),o=r.formState.isDirty;return d(W,{size:"sm",children:[n(X,{children:n(l,{message:"Link thumbnail"})}),n(Q,{children:n(ke,{id:a,form:r,onSubmit:async i=>{s.mutate({item:e,values:i},{onSuccess:()=>{Z.positive(f("Thumbnail updated")),t()}})},children:n(jn,{children:n(wt,{showRemoveButton:!0,name:"image",diskPrefix:"links"})})})}),d(ee,{dividerTop:!0,children:[n(_,{variant:"text",onClick:()=>{t()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:a,disabled:s.isLoading||!o,children:n(l,{message:"Save"})})]})]})}const Sy=["none","bounce","flash","pulse","rubberBand","shakeX","shakeY","headShake","swing","tada","wobble","jello","heartBeat"];function Cy({link:e}){const{close:t,formId:a}=K(),r=ae({defaultValues:{animation:e.animation}}),s=r.formState.isDirty,o=gn();return h.exports.useEffect(()=>{_a(()=>Promise.resolve({}),["animate.min.91bc6200.css"],import.meta.url)},[]),d(W,{size:"md",children:[n(X,{children:n(l,{message:"Link animation"})}),n(Q,{children:d(ke,{id:a,form:r,onSubmit:async i=>{o.mutate({item:e,values:i},{onSuccess:()=>{Z.positive(f("Animation updated")),t()}})},children:[n(ks,{className:"mb-24",description:n(l,{message:"Add animation to draw attention to this link. :br Selected animation will repeat five times by default.",values:{br:n("br",{})}})}),n("div",{className:"grid gap-14 grid-cols-[repeat(auto-fill,minmax(95px,1fr))]",children:Sy.map((i,c)=>n(_y,{animationName:i},c))})]})}),d(ee,{dividerTop:!0,children:[n(_,{variant:"text",onClick:()=>{t()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:a,disabled:o.isLoading||!s,children:n(l,{message:"Save"})})]})]})}function _y({animationName:e}){const[t,a]=h.exports.useState(!1),{watch:r,setValue:s}=ct(),o=e==="none"?null:e,i=r("animation");return n("button",{type:"button",onClick:()=>{s("animation",o,{shouldDirty:!0})},onPointerEnter:()=>{a(!0)},onPointerLeave:()=>{a(!1)},className:N("border border-2 px-10 h-64 uppercase font-medium rounded flex items-center justify-center animate__animated",t&&`animate__${e}`,i===o&&"border-primary"),children:e})}const Ny=B(n("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined");function Iy(){const e=fn();return G(t=>Ry(e,t),{onSuccess:t=>{Qn(t.biolink)},onError:t=>Le(t)})}function Ry(e,t){return A.post(`biolink/${e}/content-item/detach`,t).then(a=>a.data)}function Dy({item:e}){const t=Iy();return d(M,{type:"modal",children:[n(F,{className:"text-muted flex-shrink-0",disabled:t.isLoading,children:n(Ze,{})}),n(Pt,{isDanger:!0,onConfirm:()=>{t.mutate({item:e})},title:n(l,{message:"Remove item"}),body:n(l,{message:"Are you sure you want to remove this item from the biolink?"}),confirm:n(l,{message:"Remove"})})]})}const tt=new Map,ft=new Map,Py=new Map,He={status:"inactive"};function or({e,rect:t,deltaX:a,deltaY:r}){return{rect:t,x:e.clientX,y:e.clientY,deltaX:a!=null?a:0,deltaY:r!=null?r:0,nativeEvent:e}}let Cc=null;function Mo(e){Cc=e}function Ly(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Ey(e){const t=new IntersectionObserver(a=>{a.forEach(r=>{const{width:s,height:o,left:i,top:c}=r.boundingClientRect,[u,m]=[...e].find(([,b])=>b.ref.current===r.target)||[];if(u==null||m==null)return;const p={width:s,height:o,left:i,top:c};e.set(u,{...m,rect:p})}),t.disconnect()});[...e.values()].forEach(a=>{a.ref.current&&t.observe(a.ref.current)})}function Ty({id:e,disabled:t,ref:a,preview:r,hidePreview:s,...o}){const i=h.exports.useRef(null),{addGlobalListener:c,removeAllGlobalListeners:u}=Ia(),m=h.exports.useRef({lastPosition:{x:0,y:0}}).current,p=h.exports.useRef(o);p.current=o,h.exports.useLayoutEffect(()=>(t?tt.delete(e):tt.set(e,{...tt.get(e),id:e,ref:a,type:p.current.type,getData:p.current.getData}),()=>{tt.delete(e)}),[e,t,p,a]);const b=k=>{Py.forEach(x=>{var S;x.type===((S=tt.get(e))==null?void 0:S.type)&&k(x)})},g=k=>{var D,U;const x=tt.get(e),S=a.current,R=!i.current||!m.clickedEl||i.current.contains(m.clickedEl);if(Cc||!S||!x||!R){k.preventDefault(),k.stopPropagation();return}Ey(ft),Mo("drag"),s&&Ay(k),k.dataTransfer.effectAllowed="move",m.lastPosition={x:k.clientX,y:k.clientY},m.currentRect=Ly(S.getBoundingClientRect());const C=or({rect:m.currentRect,e:k});r!=null&&r.current&&r.current(x,I=>{const P=I.getBoundingClientRect(),L=k.currentTarget.getBoundingClientRect();let H=k.clientX-L.x,me=k.clientY-L.y;(H>P.width||me>P.height)&&(H=P.width/2,me=P.height/2);const xe=2*Math.round(L.height/2);I.style.height=`${xe}px`,k.dataTransfer.setDragImage(I,0,0)}),He.status="dragging",He.dragTargetId=e,a.current&&(a.current.dataset.dragging="true"),(U=(D=p.current).onDragStart)==null||U.call(D,C,x),requestAnimationFrame(()=>{b(I=>{var P;return(P=I.onDragStart)==null?void 0:P.call(I,C,x)})}),c(window,"dragover",v,!0)},v=k=>{var U,I;if(k.preventDefault(),k.stopPropagation(),!m.currentRect)return;const x=k.clientX-m.lastPosition.x,S=k.clientY-m.lastPosition.y,R={...m.currentRect,left:m.currentRect.left+x,top:m.currentRect.top+S},C=or({rect:R,e:k,deltaX:x,deltaY:S}),D=tt.get(e);D&&((I=(U=p.current).onDragMove)==null||I.call(U,C,D),b(P=>{var L;return(L=P.onDragMove)==null?void 0:L.call(P,C,D)})),m.lastPosition={x:k.clientX,y:k.clientY},m.currentRect=R};return{draggableProps:{draggable:!t,onDragStart:g,onDragEnd:k=>{var R,C;if(u(),!m.currentRect)return;Mo(null),_t&&_t.remove();const x=or({rect:m.currentRect,e:k}),S=tt.get(e);S&&((C=(R=p.current).onDragEnd)==null||C.call(R,x,S),b(D=>{var U;return(U=D.onDragEnd)==null?void 0:U.call(D,x,S,He.status)})),requestAnimationFrame(()=>{He.dragTargetId=void 0,He.status="inactive",a.current&&delete a.current.dataset.dragging})},onPointerDown:k=>{m.clickedEl=k.target}},dragHandleRef:i}}let _t;function Ay(e){_t||(_t=new Image,document.body.append(_t),_t.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(_t,0,0)}async function*zy(e){for(const t of e.items)if(t.kind==="file")if(typeof t.webkitGetAsEntry=="function"){const a=t.webkitGetAsEntry();if(!a)continue;if(a.isFile){if(a.name===".DS_Store")continue;yield new Rn(t.getAsFile(),a.fullPath)}else a.isDirectory&&(yield*_c(a))}else{const a=t.getAsFile();if(!a||a.name===".DS_Store")continue;yield new Rn(a,t.fullPath)}}async function*_c(e){const t=e.createReader();let a;do{a=await new Promise((r,s)=>{t.readEntries(r,s)});for(const r of a)if(r.isFile){if(r.name===".DS_Store")continue;const s=await $y(r);yield new Rn(s,r.fullPath)}else r.isDirectory&&(yield*_c(r))}while(a.length>0)}function $y(e){return new Promise((t,a)=>e.file(t,a))}async function Fy(e){const t=[];for await(const a of e)t.push(a);return t}const Oy=400;function My({id:e,disabled:t,ref:a,...r}){const s=h.exports.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=h.exports.useRef(r);o.current=r,h.exports.useLayoutEffect(()=>(ft.set(e,{...ft.get(e),disabled:t,id:e,ref:a}),()=>{ft.delete(e)}),[e,o,t,a]);const i=g=>{var y;const v=o.current;return!!((g==null?void 0:g.type)&&a.current!==((y=g.ref)==null?void 0:y.current)&&v.types.includes(g.type)&&(!v.acceptsDrop||v.acceptsDrop(g)))},c=g=>{var y,w;const v=na(g);v&&((w=(y=o.current).onDragLeave)==null||w.call(y,v))};return{droppableProps:t?{}:{onDragOver:g=>{g.preventDefault(),g.stopPropagation()},onDragEnter:g=>{var y,w;if(g.stopPropagation(),s.dragOverElements.add(g.target),s.dragOverElements.size>1)return;const v=na(g);v&&i(v)&&((w=(y=o.current).onDragEnter)==null||w.call(y,v),clearTimeout(s.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(s.dropActivateTimer=setTimeout(()=>{var k,x;v&&((x=(k=o.current).onDropActivate)==null||x.call(k,v))},Oy)))},onDragLeave:g=>{g.stopPropagation(),s.dragOverElements.delete(g.target);for(const y of s.dragOverElements)g.currentTarget.contains(y)||s.dragOverElements.delete(y);if(s.dragOverElements.size>0)return;const v=na(g);v&&i(v)&&(c(g),clearTimeout(s.dropActivateTimer))},onDrop:async g=>{var y,w,k,x;g.preventDefault(),g.stopPropagation(),s.dragOverElements.clear(),c(g),clearTimeout(s.dropActivateTimer);const v=na(g);if(v)if((w=(y=o.current).onDragLeave)==null||w.call(y,v),!i(v))He.status!=="inactive"&&(He.status="dropFail");else{const S=(x=(k=o.current).onDrop)==null?void 0:x.call(k,v);He.status!=="inactive"&&(He.status=S===!1?"dropFail":"dropSuccess")}}}}}function na(e){if(He.dragTargetId!=null)return tt.get(He.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Fy(zy(e.dataTransfer))}}function Uy(e,t,a){const r=Nn(t,0,e.length-1),s=Nn(a,0,e.length-1);if(r===s)return e;const o=e[r],i=s<r?-1:1;for(let c=r;c!==s;c+=i)e[c]=e[c+i];return e[s]=o,e}function Nc(e,t,a){const r=e.slice();return r.splice(a<0?r.length+a:a,0,r.splice(t,1)[0]),r}let ue=null;function Vy({item:e,items:t,type:a,ref:r,onSortEnd:s,preview:o,disabled:i}){const{draggableProps:c,dragHandleRef:u}=Ty({id:e,ref:r,type:a,preview:o,disabled:i,onDragStart:()=>{ue={sortables:[...t],activeSortable:e,activeIndex:t.indexOf(e),finalIndex:t.indexOf(e)},Hy()},onDragEnd:()=>{!ue||(qy(),s==null||s(ue.activeIndex,ue.finalIndex),ue=null)},getData:()=>{}}),{droppableProps:m}=My({id:e,ref:r,types:[a],disabled:i,onDragEnter:()=>{if(!ue)return;const p=ue.sortables.indexOf(e),b=ue.sortables.indexOf(ue.activeSortable);Uy(ue.sortables,b,p);const g=ue.sortables.map(v=>{var y;return(y=ft.get(v))==null?void 0:y.rect});ue.sortables.forEach((v,y)=>{if(!ue)return;const w=Nc(g,p,ue.activeIndex),k=g[y],x=w[y],S=ft.get(v);if((S==null?void 0:S.ref.current)&&x&&k){const R=x.left-k.left,C=x.top-k.top;S.ref.current.style.transform=`translate3d(${R}px, ${C}px, 0)`}}),ue.finalIndex=p}});return{sortableProps:{...qe(c,m)},dragHandleRef:u}}const By="transform 0.2s cubic-bezier(0.2, 0, 0, 1)";function Hy(){!ue||ue.sortables.forEach((e,t)=>{const a=ft.get(e);!(a!=null&&a.ref.current)||(a.ref.current.style.transition=By,(ue==null?void 0:ue.activeIndex)===t&&(a.ref.current.style.opacity="0.4"))})}function qy(){!ue||ue.sortables.forEach(e=>{const t=ft.get(e);t!=null&&t.ref.current&&(t.ref.current.style.transform="",t.ref.current.style.transition="",t.ref.current.style.opacity="",t.ref.current.style.zIndex="")})}function Ic(){const e=fn();return G(t=>jy(e,t))}function jy(e,{oldIndex:t,newIndex:a,widgetToPin:r}){const s=ze().biolink,o=Nc(s.content,t,a);r&&(o[a]={...o[a],pinned:"top"}),ze().setBiolink({...s,content:o});const i=o.map(c=>({id:c.id,model_type:c.model_type}));return A.post(`biolink/${e}/change-order`,{order:i,widgetToPin:r})}function xs({item:e,biolink:t,title:a,updateDialog:r,children:s,actionRow:o}){const i=Ic(),c=h.exports.useRef(null),u=!e||e.pinned!=null,{sortableProps:m,dragHandleRef:p}=Vy({item:e||"noop",items:(t==null?void 0:t.content)||[],type:"biolinkEditorSortable",ref:c,onSortEnd:(b,g)=>{i.mutate({oldIndex:b,newIndex:g})},disabled:u});return d("div",{className:"rounded-lg shadow border flex items-stretch mb-20 bg-paper h-172",ref:c,...m,children:[n("button",{type:"button",className:N("text-muted border-r flex-shrink-0 px-10",!u&&"hover:text-primary"),disabled:u,ref:p,children:n(Ny,{})}),d("div",{className:"p-24 flex-auto min-w-0",children:[d("div",{className:"flex items-center",children:[a&&n("div",{className:"font-medium mb-4 whitespace-nowrap overflow-hidden overflow-ellipsis flex-auto mr-auto",children:a}),r&&d(M,{type:"modal",children:[n(_,{className:"flex-shrink-0 ml-20",variant:"text",color:"primary",startIcon:n(je,{}),children:n(l,{message:"Edit"})}),r]}),t&&e&&n(Dy,{item:e})]}),n("div",{className:"mb-20",children:s}),o]})]})}const Rc=["groups","seo","enabled","alias"];function Wy({item:e,biolink:t}){const r=`biolink/${fn()}/link/${e.id}`;return n(xs,{item:e,biolink:t,title:e.name,actionRow:n(Gy,{link:e,biolink:t}),updateDialog:n(Xl,{endpoint:r,link:e,showButtonLabelField:!0,hiddenFields:Rc,onSuccess:s=>{Qn(s.biolink)}}),children:d("div",{className:"flex items-center gap-6",children:[n(gt,{url:e.long_url}),n("a",{href:e.short_url,target:"_blank",className:"hover:underline whitespace-nowrap text-muted text-sm ",rel:"noreferrer",children:ot(e.long_url)})]})})}function Gy({link:e,biolink:t}){const a=gn();return d("div",{className:"flex md:gap-24 md:justify-between h-42 items-center",children:[d("div",{className:"flex items-center text-muted",children:[n(en,{checked:e.active,disabled:e.active_locked||a.isLoading,onChange:()=>{a.mutate({item:e,values:{active:!e.active}})}}),d(M,{type:"popover",children:[n(Ce,{label:n(l,{message:"Change thumbnail"}),children:n(F,{className:"ml-10",color:e.image?"primary":null,children:n(ni,{})})}),n(wy,{link:e})]}),d(M,{type:"popover",children:[n(Ce,{label:n(l,{message:"Animation"}),children:n(F,{color:e.animation?"primary":null,children:n(hy,{})})}),n(Cy,{link:e})]}),d(M,{type:"popover",children:[n(Ce,{label:n(l,{message:"Redirect"}),children:n(F,{color:e.leap_until?"primary":null,children:n(fy,{})})}),n(ky,{link:e})]}),d(M,{type:"popover",children:[n(Ce,{label:n(l,{message:"Schedule"}),children:n(F,{color:e.expires_at||e.activates_at?"primary":null,children:n(gy,{})})}),n(vy,{link:e})]})]}),n(Ky,{link:e})]})}function Ky({link:e}){const t=Te();if(ba("(max-width: 380px)"))return null;const r=`../../../../links/${e.id}`,s=t?n(F,{className:"text-muted flex-shrink-0",elementType:pe,to:r,relative:"path",children:n(An,{})}):n(_,{variant:"text",className:"text-muted",startIcon:n(An,{}),elementType:pe,to:r,relative:"path",children:n(l,{message:":count clicks",values:{count:e.clicks_count}})});return n(Ce,{label:n(l,{message:":count lifetime clicks",values:{count:e.clicks_count}}),children:s})}function Qy(e,t){const{trans:a}=V();return G(r=>Yy(t,r),{onSuccess:()=>{Z.positive(a(f("Biolink updated"))),j.invalidateQueries(J("biolink"))},onError:r=>Ne(r,e)})}function Yy(e,t){return A.put(`biolink/${e}`,cs(t)).then(a=>a.data)}const Zy=["type","groups","title"];function Xy(){const{biolink:e}=hn();return e?n(Jy,{biolink:e}):n("div",{className:"py-24",children:n(Br,{})})}function Jy({biolink:e}){const t=ae({defaultValues:Zl(e)}),a=Qy(t,e.id);return d(ke,{form:t,onSubmit:r=>{a.mutate(r)},children:[n("div",{className:"mb-24",children:n(_,{type:"submit",variant:"flat",color:"primary",disabled:a.isLoading||!t.formState.isDirty,children:n(l,{message:"Update"})})}),d("div",{className:"mb-24",children:[n(E,{name:"name",label:n(l,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),n(Ha,{form:t,name:"hash"})]}),n(ls,{hiddenFields:Zy,linkName:n(l,{message:"biolink"})})]})}function e1(e,t){const{trans:a}=V();return G(r=>t1(e,r),{onSuccess:(r,s)=>{Z.positive(a(s.widgetId?f("Widget added"):f("Widget updated"))),Qn(r.biolink)},onError:r=>Ne(r,t)})}function t1(e,{widgetId:t,...a}){return(t?A.put(`biolink/${e}/widget/${t}`,a):A.post(`biolink/${e}/widget`,a)).then(s=>s.data)}function ut({biolink:e,widget:t,type:a,defaultValues:r,children:s,onSubmit:o}){const i=Wa[a],c=h.exports.useMemo(()=>{const g=(t==null?void 0:t.config)||r;return Array.isArray(g)&&g.length===0||!g?void 0:g},[t==null?void 0:t.config,r]),u=ae({defaultValues:c}),{formId:m,close:p}=K(),b=e1(e.id,u);return d(W,{children:[n(X,{children:n(l,{...i.name})}),n(Q,{children:n(ke,{form:u,id:m,onSubmit:async g=>{const v=o?await o(g,u):g;v!==void 0&&b.mutate({widgetId:t==null?void 0:t.id,config:v,type:a,position:!t&&a===We.Socials?e.content.length+1:void 0},{onSuccess:()=>p()})},children:s})}),d(ee,{children:[n(_,{variant:"text",onClick:()=>{p()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:m,disabled:b.isLoading||!u.formState.isDirty,children:t?n(l,{message:"Update"}):n(l,{message:"Add"})})]})]})}function n1({biolink:e,widget:t}){const{trans:a}=V();return d(ut,{biolink:e,type:We.Image,widget:t,children:[n(jn,{children:n(wt,{name:"url",diskPrefix:"widgets",required:!0})}),d(Pe,{className:"my-24",name:"type",label:n(l,{message:"Style"}),selectionMode:"single",children:[n(T,{value:"default",children:n(l,{message:"Default"})}),n(T,{value:"avatar",children:n(l,{message:"Avatar"})})]}),n(E,{placeholder:a(f("Optional")),name:"destinationUrl",type:"url",label:n(l,{message:"Destination url"}),description:n(l,{message:"Redirect user to this url when clicking the image."})})]})}const a1=""+new URL("image.d8dc8345.png",import.meta.url).href,r1=""+new URL("text.e5f73930.png",import.meta.url).href,s1=""+new URL("socials.7d34b331.png",import.meta.url).href,o1=""+new URL("youtube.8639db0d.png",import.meta.url).href,i1=""+new URL("soundcloud.a6ae8fd9.png",import.meta.url).href,l1=""+new URL("vimeo.f698adf6.jpeg",import.meta.url).href,c1=""+new URL("spotify.45316d66.png",import.meta.url).href,u1=""+new URL("twitch.7d18ac0c.svg",import.meta.url).href,d1=""+new URL("tiktok.956e4d3e.png",import.meta.url).href;function m1({biolink:e,widget:t}){const{trans:a}=V();return n(ut,{biolink:e,type:We.Youtube,widget:t,onSubmit:(r,s)=>{if(!ai(r.url).id)s.setError("url",{message:a(f("Invalid youtube url"))});else return Promise.resolve(r)},children:n(E,{required:!0,autoFocus:!0,placeholder:"https://www.youtube.com/watch?v=YE7VzlLtp-4",name:"url",type:"url",label:n(l,{message:"Youtube video url"}),description:n(l,{message:"Embed this youtube video within biolink."})})})}function p1({biolink:e,widget:t}){return d(ut,{biolink:e,type:We.Text,widget:t,children:[n(E,{className:"mb-24",required:!0,autoFocus:!0,name:"title",label:n(l,{message:"Title"})}),n(E,{name:"description",label:n(l,{message:"Description"})})]})}function h1({biolink:e,widget:t}){return n(ut,{biolink:e,type:We.Socials,widget:t,onSubmit:a=>Promise.resolve(ti(a)),children:Object.entries($u).map(([a,r],s)=>{const o=r.icon;return n(E,{autoFocus:s===0,className:"mb-24",name:a,placeholder:r.placeholder,label:n(l,{...r.name}),pattern:r.pattern,type:r.inputType,autoComplete:"off",startAdornment:o&&n(o,{})},a)})})}function f1({biolink:e,widget:t}){return n(ut,{biolink:e,type:We.Twitch,widget:t,children:n(E,{required:!0,autoFocus:!0,placeholder:"https://www.twitch.tv/kasparovchess",name:"url",type:"url",pattern:"https://(www.)?twitch.tv/.*",label:n(l,{message:"Twitch channel or clip url"}),description:n(l,{message:"Embed this twitch channel or clip within biolink."})})})}function g1({biolink:e,widget:t}){const{trans:a}=V();return n(ut,{biolink:e,type:We.Soundcloud,widget:t,onSubmit:async(r,s)=>{var p;const o=encodeURIComponent(r.url),c=(await fetch(`https://soundcloud.com/oembed?format=json&url=${o}`).then(b=>b.json())).html,u=document.createElement("div");u.innerHTML=c;const m=(p=u.querySelector("iframe"))==null?void 0:p.src;if(m)return{...r,embedUrl:m};s.setError("url",{message:a(f("Invalid soundcloud url"))})},children:n(E,{required:!0,autoFocus:!0,placeholder:"https://soundcloud.com/artist/track",name:"url",type:"url",label:n(l,{message:"Soundcloud track url"}),description:n(l,{message:"Embed this soundcloud track within biolink."})})})}function b1({biolink:e,widget:t}){const{trans:a}=V();return n(ut,{biolink:e,type:We.Vimeo,widget:t,onSubmit:(r,s)=>{if(!ai(r.url).id)s.setError("url",{message:a(f("Invalid vimeo url"))});else return Promise.resolve(r)},children:n(E,{required:!0,autoFocus:!0,placeholder:"https://vimeo.com/1084537",name:"url",type:"url",label:n(l,{message:"Vimeo video url"}),description:n(l,{message:"Embed this vimeo video within biolink."})})})}function v1({biolink:e,widget:t}){const{trans:a}=V();return n(ut,{biolink:e,type:We.Spotify,widget:t,onSubmit:(r,s)=>{const o=Fu(r.url);if(!("id"in o))s.setError("url",{message:a(f("Invalid spotify url"))});else return Promise.resolve({...r,type:o.type})},children:n(E,{required:!0,autoFocus:!0,placeholder:"https://open.spotify.com/track/2sqfLwGKXDw1nGjFhH3GGX?si=f329040f45804ec5",name:"url",type:"url",label:n(l,{message:"Spotify share url"}),description:n(l,{message:"Any share url from spotify can be used, including artist, album, track, playlist etc."})})})}function y1({biolink:e,widget:t}){const{trans:a}=V();return n(ut,{biolink:e,type:We.Tiktok,widget:t,onSubmit:(r,s)=>{if(!r.url.includes("tiktok.com/"))s.setError("url",{message:a(f("Invalid tiktok url"))});else return Promise.resolve(r)},children:n(E,{required:!0,autoFocus:!0,placeholder:"https://www.tiktok.com/@bts_official_bighit/video/6964945720885464322",name:"url",type:"url",label:n(l,{message:"Tiktok url"}),description:n(l,{message:"Embed this tiktok video within biolink."})})})}var We=(e=>(e.Image="image",e.Text="text",e.Socials="socials",e.Youtube="youtube",e.Soundcloud="soundcloud",e.Vimeo="video",e.Spotify="spotify",e.Twitch="twitch",e.Tiktok="tiktok",e))(We||{});const Wa={image:{name:f("Image"),image:a1,description:f("Upload an image and optionally add a link it will redirect to when clicked."),dialog:n1},text:{name:f("Text"),image:r1,description:f("Add title and optional description. Can be used as a header for the whole biolink or a group of multiple widgets."),dialog:p1},socials:{name:f("Social Links"),image:s1,description:f("Add your socials links to display them as icon buttons."),dialog:h1},youtube:{name:f("Youtube Video"),image:o1,description:f("Paste a YouTube video URL to show it as a video embed in your profile."),dialog:m1},soundcloud:{name:f("Soundcloud Audio"),image:i1,description:f("Paste a SoundCloud URL to show it as a playable song in your profile."),dialog:g1},video:{name:f("Vimeo Video"),image:l1,description:f("Paste a vimeo URL to show it as a video embed in your profile."),dialog:b1},spotify:{name:f("Spotify Embed"),image:c1,description:f("Paste a spotify song, album, artist, playlist, podcast or episode url to show it as an embed in your profile."),dialog:v1},twitch:{name:f("Twitch Embed"),image:u1,description:f("Paste twitch profile or clip url to show it as an embed in your profile."),dialog:f1},tiktok:{name:f("TikTok Embed"),image:d1,description:f("Paste TikTok video url to show it as an embed in your profile."),dialog:y1}};function k1(){const{close:e}=K();return d(W,{size:"xl",children:[n(X,{titleTextSize:"text-md",padding:"px-24 pt-14 pb-4",children:n(l,{message:"Add widget"})}),n(Q,{padding:"p-24",children:n("div",{className:"grid gap-14 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(Wa).map(([t,a])=>d("div",{className:"bg-paper border rounded p-14 shadow cursor-pointer hover:bg-primary/hover",role:"button",tabIndex:0,onClick:()=>{e(t)},children:[n("img",{src:a.image,alt:"",className:"block w-54 h-54 mb-20 mr-auto"}),n("div",{className:"text-primary text-lg font-semibold whitespace-nowrap overflow-hidden overflow-ellipsis",children:n(l,{...a.name})}),n("div",{className:"text-muted",children:n(l,{...a.description})})]},t))})})]})}function x1({activeWidget:e,biolink:t,onOpenChange:a}){const r=e?Wa[e].dialog:null;return n(M,{type:"modal",isOpen:e!=null,onOpenChange:a,children:r&&n(r,{biolink:t})})}const oa=B(n("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpwardOutlined");function w1({item:e,biolink:t}){const a=Wa[e.type],r=Ou[e.type],s=a.dialog;return n(xs,{biolink:t,item:e,title:n(l,{...a.name}),updateDialog:n(s,{widget:e,biolink:t}),actionRow:n(S1,{widget:e}),children:n(r,{widget:e,variant:"editor"})})}function S1({widget:e}){const t=gn(),a=Ic(),r=()=>{const s=ze().biolink;if(!s)return;const o=s.content.filter(i=>i.pinned==="top").length;if(e.pinned)t.mutate({item:e,values:{pinned:null}});else{const i=s.content.findIndex(c=>c.model_type===e.model_type&&c.id===e.id);a.mutate({oldIndex:i,newIndex:o,widgetToPin:e.id})}};return d("div",{className:"flex items-center gap-24 justify-between text-muted h-42",children:[n(en,{checked:e.active,disabled:t.isLoading,onChange:()=>{t.mutate({item:e,values:{active:!e.active}})}}),n(_,{variant:"outline",size:"2xs",radius:"rounded-full",color:e.pinned==="top"?"primary":void 0,startIcon:e.pinned==="top"?n(wn,{}):n(oa,{}),disabled:a.isLoading,onClick:r||t.isLoading,children:e.pinned==="top"?n(l,{message:"Unpin from top"}):n(l,{message:"Pin to top"})})]})}function C1(){const{biolink:e}=hn(),t=it(r=>r.appearance);return wi()?null:d("div",{className:"flex-shrink-0 sticky top-24 h-max",children:[n(ka,{size:"sm",color:"positive",radius:"rounded",className:"w-max m-auto mb-24",children:n(l,{message:"Live preview"})}),n(_1,{children:e?n(Mu,{biolink:e,appearance:t}):null}),n("div",{className:"text-sm text-muted text-center mt-14",children:n(l,{message:"Scheduled and disabled content is not shown"})})]})}function _1({children:e}){return n("div",{className:"w-350 h-[724px] rounded-[64px] shadow-lg border border-[#444546] border-[12px] overflow-hidden",children:n("div",{className:"overflow-y-auto h-full compact-scrollbar",children:e})})}const Dc=B(n("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined"),Pc=B(n("path",{d:"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"GradientOutlined"),bn=h.exports.forwardRef(({isActive:e,children:t,className:a,style:r,label:s,...o},i)=>d("button",{type:"button",...o,ref:i,children:[n("span",{className:N("flex items-center justify-center overflow-hidden border border-[#c3cbdc] rounded aspect-square outline-none focus-visible:ring",e&&"ring-2 ring-primary ring-offset-2",a),style:r,children:t}),n("span",{className:"block mt-10 text-xs overflow-hidden overflow-ellipsis",children:s})]})),Kt={type:"color",id:"c-custom",label:f("Custom color")},N1=vc.map((e,t)=>({...Kt,id:`c${t}`,backgroundColor:e.color,label:e.name,color:e.foreground}));function I1({value:e,onChange:t,className:a}){return d("div",{className:a,children:[n(R1,{value:e,onChange:t}),N1.map(r=>n(bn,{label:n(l,{...r.label}),isActive:(e==null?void 0:e.id)===r.id,style:{backgroundColor:r.backgroundColor},onClick:()=>{t==null||t({...Kt,...r})}},r.id))]})}function R1({value:e,onChange:t}){const a=(e==null?void 0:e.id)===Kt.id;return d(M,{currentValue:e,type:"popover",onClose:r=>{t==null||t(typeof r=="string"?{...Kt,backgroundColor:r}:r)},children:[n(bn,{label:n(l,{...Kt.label}),className:"border-dashed border-2",style:{backgroundColor:a?e==null?void 0:e.backgroundColor:void 0},children:n("span",{className:"inline-block text-white bg-black/20 rounded p-10",children:n(Dc,{size:"lg"})})}),n(Kn,{defaultValue:e==null?void 0:e.backgroundColor,onChange:r=>{t==null||t({...Kt,backgroundColor:r})}})]})}const le={type:"gradient",id:"g-custom",label:f("Custom gradient")},ws=[{...le,...le,id:"g1",backgroundImage:"linear-gradient(45deg, #ff9a9e, #fad0c4)",label:f("Worm flame")},{...le,id:"g2",backgroundImage:"linear-gradient(0deg, #a18cd1, #fbc2eb)",label:f("Night fade")},{...le,id:"g3",backgroundImage:"linear-gradient(120deg, #a1c4fd, #c2e9fb)",label:f("Winter nova")},{...le,id:"g4",backgroundImage:"linear-gradient(0deg, #cfd9df, #e2ebf0)",label:f("Heavy rain")},{...le,id:"g5",backgroundImage:"linear-gradient(120deg, #fdfbfb, #ebedee)",label:f("Cloudy knoxville")},{...le,id:"g6",backgroundImage:"linear-gradient(0deg, #a8edea, #fed6e3)",label:f("Rare wind")},{...le,id:"g7",backgroundImage:"linear-gradient(135deg, #f5f7fa, #c3cfe2)",label:f("Saint petersburg")},{...le,id:"g8",backgroundImage:"linear-gradient(135deg, #fdfcfb, #e2d1c3)",label:f("Everlasting sky")},{...le,id:"g9",backgroundImage:"linear-gradient(0deg, #c1dfc4, #deecdd)",label:f("Soft grass")},{...le,id:"g10",backgroundImage:"linear-gradient(90deg, #E9E4F0, #D3CCE3)",label:f("Delicate")},{...le,id:"g11",backgroundImage:"linear-gradient(90deg, #fffcdc, #d9a7c7)",label:f("Broken hearts")},{...le,id:"g12",backgroundImage:"linear-gradient(90deg, #56ab2f, #a8e063)",label:f("Lush"),color:"rgb(255, 255, 255)"},{...le,id:"g13",backgroundImage:"linear-gradient(90deg, #606c88, #3f4c6b)",label:f("Ash"),color:"rgb(255, 255, 255)"},{...le,id:"g14",backgroundImage:"linear-gradient(90deg, #ece9e6, #ffffff)",label:f("Clouds")},{...le,id:"g15",backgroundImage:"linear-gradient(90deg, #f09819, #edde5d)",label:f("Mango pulp")},{...le,id:"g16",backgroundImage:"linear-gradient(90deg, #b79891, #94716b)",label:f("Cooper"),color:"rgb(255, 255, 255)"},{...le,id:"g17",backgroundImage:"linear-gradient(60deg, #29323c, #485563)",label:f("Vicious stance"),color:"rgb(255, 255, 255)"}],D1=B(n("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"}),"ArrowForwardOutlined");function P1({value:e,onChange:t,className:a}){return d("div",{className:a,children:[n(L1,{value:e,onChange:t}),ws.map(r=>n(bn,{label:r.label&&n(l,{...r.label}),isActive:(e==null?void 0:e.id)===r.id,style:{backgroundImage:r.backgroundImage},onClick:()=>{t==null||t({...le,...r})}},r.backgroundImage))]})}function L1({value:e,onChange:t}){const a=(e==null?void 0:e.id)===le.id;return d(M,{type:"popover",currentValue:e,onOpenChange:r=>{r&&!e&&(t==null||t(ws[0]))},onClose:r=>{t==null||t(r)},children:[n(bn,{label:n(l,{...le.label}),className:"border-dashed border-2",style:{backgroundImage:a?e==null?void 0:e.backgroundImage:void 0},children:n("span",{className:"inline-block text-white bg-black/20 rounded p-10",children:n(Pc,{size:"lg"})})}),n(E1,{defaultValue:e,onChange:r=>{t==null||t(r)}})]})}function E1({defaultValue:e=ws[0],onChange:t}){const{close:a}=K(),[r,s]=h.exports.useState(()=>{var u;const c=((u=e==null?void 0:e.backgroundImage)==null?void 0:u.match(/\(([0-9]+deg),.?(.+?),.?(.+?)\)/))||[];return{angle:c[1]||"45deg",colorOne:c[2]||"#ff9a9e",colorTwo:c[3]||"#fad0c4"}}),o=c=>({...le,backgroundImage:`linear-gradient(${c.angle}, ${c.colorOne}, ${c.colorTwo})`}),i=h.exports.useCallback(c=>{const u={...r,...c};s(u),t(o(u))},[r,t]);return d(W,{size:"sm",children:[n(X,{children:n(l,{message:"Custom gradient"})}),d(Q,{children:[n("div",{className:"mb-6",children:n(l,{message:"Colors"})}),d("div",{className:"flex items-stretch h-40 mb-20",children:[n(Uo,{className:"rounded-l",value:r.colorOne,onChange:c=>i({colorOne:c})}),n("div",{className:"flex-auto border-y border-[#c3cbdc]",style:{backgroundImage:o(r).backgroundImage}}),n(Uo,{className:"rounded-r",value:r.colorTwo,onChange:c=>i({colorTwo:c})})]}),n("div",{className:"mb-6",children:n(l,{message:"Direction"})}),n(T1,{value:r.angle,onChange:c=>i({angle:c})})]}),d(ee,{dividerTop:!0,children:[n(_,{onClick:()=>a(),children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",onClick:()=>{a(o(r))},children:n(l,{message:"Apply"})})]})]})}function Uo({className:e,value:t,onChange:a}){return d(M,{type:"popover",children:[n(Ce,{label:n(l,{message:"Click to change color"}),children:n("button",{type:"button",className:N("w-40 flex-shrink-0 border border-[#c3cbdc]",e),style:{backgroundColor:t}})}),n(Kn,{defaultValue:t,onChange:a,hideFooter:!0})]})}function T1({value:e,onChange:t}){const a="text-primary border-primary";return d("div",{className:"text-muted flex items-center flex-wrap gap-10",children:[n(F,{radius:"rounded-full",variant:"outline",className:e==="0deg"?a:void 0,onClick:()=>t("0deg"),children:n(oa,{})}),n(F,{radius:"rounded-full",variant:"outline",className:e==="180deg"?a:void 0,onClick:()=>t("180deg"),children:n(wn,{})}),n(F,{radius:"rounded-full",variant:"outline",className:e==="90deg"?a:void 0,onClick:()=>t("90deg"),children:n(D1,{})}),n(F,{radius:"rounded-full",variant:"outline",className:e==="135deg"?a:void 0,onClick:()=>t("135deg"),children:n(wn,{className:"-rotate-45"})}),n(F,{radius:"rounded-full",variant:"outline",className:e==="225deg"?a:void 0,onClick:()=>t("225deg"),children:n(wn,{className:"rotate-45"})}),n(F,{radius:"rounded-full",variant:"outline",className:e==="45deg"?a:void 0,onClick:()=>t("45deg"),children:n(oa,{className:"rotate-45"})}),n(F,{radius:"rounded-full",variant:"outline",className:e==="325deg"?a:void 0,onClick:()=>t("325deg"),children:n(oa,{className:"-rotate-45"})})]})}const A1=""+new URL("Angled-Focus.176ea4bb.svg",import.meta.url).href,z1=""+new URL("Circular-Focus.ca4d12f0.svg",import.meta.url).href,$1=""+new URL("Farseeing-Eyeball.aa4a0249.svg",import.meta.url).href,F1=""+new URL("Canyon-Funnel.b2e2eaf0.svg",import.meta.url).href,O1=""+new URL("Looney-Loops.6f56821b.svg",import.meta.url).href,M1=""+new URL("Hurricane-Aperture.35c89ecf.svg",import.meta.url).href,U1=""+new URL("Icy-Explosion.988bfd47.svg",import.meta.url).href,V1=""+new URL("Protruding-Squares.b00abf9b.svg",import.meta.url).href,B1=""+new URL("Alternating-Triangles.d5e42a92.svg",import.meta.url).href,H1=""+new URL("Monstera-Patch.69fc9117.svg",import.meta.url).href,q1=""+new URL("Confetti-Doodles.d1c20c3c.svg",import.meta.url).href,j1=""+new URL("Threads-Ahead.28db1646.svg",import.meta.url).href,W1=""+new URL("Launch-Day.f2926785.svg",import.meta.url).href,G1=""+new URL("Sprinkle.d1a9b59f.svg",import.meta.url).href,K1=""+new URL("Circuit-Board.b3635293.svg",import.meta.url).href,Q1=""+new URL("nuclear-focalpoint.166680aa.svg",import.meta.url).href,Y1=""+new URL("Snow.424582cb.svg",import.meta.url).href,ce={type:"image",id:"i-custom",label:f("Custom image")},Z1=[{...ce,id:"img0",backgroundColor:"#ee5522",backgroundImage:`url(${V1})`,backgroundRepeat:"repeat",label:f("Protruding squares"),color:"#fff"},{...ce,id:"img1",backgroundColor:"#00bbff",backgroundImage:`url(${W1})`,label:f("Launch day"),backgroundSize:"contain",backgroundPosition:"bottom",backgroundRepeat:"no-repeat",color:"#fff"},{...ce,id:"img2",backgroundColor:"#fff",backgroundImage:`url(${B1})`,label:f("Alternating triangles"),color:"#000"},{...ce,id:"img3",backgroundColor:"#002200",backgroundImage:`url(${H1})`,label:f("Monstera patch"),color:"#fff"},{...ce,id:"img4",backgroundColor:"#aa3333",backgroundImage:`url(${q1})`,label:f("Confetti doodles"),color:"#fff",backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"contain"},{...ce,id:"img5",backgroundColor:"#070014",backgroundImage:`url(${M1})`,label:f("Hurricane aperture"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#fff"},{...ce,id:"img6",backgroundColor:"#11ddaa",backgroundImage:`url(${O1})`,label:f("Looney loops"),backgroundPosition:"center center",backgroundSize:"cover",color:"#000"},{...ce,id:"img7",backgroundColor:"#ccffff",backgroundImage:`url(${U1})`,label:f("Icy explosion"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#000"},{...ce,id:"img8",backgroundColor:"#442233",backgroundImage:`url(${Q1})`,label:f("Nuclear point"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#fff"},{...ce,id:"img9",backgroundColor:"#ffdd55",backgroundImage:`url(${A1})`,label:f("Angled focus"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...ce,id:"img10",backgroundColor:"#220044",backgroundImage:`url(${z1})`,label:f("Circular focus"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...ce,id:"img11",backgroundColor:"#000000",backgroundImage:`url(${$1})`,label:f("Farseeing eyeball"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...ce,id:"img12",backgroundColor:"#ff0000",backgroundImage:`url(${F1})`,label:f("Canyon funnel"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...ce,id:"img13",backgroundColor:"#ffdd99",backgroundImage:`url(${j1})`,label:f("Threads ahead"),color:"#000",backgroundRepeat:"no-repeat"},{...ce,id:"img14",backgroundImage:`url(${G1})`,label:f("Sprinkle"),backgroundRepeat:"repeat",backgroundPosition:"center center"},{...ce,id:"img15",backgroundImage:`url(${K1})`,label:f("Circuit board"),backgroundRepeat:"repeat",backgroundPosition:"center center"},{...ce,id:"img16",backgroundImage:`url(${Y1})`,label:f("Snow"),backgroundRepeat:"repeat",backgroundPosition:"center center"}],X1=B(n("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"}),"UploadOutlined"),J1={cover:{label:f("Stretch to fit"),bgConfig:{backgroundRepeat:"no-repeat",backgroundSize:"cover"}},contain:{label:f("Fit image"),bgConfig:{backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center top"}},repeat:{label:f("Repeat image"),bgConfig:{backgroundRepeat:"repeat",backgroundSize:void 0,backgroundPosition:"left top"}}};function e0({value:e,onChange:t}){const a=t0(e);return n("div",{className:"border-t mt-20 pt-14",children:n(Uu,{size:"sm",disabled:!e,children:Object.entries(J1).map(([r,s])=>n(Vu,{name:"background-position",value:r,checked:r===a,onChange:o=>{e&&(t==null||t({...e,...s.bgConfig}))},children:n(l,{...s.label})},r))})})}function t0(e){return(e==null?void 0:e.backgroundSize)==="cover"?"cover":(e==null?void 0:e.backgroundSize)==="contain"?"contain":"repeat"}function n0({value:e,onChange:t,className:a}){return d("div",{children:[d("div",{className:a,children:[n(a0,{value:e,onChange:t}),Z1.map(r=>n(bn,{onClick:()=>t==null?void 0:t({...ce,...r}),isActive:(e==null?void 0:e.id)===r.id,style:{...ri(r),backgroundAttachment:"initial"},label:n(l,{...r.label})},r.id))]}),n(e0,{value:e,onChange:t})]})}function a0({value:e,onChange:t}){return e=(e==null?void 0:e.id)===ce.id?e:void 0,d(M,{type:"popover",onClose:a=>{t==null||t(a?{...ce,backgroundImage:`url(${a})`}:null)},children:[n(bn,{label:n(l,{...ce.label}),isActive:(e==null?void 0:e.id)===ce.id,className:"border-dashed border-2",style:ri(e),children:n("span",{className:"inline-block text-white bg-black/20 rounded p-10",children:n(X1,{size:"lg"})})}),n(r0,{value:e})]})}function r0({value:e}){var o;const t=(o=e==null?void 0:e.backgroundImage)==null?void 0:o.replace("url(","").replace(")",""),a=ae({defaultValues:{imageUrl:t}}),{close:r,formId:s}=K();return d(W,{size:"sm",children:[n(X,{children:n(l,{message:"Upload image"})}),n(Q,{children:n(ke,{id:s,form:a,onSubmit:i=>{r(i.imageUrl)},children:n(jn,{children:n(wt,{autoFocus:!0,name:"imageUrl",diskPrefix:"biolinks",showRemoveButton:!0})})})}),d(ee,{children:[n(_,{onClick:()=>{r()},children:n(l,{message:"Cancel"})}),n(_,{variant:"flat",color:"primary",type:"submit",form:s,children:n(l,{message:"Select"})})]})]})}const Yn={h2:"text-xl font-semibold mb-20",h3:"my-12 font-semibold"},s0={color:I1,gradient:P1,image:n0};function o0({className:e}){const t=it(o=>{var i;return(i=o.appearance)==null?void 0:i.bgConfig}),[a,r]=h.exports.useState(()=>(t==null?void 0:t.type)==="color"?"color":(t==null?void 0:t.type)==="gradient"?"gradient":"color"),s=s0[a];return d("div",{className:e,children:[n("h2",{className:Yn.h2,children:n(l,{message:"Background"})}),n(i0,{activeTab:a,onTabChange:r}),n(s,{value:a===(t==null?void 0:t.type)?t:void 0,onChange:o=>{ze().updateAppearance({bgConfig:o})},className:"grid gap-14 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start"})]})}function i0({activeTab:e,onTabChange:t}){return d("div",{className:"my-20 pb-20 flex items-center gap-20 border-b",children:[n(ir,{isActive:e==="color",icon:n(Dc,{}),title:n(l,{message:"Flat color"}),onClick:()=>{t("color")}}),n(ir,{isActive:e==="gradient",icon:n(Pc,{}),title:n(l,{message:"Gradient"}),onClick:()=>{t("gradient")}}),n(ir,{isActive:e==="image",icon:n(ni,{}),title:n(l,{message:"Image"}),onClick:()=>{t("image")}})]})}function ir({isActive:e,icon:t,title:a,onClick:r}){return d("div",{role:"button",className:"block",onClick:r,children:[n("div",{className:N("w-50 h-50 mx-auto border rounded flex items-center justify-center text-muted mb-8",e&&"ring border-primary"),children:t}),n("div",{className:"text-sm text-center text-primary",children:a})]})}const l0={flat:f("Fill"),outline:f("Outline")},c0={"rounded-none":f("Square"),rounded:f("Rounded"),"rounded-full":f("Pill")};function u0({className:e}){const t=it(r=>{var s;return(s=r.appearance)==null?void 0:s.btnConfig}),a=h.exports.useCallback(r=>{ze().updateAppearance({btnConfig:{...t,...r}})},[t]);return d("div",{className:e,children:[n("h2",{className:Yn.h2,children:n(l,{message:"Buttons"})}),n(d0,{value:t,onChange:a}),n(p0,{value:t,onChange:a})]})}function d0({value:e,onChange:t}){var s,o;const a=(s=e==null?void 0:e.variant)!=null?s:"flat",r=(o=e==null?void 0:e.radius)!=null?o:"rounded";return n("div",{children:Object.entries(l0).map(([i,c])=>d("div",{children:[n("h3",{className:Yn.h3,children:n(l,{...c})}),n("div",{className:"grid gap-24 grid-cols-2 md:grid-cols-3",children:Object.entries(c0).map(([u,m])=>n("div",{className:N("rounded",i===a&&r===u&&"ring ring-primary-light ring-offset-4"),children:n(_,{variant:i,color:"primary",radius:u,className:"w-full",onClick:()=>{t({variant:i,radius:u})},children:n(l,{...m})})},u))})]},i))})}const m0={"shadow-none":f("No shadow"),"rgb(0 0 0 / 20%) 0.2rem 0.2rem 0.4rem 0px":f("Light shadow"),"rgb(0 0 0 / 75%) 0.3rem 0.4rem 0px":f("Hard shadow")};function p0({value:e,onChange:t}){var r;const a=(r=e==null?void 0:e.shadow)!=null?r:"shadow-none";return d("div",{children:[n("h3",{className:"my-12 font-semibold",children:n(l,{message:"Shadow"})}),n("div",{className:"flex gap-24",children:Object.entries(m0).map(([s,o])=>n("div",{style:{boxShadow:s},children:n(Lt,{className:N("w-70 h-40 border rounded",a===s&&"border-primary"),onClick:()=>{t({shadow:s==="shadow-none"?void 0:s})},children:n("span",{className:"sr-only",children:n(l,{...o})})})},s))})]})}const h0=""+new URL("font.a5a81d1a.svg",import.meta.url).href;function f0({state:{filters:e,setFilters:t}}){const{trans:a}=V();return d("div",{className:"flex items-center gap-24 mb-24",children:[n(rn,{className:"flex-auto",value:e.query,onChange:r=>{t({...e,query:r.target.value})},startAdornment:n(cl,{}),placeholder:a(f("Search fonts"))}),d(Yo,{className:"flex-auto",selectionMode:"single",selectedValue:e.category,onSelectionChange:r=>{t({...e,category:r})},children:[n(T,{value:"",children:n(l,{message:"All categories"})}),n(T,{value:"serif",children:n(l,{message:"Serif"})}),n(T,{value:"sans-serif",children:n(l,{message:"Sans serif"})}),n(T,{value:"display",children:n(l,{message:"Display"})}),n(T,{value:"handwriting",children:n(l,{message:"Handwriting"})}),n(T,{value:"monospace",children:n(l,{message:"Monospace"})})]})]})}function g0(e){const t=Bu({usage:"search",...e});return{startsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(0,r.length),r)===0)},endsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(-r.length),r)===0)},contains(a,r){if(r.length===0)return!0;a=a.normalize("NFC"),r=r.normalize("NFC");let s=0;const o=r.length;for(;s+o<=a.length;s++){const i=a.slice(s,s+o);if(t.compare(r,i)===0)return!0}return!1}}}const Lc=[{label:f("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function b0({value:e,onChange:t}){const{data:a,isLoading:r}=vt(["googleFonts"]),[s,o]=h.exports.useState(0),[i,c]=h.exports.useState({query:"",category:""}),{contains:u}=g0({sensitivity:"base"}),m=h.exports.useCallback(y=>{c(y),o(0)},[]),p=h.exports.useMemo(()=>{var y;return Lc.concat((y=a==null?void 0:a.googleFonts)!=null?y:[])},[a==null?void 0:a.googleFonts]),b=h.exports.useMemo(()=>p.filter(y=>{var w;return u(y.family,i.query)&&(!i.category||((w=y.category)==null?void 0:w.toLowerCase())===i.category.toLowerCase())}),[p,i,u]),g=h.exports.useMemo(()=>yc(b,20),[b]),v=g[s];return h.exports.useEffect(()=>{const y="font-selector";v!=null&&v.length&&Hu(v,{id:y})},[v,s]),{fonts:v||[],currentPage:s,filteredFonts:b||[],setCurrentPage:o,isLoading:r,filters:i,setFilters:m,value:e,onChange:t,pages:g}}function v0({state:{currentPage:e=0,setCurrentPage:t,filteredFonts:a,pages:r}}){const s=(a==null?void 0:a.length)||0;return d("div",{className:"flex items-center justify-end gap-24 text-sm mt-30 pt-14 border-t",children:[s>0&&n("div",{children:n(l,{message:":from - :to of :total",values:{from:e*20+1,to:Math.min((e+1)*20,s),total:s}})}),d("div",{className:"text-muted",children:[n(F,{disabled:e<1,onClick:()=>{t(Math.max(0,e-1))},children:n(Vn,{})}),n(F,{disabled:e>=r.length-1,onClick:()=>{t(e+1)},children:n(zt,{})})]})]})}function y0(e){const t=b0(e);return d("div",{className:e.className,children:[n(f0,{state:t}),n(Ve,{initial:!1,mode:"wait",children:n(k0,{state:t})}),n(v0,{state:t})]})}function k0({state:e}){const{isLoading:t,fonts:a}=e,r="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return t?n(w0,{className:r}):a!=null&&a.length?n(ye.div,{...$e,className:r,children:a==null?void 0:a.map(s=>n(x0,{font:s,state:e},s.family))},"font-list"):n(Ra,{className:"mt-60",size:"sm",image:n(On,{src:h0}),title:n(l,{message:"No matching fonts"}),description:n(l,{message:"Try another search query or different category"})})}function x0({font:e,state:{value:t,onChange:a}}){const r=(t==null?void 0:t.family)===e.family,s=e.family.split(",")[0].replace(/"/g,"");return d(Lt,{onClick:()=>{a(e)},children:[n("span",{className:N("flex items-center justify-center text-4xl md:text-5xl border rounded aspect-square hover:bg-hover transition-bg-color",r&&"ring-2 ring-primary ring-offset-2"),children:n("span",{style:{fontFamily:e.family},children:"Aa"})}),n("span",{className:N("block mt-6 text-sm whitespace-nowrap overflow-hidden overflow-ellipsis",r&&"text-primary"),children:e.label?n(l,{...e.label}):s})]},e.family)}function w0({className:e}){const t=Array.from(Array(20).keys());return n(ye.div,{...$e,className:e,children:t.map(a=>d("div",{children:[n("div",{className:"aspect-square",children:n(De,{display:"block",variant:"rect"})}),n(De,{className:"text-sm mt-6"})]},a))},"font-list-skeleton")}function S0(){const e=fn();return G(()=>{const t=ze().appearance;return C0(e,{config:t})},{onSuccess:()=>{ze().setAppearanceIsDirty(!1),Z.positive(f("Appearance saved"))},onError:t=>Le(t,f("Could not save appearance"))})}function C0(e,t){return A.post(`biolink/${e}/appearance`,t).then(a=>a.data)}function lr({value:e,onChange:t,label:a}){const r=lt({size:"md",startAppend:n(h.exports.Fragment,{})}),s=h.exports.useId();return d("div",{children:[n("label",{className:r.label,htmlFor:s,children:a}),d("div",{className:"flex",children:[d(M,{type:"popover",children:[n(Lt,{className:"w-42 h-42 bg-black rounded-l flex-shrink-0 border",style:{backgroundColor:e}}),n(Kn,{showInput:!1,defaultValue:e,onChange:t})]}),n(bc,{id:s,autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,prefixed:!0,className:r.input,color:e,onChange:t})]})]})}function _0(){const e=S0(),t=it(a=>a.appearanceIsDirty);return d(h.exports.Fragment,{children:[d("header",{className:"mb-40",children:[n("h1",{className:"text-2xl mb-4",children:n(l,{message:"Custom appearance"})}),n("div",{className:"text-sm mb-20",children:n(l,{message:"Fully customize your Biolink. Change background color or select gradients and images. Choose button style, text color, typeface and more."})}),n(_,{variant:"flat",color:"primary",type:"submit",onClick:()=>e.mutate(),disabled:!t||e.isLoading,children:n(l,{message:"Save changes"})})]}),n(o0,{}),n(N0,{}),n(u0,{className:"my-60"}),n(I0,{})]})}function N0(){const e=it(a=>{var r;return(r=a.appearance)==null?void 0:r.btnConfig}),t=it(a=>{var r;return(r=a.appearance)==null?void 0:r.bgConfig});return d("div",{className:"my-60",children:[n("h2",{className:Yn.h2,children:n(l,{message:"Colors"})}),d("div",{className:"md:grid grid-cols-3 items-center gap-24",children:[n(lr,{label:n(l,{message:"Text color"}),value:(t==null?void 0:t.color)||"#000",onChange:a=>{ze().updateAppearance({bgConfig:{...t,color:a}})}}),n(lr,{label:n(l,{message:"Button color"}),value:(e==null?void 0:e.color)||"#000",onChange:a=>{ze().updateAppearance({btnConfig:{...e,color:a}})}}),n(lr,{label:n(l,{message:"Button text color"}),value:(e==null?void 0:e.textColor)||"#000",onChange:a=>{ze().updateAppearance({btnConfig:{...e,textColor:a}})}})]})]})}function I0(){const e=it(t=>{var a;return(a=t.appearance)==null?void 0:a.fontConfig})||Lc[0];return d("div",{children:[n("h2",{className:Yn.h2,children:n(l,{message:"Font"})}),n(y0,{value:e,onChange:t=>{ze().updateAppearance({fontConfig:{...e,...t}})}})]})}const Vo={content:0,appearance:1,settings:2};function R0(){return d("div",{children:[n(D0,{}),d("div",{className:"flex gap-60 p-24 container mx-auto",children:[n(P0,{}),n(C1,{})]})]})}function D0(){const{biolink:e}=hn();return d("header",{className:"border-b px-10 py-4 flex items-center gap-10 min-h-46",children:[n(Jo,{className:"text-muted"}),d(Ve,{children:[e&&n(ye.a,{className:an,href:e==null?void 0:e.short_url,target:"_blank",rel:"noreferrer",...$e,children:ot(e.short_url)},"link"),e&&h.exports.createElement(ye.div,{...$e,key:"share-button",className:"ml-auto"},n(Tt,{variant:"text",link:e}))]})]})}function P0(){var r;const{biolinkId:e}=Xe(),{tabName:t="content"}=Xe(),a=(r=Vo[t])!=null?r:Vo.content;return hn(),h.exports.useEffect(()=>{Ua()},[e]),n("div",{className:"flex-auto min-w-0",children:d(dc,{overflow:"overflow-visible",selectedTab:a,isLazy:!0,children:[d(mc,{className:"sticky top-0 bg dark:bg-alt z-10",children:[n(Sn,{padding:"w-140",elementType:pe,to:"../content",relative:"path",children:n(l,{message:"Content"})}),n(Sn,{padding:"w-140",elementType:pe,to:"../appearance",relative:"path",children:n(l,{message:"Appearance"})}),n(Sn,{padding:"w-140",elementType:pe,to:"../settings",relative:"path",children:n(l,{message:"Settings"})})]}),d(pc,{className:"py-20",children:[n(Cn,{children:n(L0,{})}),n(Cn,{children:n(_0,{})}),n(Cn,{children:n(Xy,{})})]})]})})}function L0(){const{isLoading:e,status:t,biolink:a}=hn(),[r,s]=h.exports.useState(null);let o;return t==="success"&&!(a!=null&&a.content.length)?o=h.exports.createElement(ye.div,{...$e,key:"no-results"},n(Ra,{className:"mt-60",image:n(On,{src:qu}),title:n(l,{message:"This biolink does not have any content yet"})})):e?o=n(A0,{}):o=n(E0,{biolink:a}),d(h.exports.Fragment,{children:[a&&n(x1,{biolink:a,activeWidget:r,onOpenChange:i=>{i||s(null)}}),d("div",{className:"mb-20",children:[n(T0,{}),d(M,{type:"modal",onClose:i=>{i&&s(i)},children:[n(_,{color:"primary",variant:"outline",startIcon:n(py,{}),children:n(l,{message:"Add widget"})}),n(k1,{})]})]}),n(Ve,{initial:!1,mode:"wait",children:o})]})}function E0({biolink:e}){return n(ye.div,{...$e,children:e==null?void 0:e.content.map(t=>{const a=t.model_type==="biolinkWidget"?w1:Wy;return n(a,{item:t,biolink:e},`${t.model_type}-${t.id}`)})},"content")}function T0(){const{biolink:e,biolinkId:t}=hn(),a=`biolink/${t}/link`,r=e==null?void 0:e.content.filter(s=>s.pinned).length;return d(M,{type:"modal",children:[n(_,{color:"primary",variant:"flat",className:"mr-14 min-w-144",children:n(l,{message:"Add a link"})}),n(ds,{endpoint:a,position:r,group:e,hiddenFields:Rc,showButtonLabelField:!0,invalidateQueries:!1,onSuccess:s=>{Qn(s.biolink)}})]})}function A0(){return n(ye.div,{...$e,children:[...Array(4).keys()].map((e,t)=>n(z0,{},t))},"loading-skeleton")}function z0(){return d(xs,{title:n(De,{className:"mb-14 text-sm max-w-192"}),actionRow:n(De,{className:"text-xs max-w-288"}),children:[n(De,{className:"text-xs max-w-400"}),n(De,{className:"text-xs max-w-400"})]})}const Ec=({forCurrentUser:e=!1})=>[{path:"links",element:n(rg,{forCurrentUser:e})},{path:"links/:linkId",element:n($g,{})},{path:"biolinks",element:n(iy,{forCurrentUser:e})},{path:"biolinks/:biolinkId",element:n(my,{})},{path:"biolinks/:biolinkId/edit",element:n(Ku,{to:"content",replace:!0})},{path:"biolinks/:biolinkId/edit/:tabName",element:n(R0,{})},{path:"link-groups",element:n(Ng,{forCurrentUser:e})},{path:"link-groups/:groupId",element:n(Eg,{})},{path:"link-groups/:groupId/links",element:n(pg,{})},{path:"custom-domains",element:n(tb,{forCurrentUser:e})},{path:"pixels",element:n(hb,{forCurrentUser:e})},{path:"link-overlays",element:n(Lb,{forCurrentUser:e})},{path:"link-overlays/new",element:n(Qv,{})},{path:"link-overlays/:overlayId/edit",element:n(ey,{})}];function $0(){const{workspaceId:e}=Ee(),t=[{path:"/",element:n(ju,{children:n(tm,{})}),children:[{index:!0,element:n(Mm,{})},{path:"link-pages",element:n(Nb,{forCurrentUser:!e})},{path:"link-pages/new",element:n(_o,{allowSlugEditing:!1,endpoint:"link-page"})},{path:"link-pages/:pageId/edit",element:n(_o,{allowSlugEditing:!1,endpoint:"link-page"})},...Ec({forCurrentUser:!e})]},{path:"*",element:n(Wu,{})}];return Gu(t)}const B0=Object.freeze(Object.defineProperty({__proto__:null,SharedDashboardRoutes:Ec,default:$0},Symbol.toStringTag,{value:"Module"}));export{on as $,sa as A,re as B,Ot as C,ed as D,lc as E,q as F,kb as G,Je as H,zs as I,gs as J,Vn as K,Bn as L,sr as M,Ht as N,Kn as O,hr as P,dc as Q,mc as R,Sn as S,rb as T,Mt as U,pc as V,Cn as W,ii as X,sn as Y,ks as Z,J as _,sd as a,V0 as a0,Kl as a1,Af as a2,tn as a3,cl as a4,lp as a5,Un as a6,Ut as a7,xl as a8,Hn as a9,An as aA,qr as aB,Os as aC,Pc as aD,md as aE,sb as aF,Zd as aG,vg as aH,Zr as aI,rd as aJ,gy as aK,og as aL,Fd as aM,Zp as aN,wl as aO,fy as aP,jp as aQ,X1 as aR,py as aS,g0 as aT,rr as aU,B0 as aV,ps as aa,gg as ab,ma as ac,hp as ad,Ln as ae,Cm as af,As as ag,zm as ah,Am as ai,jr as aj,Aa as ak,vm as al,Om as am,Ec as an,Vv as ao,_o as ap,Dc as aq,od as ar,qf as as,Ff as at,ec as au,hy as av,wn as aw,D1 as ax,xi as ay,oa as az,td as b,ad as c,Ie as d,$t as e,Ft as f,xt as g,bg as h,kt as i,pd as j,_e as k,zt as l,jn as m,Rt as n,cn as o,Me as p,Ta as q,dv as r,ja as s,Wn as t,fv as u,Od as v,Vy as w,Ny as x,wt as y,No as z};
//# sourceMappingURL=dashboard-routes.6d237f77.js.map
