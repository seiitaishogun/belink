{"version":3,"mappings":"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AA4B,GAChCA,GAA4B,CACxB,MAAS,OACT,KAAQ,QACR,WAAc,WACd,MAAS,SACT,IAAO,QACP,UAAa,UACb,IAAO,aACP,WAAc,iBAClB,EAGA,IAAIC,GAA4B,GAChCA,GAA4B,CACxB,MAAS,OACT,KAAQ,QACR,WAAc,eACd,MAAS,SACT,IAAO,UACP,UAAa,cACb,IAAO,SACP,WAAc,gBAClB,EAGA,IAAIC,GAA4B,GAChCA,GAA4B,CACxB,MAAS,OACT,KAAQ,WACR,WAAc,aACd,MAAS,WACT,IAAO,QACP,UAAa,UACb,IAAO,UACP,WAAc,YAClB,EAGA,IAAIC,GAA4B,GAChCA,GAA4B,CACxB,MAAS,OACT,KAAQ,OACR,WAAc,iBACd,MAAS,aACT,IAAO,MACP,UAAa,qBACb,IAAO,yBACP,WAAc,WAClB,EAGA,IAAIC,GAA4B,GAChCA,GAA4B,CACxB,MAAS,iCACT,KAAQ,iCACR,WAAc,+DACd,MAAS,6CACT,IAAO,qBACP,UAAa,2EACb,IAAO,mDACP,WAAc,oEAClB,EAGA,IAAIC,GAA4B,GAChCA,GAA4B,CACxB,MAAS,QACT,KAAQ,eACR,WAAc,eACd,MAAS,eACT,IAAO,eACP,UAAa,qBACb,IAAO,eACP,WAAc,oBAClB,EAGA,IAAIC,GAA4B,GAChCA,GAA4B,CACxB,MAAS,QACT,KAAQ,eACR,WAAc,eACd,MAAS,eACT,IAAO,eACP,UAAa,eACb,IAAO,eACP,WAAc,oBAClB,EAGAlC,GAA4B,CACxB,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,GACT,QAASC,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","names":["$5b160d28a433310d$export$c17fa47878dc55b6","key","locale","strings","$5b160d28a433310d$var$getStringsForLocale","string","messages","defaultLocale","language","$5b160d28a433310d$var$getLanguage","DashboardLayoutContext","createContext","useBlockBodyOverflow","useEffect","DashboardLayout","children","leftSidenavStatus","leftSidenav","onLeftSidenavChange","rightSidenavStatus","rightSidenav","onRightSidenavChange","name","leftSidenavCanBeCompact","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","getFromLocalStorage","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","shouldShowUnderlay","isMobileMode","_jsx","AnimatePresence","Underlay","DashboardSidenav","className","position","props","useContext","variants","open","display","width","compact","closed","transitionEnd","size","getSize","m","type","duration","e","target","closest","clsx","cloneElement","minWidth","isCompactMode","DashboardContent","MenuOpenIcon","createSvgIcon","DashboardNavbar","hideToggleButton","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","Navbar","IconButton","undefined","UnfoldMoreIcon","AddIcon","useCreateWorkspace","form","useMutation","createWorkspace","toast","queryClient","WorkspaceQueryKeys","r","onFormQueryError","NewWorkspaceDialog","useForm","formId","close","useDialogContext","Dialog","DialogHeader","Trans","DialogBody","Form","mutate","getValues","onSuccess","response","workspace","id","FormTextField","_jsxs","DialogFooter","Button","isLoading","fetchWorkspaceWithMembers","workspaceId","useWorkspaceWithMembers","GroupIcon","ChipList","color","radius","selectable","Children","map","chip","isValidElement","Input","React","forwardRef","ref","inputProps","wrapperProps","autoFocus","style","onClick","FocusScope","Avatar","circle","src","getSizeClassName","stringToChipValue","ChipFieldInner","fieldRef","useRef","inputRef","useObjectRef","displayWith","v","validateWith","suggestions","inputValue","onInputValueChange","onItemSelected","placeholder","onOpenChange","chipSize","openMenuOnFocus","showEmptyMessage","value","propsValue","defaultValue","onChange","propsOnChange","valueKey","isAsync","allowCustomValue","showDropdownArrow","inputFieldProps","fieldClassNames","getInputFieldClassNames","flexibleHeight","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","useState","loadingIndicator","ProgressCircle","dropdownArrow","KeyboardArrowDownIcon","fieldProps","useField","focusRef","endAdornment","Field","input","current","focus","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","useFocusManager","removeItem","i","findIndex","cr","newItems","splice","item","Chip","errorMessage","image","length","focusPrevious","tabbable","focusLast","setChips","chips","inputClassName","addItems","filter","invalid","listbox","useListbox","clearInputOnItemSelection","isOpen","selectionMode","role","virtualFocus","handleItemSelection","state","activeIndex","setActiveIndex","setIsOpen","setInputValue","refs","listboxId","collection","onInputChange","textValue","option","values","useLayoutEffect","reference","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","createEventHandler","Listbox","Popover","preventDefault","mergeProps","onPaste","emails","clipboardData","getData","match","selection","window","getSelection","rangeCount","deleteFromDocument","email","autoComplete","autoCorrect","spellCheck","onKeyDown","selectionStart","onFocus","mixedValueToChipValue","propsDefaultValue","handleChange","newValue","ChipField","InviteMembers","other","useInviteMembers","err","ResendInvite","inviteId","useResendInvite","matcher","isEmail","ChangeRole","modelType","member","memberId","apiClient","useChangeRole","removeMember","endpoint","memberType","useRemoveMember","useActiveWorkspaceId","useAuth","user","setWorkspaceId","PersonalWorkspace","LeaveWorkspaceConfirmation","ConfirmationDialog","WorkspaceMembersDialog","data","Manager","can","usePermissions","members","invites","invite","InviteChipField","MemberListItem","model_type","x","opacity","avatar","display_name","MemberDisplayNameAppend","MemberActions","authUser","update","delete","permissions","authMember","find","mb","forEach","permission","is_owner","p","selectedRole","setSelectedRole","role_id","changeRole","isOwner","isCurrentUser","roleSelector","role_name","RoleMenuTrigger","roleId","_Fragment","RemoveMemberButton","trans","useTrans","allEmailsValid","every","description","inviteMembers","useValueLists","workspaceRoles","message","c","DialogTrigger","isConfirmed","CloseIcon","RemoveMemberConfirmation","isDisabled","MenuTrigger","ArrowDropDownIcon","Menu","MenuItem","ResendInviteDialogTrigger","resendInvite","PersonAddIcon","DeleteIcon","updateWorkspace","useUpdateWorkspace","RenameWorkspaceDialog","defaultValues","deleteWorkspace","useDeleteWorkspace","payload","WorkspaceSelector","trigger","propsTrigger","isFetched","isFetching","useUserWorkspaces","activeWorkspace","w","dialog","setDialog","selectorIsOpen","setSelectorIsOpen","hasPermission","defaultTrigger","ButtonBase","default","count","members_count","Fragment","WorkspaceItem","stopPropagation","DialogContainer","isActive","CheckIcon","ManageButton","DeleteWorkspaceConfirmation","owner_id","EditIcon","ExitToAppIcon","useLinkSummary","useQuery","fetchLinkUsage","ProgressBarBase","minValue","maxValue","label","showValueLabel","isIndeterminate","labelPosition","formatOptions","useId","clamp","percentage","formatter","useNumberFormatter","valueLabel","valueToFormat","format","barStyle","Math","round","barSize","labelEl","Meter","InfoIcon","resourceTranslationMap","links","biolinks","link_clicks","link_overlays","custom_pages","custom_domains","link_groups","tracking_pixels","ResourceUsageList","unlimited","Object","entries","usage","total","used","FormattedNumber","UsageDetailsTrigger","subscription","subscriptions","planName","product","renewalDate","renews_at","FormattedDate","date","UsageMeter","available","UpgradeButton","isSubscribed","Link","BelinkDashboardSidenav","billing","useSettings","CustomMenu","to","enable","BelinkDashboardLayout","dash_footer","AdHost","Footer","BelinkNavbar","getDefaultGranularity","CalendarDate","min","max","selectedDate","timezone","useUserTimezone","calendarIsOpen","setCalendarIsOpen","closeDialogOnSelection","_a","granularity","toZoned","startOfDay","endOfDay","useCurrentDateTime","now","useDateRangePickerState","isPlaceholder","setIsPlaceholder","_b","setStateValue","internalValue","setInternalValue","completeRange","clear","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","range","start","end","startMax","minDate","endMin","maxDate","setSelectedValue","newRange","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate","startOfMonth","endOfMonth","DateRangeIcon","FormattedDateTimeRange","memo","options","preset","dates","useDateFormatter","DateFormatPresets","formatRange","castToDate","shallowEqual","parseAbsolute","toDate","DatePickerField","onBlur","objRef","labelElementType","wrapper","disabled","contains","relatedTarget","createFocusManager","focusFirst","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","CalendarCell","currentMonth","localeCode","useSelectedLocale","dayOfWeek","getDayOfWeek","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","dateIsInvalid","calendar","getDaysInMonth","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","startOfWeek","CalendarMonthHeader","WeekdayHeader","Array","keys","weekIndex","dayIndex","add","weeks","days","shiftCalendars","direction","newDates","months","subtract","monthFormatter","month","year","era","identifier","isBackwardDisabled","isForwardDisabled","dayFormatter","weekday","index","dateDay","Calendar","visibleMonths","useIsMobileMediaQuery","ArrowRightAltIcon","adjustSegment","part","amount","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","enteredKeys","focusManager","timeZone","parser","NumberParser","maximumFractionDigits","setSegmentValue","resolvedOptions","adjustSegmentValue","backspace","isValidPartialNumber","text","slice","parsed","parse","today","ctrlKey","metaKey","shiftKey","altKey","focusNext","requestSubmit","onInput","amPmFormatter","hour","hour12","am","amDate","Date","setHours","formatToParts","pm","pmDate","toLowerCase","startsWith","numberValue","allowsZero","hourCycle","Number","isNaN","shouldSetValue","String","spinButtonProps","tabIndex","scrollIntoView","block","padStart","minLength","LiteralDateSegment","pointerType","from","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","memoOptions","minute","dateValue","segments","limits","getSegmentLimits","List","padding","dataTestId","ListItem","onSelected","borderRadius","listItemProps","isSelectable","setIsActive","ListItemBase","matches","getUserTimezone","defaultTimezone","getBootstrapData","preferredTimezone","getLocalTimeZone","Now","DateRangePresets","endOfWeek","startOfYear","endOfYear","DatePresetList","onPresetSelected","selectedValue","getRangeValue","useIsTabletMediaQuery","DateRangeDialog","showInlineDatePickerField","isTablet","initialStateRef","hasPlaceholder","footer","dateStyle","Calendars","overflow","InlineDatePickerField","monthDayFormat","ReportDateSelector","compactOnMobile","short","DateSelectorDialog","ChartLayout","title","contentIsFlex","contentClassName","contentRef","ChartLoadingIndicator","LazyChart","lazy","__vitePreload","BaseChart","Suspense","formatReportData","report","firstDatasetLabels","dataset","datasetIndex","datasetItem","itemIndex","shareFirstDatasetLabels","generateDatasetLabels","datum","generateTimeLabels","isoDate","isoEndDate","parseAbsoluteToLocal","endDate","getFormatter","memoize","DateFormatter","a","b","ChartColors","LineChartOptions","parsing","xAxisKey","yAxisKey","datasets","line","fill","tension","pointBorderWidth","pointHitRadius","plugins","tooltip","intersect","mode","LineChart","formattedData","backgroundColor","borderColor","pointBackgroundColor","PolarAreaChartOptions","PolarAreaChart","labels","d","borderWidth","ReferrerChart","layoutProps","dataItems","dataItem","RemoteFavicon","LinkStyle","removeProtocol","$parcel$interopDefault","$7a451c0c6841e6b9$exports","$2d805fd52bb48883$exports","$6c28468dc1df643c$exports","$807554f8230db0ed$exports","$7097f64386f1761c$exports","$bdd847d8beb08799$exports","$a53e00b683950971$exports","$21cdd87e84f28d89$exports","$92fee9698e4d675a$exports","$7ea012e91a5ad3ee$exports","$8460c13bb2d75345$exports","$2a2d5dc14e680587$exports","$9a3f292371bb0589$exports","$4742231a685fa068$exports","$05e247fd2960981e$exports","$a67524a79ccbe190$exports","$a9eefe9d6c8cb7d5$exports","$4a6b836d4f1bfaba$exports","$c950e4b1c482abde$exports","$d10d6b60dc50b438$exports","$371a732b2494f452$exports","$6d042cae6243464b$exports","$d9ab5c2611e0bcd3$exports","$73f77c9902e29ca6$exports","$4f461eb266a95c10$exports","$dc46bea2f2597899$exports","$622bbd6719cc95af$exports","$4da03c1ecd9a9c7d$exports","$edb6b2fe456ed4e8$exports","$264cd81c52b30815$exports","$6f80afde0270dda7$exports","$23a92651c6957668$exports","$0f9b1074d04f4954$exports","$a9cedf75b94e4916$exports","$37cff576474bc8d4$exports","$799cddbef784668f$var$strings","$cBgAy$LocalizedStringDictionary","$799cddbef784668f$export$6e865ea70d7724f","res","$799cddbef784668f$var$RGBColor","$799cddbef784668f$var$HSBColor","$799cddbef784668f$var$HSLColor","$799cddbef784668f$var$Color","channel","xyChannels","xChannel","yChannel","xCh","yCh","zCh","value1","colors","num","$cBgAy$clamp","red","green","blue","brightness","chroma","saturation","hue","$cBgAy$toFixedNumber","lightness","$cBgAy$NumberFormatter","alpha","$799cddbef784668f$var$HSB_REGEX","h","s","n","$799cddbef784668f$var$mod","fn","k","$799cddbef784668f$var$HSL_REGEX","l","$b335ada08155d9c0$var$MIN_COLOR","$b335ada08155d9c0$var$MAX_COLOR","themeValueToHex","loaderUrl","useGoogleGeoChart","apiKey","analytics","useThemeSelector","geoChartRef","drawGoogleChart","location","seedData","selectedTheme","placeholderRef","initGoogleGeoChart","lazyLoader","GeoChart","metricData","initialData","BarChart","individualBarColors","isHorizontal","indexAxis","fetchClicksReport","params","ClicksReportCharts","dateRange","model","rowClassName","AsyncChart","clicks","metric","isEnabled","setIsEnabled","query","useClicksReport","metrics","chart","observerRef","el","observer","IntersectionObserver","isIntersecting","disconnect","threshold","observe","ClicksReportPageLayout","actions","setDateRange","StaticPageTitle","AllClicksReportPage","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","filters","transformValue","fm","filterConfig","f","o","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","getDecodedWithoutKeys","newFilters","replaceAll","filterValues","encodeBackendFilters","remove","PaginatedResourcesQueryKey","paginateResources","DataTableContext","useDataTable","ProgressBar","cellStyle","column","userPadding","justify","finalWidth","rowStyle","isSelected","isHeader","enabledSelection","isCtrlKeyPressed","isMac","useGridNavigation","focusSiblingCell","focusFirstElementAfterGrid","rowCount","cellCount","operations","grid","currentCell","row","rowIndex","cellIndex","_c","_d","rowOpCount","_e","_g","_h","cellOpCount","_i","nextCell","getFocusableTreeWalker","nextFocusableElement","walker","last","next","focusWithoutScrolling","TableContext","CheckboxCell","selectedRows","enableSelection","toggleRow","selectionStyle","Checkbox","includes","TableCell","columns","body","usePointerEvents","useGlobalListeners","onMoveStart","onPointerDown","onLongPress","onMove","addGlobalListener","onPointerMove","onPointerUp","deltaX","deltaY","minimumMovement","longPressTriggered","onMoveEnd","onPress","removeGlobalListener","isCtrlOrShiftPressed","useIsTouchDevice","interactableElements","TableRow","renderAs","isTouchDevice","selectRow","onAction","isRowSelected","clickedOnInteractable","join","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","tableRowProps","onDoubleClick","onContextMenu","RowElement","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","isHovered","setIsHovered","sortingKey","allowSorting","allowsSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","visible","y","hidden","hideHeader","header","SelectAllCell","onSelectionChange","allRowsSelected","someRowsSelected","Table","hideHeaderRow","propsSelectedRows","defaultSelectedRows","propsDefaultSelectedRows","propsOnSelectionChange","propsSortDescriptor","propsOnSortChange","ariaLabelledBy","renderRowAs","newValues","push","indexOf","merge","contextValue","navProps","headerRow","columnIndex","defaultPerPage","perPageOptions","DataTablePaginationFooter","numberFormatter","setParams","pagination","perPageSelect","Select","perPage","Item","prev_page","page","next_page","SearchIcon","FilterAltIcon","BackendFilter","__publicField","FilterOperator","FilterControlType","ALL_PRIMITIVE_OPERATORS","Accordion","variant","expandedValues","setExpandedValues","defaultExpandedValues","onExpandedChange","child","AccordionItem","bodyClassName","startIcon","endAppend","chevronPosition","isExpanded","buttonId","panelId","height","visibility","toggle","newKeys","chevron","SelectFilterPanel","FormSelect","DateRangePicker","hideCalendarIcon","openOnClick","isHourSegment","currentTarget","ariaLabel","FormDateRangePicker","field","fieldState","error","useController","formProps","dateRangeToAbsoluteRange","absoluteRangeToDateRange","absoluteRange","toAbsoluteString","DateFilterPanel","fetchUsers","modelName","modelId","fetchModel","NormalizedModelField","useNormalizedModels","SelectedModelPreview","requestAnimationFrame","ComboBox","results","onEditClick","useNormalizedModel","opacityAnimation","Tooltip","LoadingSkeleton","Skeleton","FormNormalizedModelField","NormalizedModelFilterPanel","FilterOperatorNames","InputFilterPanel","operators","operator","inputType","BooleanFilterPanel","AddFilterDialog","useBackendFilterUrlParams","expandedFilters","setExpandedFilters","FilterList","appliedFilter","defaultOperator","formValue","fieldValue","BooleanToggle","AddFilterDialogPanel","DatePicker","SelectModel","AddFilterButton","DataTableHeader","searchPlaceholder","HeaderLayout","TextField","SelectedStateDataTableHeader","FilterListTriggerButton","isInactive","InactiveFilterButton","ActiveFilterButton","isBoolean","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","FilterListControl","DatePickerControl","BooleanToggleControl","SelectControl","InputControl","SelectModelControl","operatorLabel","skeleton","modelPreview","handleValueChange","DataTable","queryParams","selectedActions","emptyStateMessage","tableDomProps","onRowAction","setSelectedRows","usePaginatedResources","isFiltering","descriptor","isPreviousData","DataTablePage","headerContent","headerItemsAlign","dataTableProps","titleId","DataTableAddItemButton","elementType","deleteSelectedRows","ids","useDeleteSelectedRows","DeleteSelectedItemsAction","DataTableEmptyStateMessage","filteringTitle","IllustratedMessage","SvgImage","TimestampFilter","CreatedAtFilter","UpdatedAtFilter","USER_MODEL","LinksDatatableFilters","SettingsIcon","names","useLinkFormValueLists","prefetchLinkFormValueLists","prefetchValueLists","LinkTypeField","branding","site_name","watch","setValue","useFormContext","siteName","pages","overlays","overlay","Switch","useAutoFocus","descriptionId","checked","font","FormSwitch","LockIcon","useDatePickerState","useBaseDatePickerState","showCalendarFooter","FormDatePicker","rules","validate","compare","parsedValue","upgradeSvg","UpgradeDialog","messageSuffix","FeatureLockedDialog","NoPermissionButton","GenericButton","LinkFormSection","upgradeMessage","useLinkFeatureStatus","feature","LinkRestrictionFields","linkName","ScheduleFields","ExpirationClicksField","SwapVertIcon","LinkRetargetingFields","GeoFields","DeviceFields","PlatformFields","FieldsLayout","FormComboBox","countries","country","code","buttonLabel","defaultKey","fields","append","useFieldArray","RemoveButton","PublicIcon","ZustandContext","createContext$1","storeRef","createStore","createElement","selector","equalityFn","store","useStore","denyList","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","_asyncToGenerator","self","args","ownKeys","object","enumerableOnly","symbols","sym","_objectSpread","source","_defineProperty","obj","namespace","isNetworkError","isRetryAllowed","SAFE_HTTP_METHODS","IDEMPOTENT_HTTP_METHODS","isRetryableError","isSafeRequestError","isIdempotentRequestError","isNetworkOrIdempotentRequestError","noDelay","exponentialDelay","retryNumber","delay","randomSum","getCurrentState","currentState","getRequestOptions","defaultOptions","fixConfig","axios","shouldRetry","_x","_x2","_x3","_x4","_shouldRetry","retries","retryCondition","shouldRetryOrPromise","shouldRetryPromiseResult","axiosRetry","_ref","retryDelay","shouldResetTimeout","lastRequestDuration","onRetry","_x5","oneMB","desiredChunkSize","batchSize","concurrency","S3MultipartUpload","file","storedUrl","removeFromLocalStorage","pendingChunks","signedUrls","pendingUploads","batch","chunk","partNumber","url","totalUploaded","etag","getAxiosErrorMessage","fileKey","uploadId","chunkSize","minChunkSize","previouslyUploaded","version","VERSION","_hasatob","_hasbtoa","_hasBuffer","_TD","_TE","b64ch","b64chs","b64tab","tab","b64re","_fromCC","_U8Afrom","it","_mkUriSafe","m0","_tidyB64","btoaPolyfill","bin","u32","c0","c1","c2","asc","pad","_btoa","_fromUint8Array","u8a","strs","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","u","_encode","encode","encodeURI","re_btou","cb_btou","cccc","cp","offset","btou","atobPolyfill","u24","r1","r2","_atob","_toUint8Array","toUint8Array","_unURI","_decode","decode","isValid","_noEnum","extendString","_add","extendUint8Array","extendBuiltins","gBase64","_typeof","_defineProperties","_createClass","Constructor","protoProps","staticProps","_classCallCheck","instance","_inherits","subClass","superClass","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf","result","NewTarget","_possibleConstructorReturn","call","_assertThisInitialized","_wrapNativeSuper","Class","_cache","_isNativeFunction","Wrapper","_construct","Parent","DetailedError","_Error","_super","_this","causingErr","req","requestId","method","uuid","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","len","arr2","_arr","_n","_s","BaseUpload","fingerprint","previousUpload","_this2","retryDelays","optionName","_this$options$paralle","_this3","totalSize","totalProgress","partCount","parts","splitSizeIntoParts","uploads","lastPartProgress","newPartProgress","upload","metadata","encodeMetadata","inStatusCategory","resolveUrl","shouldTerminate","_this4","_this5","shouldResetDelays","bytesSent","bytesTotal","bytesAccepted","_this6","promise","_this7","_this8","_this9","_ref2","done","openRequest","_this10","_this11","storedUpload","urlStorageKey","sendRequest","remainingDelays","newOptions","_ref3","_ref4","Base64","category","headers","_ref5","_ref6","onBeforeRequestPromise","onAfterResponsePromise","isOnline","online","retryAttempt","origin","link","URL","partSize","NoopUrlStorage","hasStorage","canStoreURLs","WebStorageUrlStorage","prefix","_key","XHRHttpStack","Request","progressHandler","Response","xhr","isReactNative","uriToBlob","uri","blob","isCordova","readAsByteArray","reader","FileSource","blobOrArray","concat","StreamSource","hasEnoughData","hasAllDataBeenRead","FileReader","reactNativeFingerprint","exifHash","hashCode","str","hash","_char","DefaultHttpStack","Upload","_BaseUpload","TusUpload","tusFingerprint","baseUrl","getCookie","onError","bytesUploaded","onProgress","uploadKey","createFileEntry","previousUploads","Disk","S3Upload","acl","AxiosUpload","formData","ProgressTimeout","startUploading","settings","restrictions","validateUpload","updateFileUpload","request","timer","showToastOnRestrictionFail","danger","runQueue","relativePath","disk","parentId","chunk_size","base_url","entry","progress","chooseUploadStrategy","create","timeoutHandler","abort","OneMB","FourMB","HundredMB","driver","uploads_driver","public_driver","endsWith","s3_direct_upload","disable_tus","UploadedFile","enableMapSet","createFileUploadStore","immer","set","get","newUploadState","fileUpload","updateTotals","userOptions","createUpload","fileUploads","files","activeUploads","activeUpload","Provider","useFileUploadStore","FileUploadProvider","deleteFileEntries","useDeleteFileEntries","useActiveUpload","uploadIdRef","uploadSingle","uploadFile","selectAndUploadFile","openUploadWindow","deleteEntry","handleSuccess","entryPath","FormChipField","LinkSeoFields","hideTitle","ImageField","uploadStatus","imageUrl","AvatarImageSelector","public","diskPrefix","maxFileSize","MaxImageSize","allowedFileTypes","UploadInputType","shouldDirty","AccountTreeIcon","LinkUtmFields","CustomTagsSection","useDefaultCustomDomainHost","allDomains","selectedHost","host","LinkDomainSelect","selectProps","defaultHost","domains","allow_select","allow_all_option","domain","LinkSettingsForm","defaultExpanded","multipleLinks","hiddenFields","retargeting","LinkOptionsFields","enable_type","pixels","linkCount","hideGroups","hideType","hideEnabled","LinkGroupsField","LinkPixelsField","groups","group","pixel","SlugEditor","suffix","initialValue","onInputBlur","showLinkIcon","pattern","maxLength","hideButton","fullSuffix","isEditing","setIsEditing","handleSubmit","LinkIcon","AliasField","alias_min","alias_max","formState","currentAlias","aliasError","errors","alias","default_host","newAlias","CrupdateLinkForm","onSubmit","showButtonLabelField","clearErrors","min_len","max_len","hideAlias","urlIsValid","long_url","setError","defaultUtmTags","buildLinkeablePayload","tag","addUtmAndCustomQueryParams","utm","removeEmptyValuesFromObject","buildLinkPayload","createLink","invalidateQueries","CreateLinkDialog","default_type","verify","isVerifying","useRecaptcha","nanoid","active","geo_rules","device_rules","platform_rules","utm_custom","domain_id","useCreateLink","linkId","updateLink","buildLinkeableDefaultFormValues","linkeable","defaultUtm","customUtm","rule","UpdateLinkDialog","buildDefaultFormValues","useUpdateLink","type_id","LinkImage","NameWithAvatar","OverQuotaDialog","resourceName","resource","PermissionAwareButton","action","childProps","dialogIsOpen","setDialogIsOpen","usageKey","camelCaseToSnakeCase","messageType","createMsgType","user_id","event","replace","letter","BarChartIcon","linksDatatableColumns","LinkClipboardButton","clicks_count","has_password","expires_at","clicked_at","align","RouterLink","ShareLinkButton","useExportCsv","exportCsv","AddLinkIcon","ExportCsvIcon","CsvExportInfoDialog","useCreateMultipleLinks","createLinks","formToPayload","longUrls","CreateMultipleLinksDialog","createMultiple","long_urls","split","some","LinksDatablePage","forCurrentUser","col","userId","with","Actions","shareLink","activeDialog","setActiveDialog","MoreHorizIcon","downloadPath","downloadFileFromUrl","MoveDownIcon","useMoveLinksToGroup","moveLinks","groupId","MoveLinksToGroupDialog","selectedIds","setSelectedIds","paginationButtons","emptyStageMessage","linkSvg","list","LinksList","linkIds","short_url","skeletonCount","LinksSkeleton","_","LinkGroupsLinksDatatablePage","useParams","PageTitle","linkGroup","Breadcrumb","BreadcrumbItem","FileDownloadIcon","DataTableExportCsvButton","ListAltIcon","CrupdateLinkGroupForm","updateLinkGroup","UpdateLinkGroupDialog","rotator","updateGroup","useUpdateLinkGroup","LinkGroupsDatatableColumns","links_count","updated_at","LinkGroupsDatatableFilters","useCreateLinkGroup","createLinkGroup","CreateLinkGroupDialog","createGroup","InfoDialogTriggerIcon","InfoDialogTrigger","dialogSize","LinkGroupsDatatablePage","withCount","InfoTrigger","useLinkGroup","fetchLinkGroup","seedInitialDataFromPaginatedList","LinkGroupClicksReportPage","relative","useLink","fetchLink","LinkClicksReportPage","world","DomainsEmptyStateMessage","BooleanIndicator","useDeleteDomain","deleteDomain","DeleteDomainButton","domainsDatatableColumns","global","DomainsDatatableFilters","isSubdomain","DomainProgressIndicator","InfoStep","stepper","serverIp","Message","record","HostStep","showGlobalField","ConnectDomainStep","Host","Info","ValidationFailed","Finalize","useValidateDomainDns","authorize","ValidationFailedStep","goToNextStep","validationFailReason","subdomain","ErrorMessage","WarningIcon","useAuthorizeDomainConnect","useConnectDomain","connectDomain","useConnectDomainStepper","authorizeDomainConnect","validateDns","setState","startLoading","handleDomainValidation","handleDomainAuthorization","hasPreviousStep","nextStep","validationResult","FinalizeStep","ConnectDomainDialog","StepComponent","getStepComponent","currentStep","goToPreviousStep","step","datatableColumns","DomainsDatatablePage","SupportedTrackingPixels","TuneIcon","HelpOutlineIcon","CrupdatePixelForm","docsUrl","CustomCodeFields","pixelId","createPixel","UpdatePixelDialog","pixel_id","head_code","body_code","updatePixel","useUpdatePixel","TrackingPixelsDatatableColumns","locationTracking","TrackingPixelsDatatableFilters","useCreatePixel","CreatePixelDialog","TrackingPixelsDatablePage","fetchCustomPage","pageId","useCustomPage","TextEditor","PageEditorLayout","allowSlugEditing","fetchStatus","pageIsLoading","reset","FullPageLoader","CustomPageDatatableFilters","dynamicFilters","customPages","types","CustomPageDatatableColumns","slug","articlesSvg","updatePage","LinkPageOptionsTrigger","OptionsDialog","hideFooter","Boolean","meta","hideNavbar","updateOptions","useUpdateLinkPageOptions","actionColumn","columnConfig","LinkPagesDatatablePage","SiteConfigContext","preferencesPopup","ColorIcon","LinkOverlaysDatatableColumns","btn_text","LinkOverlayThemes","LinkOverlayPositions","LinkOverlayColors","LinkOverlaysDatatableFilters","theme","LinkOverlaysDatatablePage","useCreateLinkOverlay","createOverlay","TabContext","Tabs","isLazy","tabsRef","selectedTab","setSelectedTab","defaultSelectedTab","onTabChange","ContextValue","TabLine","setStyle","transform","prevState","offsetWidth","offsetLeft","TabList","center","expand","childrenArray","toArray","Tab","paddingProp","mergedClassname","textColor","TabPanels","panelArray","rendered","TabPanel","setTabIndex","nextNode","MutationObserver","subtree","childList","attributes","attributeFilter","OverlayWebsiteBackground","background","assign","arguments","t","prototype","hasOwnProperty","apply","ownerDocument","defaultView","getBoundingClientRect","touches","left","pageX","pageXOffset","top","pageY","pageYOffset","onKey","g","buttons","addEventListener","removeEventListener","nativeEvent","changedTouches","which","keyCode","C","E","H","onTouchStart","onMouseDown","pow","L","substring","parseInt","K","I","q","floor","D","toString","S","T","hsva","F","X","Y","toHsva","equal","fromHsva","V","$","__webpack_nonce__","J","Map","Q","document","has","innerHTML","setAttribute","head","appendChild","U","colorModel","defaultColor","W","Z","qe","ke","escape","process","Ie","Oe","prefixed","exec","ColorSwatch","presetButtons","ColorPresets","DefaultPresets","ColorPicker","colorPresets","showInput","setColor","presets","HexColorPicker","newColor","hex","parseColor","HexColorInput","ColorPickerDialog","subscribeWithSelectorImpl","api","origSubscribe","optListener","listener","currentSlice","nextSlice","previousSlice","subscribeWithSelector","array","resultArray","chunkIndex","DefaultAppearanceConfig","pathname","breadcrumb","themeIndex","chunked","chunkArray","rest","sectionName","sectionIndex","menuIndex","LandingPageSectionPrimaryFeatures","appearanceState","preview","setHighlight","FeatureForm","defaultImage","useAppearanceStore","defaults","homepage","appearance","primaryFeatures","FormImageSelector","ucFirst","PermissionSelector","valueListKey","workspacePermissions","showAdvanced","setShowAdvanced","groupedPermissions","buildPermissionList","onRestrictionChange","newPermission","groupName","anyChecked","prettyName","DoneAllIcon","isChecked","Restrictions","setRestrictionValue","nextState","produce","draftState","restriction","FormPermissionSelector","allPermissions","selectedPermissions","advanced","mergedPermission","mergeRestrictions","allRestrictions","selectedRestrictions","selected","useAvailableRoutes","mergedAppearanceConfig","menuConfig","route","iconGridStyle","skeletons","IconList","IconPicker","onIconSelected","button","IconPickerDialog","IconPickerWrapper","usePrevious","MenuItemForm","formPathPrefix","hideRoleAndPermissionFields","prefixName","IconDialogTrigger","DestinationSelector","RoleSelector","TargetSelect","buttonProps","fieldName","watchedItemIcon","Icon","createSvgIconFromTree","iconTree","currentType","previousType","categories","menuItemCategories","selectedCategory","routeItems","Option","roles","Section","LandingPageSectionActionButtons","BaseSlider","inline","slider","trackRef","getThumbPercent","getThumbValueLabel","labelId","thumbIds","getValueLabel","outputValue","maxLabelLength","labelDisplay","wrapperClassname","getElementById","useSlider","setValues","valuesRef","draggedThumbs","setDraggedThumbs","draggedThumbsRef","getFormattedValue","getThumbMinValue","getThumbMaxValue","setThumbValue","isThumbEditable","thisMax","snapValueToStep","thisMin","replaceIndex","updateDraggedThumbs","dragging","onChangeEnd","wasDragging","focusedThumb","setFocusedThumb","getValuePercent","setThumbPercent","percent","getPercentValue","getRoundedValue","val","editableThumbsRef","setThumbEditable","editable","realTimeTrackDraggingIndex","currentPointer","handlePointerDown","trackPosition","closestThumb","firstRight","lastLeft","onUpTrack","currentPosition","SliderThumb","isThumbDisabled","inputObjRef","isSliderDisabled","isThumbDragging","focusInput","preventScroll","isFocused","handlePointerUp","pointerId","thumbColor","isDragging","parseFloat","Slider","otherProps","baseProps","FormSlider","AppearanceButton","LandingPageSectionGeneral","FooterSection","HeaderSection","headerImage","ColorPickerTrigger","footerImage","PricingSection","formKey","LandingPageSecondaryFeatures","getDefaultImage","secondaryFeatures","AppAppearanceConfig","defaultRoute","navigationRoutes","sections","previewRoute","routes","path","element","buildBreadcrumb","pop","menus","positions","availableRoutes","deepMerge","section","postMessage","themeId","node","command","TwoMB","ImageSelector","highlightSelector","showRemoveButton","required","isDeletingEntry","fieldId","uploadOptions","inputFieldClassNames","descriptionPosition","uploadButton","replaceButton","removeButton","CrupdateLinkOverlayForm","SaveButton","BackgroundField","ColorField","StyleFields","GeneralFields","OverlayPreview","FloatingLinkOverlay","CreateLinkOverlayPage","btn_link","overlayId","useLinkOverlay","linkOverlayEndpoint","getLinkOverlay","UpdateLinkOverlayPage","isError","PageContent","linkOverlay","updateOverlay","useUpdateLinkOverlay","marketing","BiolinksDatatableColumns","biolink","DomainColumn","BiolinksDatatableFilters","useCreateBiolink","CreateBiolinkDialog","createBiolink","BioLinksDatatablePage","biolinkId","useBiolink","biolinkQueryKey","fetchBiolink","BiolinkClicksReportPage","WidgetsIcon","AnimationIcon","ShortcutIcon","MoreTimeIcon","SectionHelper","useBiolinkEditorStore","isDirty","biolinkEditorState","useEditorBiolink","useEditorBiolinkId","setEditorBiolink","useUpdateBiolinkContentItem","updateItem","editorPayload","backendPayload","LinkScheduleDialog","activates_at","activationDate","expirationMinDate","positive","InfoSection","LeapLinkDialog","leap_until","LinkThumbnailDialog","LinkAnimationList","LinkAnimationDialog","animation","br","AnimationItem","animationName","isAnimating","setIsAnimating","selectedAnimation","DragIndicatorIcon","useDetachBiolinkContentItem","detachItem","DetachContentItemButton","droppables","dragMonitors","dragSession","interactableEvent","activeInteraction","setActiveInteraction","domRectToObj","rect","updateRects","targets","useDraggable","optionsRef","draggables","callback","monitor","onDragStart","clickedOnHandle","dragHandleRef","draggable","hidePreview","hideNativeGhostImage","ie","notifyMonitors","onDragOver","newRect","removeAllGlobalListeners","emptyImage","readFilesFromDataTransfer","dataTransfer","getEntries","getEntryFile","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","fireDragLeave","getDraggable","canDrop","dropResult","fromIndex","toIndex","delta","newArray","sortSession","useSortable","addSortStyles","removeSortStyles","onSortEnd","overIndex","oldIndex","moveItemInArray","sortable","newRects","moveItemInNewArray","rects","oldRect","sortableTarget","draggableProps","droppableProps","transition","droppable","useSortBiolinkContent","sortContent","content","newIndex","widgetToPin","BiolinkContentItemLayout","updateDialog","actionRow","itemRef","sortDisabled","pinned","sortableProps","linkDialogHiddenFields","LinkContentItem","ActionRow","active_locked","ImageIcon","ClicksButton","clicksReportPath","updateBiolink","hiddenLinkSettingsFields","BiolinkSettingsForm","SettingsForm","updateSettings","useUpdateBiolink","createWidget","widgetId","CrupdateWidgetDialog","widget","widgetListItem","WidgetList","cleanedValues","isArray","addWidget","useCrupdateBiolinkWidget","transformedValues","WidgetType","Socials","ImageWidgetDialog","Image","imageThumbnail","textImage","socialsImage","youtubeImage","soundcloudImage","vimeoImage","spotifyImage","twitchImage","tiktokImage","YoutubeWidgetDialog","Youtube","getVideoId","Promise","TextWidgetDialog","Text","SocialsWidgetDialog","SocialsList","social","icon","TwitchWidgetDialog","Twitch","SoundcloudWidgetDialog","Soundcloud","encodedUrl","encodeURIComponent","embedCode","fetch","then","json","html","div","embedUrl","querySelector","VimeoWidgetDialog","Vimeo","SpotifyWidgetDialog","Spotify","spotifyInfo","TiktokWidgetDialog","Tiktok","SelectWidgetDialog","widgetType","NewWidgetDialogContainer","activeWidget","ArrowUpwardIcon","WidgetContentItem","WidgetRenderer","WidgetRenderers","WidgetDialog","handlePinToTop","pinnedCount","LivePreview","PhoneSkeleton","BiolinkLayout","FormatColorFillIcon","GradientIcon","BackgroundSelectorButton","BaseColorBg","ColorBackgrounds","ColorBackgroundTab","CustomColorButton","isCustomColor","BaseGradientBg","GradientBackgrounds","ArrowForwardIcon","GradientBackgroundTab","CustomGradientButton","gradient","backgroundImage","isCustomGradient","CustomGradientDialog","setLocalState","angle","colorOne","colorTwo","buildGradientBackground","newState","ColorPickerButton","DirectionButtons","activeStyle","angledFocus","circularFocus","farseeingEyeball","canyonFunnel","looneyLoops","hurricaneAperture","icyExplosion","protrudingSquares","alternatingTriangles","monsteraPatch","confettiDoodles","threadsAhead","launchDay","sprinkle","circuitBoard","nuclearFocalPoint","snow","BaseImageBg","ImageBackgrounds","UploadIcon","BackgroundPositions","cover","bgConfig","backgroundRepeat","backgroundSize","contain","backgroundPosition","repeat","BackgroundPositionSelector","imageBgValue","selectedPosition","positionKeyFromValue","RadioGroup","Radio","ImageBackgroundTab","CustomImageTrigger","cssPropsFromBgConfig","backgroundAttachment","CustomImageDialog","appearanceHeaderClassnames","TabMap","BackgroundSelector","activeTab","setActiveTab","h2","TypeSelector","updateAppearance","TypeButton","AvailableVariants","flat","outline","AvailableRadius","rounded","ButtonStyleSelector","btnConfig","StyleSelector","ShadowSelector","selectedVariant","selectedRadius","variantLabel","h3","radiusLabel","AvailableShadows","selectedShadow","shadow","shadowLabel","boxShadow","fontImage","FontSelectorFilters","setFilters","useFilter","collator","useCollator","scan","sliceLen","BrowserSafeFonts","useFontSelectorState","currentPage","setCurrentPage","setFilterState","allFonts","filteredFonts","fonts","loadFonts","FontSelectorPagination","FontSelector","FontList","gridClassName","FontListSkeleton","FontButton","family","displayName","fontFamily","useSaveBiolinkAppearance","saveAppearance","ColorInput","startAppend","BiolinkAppearanceEditor","appearanceIsDirty","ColorSelector","currentValue","fontConfig","CommonFontSelector","TabsMap","BiolinkEditorPage","BiolinkEditor","BiolinkEditorHeader","_createElement","tabName","BiolinkContent","activeWidgetDialog","setActiveWidgetDialog","renderedContent","notifySvg","BiolinkItemList","contentItem","ContentItem","AddNewLinkButton","BiolinkSkeleton","SharedDashboardRoutes","Navigate","DashboardRoutes","DashboardRouteConfig","AuthRoute","NotFoundPage","useRoutes"],"sources":["../../../node_modules/@internationalized/string/dist/module.js","../../../resources/client/common/ui/layout/dashboard-layout-context.ts","../../../resources/client/common/utils/hooks/use-block-body-overflow.ts","../../../resources/client/common/ui/layout/dashboard-layout.tsx","../../../resources/client/common/ui/layout/dashboard-sidenav.tsx","../../../resources/client/common/ui/layout/dashboard-content.tsx","../../../resources/client/common/icons/material/MenuOpen.tsx","../../../resources/client/common/ui/layout/dashboard-navbar.tsx","../../../resources/client/common/icons/material/UnfoldMore.tsx","../../../resources/client/common/icons/material/Add.tsx","../../../resources/client/common/workspace/requests/create-workspace.ts","../../../resources/client/common/workspace/new-workspace-dialog.tsx","../../../resources/client/common/workspace/requests/workspace-with-members.ts","../../../resources/client/common/icons/material/Group.tsx","../../../resources/client/common/ui/forms/input-field/chip-field/chip-list.tsx","../../../resources/client/common/ui/forms/input-field/input.tsx","../../../resources/client/common/ui/images/avatar.tsx","../../../resources/client/common/ui/forms/input-field/chip-field/string-to-chip-value.ts","../../../resources/client/common/ui/forms/input-field/chip-field/chip-field.tsx","../../../resources/client/common/workspace/requests/invite-members.ts","../../../resources/client/common/workspace/requests/resend-invite.ts","../../../resources/client/common/utils/string/is-email.ts","../../../resources/client/common/workspace/requests/change-role.ts","../../../resources/client/common/workspace/requests/remove-member.ts","../../../resources/client/common/workspace/leave-workspace-confirmation.tsx","../../../resources/client/common/workspace/workspace-members-dialog.tsx","../../../resources/client/common/icons/material/PersonAdd.tsx","../../../resources/client/common/icons/material/Delete.tsx","../../../resources/client/common/workspace/requests/update-workspace.ts","../../../resources/client/common/workspace/rename-workspace-dialog.tsx","../../../resources/client/common/workspace/requests/delete-workspace.ts","../../../resources/client/common/workspace/workspace-selector.tsx","../../../resources/client/dashboard/layout/sidenav/use-link-summary.ts","../../../resources/client/common/ui/progress/progress-bar-base.tsx","../../../resources/client/common/ui/progress/meter.tsx","../../../resources/client/common/icons/material/Info.tsx","../../../resources/client/dashboard/layout/sidenav/resource-usage-list.tsx","../../../resources/client/dashboard/layout/sidenav/usage-details-trigger.tsx","../../../resources/client/dashboard/layout/sidenav/usage-meter.tsx","../../../resources/client/dashboard/layout/sidenav/upgrade-button.tsx","../../../resources/client/dashboard/layout/sidenav/belink-dashboard-sidenav.tsx","../../../resources/client/dashboard/layout/belink-dasbboard-layout.tsx","../../../resources/client/common/ui/forms/input-field/date/utils.ts","../../../resources/client/common/ui/forms/input-field/date/use-base-date-picker-state.ts","../../../resources/client/common/utils/date/start-of-day.ts","../../../resources/client/common/utils/date/end-of-day.ts","../../../resources/client/common/i18n/use-current-date-time.ts","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../resources/client/common/icons/material/DateRange.tsx","../../../resources/client/common/i18n/formatted-date-time-range.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../resources/client/common/icons/material/KeyboardArrowLeft.tsx","../../../resources/client/common/icons/material/KeyboardArrowRight.tsx","../../../resources/client/common/ui/forms/input-field/date/calendar/calendar-cell.tsx","../../../resources/client/common/ui/forms/input-field/date/calendar/calendar-month.tsx","../../../resources/client/common/ui/forms/input-field/date/calendar/calendar.tsx","../../../resources/client/common/icons/material/ArrowRightAlt.tsx","../../../resources/client/common/ui/forms/input-field/date/segments/utils/adjust-segment.ts","../../../resources/client/common/ui/forms/input-field/date/segments/utils/set-segment.ts","../../../resources/client/common/ui/forms/input-field/date/segments/utils/page-step.ts","../../../resources/client/common/ui/forms/input-field/date/segments/editable-date-segment.tsx","../../../resources/client/common/ui/forms/input-field/date/segments/literal-segment.tsx","../../../resources/client/common/ui/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../resources/client/common/ui/forms/input-field/date/segments/date-segment-list.tsx","../../../resources/client/common/ui/list/list.tsx","../../../resources/client/common/i18n/get-user-timezone.ts","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/dialog/date-preset-list.tsx","../../../resources/client/common/utils/hooks/is-tablet-media-query.ts","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../resources/client/common/admin/analytics/report-date-selector.tsx","../../../resources/client/common/charts/chart-layout.tsx","../../../resources/client/common/charts/chart-loading-indicator.tsx","../../../resources/client/common/charts/base-chart.tsx","../../../resources/client/common/charts/data/format-report-data.ts","../../../resources/client/common/charts/chart-colors.tsx","../../../resources/client/common/charts/line-chart.tsx","../../../resources/client/common/charts/polar-area-chart.tsx","../../../resources/client/dashboard/reports/referrer-chart.tsx","../../../node_modules/@react-stately/color/dist/module.js","../../../resources/client/common/ui/themes/utils/theme-value-to-hex.ts","../../../resources/client/common/admin/analytics/geo-chart/use-google-geo-chart.ts","../../../resources/client/common/admin/analytics/geo-chart/geo-chart.tsx","../../../resources/client/common/charts/bar-chart.tsx","../../../resources/client/dashboard/reports/clicks/use-clicks-report.ts","../../../resources/client/dashboard/reports/clicks/clicks-report-charts.tsx","../../../resources/client/dashboard/reports/clicks/clicks-report-page-layout.tsx","../../../resources/client/dashboard/all-clicks-report-page.tsx","../../../resources/client/common/datatable/filters/backend-filters-url-key.ts","../../../resources/client/common/datatable/filters/utils/decode-backend-filters.ts","../../../resources/client/common/datatable/filters/utils/encode-backend-filters.ts","../../../resources/client/common/datatable/filters/backend-filter-url-params.ts","../../../resources/client/common/datatable/requests/paginated-resources.ts","../../../resources/client/common/datatable/page/data-table-context.ts","../../../resources/client/common/ui/progress/progress-bar.tsx","../../../resources/client/common/ui/tables/table-style.ts","../../../resources/client/common/utils/keybinds/is-ctrl-key-pressed.ts","../../../resources/client/common/ui/tables/navigate-grid.ts","../../../resources/client/common/ui/tables/table-context.ts","../../../resources/client/common/ui/tables/checkbox-cell.tsx","../../../resources/client/common/ui/tables/table-cell.tsx","../../../resources/client/common/ui/interactions/use-pointer-events.ts","../../../resources/client/common/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../resources/client/common/utils/hooks/is-touch-device.ts","../../../resources/client/common/ui/tables/table-row.tsx","../../../resources/client/common/icons/material/ArrowDownward.tsx","../../../resources/client/common/ui/tables/header-cell.tsx","../../../resources/client/common/ui/tables/select-all-cell.tsx","../../../resources/client/common/ui/tables/table.tsx","../../../resources/client/common/datatable/data-table-pagination-footer.tsx","../../../resources/client/common/icons/material/Search.tsx","../../../resources/client/common/icons/material/FilterAlt.tsx","../../../resources/client/common/datatable/filters/backend-filter.ts","../../../resources/client/common/ui/accordion/accordion.tsx","../../../resources/client/common/datatable/filters/panels/select-filter-panel.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../resources/client/common/datatable/filters/panels/date-filter-panel.tsx","../../../resources/client/common/users/queries/use-normalized-models.ts","../../../resources/client/common/users/queries/use-normalized-model.ts","../../../resources/client/common/ui/forms/normalized-model-field.tsx","../../../resources/client/common/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../resources/client/common/datatable/filters/filter-operator-names.ts","../../../resources/client/common/datatable/filters/panels/input-filter-panel.tsx","../../../resources/client/common/datatable/filters/panels/boolean-filter-panel.tsx","../../../resources/client/common/datatable/filters/add-filter-dialog.tsx","../../../resources/client/common/datatable/filters/add-filter-button.tsx","../../../resources/client/common/datatable/data-table-header.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list-control.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list.tsx","../../../resources/client/common/datatable/data-table.tsx","../../../resources/client/common/datatable/page/data-table-page.tsx","../../../resources/client/common/datatable/data-table-add-item-button.tsx","../../../resources/client/common/datatable/requests/delete-selected-rows.ts","../../../resources/client/common/datatable/page/delete-selected-items-action.tsx","../../../resources/client/common/datatable/page/data-table-emty-state-message.tsx","../../../resources/client/common/datatable/filters/timestamp-filters.ts","../../../resources/client/common/auth/user.ts","../../../resources/client/dashboard/links/links-datatable-page/links-datatable-filters.ts","../../../resources/client/common/icons/material/Settings.tsx","../../../resources/client/dashboard/links/requests/use-link-form-value-lists.ts","../../../resources/client/dashboard/links/forms/link-type-field.tsx","../../../resources/client/common/ui/forms/toggle/switch.tsx","../../../resources/client/common/icons/material/Lock.tsx","../../../resources/client/common/ui/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../resources/client/common/ui/forms/input-field/date/date-picker/date-picker.tsx","../../../resources/client/dashboard/upgrade/upgrade.svg","../../../resources/client/dashboard/upgrade/upgrade-dialog.tsx","../../../resources/client/dashboard/upgrade/feature-locked-dialog.tsx","../../../resources/client/dashboard/upgrade/no-permission-button.tsx","../../../resources/client/dashboard/links/forms/link-form-section.tsx","../../../resources/client/dashboard/upgrade/use-link-feature-status.ts","../../../resources/client/dashboard/links/forms/link-restriction-fields.tsx","../../../resources/client/common/icons/material/SwapVert.tsx","../../../resources/client/dashboard/links/forms/link-retargeting-fields.tsx","../../../resources/client/common/icons/material/Public.tsx","../../../node_modules/zustand/esm/context.js","../../../node_modules/is-retry-allowed/index.js","../../../node_modules/axios-retry/lib/esm/index.js","../../../resources/client/common/uploads/uploader/strategy/s3-multipart-upload.ts","../../../node_modules/js-base64/base64.mjs","../../../node_modules/tus-js-client/lib.esm/error.js","../../../node_modules/tus-js-client/lib.esm/uuid.js","../../../node_modules/tus-js-client/lib.esm/upload.js","../../../node_modules/tus-js-client/lib.esm/noopUrlStorage.js","../../../node_modules/tus-js-client/lib.esm/browser/urlStorage.js","../../../node_modules/tus-js-client/lib.esm/browser/httpStack.js","../../../node_modules/tus-js-client/lib.esm/browser/isReactNative.js","../../../node_modules/tus-js-client/lib.esm/browser/uriToBlob.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/isCordova.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/readAsByteArray.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/FileSource.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/StreamSource.js","../../../node_modules/tus-js-client/lib.esm/browser/fileReader.js","../../../node_modules/tus-js-client/lib.esm/browser/fileSignature.js","../../../node_modules/tus-js-client/lib.esm/browser/index.js","../../../resources/client/common/uploads/uploader/strategy/tus-upload.ts","../../../resources/client/common/uploads/types/backend-metadata.ts","../../../resources/client/common/uploads/uploader/strategy/s3-upload.ts","../../../resources/client/common/uploads/uploader/strategy/axios-upload.ts","../../../resources/client/common/uploads/uploader/progress-timeout.ts","../../../resources/client/common/uploads/uploader/start-uploading.tsx","../../../resources/client/common/uploads/uploader/create-file-upload.ts","../../../resources/client/common/uploads/uploader/file-upload-store.ts","../../../resources/client/common/uploads/uploader/file-upload-provider.tsx","../../../resources/client/common/uploads/requests/delete-file-entries.ts","../../../resources/client/common/uploads/uploader/use-active-upload.ts","../../../resources/client/common/ui/forms/input-field/chip-field/form-chip-field.tsx","../../../resources/client/dashboard/links/forms/link-seo-fields.tsx","../../../resources/client/common/icons/material/AccountTree.tsx","../../../resources/client/dashboard/links/forms/link-utm-fields.tsx","../../../resources/client/common/custom-domains/use-default-custom-domain-host.ts","../../../resources/client/dashboard/links/forms/link-domain-select.tsx","../../../resources/client/dashboard/links/forms/link-settings-form.tsx","../../../resources/client/common/ui/slug-editor.tsx","../../../resources/client/dashboard/links/forms/alias-field.tsx","../../../resources/client/dashboard/links/forms/crupdate-link-form.tsx","../../../resources/client/dashboard/links/utils/build-linkeable-payload.ts","../../../resources/client/dashboard/links/requests/build-link-payload.ts","../../../resources/client/dashboard/links/requests/use-create-link.ts","../../../resources/client/dashboard/links/dialogs/create-link-dialog.tsx","../../../resources/client/dashboard/links/requests/use-update-link.ts","../../../resources/client/dashboard/links/utils/build-linkeable-default-form-values.ts","../../../resources/client/dashboard/links/dialogs/update-link-dialog.tsx","../../../resources/client/dashboard/links/link-image.tsx","../../../resources/client/common/datatable/column-templates/name-with-avatar.tsx","../../../resources/client/dashboard/upgrade/over-quota-dialog.tsx","../../../resources/client/dashboard/upgrade/permission-aware-button.tsx","../../../resources/client/common/icons/material/BarChart.tsx","../../../resources/client/dashboard/links/links-datatable-page/links-datatable-columns.tsx","../../../resources/client/common/datatable/requests/use-export-csv.ts","../../../resources/client/common/icons/material/AddLink.tsx","../../../resources/client/common/datatable/csv-export/export-csv-icon.tsx","../../../resources/client/common/uploads/utils/download-file-from-url.ts","../../../resources/client/common/datatable/csv-export/csv-export-info-dialog.tsx","../../../resources/client/dashboard/links/requests/use-create-multiple-links.ts","../../../resources/client/dashboard/links/dialogs/create-multiple-links-dialog.tsx","../../../resources/client/dashboard/links/links-datatable-page/links-datatable-page.tsx","../../../resources/client/common/icons/material/MoveDown.tsx","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/requests/use-move-links-to-group.ts","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/move-links-to-group-dialog.tsx","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/link-group-links-datatable-page.tsx","../../../resources/client/common/icons/material/FileDownload.tsx","../../../resources/client/common/datatable/csv-export/data-table-export-csv-button.tsx","../../../resources/client/common/icons/material/ListAlt.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/crupdate/crupdate-link-group-form.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/requests/use-update-link-group.ts","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/crupdate/update-link-group-dialog.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/link-groups-datatable-columns.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/link-groups-datatable-filters.ts","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/requests/use-create-link-group.ts","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/crupdate/create-link-group-dialog.tsx","../../../resources/client/common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger-icon.tsx","../../../resources/client/common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/link-groups-datatable-page.tsx","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/requests/use-link-group.ts","../../../resources/client/dashboard/link-groups/link-group-clicks-report-page.tsx","../../../resources/client/dashboard/layout/sidenav/use-link.ts","../../../resources/client/dashboard/links/link-clicks-report-page.tsx","../../../resources/client/common/custom-domains/datatable/world.svg","../../../resources/client/common/custom-domains/datatable/domains-empty-state-message.tsx","../../../resources/client/common/datatable/column-templates/boolean-indicator.tsx","../../../resources/client/common/custom-domains/datatable/requests/use-delete-domain.ts","../../../resources/client/common/custom-domains/datatable/delete-domain-button.tsx","../../../resources/client/common/custom-domains/datatable/domains-datatable-columns.tsx","../../../resources/client/common/custom-domains/datatable/domains-datatable-filters.ts","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/is-subdomain.ts","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator.tsx","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/info-step.tsx","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/host-step.tsx","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/connect-domain-step.tsx","../../../resources/client/common/custom-domains/datatable/requests/use-validate-domain-dns.ts","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/validation-failed-step.tsx","../../../resources/client/common/custom-domains/datatable/requests/use-authorize-domain-connect.ts","../../../resources/client/common/custom-domains/datatable/requests/use-connect-domain.ts","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/use-connect-domain-stepper.ts","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/finalize-step.tsx","../../../resources/client/common/custom-domains/datatable/connect-domain-dialog/connect-domain-dialog.tsx","../../../resources/client/dashboard/custom-domains/domains-datatable-page.tsx","../../../resources/client/dashboard/tracking-pixels/supported-tracking-pixels.ts","../../../resources/client/common/icons/material/Tune.tsx","../../../resources/client/common/icons/material/HelpOutline.tsx","../../../resources/client/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form.tsx","../../../resources/client/dashboard/tracking-pixels/requests/use-update-pixel.ts","../../../resources/client/dashboard/tracking-pixels/crupdate-dialog/update-pixel-dialog.tsx","../../../resources/client/dashboard/tracking-pixels/tracking-pixels-datatable-columns.tsx","../../../resources/client/dashboard/tracking-pixels/location-tracking.svg","../../../resources/client/dashboard/tracking-pixels/tracking-pixels-datatable-filters.ts","../../../resources/client/dashboard/tracking-pixels/requests/use-create-pixel.ts","../../../resources/client/dashboard/tracking-pixels/crupdate-dialog/create-pixel-dialog.tsx","../../../resources/client/dashboard/tracking-pixels/tracking-pixels-datatable-page.tsx","../../../resources/client/common/admin/custom-pages/editor/requests/use-custom-page.ts","../../../resources/client/common/admin/custom-pages/editor/page-editor-layout.tsx","../../../resources/client/common/admin/custom-pages/custom-page-datatable-filters.tsx","../../../resources/client/common/admin/custom-pages/custom-page-datatable-columns.tsx","../../../resources/client/common/admin/custom-pages/articles.svg","../../../resources/client/dashboard/link-pages/requests/use-update-link-page-options.ts","../../../resources/client/dashboard/link-pages/link-page-options-trigger.tsx","../../../resources/client/dashboard/link-pages/link-pages-datatable-page.tsx","../../../resources/client/dashboard/link-overlays/preferences-popup.svg","../../../resources/client/common/admin/appearance/sections/themes/color-icon.tsx","../../../resources/client/dashboard/link-overlays/link-overlays-datatable-columns.tsx","../../../resources/client/dashboard/link-overlays/crupdate/link-overlay-constants.ts","../../../resources/client/dashboard/link-overlays/link-overlays-datatable-filters.ts","../../../resources/client/dashboard/link-overlays/link-overlays-datatable-page.tsx","../../../resources/client/dashboard/link-overlays/requests/use-create-link-overlay.ts","../../../resources/client/common/ui/tabs/tabs-context.tsx","../../../resources/client/common/ui/tabs/tabs.tsx","../../../resources/client/common/ui/tabs/tab-line.tsx","../../../resources/client/common/ui/tabs/tab-list.tsx","../../../resources/client/common/ui/tabs/tab.tsx","../../../resources/client/common/ui/tabs/tab-panels.tsx","../../../resources/client/dashboard/link-overlays/crupdate/overlay-website-background.tsx","../../../node_modules/react-colorful/dist/index.module.js","../../../resources/client/common/ui/color-picker/color-swatch.tsx","../../../resources/client/common/ui/color-picker/color-presets.ts","../../../resources/client/common/ui/color-picker/color-picker.tsx","../../../resources/client/common/ui/color-picker/color-picker-dialog.tsx","../../../node_modules/zustand/esm/middleware.js","../../../resources/client/common/utils/array/chunk-array.ts","../../../resources/client/common/admin/appearance/config/default-appearance-config.ts","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-primary-features.tsx","../../../resources/client/common/utils/string/uc-first.ts","../../../resources/client/common/auth/ui/permission-selector.tsx","../../../resources/client/common/admin/appearance/sections/menus/hooks/available-routes.ts","../../../resources/client/common/ui/icon-picker/icon-grid-style.ts","../../../resources/client/common/ui/icon-picker/icon-picker.tsx","../../../resources/client/common/ui/icon-picker/icon-picker-dialog.tsx","../../../resources/client/common/utils/hooks/use-previous.ts","../../../resources/client/common/admin/menus/menu-item-form.tsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-action-buttons.tsx","../../../resources/client/common/ui/forms/slider/base-slider.tsx","../../../resources/client/common/ui/forms/slider/use-slider.ts","../../../resources/client/common/ui/forms/slider/slider-thumb.tsx","../../../resources/client/common/ui/forms/slider/slider.tsx","../../../resources/client/common/admin/appearance/appearance-button.tsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-general.tsx","../../../resources/client/admin/appearance/sections/landing-page-section/landing-page-section-secondary-features.tsx","../../../resources/client/admin/appearance/app-appearance-config.tsx","../../../resources/client/common/admin/appearance/config/merged-appearance-config.ts","../../../resources/client/common/admin/appearance/appearance-store.ts","../../../resources/client/common/ui/images/image-selector.tsx","../../../resources/client/dashboard/link-overlays/crupdate/crupdate-link-overlay-form.tsx","../../../resources/client/dashboard/link-overlays/crupdate/create-link-overlay-page.tsx","../../../resources/client/dashboard/link-overlays/requests/use-link-overlay.ts","../../../resources/client/dashboard/link-overlays/requests/use-update-link-overlay.ts","../../../resources/client/dashboard/link-overlays/crupdate/update-link-overlay-page.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/marketing.svg","../../../resources/client/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-columns.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-filters.ts","../../../resources/client/dashboard/biolink/biolinks-datatable-page/requests/use-create-biolink.ts","../../../resources/client/dashboard/biolink/biolinks-datatable-page/crupdate/create-biolink-dialog.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-page.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/requests/use-biolink.ts","../../../resources/client/dashboard/biolink/biolink-clicks-report-page.tsx","../../../resources/client/common/icons/material/Widgets.tsx","../../../resources/client/common/icons/material/Animation.tsx","../../../resources/client/common/icons/material/Shortcut.tsx","../../../resources/client/common/icons/material/MoreTime.tsx","../../../resources/client/common/ui/section-helper.tsx","../../../resources/client/dashboard/biolink/biolink-editor/biolink-editor-store.ts","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-editor-biolink.ts","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-schedule-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/leap-link-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-thumbnail-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-list.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-dialog.tsx","../../../resources/client/common/icons/material/DragIndicator.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-detach-biolink-content-item.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/detach-content-item-button.tsx","../../../resources/client/common/ui/interactions/dnd/drag-state.ts","../../../resources/client/common/ui/interactions/interactable-event.ts","../../../resources/client/common/ui/interactions/active-interaction.ts","../../../resources/client/common/ui/interactions/utils/dom-rect-to-obj.ts","../../../resources/client/common/ui/interactions/dnd/update-rects.ts","../../../resources/client/common/ui/interactions/dnd/use-draggable.ts","../../../resources/client/common/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../resources/client/common/utils/array/async-iterable-to-array.ts","../../../resources/client/common/ui/interactions/dnd/use-droppable.ts","../../../resources/client/common/utils/array/move-item-in-array.ts","../../../resources/client/common/utils/array/move-item-in-new-array.ts","../../../resources/client/common/ui/interactions/dnd/use-sortable.ts","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-sort-biolink-content.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/biolink-content-item-layout.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-content-item.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-update-biolink.ts","../../../resources/client/dashboard/biolink/biolink-editor/biolink-settings-form.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-crupdate-biolink-widget.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/image-widget/image-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/image.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/text.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/socials.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/youtube.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/soundcloud.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/vimeo.jpeg","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/spotify.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/twitch.svg","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/tiktok.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/youtube-widget/youtube-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/text-widget/text-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/socials-widget/socials-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/twitch-widget/twitch-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/soundcloud-widget/soundcloud-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/vimeo-widget/vimeo-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/spotify-widget/spotify-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/tiktok-widget/tiktok-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-list.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/select-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/new-widget-dialog-container.tsx","../../../resources/client/common/icons/material/ArrowUpward.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-content-item.tsx","../../../resources/client/dashboard/biolink/biolink-editor/live-preview.tsx","../../../resources/client/common/icons/material/FormatColorFill.tsx","../../../resources/client/common/icons/material/Gradient.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector-button.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/color-backgrounds.ts","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/color-background-tab.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/gradient-backgrounds.ts","../../../resources/client/common/icons/material/ArrowForward.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/gradient-background-tab.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Angled-Focus.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Circular-Focus.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Farseeing-Eyeball.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Canyon-Funnel.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Looney-Loops.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Hurricane-Aperture.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Icy-Explosion.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Protruding-Squares.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Alternating-Triangles.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Monstera-Patch.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Confetti-Doodles.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Threads-Ahead.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Launch-Day.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Sprinkle.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Circuit-Board.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/nuclear-focalpoint.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/svg-bgs/Snow.svg","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/image-backgrounds.ts","../../../resources/client/common/icons/material/Upload.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/image-background-tab/background-position-selector.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/image-background-tab/image-background-tab.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/header-classnames.ts","../../../resources/client/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/button-style-selector.tsx","../../../resources/client/common/ui/font-selector/font.svg","../../../resources/client/common/ui/font-selector/font-selector-filters.tsx","../../../resources/client/common/i18n/use-filter.ts","../../../resources/client/common/ui/font-picker/browser-safe-fonts.ts","../../../resources/client/common/ui/font-selector/font-selector-state.ts","../../../resources/client/common/ui/font-selector/font-selector-pagination.tsx","../../../resources/client/common/ui/font-selector/font-selector.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-save-biolink-appearance.ts","../../../resources/client/dashboard/biolink/biolink-editor/appearance/color-input.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/biolink-appearance-editor.tsx","../../../resources/client/dashboard/biolink/biolink-editor/biolink-editor-page.tsx","../../../resources/client/dashboard/dashboard-routes.tsx"],"sourcesContent":["class $5b160d28a433310d$export$c17fa47878dc55b6 {\n    /** Returns a localized string for the given key and locale. */ getStringForLocale(key, locale) {\n        let strings = this.strings[locale];\n        if (!strings) {\n            strings = $5b160d28a433310d$var$getStringsForLocale(locale, this.strings, this.defaultLocale);\n            this.strings[locale] = strings;\n        }\n        let string = strings[key];\n        if (!string) throw new Error(`Could not find intl message ${key} in ${locale} locale`);\n        return string;\n    }\n    constructor(messages, defaultLocale = 'en-US'){\n        // Clone messages so we don't modify the original object.\n        this.strings = {\n            ...messages\n        };\n        this.defaultLocale = defaultLocale;\n    }\n}\nfunction $5b160d28a433310d$var$getStringsForLocale(locale, strings, defaultLocale = 'en-US') {\n    // If there is an exact match, use it.\n    if (strings[locale]) return strings[locale];\n    // Attempt to find the closest match by language.\n    // For example, if the locale is fr-CA (French Canadian), but there is only\n    // an fr-FR (France) set of strings, use that.\n    // This could be replaced with Intl.LocaleMatcher once it is supported.\n    // https://github.com/tc39/proposal-intl-localematcher\n    let language = $5b160d28a433310d$var$getLanguage(locale);\n    if (strings[language]) return strings[language];\n    for(let key in strings){\n        if (key.startsWith(language + '-')) return strings[key];\n    }\n    // Nothing close, use english.\n    return strings[defaultLocale];\n}\nfunction $5b160d28a433310d$var$getLanguage(locale) {\n    // @ts-ignore\n    if (Intl.Locale) // @ts-ignore\n    return new Intl.Locale(locale).language;\n    return locale.split('-')[0];\n}\n\n\nconst $6db58dc88e78b024$var$pluralRulesCache = new Map();\nconst $6db58dc88e78b024$var$numberFormatCache = new Map();\nclass $6db58dc88e78b024$export$2f817fcdc4b89ae0 {\n    /** Formats a localized string for the given key with the provided variables. */ format(key, variables) {\n        let message = this.strings.getStringForLocale(key, this.locale);\n        return typeof message === 'function' ? message(variables, this) : message;\n    }\n    plural(count, options, type = 'cardinal') {\n        let opt = options['=' + count];\n        if (opt) return typeof opt === 'function' ? opt() : opt;\n        let key = this.locale + ':' + type;\n        let pluralRules = $6db58dc88e78b024$var$pluralRulesCache.get(key);\n        if (!pluralRules) {\n            pluralRules = new Intl.PluralRules(this.locale, {\n                type: type\n            });\n            $6db58dc88e78b024$var$pluralRulesCache.set(key, pluralRules);\n        }\n        let selected = pluralRules.select(count);\n        opt = options[selected] || options.other;\n        return typeof opt === 'function' ? opt() : opt;\n    }\n    number(value) {\n        let numberFormat = $6db58dc88e78b024$var$numberFormatCache.get(this.locale);\n        if (!numberFormat) {\n            numberFormat = new Intl.NumberFormat(this.locale);\n            $6db58dc88e78b024$var$numberFormatCache.set(this.locale, numberFormat);\n        }\n        return numberFormat.format(value);\n    }\n    select(options, value) {\n        let opt = options[value] || options.other;\n        return typeof opt === 'function' ? opt() : opt;\n    }\n    constructor(locale, strings){\n        this.locale = locale;\n        this.strings = strings;\n    }\n}\n\n\n\n\nexport {$5b160d28a433310d$export$c17fa47878dc55b6 as LocalizedStringDictionary, $6db58dc88e78b024$export$2f817fcdc4b89ae0 as LocalizedStringFormatter};\n//# sourceMappingURL=module.js.map\n","import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow() {\n  useEffect(() => {\n    document.documentElement.classList.add('no-page-overflow');\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, []);\n}\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\nimport {Underlay} from '../overlays/underlay';\nimport {AnimatePresence} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '../../utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '../../utils/hooks/use-block-body-overflow';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow();\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\n  }, [name]);\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open'\n    );\n    return isMobile ? 'closed' : userSelected;\n  }, [isMobile, name]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name]\n  );\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className=\"dashboard-grid test-overflow h-full relative isolate\"\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg';\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  ...props\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n\n  const variants = {\n    open: {display: 'flex', width: null as any},\n    compact: {\n      display: 'flex',\n      width: null as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const size = getSize(status === 'compact' ? 'compact' : props.size);\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={status}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        'overflow-hidden will-change-[width]',\n        size.width,\n        isMobileMode && 'fixed top-0 bottom-0 z-20 shadow-xl',\n        isMobileMode && position === 'left' && 'left-0',\n        isMobileMode && position === 'right' && 'right-0'\n      )}\n    >\n      {cloneElement(children, {\n        className: clsx(\n          children.props.className,\n          size.minWidth,\n          'h-full',\n          status === 'compact' && 'compact-scrollbar'\n        ),\n        isCompactMode: status === 'compact',\n      })}\n    </m.div>\n  );\n}\n\nfunction getSize(size: SidenavProps['size'] | 'compact') {\n  switch (size) {\n    case 'compact':\n      return {width: 'w-80', minWidth: 'min-w-80'};\n    case 'sm':\n      return {width: 'w-224', minWidth: 'min-w-224'};\n    case 'lg':\n      return {width: 'w-288', minWidth: 'min-w-288'};\n    default:\n      return {width: 'w-240', minWidth: 'min-w-240'};\n  }\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n}\nexport function DashboardContent({children}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      'dashboard-grid-content overflow-y-auto'\n    ),\n  });\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuOpenIcon = createSvgIcon(\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\n, 'MenuOpenOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '../buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '../../utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@common/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      color=\"primary\"\n      darkModeColor=\"bg-alt\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const UnfoldMoreIcon = createSvgIcon(\n  <path d=\"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z\" />\n, 'UnfoldMoreOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {Workspace} from '../types/workspace';\nimport {onFormQueryError} from '../../errors/on-form-query-error';\nimport {message} from '../../i18n/message';\n\ninterface Response extends BackendResponse {\n  workspace: Workspace;\n}\n\ninterface Props {\n  name: string;\n}\n\nexport function useCreateWorkspace(form: UseFormReturn<Props>) {\n  return useMutation((props: Props) => createWorkspace(props), {\n    onSuccess: () => {\n      toast(message('Created workspace'));\n      queryClient.invalidateQueries(WorkspaceQueryKeys.fetchUserWorkspaces);\n    },\n    onError: r => onFormQueryError(r, form),\n  });\n}\n\nfunction createWorkspace(props: Props): Promise<Response> {\n  return apiClient.post('workspace', props).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {FormTextField} from '../ui/forms/input-field/text-field/text-field';\nimport {Form} from '../ui/forms/form';\nimport {Button} from '../ui/buttons/button';\nimport {useCreateWorkspace} from './requests/create-workspace';\nimport {DialogFooter} from '../ui/overlays/dialog/dialog-footer';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {Trans} from '../i18n/trans';\n\nexport function NewWorkspaceDialog() {\n  const form = useForm<{name: string}>();\n  const {formId, close} = useDialogContext();\n  const createWorkspace = useCreateWorkspace(form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Create workspace\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={() => {\n            createWorkspace.mutate(form.getValues(), {\n              onSuccess: response => {\n                close(response.workspace.id);\n              },\n            });\n          }}\n        >\n          <FormTextField\n            name=\"name\"\n            autoFocus\n            label={<Trans message=\"Workspace name\" />}\n            minLength={3}\n            required\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={close}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createWorkspace.isLoading}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {Workspace} from '../types/workspace';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {apiClient} from '../../http/query-client';\n\nexport interface FetchWorkspaceWithMembersResponse extends BackendResponse {\n  workspace: Workspace;\n}\n\nfunction fetchWorkspaceWithMembers(\n  workspaceId: number\n): Promise<FetchWorkspaceWithMembersResponse> {\n  return apiClient\n    .get(`workspace/${workspaceId}`)\n    .then(response => response.data);\n}\n\nexport function useWorkspaceWithMembers(workspaceId: number) {\n  return useQuery(WorkspaceQueryKeys.workspaceWithMembers(workspaceId), () =>\n    fetchWorkspaceWithMembers(workspaceId)\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const GroupIcon = createSvgIcon(\n  <path d=\"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z\" />\n, 'GroupOutlined');\n","import React, {Children, cloneElement, isValidElement, ReactElement} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\ninterface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n}: ChipListProps) {\n  return (\n    <div className={clsx(className, 'flex items-center gap-8 flex-wrap')}>\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import {FocusScope} from '@react-aria/focus';\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InputProps {\n  className?: string;\n  children: ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  style?: CSSProperties;\n  inputProps?: ComponentPropsWithoutRef<'div'>;\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\n  (props, ref) => {\n    const {\n      children,\n      inputProps,\n      wrapperProps,\n      className,\n      autoFocus,\n      style,\n      onClick,\n    } = props;\n\n    return (\n      <div {...wrapperProps} onClick={onClick}>\n        <div\n          {...inputProps}\n          role=\"group\"\n          className={clsx(\n            className,\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\n          )}\n          ref={ref}\n          style={style}\n        >\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>\n    );\n  }\n);\n","import clsx from 'clsx';\nimport {ComponentPropsWithoutRef, forwardRef} from 'react';\n\ntype Size = 'xs' | 'sm' | 'md';\n\ninterface Props extends ComponentPropsWithoutRef<'img'> {\n  className?: string;\n  src?: string;\n  circle?: boolean;\n  size?: Size;\n}\n\nexport const Avatar = forwardRef<HTMLImageElement, Props>(\n  ({className, circle, size = 'md', src, ...domProps}, ref) => {\n    return (\n      <img\n        ref={ref}\n        src={src}\n        alt=\"\"\n        className={clsx(\n          className,\n          getSizeClassName(size),\n          circle ? 'rounded-full' : 'rounded'\n        )}\n        {...domProps}\n      />\n    );\n  }\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","import {ChipValue} from './chip-field';\n\nexport function stringToChipValue(string: string | number): ChipValue {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {id: string, name: `${string}`, description: `${string}`};\n}\n","import React, {\n  HTMLAttributes,\n  Key,\n  ReactElement,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {useFocusManager} from '@react-aria/focus';\nimport clsx from 'clsx';\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport {ChipList} from './chip-list';\nimport {Field} from '../field';\nimport {Input} from '../input';\nimport {Chip, ChipProps} from './chip';\nimport {NormalizedModel} from '../../../../datatable/filters/normalized-model';\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\nimport {ProgressCircle} from '../../../progress/progress-circle';\nimport {useField} from '../use-field';\nimport {Avatar} from '../../../images/avatar';\nimport {Listbox} from '../../listbox/listbox';\nimport {useListbox} from '../../listbox/use-listbox';\nimport {BaseFieldPropsWithDom} from '../base-field-props';\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\nimport {createEventHandler} from '../../../../utils/dom/create-event-handler';\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\nimport {stringToChipValue} from './string-to-chip-value';\nimport {Popover} from '../../../overlays/popover';\nimport {KeyboardArrowDownIcon} from '../../../../icons/material/KeyboardArrowDown';\n\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\n  invalid?: boolean;\n  errorMessage?: string;\n}\n\nexport type ChipFieldProps<T> = Omit<\n  ListboxProps,\n  'selectionMode' | 'displayWith'\n> &\n  Omit<\n    BaseFieldPropsWithDom<HTMLInputElement>,\n    'value' | 'onChange' | 'defaultValue'\n  > & {\n    value?: (ChipValue | string)[];\n    defaultValue?: (ChipValue | string)[];\n    displayWith?: (value: ChipValue) => ReactNode;\n    validateWith?: (value: ChipValue) => ChipValue;\n    allowCustomValue?: boolean;\n    showDropdownArrow?: boolean;\n    onChange?: (value: ChipValue[]) => void;\n    suggestions?: T[];\n    children?: ListBoxChildren<T>['children'];\n    placeholder?: string;\n    chipSize?: ChipProps['size'];\n    openMenuOnFocus?: boolean;\n    valueKey?: 'id' | 'name';\n  };\n\nfunction ChipFieldInner<T>(\n  props: ChipFieldProps<T>,\n  ref: Ref<HTMLInputElement>\n) {\n  const fieldRef = useRef<HTMLDivElement>(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'md',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    allowCustomValue = true,\n    showDropdownArrow,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true,\n  });\n\n  const [value, onChange] = useChipFieldValueState(props);\n\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n\n  const loadingIndicator = (\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\n  );\n\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\n\n  const {fieldProps, inputProps} = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow,\n  });\n\n  return (\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input\n        ref={fieldRef}\n        className={clsx('flex items-center flex-wrap', fieldClassNames.input)}\n        onClick={() => {\n          // refocus input when clicking outside it, but while still inside chip field\n          inputRef.current?.focus();\n        }}\n      >\n        <ListWrapper\n          displayChipUsing={displayWith}\n          items={value}\n          setItems={onChange}\n          chipSize={chipSize}\n        />\n        <ChipInput\n          showEmptyMessage={showEmptyMessage}\n          inputProps={inputProps}\n          inputValue={inputValue}\n          onInputValueChange={onInputValueChange}\n          fieldRef={fieldRef}\n          inputRef={inputRef}\n          chips={value}\n          setChips={onChange}\n          validateWith={validateWith}\n          isLoading={isLoading}\n          suggestions={suggestions}\n          placeholder={placeholder}\n          openMenuOnFocus={openMenuOnFocus}\n          listboxIsOpen={listboxIsOpen}\n          setListboxIsOpen={setListboxIsOpen}\n          allowCustomValue={allowCustomValue}\n        >\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>\n  );\n}\n\ninterface ListWrapperProps {\n  items: ChipValue[];\n  setItems: (items: ChipValue[]) => void;\n  displayChipUsing: (value: ChipValue) => ReactNode;\n  chipSize?: ChipProps['size'];\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n}: ListWrapperProps) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(\n    (key: Key) => {\n      const i = items.findIndex(cr => cr.id === key);\n      const newItems = [...items];\n      if (i > -1) {\n        newItems.splice(i, 1);\n        setItems(newItems);\n      }\n      return newItems;\n    },\n    [items, setItems]\n  );\n\n  return (\n    <ChipList\n      className=\"flex-shrink-0 flex-wrap max-w-full my-8\"\n      size={chipSize}\n      selectable\n    >\n      {items.map(item => (\n        <Chip\n          key={item.id}\n          errorMessage={item.errorMessage}\n          adornment={item.image ? <Avatar circle src={item.image} /> : null}\n          onRemove={() => {\n            const newItems = removeItem(item.id);\n            if (newItems.length) {\n              // focus previous chip\n              manager.focusPrevious({tabbable: true});\n            } else {\n              // focus input\n              manager.focusLast();\n            }\n          }}\n        >\n          {displayChipUsing(item)}\n        </Chip>\n      ))}\n    </ChipList>\n  );\n}\n\ninterface ChipInputProps<T> {\n  showEmptyMessage?: boolean;\n  inputProps: ReturnType<typeof useField>['inputProps'];\n  inputValue?: string;\n  onInputValueChange?: (value: string) => void;\n  fieldRef: RefObject<HTMLDivElement>;\n  inputRef: RefObject<HTMLInputElement>;\n  chips: ChipValue[];\n  setChips: (items: ChipValue[]) => void;\n  validateWith?: (value: ChipValue) => ChipValue;\n  isLoading?: boolean;\n  suggestions?: T[];\n  placeholder?: string;\n  openMenuOnFocus?: boolean;\n  listboxIsOpen: boolean;\n  setListboxIsOpen: (value: boolean) => void;\n  allowCustomValue: boolean;\n  children: ListBoxChildren<T>['children'];\n}\nfunction ChipInput<T>(props: ChipInputProps<T>) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n    allowCustomValue,\n  } = props;\n  const inputClassName = 'outline-none text-sm mx-8 my-4 h-30 flex-auto';\n  const manager = useFocusManager();\n\n  const addItems = useCallback(\n    (items?: ChipValue[]) => {\n      items = (items || []).filter(item => {\n        const invalid = !item || !item.id || !item.name;\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n        return !alreadyExists && !invalid;\n      });\n      if (!items.length) return;\n\n      if (validateWith) {\n        items = items.map(item => validateWith(item));\n      }\n      setChips([...chips, ...items]);\n    },\n    [chips, setChips, validateWith]\n  );\n\n  const listbox = useListbox<T>({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value as string);\n    },\n  });\n\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue,\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange,\n  } = listbox;\n\n  const handleItemSelection = (textValue: string) => {\n    const option =\n      collection.size && activeIndex != null\n        ? [...collection.values()][activeIndex]\n        : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else if (allowCustomValue) {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\n    useListboxKeyboardNavigation(listbox);\n\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n\n  return (\n    <Listbox\n      listbox={listbox}\n      mobileOverlay={Popover}\n      onPointerDown={e => {\n        // prevent focus from leaving input when scrolling listbox via mouse\n        e.preventDefault();\n      }}\n    >\n      <input\n        type=\"text\"\n        className={clsx(inputClassName, 'bg-transparent')}\n        placeholder={placeholder}\n        {...mergeProps(inputProps, {\n          ref: inputRef,\n          value: inputValue,\n          onChange: onInputChange,\n          onPaste: e => {\n            const paste = e.clipboardData.getData('text');\n            const emails = paste.match(\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi\n            );\n            if (emails) {\n              e.preventDefault();\n              const selection = window.getSelection();\n              if (selection?.rangeCount) {\n                selection.deleteFromDocument();\n                addItems(emails.map(email => stringToChipValue(email)));\n              }\n            }\n          },\n          'aria-autocomplete': 'list',\n          'aria-controls': isOpen ? listboxId : undefined,\n          autoComplete: 'off',\n          autoCorrect: 'off',\n          spellCheck: 'false',\n          onKeyDown: e => {\n            const input = e.target as HTMLInputElement;\n\n            if (e.key === 'Enter') {\n              // prevent form submitting\n              e.preventDefault();\n              // add chip from selected listbox option or current input text value\n              handleItemSelection(input.value);\n              return;\n            }\n\n            // on escape, clear input and close dropdown\n            if (e.key === 'Escape' && isOpen) {\n              setIsOpen(false);\n              setInputValue('');\n            }\n\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n            if (\n              e.key === 'ArrowUp' &&\n              isOpen &&\n              (activeIndex === 0 || activeIndex == null)\n            ) {\n              setActiveIndex(null);\n              return;\n            }\n\n            // block left and right arrows from navigating in input, if focus is on listbox\n            if (\n              activeIndex != null &&\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\n            ) {\n              e.preventDefault();\n              return;\n            }\n\n            // move focus on the last chip, if focus is at the  start of input\n            if (\n              (e.key === 'ArrowLeft' ||\n                e.key === 'Backspace' ||\n                e.key === 'Delete') &&\n              input.selectionStart === 0 &&\n              activeIndex == null &&\n              chips.length\n            ) {\n              manager.focusPrevious({tabbable: true});\n              return;\n            }\n\n            // fallthrough to listbox navigation handlers for arrow keys\n            const handled = handleTriggerKeyDown(e);\n            if (!handled) {\n              handleListboxKeyboardNavigation(e);\n            }\n          },\n          onFocus: handleFocusAndClick,\n          onClick: handleFocusAndClick,\n        } as HTMLAttributes<HTMLInputElement>)}\n      />\n    </Listbox>\n  );\n}\n\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey,\n}: ChipFieldProps<any>) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(\n    (value: ChipValue[]) => {\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n      onChange?.(newValue as any);\n    },\n    [onChange, valueKey]\n  );\n\n  return useControlledState<ChipValue[]>(\n    !propsValue ? undefined : propsValue,\n    propsDefaultValue || [],\n    handleChange\n  );\n}\n\nfunction mixedValueToChipValue(\n  value?: (string | number | ChipValue)[] | null\n): ChipValue[] | undefined {\n  if (value == null) {\n    return undefined;\n  }\n  if (typeof value[0] !== 'object') {\n    return value.map(v => stringToChipValue(v as string));\n  }\n  return value as ChipValue[];\n}\n\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>}\n) => ReactElement;\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {WorkspaceInvite} from '../types/workspace-invite';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  invites: WorkspaceInvite[];\n}\n\ninterface Props {\n  workspaceId: number;\n  emails: string[];\n  roleId: number;\n}\n\nfunction InviteMembers({workspaceId, ...other}: Props): Promise<Response> {\n  return apiClient\n    .post(`workspace/${workspaceId}/invite`, other)\n    .then(r => r.data);\n}\n\nexport function useInviteMembers() {\n  return useMutation((props: Props) => InviteMembers(props), {\n    onSuccess: (response, props) => {\n      queryClient.invalidateQueries(\n        WorkspaceQueryKeys.workspaceWithMembers(props.workspaceId)\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {WorkspaceInvite} from '../types/workspace-invite';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient} from '../../http/query-client';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  invite: WorkspaceInvite;\n}\n\ninterface Props {\n  workspaceId: number;\n  inviteId: string;\n}\n\nfunction ResendInvite({\n  workspaceId,\n  inviteId,\n  ...other\n}: Props): Promise<Response> {\n  return apiClient\n    .post(`workspace/${workspaceId}/${inviteId}/resend`, other)\n    .then(r => r.data);\n}\n\nexport function useResendInvite() {\n  return useMutation((props: Props) => ResendInvite(props), {\n    onSuccess: () => {\n      toast('Invite sent');\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","const matcher =\n  /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\nexport function isEmail(string?: string): boolean {\n  if (!string) return false;\n  if (string.length > 320) return false;\n  return matcher.test(string);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {WorkspaceMember} from '../types/workspace-member';\nimport {WorkspaceInvite} from '../types/workspace-invite';\nimport {message} from '../../i18n/message';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Props {\n  workspaceId: number;\n  member: WorkspaceMember | WorkspaceInvite;\n  roleId: number;\n}\n\nfunction ChangeRole({workspaceId, member, ...other}: Props): Promise<Response> {\n  const modelType = member.model_type;\n  const memberId =\n    member.model_type === 'invite' ? member.id : member.member_id;\n  return apiClient\n    .post(\n      `workspace/${workspaceId}/${modelType}/${memberId}/change-role`,\n      other\n    )\n    .then(r => r.data);\n}\n\nexport function useChangeRole() {\n  return useMutation((props: Props) => ChangeRole(props), {\n    onSuccess: (response, props) => {\n      toast(message('Role changed'));\n      queryClient.invalidateQueries(\n        WorkspaceQueryKeys.workspaceWithMembers(props.workspaceId)\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {useAuth} from '../../auth/use-auth';\nimport {useActiveWorkspaceId} from '../active-workspace-id-context';\nimport {PersonalWorkspace} from '../user-workspaces';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Props {\n  workspaceId: number;\n  memberId: number | string;\n  memberType: 'invite' | 'member';\n}\n\nfunction removeMember({\n  workspaceId,\n  memberId,\n  memberType,\n}: Props): Promise<Response> {\n  const endpoint =\n    memberType === 'invite'\n      ? `workspace/invite/${memberId}`\n      : `workspace/${workspaceId}/member/${memberId}`;\n  return apiClient.delete(endpoint).then(r => r.data);\n}\n\nexport function useRemoveMember() {\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  const {user} = useAuth();\n  return useMutation((props: Props) => removeMember(props), {\n    onSuccess: (response, props) => {\n      queryClient.invalidateQueries(WorkspaceQueryKeys.fetchUserWorkspaces);\n      queryClient.invalidateQueries(\n        WorkspaceQueryKeys.workspaceWithMembers(props.workspaceId)\n      );\n\n      // if user left workspace that is currently active, switch to personal workspace\n      if (props.memberId === user?.id && workspaceId === props.workspaceId) {\n        setWorkspaceId(PersonalWorkspace.id);\n      }\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {ConfirmationDialog} from '../ui/overlays/dialog/confirmation-dialog';\nimport {Trans} from '../i18n/trans';\n\nexport function LeaveWorkspaceConfirmation() {\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Leave workspace\" />}\n      body={\n        <div>\n          <Trans message=\"Are you sure you want to leave this workspace?\" />\n          <div className=\"font-semibold mt-8\">\n            <Trans message=\"All resources you've created in the workspace will be transferred to workspace owner.\" />\n          </div>\n        </div>\n      }\n      confirm={<Trans message=\"Leave\" />}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {useWorkspaceWithMembers} from './requests/workspace-with-members';\nimport {ProgressCircle} from '../ui/progress/progress-circle';\nimport {Workspace} from './types/workspace';\nimport {GroupIcon} from '../icons/material/Group';\nimport {WorkspaceMember} from './types/workspace-member';\nimport {useAuth} from '../auth/use-auth';\nimport {ChipField, ChipValue} from '../ui/forms/input-field/chip-field/chip-field';\nimport {useValueLists} from '../http/value-lists';\nimport {Button} from '../ui/buttons/button';\nimport {ArrowDropDownIcon} from '../icons/material/ArrowDropDown';\nimport {useInviteMembers} from './requests/invite-members';\nimport {WorkspaceInvite} from './types/workspace-invite';\nimport {ConfirmationDialog} from '../ui/overlays/dialog/confirmation-dialog';\nimport {useResendInvite} from './requests/resend-invite';\nimport {isEmail} from '../utils/string/is-email';\nimport {ButtonSize} from '../ui/buttons/button-size';\nimport {useChangeRole} from './requests/change-role';\nimport {IconButton} from '../ui/buttons/icon-button';\nimport {useRemoveMember} from './requests/remove-member';\nimport {CloseIcon} from '../icons/material/Close';\nimport {ExitToAppIcon} from '../icons/material/ExitToApp';\nimport {toast} from '../ui/toast/toast';\nimport {DialogTrigger} from '../ui/overlays/dialog/dialog-trigger';\nimport {Menu, MenuItem, MenuTrigger} from '../ui/navigation/menu/menu-trigger';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {Trans} from '../i18n/trans';\nimport {useTrans} from '../i18n/use-trans';\nimport {message} from '../i18n/message';\nimport {LeaveWorkspaceConfirmation} from './leave-workspace-confirmation';\n\ninterface WorkspaceMembersDialogProps {\n  workspace: Workspace;\n}\nexport function WorkspaceMembersDialog({\n  workspace,\n}: WorkspaceMembersDialogProps) {\n  const {data, isLoading} = useWorkspaceWithMembers(workspace.id);\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Manage workspace members\" />\n      </DialogHeader>\n      <DialogBody>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center min-h-[238px]\">\n            <ProgressCircle isIndeterminate aria-label=\"Loading workspace...\" />\n          </div>\n        ) : (\n          <Manager workspace={data!.workspace} />\n        )}\n      </DialogBody>\n    </Dialog>\n  );\n}\n\ninterface ManagerProps {\n  workspace: Workspace;\n}\nfunction Manager({workspace}: ManagerProps) {\n  const can = usePermissions(workspace);\n  const members: (WorkspaceMember | WorkspaceInvite)[] = [\n    ...(workspace.members || []),\n    ...(workspace.invites || []),\n  ];\n\n  return (\n    <div>\n      {can.invite && <InviteChipField workspace={workspace} />}\n      <div className=\"flex items-center gap-10 mb-14 text-base\">\n        <GroupIcon className=\"icon-sm\" />\n        <Trans\n          message=\"Members of `:workspace`\"\n          values={{workspace: workspace.name}}\n        />\n      </div>\n      <AnimatePresence initial={false}>\n        {members.map(member => (\n          <MemberListItem\n            key={`${member.model_type}.${member.id}`}\n            workspace={workspace}\n            member={member}\n          />\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n}\n\ninterface MemberListItemProps {\n  member: WorkspaceMember | WorkspaceInvite;\n  workspace: Workspace;\n}\nfunction MemberListItem({workspace, member}: MemberListItemProps) {\n  return (\n    <m.div\n      initial={{x: '-100%', opacity: 0}}\n      animate={{x: 0, opacity: 1}}\n      exit={{x: '100%', opacity: 0}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"flex items-start text-sm gap-14 mb-20\"\n      key={`${member.model_type}.${member.id}`}\n    >\n      <img\n        className=\"w-36 h-36 rounded flex-shrink-0\"\n        src={member.avatar}\n        alt=\"\"\n      />\n      <div className=\"md:flex flex-auto items-center justify-between gap-14 min-w-0\">\n        <div className=\"overflow-hidden mb-10 md:mb-0 md:mr-10\">\n          <div className=\"flex items-center justify-start gap-6\">\n            <div className=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n              {member.display_name}\n            </div>\n            <MemberDisplayNameAppend workspace={workspace} member={member} />\n          </div>\n          <div className=\"text-muted\">{member.email}</div>\n        </div>\n        <MemberActions workspace={workspace} member={member} />\n      </div>\n    </m.div>\n  );\n}\n\nfunction usePermissions(workspace: Workspace) {\n  const {user: authUser} = useAuth();\n  const response = {update: false, invite: false, delete: false};\n  const permissions = ['update', 'invite', 'delete'] as const;\n  const authMember = workspace.members?.find(mb => mb.id === authUser?.id);\n\n  if (authMember) {\n    permissions.forEach(permission => {\n      response[permission] =\n        authMember.is_owner ||\n        !!authMember.permissions?.find(\n          p => p.name === `workspace_members.${permission}`\n        )\n    });\n  }\n\n  return response;\n}\n\ninterface MemberActionsProps {\n  workspace: Workspace;\n  member: WorkspaceMember | WorkspaceInvite;\n}\nfunction MemberActions({workspace, member}: MemberActionsProps) {\n  const [selectedRole, setSelectedRole] = useState<number>(member.role_id);\n  const changeRole = useChangeRole();\n  const {user} = useAuth();\n\n  const can = usePermissions(workspace);\n  const isOwner = member.model_type === 'member' && member.is_owner;\n  const isCurrentUser =\n    member.model_type === 'member' && user?.id === member.id;\n\n  const roleSelector =\n    !can.update || isOwner || isCurrentUser ? (\n      <div className=\"text-muted ml-auto first:capitalize\">\n        <Trans message={member.role_name} />\n      </div>\n    ) : (\n      <RoleMenuTrigger\n        className=\"ml-auto flex-shrink-0\"\n        size=\"xs\"\n        value={selectedRole}\n        isDisabled={changeRole.isLoading}\n        onChange={roleId => {\n          setSelectedRole(roleId);\n          changeRole.mutate({\n            roleId,\n            workspaceId: workspace.id,\n            member,\n          });\n        }}\n      />\n    );\n\n  return (\n    <>\n      {roleSelector}\n      {!isOwner && (isCurrentUser || can.delete) && (\n        <RemoveMemberButton\n          type={isCurrentUser ? 'leave' : 'remove'}\n          member={member}\n          workspace={workspace}\n        />\n      )}\n    </>\n  );\n}\n\ninterface InviteChipFieldProps {\n  workspace: Workspace;\n}\nfunction InviteChipField({workspace}: InviteChipFieldProps) {\n  const {trans} = useTrans();\n  const [chips, setChips] = useState<ChipValue[]>([]);\n  const allEmailsValid = chips.every(chip => !chip.invalid);\n  const displayWith = (chip: ChipValue) => chip.description || chip.name;\n  const [selectedRole, setSelectedRole] = useState<number>();\n  const inviteMembers = useInviteMembers();\n  const {data} = useValueLists(['workspaceRoles']);\n\n  useEffect(() => {\n    if (!selectedRole && data?.workspaceRoles?.length) {\n      setSelectedRole(data.workspaceRoles[0].id);\n    }\n  }, [data, selectedRole]);\n\n  return (\n    <div className=\"mb-30\">\n      <ChipField\n        value={chips}\n        onChange={setChips}\n        displayWith={displayWith}\n        validateWith={chip => {\n          const invalid = !isEmail(chip.description);\n          return {\n            ...chip,\n            invalid,\n            errorMessage: invalid\n              ? trans({message: 'Not a valid email'})\n              : undefined,\n          };\n        }}\n        placeholder={trans({message: 'Enter email addresses'})}\n        label={<Trans message=\"Invite people\" />}\n      />\n      <div className=\"flex items-center gap-14 justify-between mt-14\">\n        <RoleMenuTrigger onChange={setSelectedRole} value={selectedRole} />\n        {chips.length && selectedRole ? (\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            size=\"sm\"\n            disabled={inviteMembers.isLoading || !allEmailsValid}\n            onClick={() => {\n              inviteMembers.mutate(\n                {\n                  emails: chips.map(c => displayWith(c)),\n                  roleId: selectedRole,\n                  workspaceId: workspace.id,\n                },\n                {\n                  onSuccess: () => {\n                    setChips([]);\n                  },\n                }\n              );\n            }}\n          >\n            <Trans message=\"Invite\" />\n          </Button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\ninterface RemoveMemberButtonProps {\n  member: WorkspaceMember | WorkspaceInvite;\n  workspace: Workspace;\n  type: 'leave' | 'remove';\n}\nfunction RemoveMemberButton({\n  member,\n  workspace,\n  type,\n}: RemoveMemberButtonProps) {\n  const removeMember = useRemoveMember();\n  const {close} = useDialogContext();\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          removeMember.mutate({\n            workspaceId: workspace.id,\n            memberId: member.id,\n            memberType: member.model_type,\n          });\n          if (type === 'leave') {\n            close();\n            toast(message('Left workspace'));\n          }\n        }\n      }}\n    >\n      <IconButton\n        size=\"md\"\n        className=\"text-muted flex-shrink-0\"\n        disabled={removeMember.isLoading}\n      >\n        {type === 'leave' ? <ExitToAppIcon /> : <CloseIcon />}\n      </IconButton>\n      {type === 'leave' ? (\n        <LeaveWorkspaceConfirmation />\n      ) : (\n        <RemoveMemberConfirmation member={member} />\n      )}\n    </DialogTrigger>\n  );\n}\n\ninterface RemoveMemberConfirmationProps {\n  member: WorkspaceMember | WorkspaceInvite;\n}\nfunction RemoveMemberConfirmation({member}: RemoveMemberConfirmationProps) {\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Remove member\" />}\n      body={\n        <div>\n          <Trans\n            message=\"Are you sure you want to remove `:name`?\"\n            values={{name: member.display_name}}\n          />\n          <div className=\"font-semibold mt-8\">\n            <Trans\n              message=\"All workspace resources created by `:name` will be transferred to workspace owner.\"\n              values={{\n                name: member.display_name,\n              }}\n            />\n          </div>\n        </div>\n      }\n      confirm={<Trans message=\"Remove\" />}\n    />\n  );\n}\n\ninterface RoleMenuTriggerProps {\n  onChange: (value: number) => void;\n  value?: number;\n  size?: ButtonSize;\n  className?: string;\n  isDisabled?: boolean;\n}\nfunction RoleMenuTrigger({\n  value,\n  onChange,\n  size = 'xs',\n  className,\n  isDisabled,\n}: RoleMenuTriggerProps) {\n  const {data} = useValueLists(['workspaceRoles']);\n  const role = data?.workspaceRoles?.find(r => r.id === value);\n  if (!value || !role || !data?.workspaceRoles) return null;\n\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      selectedValue={value}\n      onSelectionChange={newValue => {\n        onChange(newValue as number);\n      }}\n    >\n      <Button\n        className={className}\n        size={size}\n        variant=\"flat\"\n        color=\"chip\"\n        disabled={isDisabled}\n        endIcon={<ArrowDropDownIcon />}\n      >\n        {role.name}\n      </Button>\n      <Menu>\n        {data.workspaceRoles.map(r => {\n          return (\n            <MenuItem value={r.id} key={r.id} description={r.description}>\n              {r.name}\n            </MenuItem>\n          );\n        })}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n\ninterface MemberDisplayNameAppendProps {\n  member: WorkspaceMember | WorkspaceInvite;\n  workspace: Workspace;\n}\nfunction MemberDisplayNameAppend({\n  member,\n  workspace,\n}: MemberDisplayNameAppendProps) {\n  const {user} = useAuth();\n  const can = usePermissions(workspace);\n\n  if (user?.id === member.id) {\n    return (\n      <div className=\"font-medium\">\n        (<Trans message=\"You\" />)\n      </div>\n    );\n  }\n  if (member.model_type === 'invite') {\n    return (\n      <div className=\"flex items-center gap-4\">\n        <div>·</div>\n        <div className=\"font-medium\">\n          <Trans message=\"Invited\" />\n        </div>\n        {can.invite ? (\n          <>\n            <div>·</div>\n            <ResendInviteDialogTrigger member={member} workspace={workspace} />\n          </>\n        ) : null}\n      </div>\n    );\n  }\n  return null;\n}\n\nfunction ResendInviteDialogTrigger({\n  member,\n  workspace,\n}: MemberDisplayNameAppendProps) {\n  const resendInvite = useResendInvite();\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          resendInvite.mutate({\n            workspaceId: workspace.id,\n            inviteId: member.id as string,\n          });\n        }\n      }}\n    >\n      <Button\n        variant=\"link\"\n        size=\"sm\"\n        color=\"primary\"\n        disabled={resendInvite.isLoading}\n      >\n        <Trans message=\"Resend invite\" />\n      </Button>\n      <ConfirmationDialog\n        title={<Trans message=\"Resend invite\" />}\n        body={\n          <Trans message=\"Are you sure you want to send this invite again?\" />\n        }\n        confirm={<Trans message=\"Send\" />}\n      />\n    </DialogTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const PersonAddIcon = createSvgIcon(\n  <path d=\"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z\" />\n, 'PersonAddOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {Workspace} from '../types/workspace';\nimport {onFormQueryError} from '../../errors/on-form-query-error';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {message} from '../../i18n/message';\n\ninterface Response extends BackendResponse {\n  workspace: Workspace;\n}\n\nexport interface UpdateWorkspacePayload {\n  id: number;\n  name: string;\n}\n\nfunction updateWorkspace({\n  id,\n  ...props\n}: UpdateWorkspacePayload): Promise<Response> {\n  return apiClient.put(`workspace/${id}`, props).then(r => r.data);\n}\n\nexport function useUpdateWorkspace(\n  form: UseFormReturn<UpdateWorkspacePayload>\n) {\n  const {close} = useDialogContext();\n  return useMutation(\n    (props: UpdateWorkspacePayload) => updateWorkspace(props),\n    {\n      onSuccess: response => {\n        close();\n        toast(message('Updated workspace'));\n        queryClient.invalidateQueries(WorkspaceQueryKeys.fetchUserWorkspaces);\n        queryClient.invalidateQueries(\n          WorkspaceQueryKeys.workspaceWithMembers(response.workspace.id)\n        );\n      },\n      onError: r => onFormQueryError(r, form),\n    }\n  );\n}\n","import {useForm} from 'react-hook-form';\nimport {FormTextField} from '../ui/forms/input-field/text-field/text-field';\nimport {Form} from '../ui/forms/form';\nimport {Button} from '../ui/buttons/button';\nimport {DialogFooter} from '../ui/overlays/dialog/dialog-footer';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {\n  UpdateWorkspacePayload,\n  useUpdateWorkspace,\n} from './requests/update-workspace';\nimport {Workspace} from './types/workspace';\nimport {Trans} from '../i18n/trans';\n\ninterface Props {\n  workspace: Workspace;\n}\nexport function RenameWorkspaceDialog({workspace}: Props) {\n  const form = useForm<UpdateWorkspacePayload>({\n    defaultValues: {id: workspace.id, name: workspace.name},\n  });\n  const {formId, close} = useDialogContext();\n  const updateWorkspace = useUpdateWorkspace(form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Rename workspace\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={() => {\n            updateWorkspace.mutate(form.getValues());\n          }}\n        >\n          <FormTextField\n            name=\"name\"\n            autoFocus\n            label={<Trans message=\"Name\" />}\n            minLength={3}\n            required\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={close}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateWorkspace.isLoading}\n        >\n          <Trans message=\"Rename\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {useActiveWorkspaceId} from '../active-workspace-id-context';\nimport {PersonalWorkspace} from '../user-workspaces';\nimport {message} from '../../i18n/message';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\nexport interface DeleteWorkspacePayload {\n  id: number;\n}\n\nfunction deleteWorkspace({id}: DeleteWorkspacePayload): Promise<Response> {\n  return apiClient.delete(`workspace/${id}`).then(r => r.data);\n}\n\nexport function useDeleteWorkspace() {\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  return useMutation(\n    (props: DeleteWorkspacePayload) => deleteWorkspace(props),\n    {\n      onSuccess: (r, payload) => {\n        toast(message('Deleted workspace'));\n        queryClient.invalidateQueries(WorkspaceQueryKeys.fetchUserWorkspaces);\n        queryClient.invalidateQueries(\n          WorkspaceQueryKeys.workspaceWithMembers(payload.id)\n        );\n\n        // if user deleted workspace that is currently active, switch to personal workspace\n        if (workspaceId === payload.id) {\n          setWorkspaceId(PersonalWorkspace.id);\n        }\n      },\n      onError: err => showHttpErrorToast(err),\n    }\n  );\n}\n","import clsx from 'clsx';\nimport {cloneElement, Fragment, ReactElement, useEffect, useState} from 'react';\nimport {ButtonBase} from '../ui/buttons/button-base';\nimport {PersonalWorkspace, useUserWorkspaces} from './user-workspaces';\nimport {UnfoldMoreIcon} from '../icons/material/UnfoldMore';\nimport {AddIcon} from '../icons/material/Add';\nimport {NewWorkspaceDialog} from './new-workspace-dialog';\nimport {WorkspaceMembersDialog} from './workspace-members-dialog';\nimport {useActiveWorkspaceId} from './active-workspace-id-context';\nimport {DialogTrigger} from '../ui/overlays/dialog/dialog-trigger';\nimport {Workspace} from './types/workspace';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {Button, ButtonProps} from '../ui/buttons/button';\nimport {CheckIcon} from '../icons/material/Check';\nimport {Menu, MenuItem, MenuTrigger} from '../ui/navigation/menu/menu-trigger';\nimport {KeyboardArrowDownIcon} from '../icons/material/KeyboardArrowDown';\nimport {PersonAddIcon} from '../icons/material/PersonAdd';\nimport {DeleteIcon} from '../icons/material/Delete';\nimport {ExitToAppIcon} from '../icons/material/ExitToApp';\nimport {EditIcon} from '../icons/material/Edit';\nimport {RenameWorkspaceDialog} from './rename-workspace-dialog';\nimport {ConfirmationDialog} from '../ui/overlays/dialog/confirmation-dialog';\nimport {useDeleteWorkspace} from './requests/delete-workspace';\nimport {useRemoveMember} from './requests/remove-member';\nimport {useAuth} from '../auth/use-auth';\nimport {Trans} from '../i18n/trans';\nimport {LeaveWorkspaceConfirmation} from './leave-workspace-confirmation';\n\ntype ActiveDialogName =\n  | 'workspaceMembers'\n  | 'updateWorkspace'\n  | 'deleteWorkspace'\n  | 'leaveWorkspace';\ntype ActiveDialog =\n  | {name: ActiveDialogName; workspace: Workspace}\n  | {name: 'newWorkspace'}\n  | null;\n\ninterface WorkspaceSelectorProps {\n  className?: string;\n  onChange?: (id: number) => void;\n  trigger?: ReactElement<ButtonProps>;\n}\nexport function WorkspaceSelector({\n  onChange,\n  className,\n  trigger: propsTrigger,\n}: WorkspaceSelectorProps) {\n  const {data, isFetched, isFetching} = useUserWorkspaces();\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  const activeWorkspace = data?.find(w => w.id === workspaceId);\n  const [dialog, setDialog] = useState<ActiveDialog>(null);\n  const [selectorIsOpen, setSelectorIsOpen] = useState(false);\n  const {hasPermission} = useAuth();\n\n  // if user no longer has access to previously selected workspace, select personal one\n  useEffect(() => {\n    // make sure we don't unset active workspace while user workspaces are being re-fetched\n    if (isFetched && !isFetching && !activeWorkspace) {\n      setWorkspaceId(PersonalWorkspace.id);\n    }\n  }, [activeWorkspace, data, setWorkspaceId, isFetched, isFetching]);\n\n  if (!activeWorkspace || !hasPermission('workspaces.create')) return null;\n\n  const defaultTrigger = (\n    <ButtonBase\n      className={clsx(\n        'flex items-center gap-10 hover:bg-hover rounded ring-inset focus-visible:ring-2',\n        className\n      )}\n    >\n      <span className=\"block flex-auto mr-auto text-left overflow-hidden\">\n        <span className=\"block text-sm text-main font-medium overflow-hidden overflow-ellipsis\">\n          {activeWorkspace.default ? (\n            <Trans message={activeWorkspace.name} />\n          ) : (\n            activeWorkspace.name\n          )}\n        </span>\n        <span className=\"block text-muted text-xs\">\n          {activeWorkspace.default ? (\n            <Trans message=\"Personal workspace\" />\n          ) : (\n            <Trans\n              message=\":count members\"\n              values={{count: activeWorkspace.members_count}}\n            />\n          )}\n        </span>\n      </span>\n      <UnfoldMoreIcon className=\"icon-md shrink-0\" />\n    </ButtonBase>\n  );\n\n  const trigger = propsTrigger || defaultTrigger;\n\n  return (\n    <Fragment>\n      <DialogTrigger\n        type=\"popover\"\n        isOpen={selectorIsOpen}\n        onClose={() => {\n          setSelectorIsOpen(false);\n        }}\n      >\n        {cloneElement(trigger, {\n          onClick: () => setSelectorIsOpen(!selectorIsOpen),\n        })}\n        <Dialog size=\"min-w-320\">\n          <DialogBody padding=\"p-10\">\n            <div className=\"mb-16 pb-10 border-b\">\n              {data!.map(workspace => (\n                <WorkspaceItem\n                  key={workspace.id}\n                  workspace={workspace}\n                  setDialog={setDialog}\n                  setSelectorIsOpen={setSelectorIsOpen}\n                  onChange={onChange}\n                />\n              ))}\n            </div>\n            <div className=\"text-center mb-4 px-4\">\n              <Button\n                onClick={e => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setDialog({name: 'newWorkspace'});\n                  setSelectorIsOpen(false);\n                }}\n                variant=\"outline\"\n                startIcon={<AddIcon />}\n                color=\"primary\"\n                className=\"w-full h-40\"\n              >\n                <Trans message=\"Create new workspace\" />\n              </Button>\n            </div>\n          </DialogBody>\n        </Dialog>\n      </DialogTrigger>\n      <DialogContainer\n        dialog={dialog}\n        setDialog={setDialog}\n        onChange={onChange}\n      />\n    </Fragment>\n  );\n}\n\ninterface WorkspaceItemProps {\n  workspace: Workspace;\n  onChange: WorkspaceSelectorProps['onChange'];\n  setSelectorIsOpen: (value: boolean) => void;\n  setDialog: (value: ActiveDialog) => void;\n}\nfunction WorkspaceItem({\n  workspace,\n  onChange,\n  setSelectorIsOpen,\n  setDialog,\n}: WorkspaceItemProps) {\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  const isActive = workspaceId === workspace.id;\n\n  return (\n    <div\n      onClick={() => {\n        setWorkspaceId(workspace.id);\n        onChange?.(workspace.id);\n        setSelectorIsOpen(false);\n      }}\n      className={clsx(\n        'p-10 mb-4 text-left flex items-center gap-12 rounded-lg cursor-pointer',\n        isActive && 'bg-primary/5',\n        !isActive && 'hover:bg-hover'\n      )}\n    >\n      <CheckIcon\n        size=\"sm\"\n        className={clsx('flex-shrink-0 text-primary', !isActive && 'invisible')}\n      />\n      <div className=\"flex-auto\">\n        <div className={clsx('text-sm', isActive && 'font-semibold')}>\n          {workspace.name}\n        </div>\n        <div className=\"text-muted text-sm\">\n          {workspace.default ? (\n            <Trans message=\"Personal workspace\" />\n          ) : (\n            <Trans\n              message=\":count members\"\n              values={{count: workspace.members_count}}\n            />\n          )}\n        </div>\n      </div>\n      {workspace.id !== 0 && (\n        <ManageButton\n          setSelectorIsOpen={setSelectorIsOpen}\n          workspace={workspace}\n          setDialog={setDialog}\n        />\n      )}\n    </div>\n  );\n}\n\ninterface DialogContainerProps {\n  dialog: ActiveDialog;\n  setDialog: (value: ActiveDialog) => void;\n  onChange?: WorkspaceSelectorProps['onChange'];\n}\nfunction DialogContainer({dialog, setDialog, onChange}: DialogContainerProps) {\n  const deleteWorkspace = useDeleteWorkspace();\n  const removeMember = useRemoveMember();\n  const {user} = useAuth();\n  const {setWorkspaceId} = useActiveWorkspaceId();\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      isOpen={!!dialog?.name}\n      onClose={value => {\n        if (dialog?.name === 'deleteWorkspace' && value) {\n          deleteWorkspace.mutate({id: dialog.workspace.id});\n        }\n        if (dialog?.name === 'leaveWorkspace' && value && user?.id) {\n          removeMember.mutate({\n            workspaceId: dialog.workspace.id,\n            memberId: user.id,\n            memberType: 'member',\n          });\n        }\n        if (dialog?.name === 'newWorkspace' && value) {\n          setWorkspaceId(value);\n          onChange?.(value);\n        }\n        setDialog(null);\n      }}\n    >\n      {dialog?.name === 'newWorkspace' && <NewWorkspaceDialog />}\n      {dialog?.name === 'updateWorkspace' && (\n        <RenameWorkspaceDialog workspace={dialog.workspace} />\n      )}\n      {dialog?.name === 'workspaceMembers' && (\n        <WorkspaceMembersDialog workspace={dialog.workspace} />\n      )}\n      {dialog?.name === 'deleteWorkspace' && (\n        <DeleteWorkspaceConfirmation workspace={dialog.workspace} />\n      )}\n      {dialog?.name === 'leaveWorkspace' && <LeaveWorkspaceConfirmation />}\n    </DialogTrigger>\n  );\n}\n\ninterface DeleteWorkspaceConfirmationProps {\n  workspace: Workspace;\n}\nfunction DeleteWorkspaceConfirmation({\n  workspace,\n}: DeleteWorkspaceConfirmationProps) {\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Delete workspace\" />}\n      body={\n        <Trans\n          message=\"Are you sure you want to delete “:name“?\"\n          values={{name: workspace.name}}\n        />\n      }\n      confirm={<Trans message=\"Delete\" />}\n    />\n  );\n}\n\ninterface ManageButtonProps {\n  setSelectorIsOpen: (value: boolean) => void;\n  setDialog: (dialog: ActiveDialog) => void;\n  workspace: Workspace;\n}\nfunction ManageButton({\n  setSelectorIsOpen,\n  setDialog,\n  workspace,\n}: ManageButtonProps) {\n  const {user} = useAuth();\n\n  return (\n    <MenuTrigger\n      onItemSelected={value => {\n        setSelectorIsOpen(false);\n        setDialog({name: value as ActiveDialogName, workspace});\n      }}\n    >\n      <Button\n        onClick={e => {\n          e.preventDefault();\n          e.stopPropagation();\n        }}\n        color=\"primary\"\n        size=\"xs\"\n        variant=\"outline\"\n        endIcon={<KeyboardArrowDownIcon />}\n      >\n        <Trans message=\"Manage\" />\n      </Button>\n      <Menu>\n        <MenuItem\n          onClick={e => e.stopPropagation()}\n          value=\"workspaceMembers\"\n          startIcon={<PersonAddIcon />}\n        >\n          <Trans message=\"Members\" />\n        </MenuItem>\n        {workspace.owner_id === user?.id && (\n          <MenuItem\n            onClick={e => e.stopPropagation()}\n            value=\"updateWorkspace\"\n            startIcon={<EditIcon />}\n          >\n            <Trans message=\"Rename\" />\n          </MenuItem>\n        )}\n        {workspace.owner_id !== user?.id && (\n          <MenuItem\n            onClick={e => e.stopPropagation()}\n            value=\"leaveWorkspace\"\n            startIcon={<ExitToAppIcon />}\n          >\n            <Trans message=\"Leave\" />\n          </MenuItem>\n        )}\n        {workspace.owner_id === user?.id && (\n          <MenuItem\n            onClick={e => e.stopPropagation()}\n            value=\"deleteWorkspace\"\n            startIcon={<DeleteIcon />}\n          >\n            <Trans message=\"Delete\" />\n          </MenuItem>\n        )}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\nconst endpoint = 'link/usage';\n\nexport interface ResourceUsage {\n  used: number;\n  total: number | null;\n  create?: boolean;\n  update?: boolean;\n  delete?: boolean;\n  createMsgType?: CreateMsgType;\n}\n\nexport interface LinkFeaturePermissions {\n  alias: boolean;\n  password: boolean;\n  expiration: boolean;\n  utm: boolean;\n  retargeting: boolean;\n}\n\nexport type CreateMsgType =\n  | 'overQuota'\n  | 'noPermission'\n  | 'noWorkspacePermission'\n  | keyof LinkFeaturePermissions;\n\nexport interface FetchLinkUsageResponse extends BackendResponse {\n  forWorkspace?: boolean;\n  userOwnsWorkspace?: boolean;\n  usage: {\n    links: ResourceUsage & LinkFeaturePermissions;\n    biolinks: ResourceUsage;\n    link_clicks: ResourceUsage;\n    link_overlays: ResourceUsage;\n    custom_pages: ResourceUsage;\n    custom_domains: ResourceUsage;\n    link_groups: ResourceUsage;\n    tracking_pixels: ResourceUsage;\n  };\n}\n\nexport function useLinkSummary() {\n  return useQuery([endpoint], () => fetchLinkUsage());\n}\n\nfunction fetchLinkUsage(): Promise<FetchLinkUsageResponse> {\n  return apiClient.get(endpoint).then(response => response.data);\n}\n","import React, {CSSProperties, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {InputSize} from '../forms/input-field/input-size';\nimport {getInputFieldClassNames} from '../forms/input-field/get-input-field-class-names';\nimport {useNumberFormatter} from '../../i18n/use-number-formatter';\nimport {clamp} from '../../utils/number/clamp';\n\nexport interface ProgressBarBaseProps {\n  value?: number;\n  minValue?: number;\n  maxValue?: number;\n  className?: string;\n  showValueLabel?: boolean;\n  size?: 'xs' | 'sm' | 'md';\n  labelPosition?: 'top' | 'bottom';\n  isIndeterminate?: boolean;\n  label?: ReactNode;\n  formatOptions?: Intl.NumberFormatOptions;\n  role?: string;\n  radius?: string;\n}\n\nexport function ProgressBarBase(props: ProgressBarBaseProps) {\n  let {\n    value = 0,\n    minValue = 0,\n    maxValue = 100,\n    size = 'md',\n    label,\n    showValueLabel = !!label,\n    isIndeterminate = false,\n    labelPosition = 'top',\n    className,\n    role,\n    formatOptions = {\n      style: 'percent',\n    },\n    radius = 'rounded',\n  } = props;\n\n  const id = useId();\n\n  value = clamp(value, minValue, maxValue);\n\n  const percentage = (value - minValue) / (maxValue - minValue);\n  const formatter = useNumberFormatter(formatOptions);\n\n  let valueLabel = '';\n  if (!isIndeterminate && showValueLabel) {\n    const valueToFormat =\n      formatOptions.style === 'percent' ? percentage : value;\n    valueLabel = formatter.format(valueToFormat);\n  }\n\n  const barStyle: CSSProperties = {};\n  if (!isIndeterminate) {\n    barStyle.width = `${Math.round(percentage * 100)}%`;\n  }\n\n  const barSize = getSize(size);\n  const style = getInputFieldClassNames({size});\n\n  const labelEl = (label || valueLabel) && (\n    <div className={clsx('flex gap-10 justify-between my-4', style.label)}>\n      {label && <span id={id}>{label}</span>}\n      {valueLabel && <div>{valueLabel}</div>}\n    </div>\n  );\n\n  return (\n    <div\n      aria-valuenow={isIndeterminate ? undefined : value}\n      aria-valuemin={minValue}\n      aria-valuemax={maxValue}\n      aria-valuetext={isIndeterminate ? undefined : (valueLabel as string)}\n      aria-labelledby={label ? id : undefined}\n      role={role || 'progressbar'}\n      className={clsx(className, 'min-w-42')}\n    >\n      {labelPosition === 'top' && labelEl}\n      <div className={`${barSize} ${radius} bg-primary-light overflow-hidden`}>\n        <div\n          className={clsx(\n            'fill h-full transition-width duration-200 rounded-l bg-primary',\n            isIndeterminate && 'progress-bar-indeterminate-animate'\n          )}\n          style={barStyle}\n        />\n      </div>\n      {labelPosition === 'bottom' && labelEl}\n    </div>\n  );\n}\n\nfunction getSize(size: InputSize) {\n  switch (size) {\n    case 'sm':\n      return 'h-6';\n    case 'xs':\n      return 'h-4';\n    default:\n      return 'h-8';\n  }\n}\n","import React from 'react';\nimport {ProgressBarBase, ProgressBarBaseProps} from './progress-bar-base';\n\nexport function Meter(props: ProgressBarBaseProps) {\n  return <ProgressBarBase {...props} role=\"meter progressbar\" />;\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const InfoIcon = createSvgIcon(\n  <path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n, 'InfoOutlined');\n","import {FetchLinkUsageResponse, useLinkSummary} from './use-link-summary';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\n\ntype ResourceKey = keyof FetchLinkUsageResponse['usage'];\n\nexport const resourceTranslationMap: Record<ResourceKey, MessageDescriptor> = {\n  links: message('Links'),\n  biolinks: message('Biolinks'),\n  link_clicks: message('Visitors'),\n  link_overlays: message('Link overlays'),\n  custom_pages: message('Custom link pages'),\n  custom_domains: message('Custom domains'),\n  link_groups: message('Link groups'),\n  tracking_pixels: message('Tracking pixels'),\n} as const;\n\nexport function ResourceUsageList() {\n  const {data} = useLinkSummary();\n  if (!data) {\n    return null;\n  }\n\n  const unlimited = <Trans message=\"Unlimited\" />;\n\n  return (\n    <ul>\n      {Object.entries(resourceTranslationMap).map(([key, label]) => {\n        const usage = data?.usage[key as ResourceKey];\n        if (!usage) return null;\n        const name = <Trans {...label} />;\n        return (\n          <li key={key} className=\"mt-8\">\n            {usage.total ? (\n              <Trans\n                message=\":used out of :total :name\"\n                values={{\n                  used: <FormattedNumber value={usage.used} />,\n                  total: usage.total ? (\n                    <FormattedNumber value={usage.total} />\n                  ) : (\n                    unlimited\n                  ),\n                  name,\n                }}\n              />\n            ) : (\n              <Trans\n                message=\":count :name created\"\n                values={{count: usage.used, name}}\n              />\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {InfoIcon} from '@common/icons/material/Info';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Trans} from '@common/i18n/trans';\nimport {ResourceUsageList} from '@app/dashboard/layout/sidenav/resource-usage-list';\n\ninterface UsageDetailsTriggerProps {\n  className?: string;\n}\nexport function UsageDetailsTrigger({className}: UsageDetailsTriggerProps) {\n  const {user} = useAuth();\n  const subscription = user?.subscriptions?.[0];\n  const planName = subscription?.product?.name;\n  const renewalDate = subscription?.renews_at ? (\n    <FormattedDate date={subscription.renews_at} />\n  ) : null;\n\n  return (\n    <DialogTrigger type=\"popover\" triggerOnHover>\n      <IconButton size=\"md\" className={className}>\n        <InfoIcon />\n      </IconButton>\n      <Dialog size=\"auto\">\n        <DialogBody>\n          <div className=\"border-b pb-10 mb-10\">\n            <div className=\"font-semibold\">\n              <Trans\n                message=\"Current plan: :planName\"\n                values={{\n                  planName: planName || <Trans message=\"Free\" />,\n                }}\n              />\n            </div>\n            <div className=\"text-muted text-xs\">\n              <Trans\n                message=\"Next payment: :date\"\n                values={{\n                  date: renewalDate || <Trans message=\"Never\" />,\n                }}\n              />\n            </div>\n          </div>\n          <ResourceUsageList />\n        </DialogBody>\n      </Dialog>\n    </DialogTrigger>\n  );\n}\n","import {useLinkSummary} from './use-link-summary';\nimport clsx from 'clsx';\nimport {Trans} from '@common/i18n/trans';\nimport {Meter} from '@common/ui/progress/meter';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {UsageDetailsTrigger} from '@app/dashboard/layout/sidenav/usage-details-trigger';\n\nexport function UsageMeter() {\n  const {isLoading, data} = useLinkSummary();\n  const links = data?.usage.links;\n\n  // prevent layout shift while usage is loading\n  if (!links) {\n    return <div className=\"h-[53px] pt-24 mt-24 border-t\" />;\n  }\n\n  // prevent translation placeholders from showing if summary is not loaded yet\n  const label = (\n    <span className={clsx('whitespace-nowrap', isLoading && 'invisible')}>\n      {links.total ? (\n        <Trans\n          message=\":used of :available links created\"\n          values={{\n            used: <FormattedNumber value={links.used} />,\n            available: <FormattedNumber value={links.total} />,\n          }}\n        />\n      ) : (\n        <Trans message=\":count links created\" values={{count: links.used}} />\n      )}\n    </span>\n  );\n  return (\n    <div className=\"border-t items-start gap-8 flex pl-6 pt-24 mt-24\">\n      <UsageDetailsTrigger className=\"-mt-14\" />\n      <Meter\n        className=\"flex-auto max-w-144\"\n        size=\"xs\"\n        value={links.total && links.used ? (links.used / links.total) * 100 : 0}\n        label={label}\n        showValueLabel={false}\n        labelPosition=\"bottom\"\n      />\n    </div>\n  );\n}\n","import {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function UpgradeButton(props: ButtonProps) {\n  const {isSubscribed} = useAuth();\n  return (\n    <Button\n      elementType={Link}\n      to={isSubscribed ? '/billing/change-plan' : '/pricing'}\n      variant=\"outline\"\n      color=\"primary\"\n      size=\"xs\"\n      {...props}\n    >\n      <Trans message=\"Upgrade\" />\n    </Button>\n  );\n}\n","import clsx from 'clsx';\nimport {CustomMenu} from '@common/menus/custom-menu';\nimport React from 'react';\nimport {WorkspaceSelector} from '@common/workspace/workspace-selector';\nimport {UsageMeter} from './usage-meter';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {UpgradeButton} from '@app/dashboard/layout/sidenav/upgrade-button';\nimport {UsageDetailsTrigger} from '@app/dashboard/layout/sidenav/usage-details-trigger';\n\ninterface Props {\n  className?: string;\n  isCompactMode?: boolean;\n}\nexport function BelinkDashboardSidenav({className, isCompactMode}: Props) {\n  const {billing} = useSettings();\n\n  return (\n    <div\n      className={clsx(\n        'text-sm pt-26 text-muted font-medium bg-alt flex flex-col gap-20 border-r overflow-y-auto relative',\n        className\n      )}\n    >\n      <div className=\"flex-auto px-12\">\n        <CustomMenu\n          matchDescendants={to => to === '/dashboard'}\n          menu=\"dashboard-sidebar\"\n          orientation=\"vertical\"\n          onlyShowIcons={isCompactMode}\n          gap=\"gap-8\"\n          itemClassName={({isActive}) =>\n            clsx(\n              'block w-full rounded py-12 px-16 border-l-4',\n              isActive\n                ? 'bg-primary/hover border-l-primary'\n                : 'border-l-transparent hover:bg-hover'\n            )\n          }\n        />\n        {!isCompactMode && <UsageMeter />}\n        {billing.enable && !isCompactMode && (\n          <div className=\"mt-14 pl-60\">\n            <UpgradeButton />\n          </div>\n        )}\n      </div>\n      {!isCompactMode && (\n        <WorkspaceSelector className=\"w-full px-24 py-18 border-t flex-shrink-0 mt-auto\" />\n      )}\n      {isCompactMode && (\n        <UsageDetailsTrigger className=\"flex-shrink-0 mx-auto mb-10\" />\n      )}\n    </div>\n  );\n}\n","import {DashboardLayout} from '@common/ui/layout/dashboard-layout';\nimport {DashboardSidenav} from '@common/ui/layout/dashboard-sidenav';\nimport {DashboardContent} from '@common/ui/layout/dashboard-content';\nimport {Outlet} from 'react-router-dom';\nimport {DashboardNavbar} from '@common/ui/layout/dashboard-navbar';\nimport {BelinkDashboardSidenav} from './sidenav/belink-dashboard-sidenav';\nimport {useContext} from 'react';\nimport {DashboardLayoutContext} from '@common/ui/layout/dashboard-layout-context';\nimport {UpgradeButton} from '@app/dashboard/layout/sidenav/upgrade-button';\nimport {Button} from '@common/ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {Trans} from '@common/i18n/trans';\nimport {WorkspaceSelector} from '@common/workspace/workspace-selector';\nimport {Footer} from '@common/ui/footer/footer';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {AdHost} from '@common/admin/ads/ad-host';\n\nexport function BelinkDashboardLayout() {\n  const {\n    links: {dash_footer},\n  } = useSettings();\n  return (\n    <DashboardLayout name=\"belink-dashboard\" leftSidenavCanBeCompact>\n      <BelinkNavbar />\n      <DashboardSidenav position=\"left\">\n        <BelinkDashboardSidenav />\n      </DashboardSidenav>\n      <DashboardContent>\n        <div className=\"bg dark:bg-alt\">\n          <AdHost slot=\"dashboard\" className=\"mt-50 mb-20\" />\n          <Outlet />\n          {dash_footer && (\n            <Footer padding=\"px-16 md:px-28 pt-24 pb-28 md:pb-24\" />\n          )}\n        </div>\n      </DashboardContent>\n    </DashboardLayout>\n  );\n}\n\ninterface DashboardNavbarProps {}\nfunction BelinkNavbar(props: DashboardNavbarProps) {\n  const {billing} = useSettings();\n  const {leftSidenavStatus} = useContext(DashboardLayoutContext);\n  return (\n    <DashboardNavbar\n      {...props}\n      size=\"sm\"\n      color=\"primary\"\n      menuPosition=\"dashboard-navbar\"\n      rightChildren={\n        leftSidenavStatus === 'compact' && (\n          <UpgradeButton variant=\"flat\" color=\"paper\" />\n        )\n      }\n    >\n      {leftSidenavStatus === 'compact' && billing?.enable && (\n        <WorkspaceSelector\n          trigger={\n            <Button variant=\"text\" endIcon={<KeyboardArrowDownIcon />}>\n              <Trans message=\"Workspaces\" />\n            </Button>\n          }\n        />\n      )}\n    </DashboardNavbar>\n  );\n}\n","import {CalendarDate, DateValue} from '@internationalized/date';\n\nexport function getDefaultGranularity(date: DateValue) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\n\nexport function dateIsInvalid(\n  date: CalendarDate,\n  min?: DateValue,\n  max?: DateValue\n) {\n  return (\n    (min != null && date.compare(min) < 0) ||\n    (max != null && date.compare(max) > 0)\n  );\n}\n","import {useState} from 'react';\nimport {DateValue, toZoned, ZonedDateTime} from '@internationalized/date';\nimport {getDefaultGranularity} from './utils';\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-picker/date-range-value';\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\n\nexport function useBaseDatePickerState(\n  selectedDate: DateValue,\n  props:\n    | DatePickerValueProps<ZonedDateTime>\n    | DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\n) {\n  const timezone = useUserTimezone();\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toZoned(props.min, timezone) : undefined;\n  const max = props.max ? toZoned(props.max, timezone) : undefined;\n\n  return {\n    timezone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  };\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1,\n  });\n}\n","import {useMemo} from 'react';\nimport {now} from '@internationalized/date';\nimport {useUserTimezone} from './use-user-timezone';\n\nexport function useCurrentDateTime() {\n  const timezone = useUserTimezone();\n  return useMemo(() => {\n    return now(timezone);\n  }, [timezone]);\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  isSameDay,\n  isSameMonth,\n  maxDate,\n  minDate,\n  startOfMonth,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {\n  BaseDatePickerState,\n  DatePickerValueProps,\n} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {startOfDay} from '@common/utils/date/start-of-day';\nimport {endOfDay} from '@common/utils/date/end-of-day';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\n): DateRangePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value ? completeRange(props.value, now) : undefined,\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\n    props.onChange\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue.start, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder({start: true, end: true});\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(internalValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n\n  const constrainRange = useCallback(\n    (range: DateRangeValue): DateRangeValue => {\n      let start = range.start;\n      let end = range.end;\n\n      // make sure start date is after min date and before max date/range end\n      if (min) {\n        start = maxDate(start, min);\n      }\n      const startMax = max ? minDate(max, end) : end;\n      start = minDate(start, startMax);\n\n      // make sure end date is after min date/range start and before max date\n      const endMin = min ? maxDate(min, start) : start;\n      end = maxDate(end, endMin);\n\n      if (max) {\n        end = minDate(end, max);\n      }\n\n      return {start: toZoned(start, timezone), end: toZoned(end, timezone)};\n    },\n    [min, max, timezone]\n  );\n\n  const setSelectedValue = useCallback(\n    (newRange: DateRangeValue) => {\n      const value = {\n        ...constrainRange(newRange),\n        preset: newRange.preset,\n      };\n      setInternalValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setInternalValue, constrainRange, max]\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder]\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting]\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange]\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange]\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(\n              makeRange({start: anchorDate!, end: date, timezone})\n            );\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\n          } else {\n            const finalRange = makeRange({\n              start: startOfDay(toZoned(anchorDate!, timezone)),\n              end: endOfDay(toZoned(date, timezone)),\n              timezone,\n            });\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n      timezone,\n    ]\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n  timezone: string;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toZoned(props.start, props.timezone);\n  const end = toZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined,\n  now: ZonedDateTime\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: now, end: now.add({months: 1})};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DateRangeIcon = createSvgIcon(\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\n, 'DateRangeOutlined');\n","import {DateValue, parseAbsolute} from '@internationalized/date';\nimport {Fragment, memo} from 'react';\nimport {useDateFormatter} from './use-date-formatter';\nimport {useSettings} from '../core/settings/use-settings';\nimport {shallowEqual} from '../utils/shallow-equal';\nimport {useUserTimezone} from './use-user-timezone';\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n  preset?: keyof typeof DateFormatPresets;\n}\nexport const FormattedDateTimeRange = memo(\n  ({start, end, options, preset}: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const timezone = useUserTimezone();\n    const formatter = useDateFormatter(\n      options ||\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\n          preset || dates?.format\n        ]\n    );\n\n    if (!start || !end) {\n      return null;\n    }\n\n    let value: string;\n\n    try {\n      value = formatter.formatRange(\n        castToDate(start, timezone),\n        castToDate(end, timezone)\n      );\n    } catch (e) {\n      value = '';\n    }\n\n    return <Fragment>{value}</Fragment>;\n  },\n  shallowEqual\n);\n\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\nimport clsx from 'clsx';\nimport {createFocusManager} from '@react-aria/focus';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\nimport {Field, FieldProps} from '../../field';\nimport {Input} from '../../input';\nimport {useField} from '../../use-field';\n\nexport interface DatePickerFieldProps\n  extends Omit<FieldProps, 'fieldClassNames'> {\n  inputRef?: Ref<HTMLDivElement>;\n  onBlur?: FocusEventHandler;\n  showCalendarFooter?: boolean;\n}\nexport const DatePickerField = React.forwardRef<\n  HTMLDivElement,\n  DatePickerFieldProps\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n\n  const {fieldProps, inputProps} = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span',\n  });\n\n  fieldClassNames.wrapper = clsx(\n    fieldClassNames.wrapper,\n    other.disabled && 'pointer-events-none'\n  );\n\n  return (\n    <Field\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\n        wrapperProps!,\n        {\n          onBlur: e => {\n            if (!objRef.current.contains(e.relatedTarget)) {\n              onBlur?.(e);\n            }\n          },\n          onClick: () => {\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n            const focusManager = createFocusManager(objRef);\n            focusManager.focusFirst();\n          },\n        }\n      )}\n      fieldClassNames={fieldClassNames}\n      ref={objRef}\n      {...fieldProps}\n    >\n      <Input\n        inputProps={inputProps}\n        className={clsx(fieldClassNames.input, 'gap-10')}\n        ref={inputRef}\n      >\n        {children}\n      </Input>\n    </Field>\n  );\n});\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowLeftIcon = createSvgIcon(\n  <path d=\"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\" />\n, 'KeyboardArrowLeftOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowRightIcon = createSvgIcon(\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n, 'KeyboardArrowRightOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n  CalendarDate,\n  DateValue,\n  getDayOfWeek,\n  isSameMonth,\n  isToday,\n} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarCellProps {\n  date: CalendarDate;\n  currentMonth: DateValue;\n  state: DatePickerState | DateRangePickerState;\n}\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timezone,\n    min,\n    max,\n  },\n}: CalendarCellProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timezone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n\n  return (\n    <div\n      role=\"button\"\n      aria-disabled={isDisabled}\n      className={clsx(\n        'w-40 h-40 text-sm relative isolate flex-shrink-0',\n        isDisabled && 'text-disabled pointer-events-none',\n        !sameMonth && 'invisible pointer-events-none'\n      )}\n      {...getCellProps(date, sameMonth)}\n    >\n      <span\n        className={clsx(\n          'absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer',\n          !isActive && !dayIsToday && 'hover:bg-hover',\n          isActive && 'bg-primary text-on-primary font-semibold',\n          dayIsToday && !isActive && 'bg-chip'\n        )}\n      >\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && (\n        <span\n          className={clsx(\n            'absolute w-full h-full inset-0 bg-primary/focus',\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\n              'rounded-l-full',\n            (isRangeEnd ||\n              dayOfWeek === 6 ||\n              date.day ===\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\n              'rounded-r-full'\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {\n  CalendarDate,\n  endOfMonth,\n  getWeeksInMonth,\n  startOfMonth,\n  startOfWeek,\n} from '@internationalized/date';\nimport {KeyboardArrowLeftIcon} from '../../../../../icons/material/KeyboardArrowLeft';\nimport {IconButton} from '../../../../buttons/icon-button';\nimport {KeyboardArrowRightIcon} from '../../../../../icons/material/KeyboardArrowRight';\nimport {CalendarCell} from './calendar-cell';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\nexport interface CalendarMonthProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast,\n}: CalendarMonthProps) {\n  const {localeCode} = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader\n        isFirst={isFirst}\n        isLast={isLast}\n        state={state}\n        currentMonth={startDate}\n      />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\n          <m.div className=\"flex mb-6\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => (\n              <CalendarCell\n                key={dayIndex}\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\n                currentMonth={startDate}\n                state={state}\n              />\n            ))}\n          </m.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CalendarMonthHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  currentMonth: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {calendarDates, setCalendarDates, timezone, min, max},\n}: CalendarMonthHeaderProps) {\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\n    const count = calendarDates.length;\n    let newDates: CalendarDate[];\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.add({months: count}))\n      );\n    } else {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.subtract({months: count}))\n      );\n    }\n    setCalendarDates(newDates);\n  };\n\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier,\n  });\n\n  const isBackwardDisabled = dateIsInvalid(\n    currentMonth.subtract({days: 1}),\n    min,\n    max\n  );\n  const isForwardDisabled = dateIsInvalid(\n    startOfMonth(currentMonth.add({months: 1})),\n    min,\n    max\n  );\n\n  return (\n    <div className=\"flex items-center justify-between gap-10\">\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isFirst && 'invisible')}\n        disabled={!isFirst || isBackwardDisabled}\n        aria-hidden={!isFirst}\n        onClick={() => {\n          shiftCalendars('backward');\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"text-sm font-semibold select-none\">\n        {monthFormatter.format(currentMonth.toDate(timezone))}\n      </div>\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isLast && 'invisible')}\n        disabled={!isLast || isForwardDisabled}\n        aria-hidden={!isLast}\n        onClick={() => {\n          shiftCalendars('forward');\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface WeekdayHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n}\nfunction WeekdayHeader({state: {timezone}, startDate}: WeekdayHeaderProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayFormatter = useDateFormatter({weekday: 'short'});\n\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n        const date = monthStart.add({days: index});\n        const dateDay = date.toDate(timezone);\n        const weekday = dayFormatter.format(dateDay);\n        return (\n          <div\n            className=\"w-40 h-40 text-sm font-semibold relative flex-shrink-0\"\n            key={index}\n          >\n            <div className=\"absolute flex items-center justify-center w-full h-full select-none\">\n              {weekday}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\nimport {CalendarMonth} from './calendar-month';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarProps {\n  state: DatePickerState | DateRangePickerState;\n  visibleMonths?: 1 | 2;\n}\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n\n  return (\n    <>\n      {[...new Array(visibleMonths).keys()].map(index => {\n        const startDate = toCalendarDate(\n          startOfMonth(state.calendarDates[index])\n        );\n        const isFirst = index === 0;\n        const isLast = index === visibleMonths - 1;\n        return (\n          <CalendarMonth\n            key={index}\n            state={state}\n            startDate={startDate}\n            isFirst={isFirst}\n            isLast={isLast}\n          />\n        );\n      })}\n    </>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowRightAltIcon = createSvgIcon(\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\n, 'ArrowRightAltOutlined');\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function adjustSegment(\n  value: ZonedDateTime,\n  part: string,\n  amount: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {round: part === 'year'});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const isPM = hours >= 12;\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24,\n        });\n    }\n  }\n\n  return value;\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function setSegment(\n  value: ZonedDateTime,\n  part: string,\n  segmentValue: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({[part]: segmentValue});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const wasPM = hours >= 12;\n        const isPM = segmentValue >= 12;\n        if (isPM === wasPM) {\n          return value;\n        }\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({[part]: segmentValue});\n    }\n  }\n\n  return value;\n}\n","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1,\n};\n","import {useFocusManager} from '@react-aria/focus';\nimport React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  KeyboardEventHandler,\n  useMemo,\n  useRef,\n} from 'react';\nimport {NumberParser} from '@internationalized/number';\nimport {mergeProps} from '@react-aria/utils';\nimport {today, ZonedDateTime} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {adjustSegment} from './utils/adjust-segment';\nimport {setSegment} from './utils/set-segment';\nimport {PAGE_STEP} from './utils/page-step';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface EditableSegment {\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\n  text: string;\n  value: number;\n  minValue: number;\n  maxValue: number;\n  minLength: number;\n}\n\ninterface DatePickerSegmentProps {\n  segment: EditableSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {timezone, calendarIsOpen, setCalendarIsOpen},\n}: DatePickerSegmentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {localeCode} = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({timeZone: timezone});\n  const parser = useMemo(\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\n    [localeCode]\n  );\n\n  const setSegmentValue = (newValue: number) => {\n    onChange(\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions())\n    );\n  };\n\n  const adjustSegmentValue = (amount: number) => {\n    onChange(\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions())\n    );\n  };\n\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(timezone);\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n\n  const onKeyDown: KeyboardEventHandler = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager.focusNext();\n        break;\n      case 'Enter':\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete': {\n        e.preventDefault();\n        e.stopPropagation();\n        backspace();\n        break;\n      }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n\n    onInput(e.key);\n  };\n\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter\n      .formatToParts(amDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter\n      .formatToParts(pmDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = (key: string) => {\n    const newValue = enteredKeys.current + key;\n\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year': {\n        if (!parser.isValidPartialNumber(newValue)) {\n          return;\n        }\n\n        let numberValue = parser.parse(newValue);\n        let segmentValue = numberValue;\n        let allowsZero = segment.minValue === 0;\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n          switch (formatter.resolvedOptions().hourCycle) {\n            case 'h11':\n              if (numberValue > 11) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n            case 'h12':\n              allowsZero = false;\n              if (numberValue > 12) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n          }\n\n          if (segment.value >= 12 && numberValue > 1) {\n            numberValue += 12;\n          }\n        } else if (numberValue > segment.maxValue) {\n          segmentValue = parser.parse(key);\n        }\n\n        if (Number.isNaN(numberValue)) {\n          return;\n        }\n\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\n        if (shouldSetValue) {\n          setSegmentValue(segmentValue);\n        }\n\n        if (\n          Number(`${numberValue}0`) > segment.maxValue ||\n          newValue.length >= String(segment.maxValue).length\n        ) {\n          enteredKeys.current = '';\n          if (shouldSetValue) {\n            focusManager.focusNext();\n          }\n        } else {\n          enteredKeys.current = newValue;\n        }\n        break;\n      }\n    }\n  };\n\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\n    ? {}\n    : {\n        'aria-label': segment.type,\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n        'aria-valuemin': segment.minValue,\n        'aria-valuemax': segment.maxValue,\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\n        tabIndex: 0,\n        onKeyDown,\n      };\n\n  return (\n    <div\n      {...mergeProps(domProps!, {\n        ...spinButtonProps,\n        onFocus: e => {\n          enteredKeys.current = '';\n          e.target.scrollIntoView({block: 'nearest'});\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n      } as HTMLAttributes<HTMLDivElement>)}\n      className=\"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center\"\n    >\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>\n  );\n}\n","import {useFocusManager} from '@react-aria/focus';\nimport {ComponentPropsWithoutRef} from 'react';\n\nexport interface LiteralSegment {\n  type: 'literal';\n  minLength: 1;\n  text: string;\n}\n\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\n  segment: LiteralSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n}\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\n  const focusManager = useFocusManager();\n  return (\n    <div\n      {...domProps}\n      onPointerDown={e => {\n        if (e.pointerType === 'mouse') {\n          e.preventDefault();\n          const res = focusManager.focusNext({from: e.target as HTMLElement});\n          if (!res) {\n            focusManager.focusPrevious({from: e.target as HTMLElement});\n          }\n        }\n      }}\n      aria-hidden\n      className=\"min-w-4 cursor-default select-none\"\n    >\n      {segment.text}\n    </div>\n  );\n}\n","import {\n  DateValue,\n  getMinimumDayInMonth,\n  getMinimumMonthInYear,\n} from '@internationalized/date';\n\nexport function getSegmentLimits(\n  date: DateValue,\n  type: string,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date),\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date),\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd',\n      };\n  }\n\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--',\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--',\n          };\n        }\n\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--',\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--',\n        };\n    }\n  }\n\n  return {};\n}\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\nimport {ZonedDateTime} from '@internationalized/date';\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {getSegmentLimits} from './utils/get-segment-limits';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface DateSegmentListProps {\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder,\n}: DateSegmentListProps) {\n  const {granularity} = state;\n  const options = useMemo(() => {\n    const memoOptions: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity]);\n\n  const formatter = useDateFormatter(options);\n\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(\n        value,\n        segment.type,\n        formatter.resolvedOptions()\n      );\n      const textValue =\n        isPlaceholder && segment.type !== 'literal'\n          ? limits.placeholder\n          : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength:\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\n      } as LiteralSegment | EditableSegment;\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n\n  return (\n    <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n        if (segment.type === 'literal') {\n          return (\n            <LiteralDateSegment\n              domProps={segmentProps}\n              key={index}\n              segment={segment}\n            />\n          );\n        }\n        return (\n          <EditableDateSegment\n            isPlaceholder={isPlaceholder}\n            domProps={segmentProps}\n            state={state}\n            value={value}\n            onChange={onChange}\n            segment={segment}\n            key={index}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import React, {ReactElement, ReactNode, useRef, useState} from 'react';\nimport {FocusScope, useFocusManager} from '@react-aria/focus';\nimport {ListItemBase, ListItemBaseProps} from './list-item-base';\nimport clsx from 'clsx';\n\ninterface Props {\n  className?: string;\n  padding?: string;\n  children: ReactElement<ListItemProps> | ReactElement<ListItemProps>[];\n  dataTestId?: string;\n}\n\nexport function List({children, className, padding, dataTestId}: Props) {\n  return (\n    <FocusScope>\n      <ul\n        data-testid={dataTestId}\n        className={clsx(\n          'text-base sm:text-sm outline-none',\n          className,\n          padding ?? 'py-4'\n        )}\n      >\n        {children}\n      </ul>\n    </FocusScope>\n  );\n}\n\ninterface ListItemProps extends ListItemBaseProps {\n  children: ReactNode;\n  onSelected?: () => void;\n  borderRadius?: string;\n}\nexport function ListItem({\n  children,\n  onSelected,\n  borderRadius,\n  ...listItemProps\n}: ListItemProps) {\n  const focusManager = useFocusManager();\n  const isSelectable = !!onSelected;\n  const ref = useRef<HTMLDivElement>(null);\n  const [isActive, setIsActive] = useState(false);\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        focusManager.focusNext();\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        focusManager.focusPrevious();\n        break;\n      case 'Home':\n        e.preventDefault();\n        focusManager.focusFirst();\n        break;\n      case 'End':\n        e.preventDefault();\n        focusManager.focusLast();\n        break;\n      case 'Enter':\n      case 'Space':\n        e.preventDefault();\n        onSelected?.();\n        break;\n    }\n  };\n\n  return (\n    <li>\n      <ListItemBase\n        className={borderRadius || 'rounded'}\n        isActive={isActive}\n        isDisabled={listItemProps.isDisabled}\n        {...listItemProps}\n        onFocus={e => {\n          setIsActive((e.target as HTMLElement).matches(':focus-visible'));\n        }}\n        onBlur={() => {\n          setIsActive(false);\n        }}\n        onClick={() => {\n          onSelected?.();\n        }}\n        ref={ref}\n        role={isSelectable ? 'button' : undefined}\n        onKeyDown={isSelectable ? onKeyDown : undefined}\n        tabIndex={isSelectable && !listItemProps.isDisabled ? 0 : undefined}\n      >\n        {children}\n      </ListItemBase>\n    </li>\n  );\n}\n","import {getBootstrapData} from '../core/bootstrap-data/use-backend-bootstrap-data';\nimport {getLocalTimeZone} from '@internationalized/date';\n\nexport function getUserTimezone(): string {\n  const defaultTimezone = getBootstrapData().settings.dates.default_timezone;\n  const preferredTimezone =\n    getBootstrapData().user?.timezone || defaultTimezone || 'auto';\n\n  if (!preferredTimezone || preferredTimezone === 'auto') {\n    return getLocalTimeZone();\n  }\n  return preferredTimezone;\n}\n","import {DateRangeValue} from '../date-range-value';\nimport {message} from '../../../../../../i18n/message';\nimport {MessageDescriptor} from '../../../../../../i18n/message-descriptor';\nimport {\n  endOfWeek,\n  endOfYear,\n  now,\n  startOfWeek,\n  startOfYear,\n} from '@internationalized/date';\nimport {startOfDay} from '../../../../../../utils/date/start-of-day';\nimport {endOfDay} from '../../../../../../utils/date/end-of-day';\nimport {getBootstrapData} from '../../../../../../core/bootstrap-data/use-backend-bootstrap-data';\nimport {getUserTimezone} from '../../../../../../i18n/get-user-timezone';\n\nconst Now = startOfDay(now(getUserTimezone()));\nconst locale = getBootstrapData().i18n?.language || 'en';\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: () => DateRangeValue;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('Today'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now,\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 1,\n    label: message('Yesterday'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 1}),\n      end: endOfDay(Now).subtract({days: 1}),\n    }),\n  },\n  {\n    key: 2,\n    label: message('This week'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: startOfWeek(Now, locale),\n      end: endOfWeek(endOfDay(Now), locale),\n    }),\n  },\n  {\n    key: 3,\n    label: message('Last week'),\n    getRangeValue: () => ({\n      preset: 3,\n      start: startOfWeek(Now, locale).subtract({weeks: 1}),\n      end: endOfWeek(endOfDay(Now), locale).add({weeks: 1}),\n    }),\n  },\n  {\n    key: 4,\n    label: message('Last 7 days'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({days: 7}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 5,\n    label: message('Last 14 days'),\n    getRangeValue: () => ({\n      preset: 5,\n      start: Now.subtract({days: 14}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 6,\n    label: message('Last 30 days'),\n    getRangeValue: () => ({\n      preset: 6,\n      start: Now.subtract({days: 30}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 7,\n    label: message('Last 3 months'),\n    getRangeValue: () => ({\n      preset: 7,\n      start: Now.subtract({months: 3}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 8,\n    label: message('Last 12 months'),\n    getRangeValue: () => ({\n      preset: 8,\n      start: Now.subtract({months: 12}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 9,\n    label: message('This year'),\n    getRangeValue: () => ({\n      preset: 9,\n      start: startOfYear(Now),\n      end: endOfYear(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 10,\n    label: message('Last year'),\n    getRangeValue: () => ({\n      preset: 10,\n      start: startOfYear(Now).subtract({years: 1}),\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\n    }),\n  },\n];\n","import {List, ListItem} from '../../../../../list/list';\nimport {DateRangePresets} from './date-range-presets';\nimport {Trans} from '../../../../../../i18n/trans';\nimport {DateRangeValue} from '../date-range-value';\n\ninterface DatePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DatePresetList) {\n  return (\n    <List\n      className=\"min-w-192\"\n      padding=\"py-14\"\n      dataTestId=\"date-range-preset-list\"\n    >\n      {DateRangePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue();\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {useMediaQuery, UseMediaQueryOptions} from './use-media-query';\n\nexport function useIsTabletMediaQuery(options?: UseMediaQueryOptions) {\n  return useMediaQuery('(max-width: 1024px)', options);\n}\n","import React, {useRef} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {Calendar} from '../../calendar/calendar';\nimport {DialogFooter} from '../../../../../overlays/dialog/dialog-footer';\nimport {Button} from '../../../../../buttons/button';\nimport {useDialogContext} from '../../../../../overlays/dialog/dialog-context';\nimport {Dialog} from '../../../../../overlays/dialog/dialog';\nimport {DialogBody} from '../../../../../overlays/dialog/dialog-body';\nimport {ArrowRightAltIcon} from '../../../../../../icons/material/ArrowRightAlt';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {Trans} from '../../../../../../i18n/trans';\nimport {FormattedDateTimeRange} from '../../../../../../i18n/formatted-date-time-range';\nimport {DatePresetList} from './date-preset-list';\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  showInlineDatePickerField = false,\n}: DateRangeDialogProps) {\n  const isTablet = useIsTabletMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n\n  const footer = (\n    <DialogFooter\n      dividerTop\n      startAction={\n        !hasPlaceholder && !isTablet ? (\n          <div className=\"text-xs\">\n            <FormattedDateTimeRange\n              start={state.selectedValue.start.toDate()}\n              end={state.selectedValue.end.toDate()}\n              options={{dateStyle: 'medium'}}\n            />\n          </div>\n        ) : undefined\n      }\n    >\n      <Button\n        variant=\"text\"\n        size=\"xs\"\n        onClick={() => {\n          state.setSelectedValue(initialStateRef.current.selectedValue);\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n          close();\n        }}\n      >\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"xs\"\n        onClick={() => {\n          close(state.selectedValue);\n        }}\n      >\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && (\n          <DatePresetList\n            selectedValue={state.selectedValue}\n            onPresetSelected={preset => {\n              state.setSelectedValue(preset);\n              if (state.closeDialogOnSelection) {\n                close(preset);\n              }\n            }}\n          />\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            showInlineDatePickerField={showInlineDatePickerField}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n}\nfunction Calendars({state, showInlineDatePickerField}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pt-10 pb-20\"\n    >\n      {showInlineDatePickerField && <InlineDatePickerField state={state} />}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n}\nfunction InlineDatePickerField({state}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\">\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import {useDateRangePickerState} from '@common/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {DateRangeDialog} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog';\nimport React from 'react';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\n\nconst monthDayFormat: Intl.DateTimeFormatOptions = {\n  month: 'short',\n  day: '2-digit',\n};\n\ninterface ReportDataSelectorProps {\n  value: DateRangeValue;\n  onChange: (value: DateRangeValue) => void;\n  compactOnMobile?: boolean;\n}\nexport function ReportDateSelector({\n  value,\n  onChange,\n  compactOnMobile = true,\n}: ReportDataSelectorProps) {\n  const isMobile = useIsMobileMediaQuery();\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      onClose={value => {\n        if (value) {\n          onChange(value);\n        }\n      }}\n    >\n      <Button variant=\"outline\" color=\"chip\" endIcon={<DateRangeIcon />}>\n        <FormattedDateTimeRange\n          start={value.start}\n          end={value.end}\n          options={\n            isMobile && compactOnMobile\n              ? monthDayFormat\n              : DateFormatPresets.short\n          }\n        />\n      </Button>\n      <DateSelectorDialog value={value} />\n    </DialogTrigger>\n  );\n}\n\ninterface DateSelectorDialogProps {\n  value: DateRangeValue;\n}\nfunction DateSelectorDialog({value}: DateSelectorDialogProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const state = useDateRangePickerState({\n    defaultValue: value,\n    closeDialogOnSelection: false,\n  });\n  return (\n    <DateRangeDialog state={state} showInlineDatePickerField={!isMobile} />\n  );\n}\n","import {ReactNode, Ref} from 'react';\nimport clsx from 'clsx';\n\nexport interface ChartLayoutProps {\n  title: ReactNode;\n  description?: ReactNode;\n  className?: string;\n  children: ReactNode;\n  contentIsFlex?: boolean;\n  contentClassName?: string;\n  contentRef?: Ref<HTMLDivElement>;\n  isLoading?: boolean;\n}\nexport function ChartLayout(props: ChartLayoutProps) {\n  const {\n    title,\n    description,\n    children,\n    className,\n    contentIsFlex = true,\n    contentClassName,\n    contentRef,\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        'border rounded min-h-440 h-full flex flex-col flex-auto',\n        className\n      )}\n    >\n      <div className=\"text-xs p-14 flex-shrink-0 flex justify-between\">\n        <div className=\"font-semibold text-sm\">{title}</div>\n        {description && <div className=\"text-muted\">{description}</div>}\n      </div>\n      <div\n        ref={contentRef}\n        className={clsx(\n          'p-14 relative',\n          contentIsFlex && 'flex-auto flex items-center justify-center',\n          contentClassName\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n","import {ProgressCircle} from '@common/ui/progress/progress-circle';\nimport {Trans} from '@common/i18n/trans';\n\nexport function ChartLoadingIndicator() {\n  return (\n    <div className=\"flex items-center gap-10 text-sm absolute mx-auto\">\n      <ProgressCircle isIndeterminate size=\"sm\" />\n      <Trans message=\"Chart loading\" />\n    </div>\n  );\n}\n","import type {ChartData, ChartOptions, ChartType} from 'chart.js';\nimport {lazy, Suspense} from 'react';\nimport {ChartLayout, ChartLayoutProps} from './chart-layout';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\n\nconst LazyChart = lazy(() => import('./lazy-chart'));\n\nexport interface BaseChartProps<Type extends ChartType = ChartType>\n  extends Omit<ChartLayoutProps, 'children'> {\n  type: Type;\n  data: ChartData<Type, unknown>;\n  options?: ChartOptions<Type>;\n  hideLegend?: boolean;\n}\nexport function BaseChart<Type extends ChartType = ChartType>(\n  props: BaseChartProps<Type>\n) {\n  const {title, description, className, contentRef, isLoading} = props;\n\n  return (\n    <ChartLayout\n      title={title}\n      description={description}\n      className={className}\n      contentRef={contentRef}\n    >\n      <Suspense fallback={<ChartLoadingIndicator />}>\n        <LazyChart {...props} />\n        {isLoading && <ChartLoadingIndicator />}\n      </Suspense>\n    </ChartLayout>\n  );\n}\n","import {DateFormatter, parseAbsoluteToLocal} from '@internationalized/date';\nimport memoize from 'nano-memoize';\nimport {ChartType} from 'chart.js';\nimport {\n  FormattedDatasetItem,\n  FormattedReportData,\n} from './formatted-dataset-item';\nimport {\n  DatasetItem,\n  RangedDatasetGranularity,\n  ReportMetric,\n} from '../../admin/analytics/report-metric';\nimport {shallowEqual} from '../../utils/shallow-equal';\n\ninterface Options {\n  localeCode: string;\n  shareFirstDatasetLabels?: boolean;\n}\n\ntype FormattedDatasetLabels = Omit<FormattedDatasetItem, 'value'>;\n\nexport function formatReportData(\n  report: ReportMetric | undefined,\n  {localeCode = 'en', shareFirstDatasetLabels = true}: Options\n): FormattedReportData {\n  if (!report) return {datasets: []};\n\n  const firstDatasetLabels: FormattedDatasetLabels[] = [];\n\n  return {\n    ...report,\n    datasets: report.datasets.map((dataset, datasetIndex) => {\n      const data = dataset.data.map((datasetItem, itemIndex) => {\n        let label: FormattedDatasetLabels;\n        // when there are multiple datasets, we'll need to use labels from the first dataset, so charts are\n        // overlapped over one another, otherwise they will be side by side, if labels in all datasets are not identical.\n        if (datasetIndex === 0 || !shareFirstDatasetLabels) {\n          label = generateDatasetLabels(\n            datasetItem,\n            report.granularity,\n            localeCode\n          );\n          firstDatasetLabels[itemIndex] = label;\n        } else {\n          label = firstDatasetLabels[itemIndex];\n        }\n        return {\n          ...label,\n          value: datasetItem.value,\n        };\n      });\n\n      return {...dataset, data};\n    }),\n  };\n}\n\nfunction generateDatasetLabels<T extends ChartType = ChartType>(\n  datum: DatasetItem,\n  granularity: RangedDatasetGranularity | undefined,\n  locale: string\n): FormattedDatasetLabels {\n  if (datum.label != null) {\n    return {label: datum.label};\n  }\n\n  if (!datum.date) {\n    return {label: ''};\n  }\n\n  return generateTimeLabels(datum, granularity, locale);\n}\n\nfunction generateTimeLabels(\n  {date: isoDate, endDate: isoEndDate, value}: DatasetItem,\n  granularity: RangedDatasetGranularity | undefined = 'day',\n  locale: string\n): Omit<FormattedDatasetItem, 'value'> {\n  const date = parseAbsoluteToLocal(isoDate).toDate();\n  const endDate = isoEndDate ? parseAbsoluteToLocal(isoEndDate).toDate() : null;\n\n  switch (granularity) {\n    case 'minute':\n      return {\n        label: getFormatter(locale, {\n          second: '2-digit',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          hour: 'numeric',\n          minute: 'numeric',\n          second: '2-digit',\n        }).format(date),\n      };\n    case 'hour':\n      return {\n        label: getFormatter(locale, {\n          hour: 'numeric',\n          minute: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          month: 'short',\n          day: '2-digit',\n          hour: 'numeric',\n          minute: 'numeric',\n        }).format(date),\n      };\n    case 'day':\n      return {\n        label: getFormatter(locale, {\n          day: '2-digit',\n          weekday: 'short',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          weekday: 'short',\n          month: 'short',\n        }).format(date),\n      };\n    case 'week':\n      return {\n        label: getFormatter(locale, {\n          month: 'short',\n          day: '2-digit',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          month: 'long',\n          year: 'numeric',\n        }).formatRange(date, endDate as Date),\n      };\n    case 'month':\n      return {\n        label: getFormatter(locale, {\n          month: 'short',\n          year: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          month: 'long',\n          year: 'numeric',\n        }).format(date),\n      };\n    case 'year':\n      return {\n        label: getFormatter(locale, {\n          year: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          year: 'numeric',\n        }).format(date),\n      };\n  }\n}\n\nconst getFormatter = memoize(\n  (locale, options: Intl.DateTimeFormatOptions) => {\n    return new DateFormatter(locale, options);\n  },\n  {\n    equals: (a, b) => {\n      return shallowEqual(a, b);\n    },\n    callTimeout: undefined as any,\n  }\n);\n","export const ChartColors = [\n  ['rgb(66,165,245)', 'rgba(66,165,245,0.2)'],\n  ['rgb(102,187,106)', 'rgba(102,187,106,0.2)'],\n  ['rgb(255,112,67)', 'rgb(255,112,67,0.2)'],\n  ['rgb(92,107,192)', 'rgb(92,107,192,0.2)'],\n  ['rgb(141,110,99)', 'rgb(141,110,99,0.2)'],\n  ['rgb(255,167,38)', 'rgb(255,167,38,0.2)'],\n];\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {ReportMetric} from '../admin/analytics/report-metric';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {useSelectedLocale} from '../i18n/selected-locale';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\nimport clsx from 'clsx';\n\nconst LineChartOptions: ChartOptions<'line'> = {\n  parsing: {\n    xAxisKey: 'label',\n    yAxisKey: 'value',\n  },\n  datasets: {\n    line: {\n      fill: 'origin',\n      tension: 0.1,\n      pointBorderWidth: 4,\n      pointHitRadius: 10,\n    },\n  },\n  plugins: {\n    tooltip: {\n      intersect: false,\n      mode: 'index',\n    },\n  },\n};\n\ninterface LineChartProps extends Omit<BaseChartProps<'line'>, 'type' | 'data'> {\n  data?: ReportMetric;\n}\nexport function LineChart({data, className, ...props}: LineChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'line', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: ChartColors[i][1],\n        borderColor: ChartColors[i][0],\n        pointBackgroundColor: ChartColors[i][0],\n      }));\n      return formattedData;\n    }, [data, localeCode]);\n\n  return (\n    <BaseChart\n      {...props}\n      className={clsx(className, 'min-w-500')}\n      data={formattedData}\n      type=\"line\"\n      options={LineChartOptions}\n    />\n  );\n}\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {useSelectedLocale} from '../i18n/selected-locale';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {ReportMetric} from '../admin/analytics/report-metric';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\nimport clsx from 'clsx';\n\nconst PolarAreaChartOptions: ChartOptions<'polarArea'> = {\n  parsing: {\n    key: 'value',\n  },\n  plugins: {\n    tooltip: {\n      intersect: true,\n    },\n  },\n};\n\ninterface PolarAreaChartProps\n  extends Omit<BaseChartProps<'polarArea'>, 'type' | 'data'> {\n  data?: ReportMetric;\n}\nexport function PolarAreaChart({\n  data,\n  className,\n  ...props\n}: PolarAreaChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'polarArea', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.labels = formattedData.datasets[0]?.data.map(d => d.label);\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: ChartColors.map(c => c[1]),\n        borderColor: ChartColors.map(c => c[0]),\n        borderWidth: 2,\n      }));\n      return formattedData;\n    }, [data, localeCode]);\n\n  return (\n    <BaseChart\n      type=\"polarArea\"\n      data={formattedData}\n      options={PolarAreaChartOptions}\n      className={clsx(className, 'min-w-500')}\n      {...props}\n    />\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {ChartLayout, ChartLayoutProps} from '@common/charts/chart-layout';\nimport React from 'react';\nimport {ReportMetric} from '@common/admin/analytics/report-metric';\nimport clsx from 'clsx';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\n\ninterface ReferrerChartProps extends Partial<ChartLayoutProps> {\n  data?: ReportMetric;\n}\nexport function ReferrerChart({\n  data,\n  isLoading,\n  ...layoutProps\n}: ReferrerChartProps) {\n  const dataItems = data?.datasets[0].data || [];\n  return (\n    <ChartLayout\n      {...layoutProps}\n      className=\"min-w-500 md:min-w-0 w-1/2\"\n      title={<Trans message=\"Referrers\" />}\n      contentIsFlex={isLoading}\n      contentClassName=\"max-h-[370px] overflow-y-auto\"\n    >\n      {isLoading && <ChartLoadingIndicator />}\n      {dataItems.map((dataItem, index) => (\n        <div\n          key={dataItem.label || index}\n          className=\"mb-20 text-sm flex items-center justify-between gap-24\"\n        >\n          {dataItem.label ? (\n            <div className=\"flex items-center gap-8\">\n              <RemoteFavicon url={dataItem.label} />\n              <a\n                className={clsx(LinkStyle, 'lowercase')}\n                href={dataItem.label}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                {removeProtocol(dataItem.label)}\n              </a>\n            </div>\n          ) : (\n            <Trans message=\"Direct, Email, SMS\" />\n          )}\n          <Chip\n            radius=\"rounded\"\n            size=\"xs\"\n            color=\"primary\"\n            className=\"font-semibold\"\n          >\n            {dataItem.value}\n          </Chip>\n        </div>\n      ))}\n    </ChartLayout>\n  );\n}\n","import {clamp as $cBgAy$clamp, toFixedNumber as $cBgAy$toFixedNumber, useControlledState as $cBgAy$useControlledState, snapValueToStep as $cBgAy$snapValueToStep} from \"@react-stately/utils\";\nimport {LocalizedStringDictionary as $cBgAy$LocalizedStringDictionary} from \"@internationalized/string\";\nimport {NumberFormatter as $cBgAy$NumberFormatter} from \"@internationalized/number\";\nimport {useRef as $cBgAy$useRef, useMemo as $cBgAy$useMemo, useState as $cBgAy$useState} from \"react\";\nimport {useSliderState as $cBgAy$useSliderState} from \"@react-stately/slider\";\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nvar $7a451c0c6841e6b9$exports = {};\nvar $2d805fd52bb48883$exports = {};\n$2d805fd52bb48883$exports = {\n    \"alpha\": `ألفا`,\n    \"blue\": `أزرق`,\n    \"brightness\": `السطوع`,\n    \"green\": `أخضر`,\n    \"hue\": `درجة اللون`,\n    \"lightness\": `الإضاءة`,\n    \"red\": `أحمر`,\n    \"saturation\": `التشبع`\n};\n\n\nvar $6c28468dc1df643c$exports = {};\n$6c28468dc1df643c$exports = {\n    \"alpha\": `Алфа`,\n    \"blue\": `Синьо`,\n    \"brightness\": `Яркост`,\n    \"green\": `Зелено`,\n    \"hue\": `Оттенък`,\n    \"lightness\": `Лекота`,\n    \"red\": `Червено`,\n    \"saturation\": `Наситеност`\n};\n\n\nvar $807554f8230db0ed$exports = {};\n$807554f8230db0ed$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Modrá`,\n    \"brightness\": `Jas`,\n    \"green\": `Zelená`,\n    \"hue\": `Odstín`,\n    \"lightness\": `Světlost`,\n    \"red\": `Červená`,\n    \"saturation\": `Sytost`\n};\n\n\nvar $7097f64386f1761c$exports = {};\n$7097f64386f1761c$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Blå`,\n    \"brightness\": `Lysstyrke`,\n    \"green\": `Grøn`,\n    \"hue\": `Tone`,\n    \"lightness\": `Lyshed`,\n    \"red\": `Rød`,\n    \"saturation\": `Farvemætning`\n};\n\n\nvar $bdd847d8beb08799$exports = {};\n$bdd847d8beb08799$exports = {\n    \"alpha\": `Alpha`,\n    \"blue\": `Blau`,\n    \"brightness\": `Helligkeit`,\n    \"green\": `Grün`,\n    \"hue\": `Farbton`,\n    \"lightness\": `Leuchtkraft`,\n    \"red\": `Rot`,\n    \"saturation\": `Sättigung`\n};\n\n\nvar $a53e00b683950971$exports = {};\n$a53e00b683950971$exports = {\n    \"alpha\": `Άλφα`,\n    \"blue\": `Μπλε`,\n    \"brightness\": `Φωτεινότητα`,\n    \"green\": `Πράσινο`,\n    \"hue\": `Τόνος`,\n    \"lightness\": `Φωτεινότητα`,\n    \"red\": `Κόκκινο`,\n    \"saturation\": `Κορεσμός`\n};\n\n\nvar $21cdd87e84f28d89$exports = {};\n$21cdd87e84f28d89$exports = {\n    \"hue\": `Hue`,\n    \"saturation\": `Saturation`,\n    \"lightness\": `Lightness`,\n    \"brightness\": `Brightness`,\n    \"red\": `Red`,\n    \"green\": `Green`,\n    \"blue\": `Blue`,\n    \"alpha\": `Alpha`\n};\n\n\nvar $92fee9698e4d675a$exports = {};\n$92fee9698e4d675a$exports = {\n    \"alpha\": `Alpha`,\n    \"blue\": `Azul`,\n    \"brightness\": `Brillo`,\n    \"green\": `Verde`,\n    \"hue\": `Tono`,\n    \"lightness\": `Luminosidad`,\n    \"red\": `Rojo`,\n    \"saturation\": `Saturación`\n};\n\n\nvar $7ea012e91a5ad3ee$exports = {};\n$7ea012e91a5ad3ee$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Sinine`,\n    \"brightness\": `Heledus`,\n    \"green\": `Roheline`,\n    \"hue\": `Värv`,\n    \"lightness\": `Valgus`,\n    \"red\": `Punane`,\n    \"saturation\": `Küllastus`\n};\n\n\nvar $8460c13bb2d75345$exports = {};\n$8460c13bb2d75345$exports = {\n    \"alpha\": `Alpha`,\n    \"blue\": `Sininen`,\n    \"brightness\": `Kirkkaus`,\n    \"green\": `Vihreä`,\n    \"hue\": `Sävy`,\n    \"lightness\": `Valomäärä`,\n    \"red\": `Punainen`,\n    \"saturation\": `Värikylläisyys`\n};\n\n\nvar $2a2d5dc14e680587$exports = {};\n$2a2d5dc14e680587$exports = {\n    \"alpha\": `Alpha`,\n    \"blue\": `Bleu`,\n    \"brightness\": `Luminosité`,\n    \"green\": `Vert`,\n    \"hue\": `Teinte`,\n    \"lightness\": `Luminosité`,\n    \"red\": `Rouge`,\n    \"saturation\": `Saturation`\n};\n\n\nvar $9a3f292371bb0589$exports = {};\n$9a3f292371bb0589$exports = {\n    \"alpha\": `אלפא`,\n    \"blue\": `כחול`,\n    \"brightness\": `בהירות`,\n    \"green\": `ירוק`,\n    \"hue\": `גוון`,\n    \"lightness\": `כמות אור`,\n    \"red\": `אדום`,\n    \"saturation\": `רוויה`\n};\n\n\nvar $4742231a685fa068$exports = {};\n$4742231a685fa068$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Plava`,\n    \"brightness\": `Svjetlina`,\n    \"green\": `Zelena`,\n    \"hue\": `Nijansa`,\n    \"lightness\": `Osvijetljenost`,\n    \"red\": `Crvena`,\n    \"saturation\": `Zasićenost`\n};\n\n\nvar $05e247fd2960981e$exports = {};\n$05e247fd2960981e$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Kék`,\n    \"brightness\": `Fényesség`,\n    \"green\": `Zöld`,\n    \"hue\": `Színárnyalat`,\n    \"lightness\": `Világosság`,\n    \"red\": `Piros`,\n    \"saturation\": `Telítettség`\n};\n\n\nvar $a67524a79ccbe190$exports = {};\n$a67524a79ccbe190$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Blu`,\n    \"brightness\": `Luminosità`,\n    \"green\": `Verde`,\n    \"hue\": `Tonalità`,\n    \"lightness\": `Luminosità`,\n    \"red\": `Rosso`,\n    \"saturation\": `Saturazione`\n};\n\n\nvar $a9eefe9d6c8cb7d5$exports = {};\n$a9eefe9d6c8cb7d5$exports = {\n    \"alpha\": `アルファ`,\n    \"blue\": `青`,\n    \"brightness\": `明るさ`,\n    \"green\": `緑`,\n    \"hue\": `色相`,\n    \"lightness\": `明度`,\n    \"red\": `赤`,\n    \"saturation\": `彩度`\n};\n\n\nvar $4a6b836d4f1bfaba$exports = {};\n$4a6b836d4f1bfaba$exports = {\n    \"alpha\": `알파`,\n    \"blue\": `파랑`,\n    \"brightness\": `명도`,\n    \"green\": `초록`,\n    \"hue\": `색조`,\n    \"lightness\": `밝기`,\n    \"red\": `빨강`,\n    \"saturation\": `채도`\n};\n\n\nvar $c950e4b1c482abde$exports = {};\n$c950e4b1c482abde$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Mėlyna`,\n    \"brightness\": `Ryškumas`,\n    \"green\": `Žalia`,\n    \"hue\": `Atspalvis`,\n    \"lightness\": `Šviesumas`,\n    \"red\": `Raudona`,\n    \"saturation\": `Įsotinimas`\n};\n\n\nvar $d10d6b60dc50b438$exports = {};\n$d10d6b60dc50b438$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Zila`,\n    \"brightness\": `Spilgtums`,\n    \"green\": `Zaļa`,\n    \"hue\": `Nokrāsa`,\n    \"lightness\": `Gaišums`,\n    \"red\": `Sarkana`,\n    \"saturation\": `Piesātinājums`\n};\n\n\nvar $371a732b2494f452$exports = {};\n$371a732b2494f452$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Blå`,\n    \"brightness\": `Lysstyrke`,\n    \"green\": `Grønn`,\n    \"hue\": `Fargetone`,\n    \"lightness\": `Lyshet`,\n    \"red\": `Rød`,\n    \"saturation\": `Metning`\n};\n\n\nvar $6d042cae6243464b$exports = {};\n$6d042cae6243464b$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Blauw`,\n    \"brightness\": `Helderheid`,\n    \"green\": `Groen`,\n    \"hue\": `Kleurtoon`,\n    \"lightness\": `Lichtsterkte`,\n    \"red\": `Rood`,\n    \"saturation\": `Verzadiging`\n};\n\n\nvar $d9ab5c2611e0bcd3$exports = {};\n$d9ab5c2611e0bcd3$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Niebieski`,\n    \"brightness\": `Jasność`,\n    \"green\": `Zielony`,\n    \"hue\": `Odcień`,\n    \"lightness\": `Jaskrawość`,\n    \"red\": `Czerwony`,\n    \"saturation\": `Nasycenie`\n};\n\n\nvar $73f77c9902e29ca6$exports = {};\n$73f77c9902e29ca6$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Azul`,\n    \"brightness\": `Brilho`,\n    \"green\": `Verde`,\n    \"hue\": `Matiz`,\n    \"lightness\": `Luminosidade`,\n    \"red\": `Vermelho`,\n    \"saturation\": `Saturação`\n};\n\n\nvar $4f461eb266a95c10$exports = {};\n$4f461eb266a95c10$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Azul`,\n    \"brightness\": `Luminosidade`,\n    \"green\": `Verde`,\n    \"hue\": `Tonalidade`,\n    \"lightness\": `Claridade`,\n    \"red\": `Vermelho`,\n    \"saturation\": `Saturação`\n};\n\n\nvar $dc46bea2f2597899$exports = {};\n$dc46bea2f2597899$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Albastru`,\n    \"brightness\": `Luminozitate`,\n    \"green\": `Verde`,\n    \"hue\": `Nuanță`,\n    \"lightness\": `Luminozitate`,\n    \"red\": `Roșu`,\n    \"saturation\": `Saturație`\n};\n\n\nvar $622bbd6719cc95af$exports = {};\n$622bbd6719cc95af$exports = {\n    \"alpha\": `Альфа`,\n    \"blue\": `Синий`,\n    \"brightness\": `Яркость`,\n    \"green\": `Зеленый`,\n    \"hue\": `Оттенок`,\n    \"lightness\": `Освещенность`,\n    \"red\": `Красный`,\n    \"saturation\": `Насыщенность`\n};\n\n\nvar $4da03c1ecd9a9c7d$exports = {};\n$4da03c1ecd9a9c7d$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Modrá`,\n    \"brightness\": `Jas`,\n    \"green\": `Zelená`,\n    \"hue\": `Odtieň`,\n    \"lightness\": `Svetlosť`,\n    \"red\": `Červená`,\n    \"saturation\": `Sýtosť`\n};\n\n\nvar $edb6b2fe456ed4e8$exports = {};\n$edb6b2fe456ed4e8$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Modra`,\n    \"brightness\": `Svetlost`,\n    \"green\": `Zelena`,\n    \"hue\": `Barva`,\n    \"lightness\": `Lahkost`,\n    \"red\": `Rdeča`,\n    \"saturation\": `Nasičenost`\n};\n\n\nvar $264cd81c52b30815$exports = {};\n$264cd81c52b30815$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Plava`,\n    \"brightness\": `Osvetljenost`,\n    \"green\": `Zelena`,\n    \"hue\": `Nijansa`,\n    \"lightness\": `Osvetljenje`,\n    \"red\": `Crvena`,\n    \"saturation\": `Zasićenje`\n};\n\n\nvar $6f80afde0270dda7$exports = {};\n$6f80afde0270dda7$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Blått`,\n    \"brightness\": `Ljusstyrka`,\n    \"green\": `Grönt`,\n    \"hue\": `Nyans`,\n    \"lightness\": `Ljushet`,\n    \"red\": `Rött`,\n    \"saturation\": `Mättnad`\n};\n\n\nvar $23a92651c6957668$exports = {};\n$23a92651c6957668$exports = {\n    \"alpha\": `Alfa`,\n    \"blue\": `Mavi`,\n    \"brightness\": `Parlaklık`,\n    \"green\": `Yeşil`,\n    \"hue\": `Ton`,\n    \"lightness\": `Canlılık`,\n    \"red\": `Kırmızı`,\n    \"saturation\": `Doygunluk`\n};\n\n\nvar $0f9b1074d04f4954$exports = {};\n$0f9b1074d04f4954$exports = {\n    \"alpha\": `Альфа`,\n    \"blue\": `Синій`,\n    \"brightness\": `Яскравість`,\n    \"green\": `Зелений`,\n    \"hue\": `Тон`,\n    \"lightness\": `Освітленість`,\n    \"red\": `Червоний`,\n    \"saturation\": `Насиченість`\n};\n\n\nvar $a9cedf75b94e4916$exports = {};\n$a9cedf75b94e4916$exports = {\n    \"alpha\": `Alpha`,\n    \"blue\": `蓝色`,\n    \"brightness\": `亮度`,\n    \"green\": `绿色`,\n    \"hue\": `色相`,\n    \"lightness\": `明亮度`,\n    \"red\": `红色`,\n    \"saturation\": `饱和度`\n};\n\n\nvar $37cff576474bc8d4$exports = {};\n$37cff576474bc8d4$exports = {\n    \"alpha\": `Alpha`,\n    \"blue\": `藍色`,\n    \"brightness\": `亮度`,\n    \"green\": `綠色`,\n    \"hue\": `色相`,\n    \"lightness\": `明亮`,\n    \"red\": `紅色`,\n    \"saturation\": `飽和度`\n};\n\n\n$7a451c0c6841e6b9$exports = {\n    \"ar-AE\": $2d805fd52bb48883$exports,\n    \"bg-BG\": $6c28468dc1df643c$exports,\n    \"cs-CZ\": $807554f8230db0ed$exports,\n    \"da-DK\": $7097f64386f1761c$exports,\n    \"de-DE\": $bdd847d8beb08799$exports,\n    \"el-GR\": $a53e00b683950971$exports,\n    \"en-US\": $21cdd87e84f28d89$exports,\n    \"es-ES\": $92fee9698e4d675a$exports,\n    \"et-EE\": $7ea012e91a5ad3ee$exports,\n    \"fi-FI\": $8460c13bb2d75345$exports,\n    \"fr-FR\": $2a2d5dc14e680587$exports,\n    \"he-IL\": $9a3f292371bb0589$exports,\n    \"hr-HR\": $4742231a685fa068$exports,\n    \"hu-HU\": $05e247fd2960981e$exports,\n    \"it-IT\": $a67524a79ccbe190$exports,\n    \"ja-JP\": $a9eefe9d6c8cb7d5$exports,\n    \"ko-KR\": $4a6b836d4f1bfaba$exports,\n    \"lt-LT\": $c950e4b1c482abde$exports,\n    \"lv-LV\": $d10d6b60dc50b438$exports,\n    \"nb-NO\": $371a732b2494f452$exports,\n    \"nl-NL\": $6d042cae6243464b$exports,\n    \"pl-PL\": $d9ab5c2611e0bcd3$exports,\n    \"pt-BR\": $73f77c9902e29ca6$exports,\n    \"pt-PT\": $4f461eb266a95c10$exports,\n    \"ro-RO\": $dc46bea2f2597899$exports,\n    \"ru-RU\": $622bbd6719cc95af$exports,\n    \"sk-SK\": $4da03c1ecd9a9c7d$exports,\n    \"sl-SI\": $edb6b2fe456ed4e8$exports,\n    \"sr-SP\": $264cd81c52b30815$exports,\n    \"sv-SE\": $6f80afde0270dda7$exports,\n    \"tr-TR\": $23a92651c6957668$exports,\n    \"uk-UA\": $0f9b1074d04f4954$exports,\n    \"zh-CN\": $a9cedf75b94e4916$exports,\n    \"zh-TW\": $37cff576474bc8d4$exports\n};\n\n\n\n\nconst $799cddbef784668f$var$strings = new $cBgAy$LocalizedStringDictionary((/*@__PURE__*/$parcel$interopDefault($7a451c0c6841e6b9$exports)));\nfunction $799cddbef784668f$export$6e865ea70d7724f(value) {\n    let res = $799cddbef784668f$var$RGBColor.parse(value) || $799cddbef784668f$var$HSBColor.parse(value) || $799cddbef784668f$var$HSLColor.parse(value);\n    if (res) return res;\n    throw new Error('Invalid color value: ' + value);\n}\nfunction $799cddbef784668f$export$4cde5df63f53f473(v) {\n    if (typeof v === 'string') return $799cddbef784668f$export$6e865ea70d7724f(v);\n    else return v;\n}\nclass $799cddbef784668f$var$Color {\n    toHexInt() {\n        return this.toFormat('rgb').toHexInt();\n    }\n    getChannelValue(channel) {\n        if (channel in this) return this[channel];\n        throw new Error('Unsupported color channel: ' + channel);\n    }\n    withChannelValue(channel, value) {\n        if (channel in this) {\n            let x = this.clone();\n            x[channel] = value;\n            return x;\n        }\n        throw new Error('Unsupported color channel: ' + channel);\n    }\n    getChannelName(channel, locale) {\n        return $799cddbef784668f$var$strings.getStringForLocale(channel, locale);\n    }\n    getColorSpaceAxes(xyChannels) {\n        let { xChannel: xChannel , yChannel: yChannel  } = xyChannels;\n        let xCh = xChannel || this.getColorChannels().find((c)=>c !== yChannel\n        );\n        let yCh = yChannel || this.getColorChannels().find((c)=>c !== xCh\n        );\n        let zCh = this.getColorChannels().find((c)=>c !== xCh && c !== yCh\n        );\n        return {\n            xChannel: xCh,\n            yChannel: yCh,\n            zChannel: zCh\n        };\n    }\n}\nclass $799cddbef784668f$var$RGBColor extends $799cddbef784668f$var$Color {\n    static parse(value1) {\n        let colors = [];\n        // matching #rgb, #rgba, #rrggbb, #rrggbbaa\n        if (/^#[\\da-f]+$/i.test(value1) && [\n            4,\n            5,\n            7,\n            9\n        ].includes(value1.length)) {\n            const values = (value1.length < 6 ? value1.replace(/[^#]/gi, '$&$&') : value1).slice(1).split('');\n            while(values.length > 0)colors.push(parseInt(values.splice(0, 2).join(''), 16));\n            colors[3] = colors[3] !== undefined ? colors[3] / 255 : undefined;\n        }\n        // matching rgb(rrr, ggg, bbb), rgba(rrr, ggg, bbb, 0.a)\n        const match = value1.match(/^rgba?\\((.*)\\)$/);\n        if (match === null || match === void 0 ? void 0 : match[1]) {\n            colors = match[1].split(',').map((value)=>Number(value.trim())\n            );\n            colors = colors.map((num, i)=>$cBgAy$clamp(num, 0, i < 3 ? 255 : 1)\n            );\n        }\n        var ref;\n        return colors.length < 3 ? undefined : new $799cddbef784668f$var$RGBColor(colors[0], colors[1], colors[2], (ref = colors[3]) !== null && ref !== void 0 ? ref : 1);\n    }\n    toString(format) {\n        switch(format){\n            case 'hex':\n                return '#' + (this.red.toString(16).padStart(2, '0') + this.green.toString(16).padStart(2, '0') + this.blue.toString(16).padStart(2, '0')).toUpperCase();\n            case 'hexa':\n                return '#' + (this.red.toString(16).padStart(2, '0') + this.green.toString(16).padStart(2, '0') + this.blue.toString(16).padStart(2, '0') + Math.round(this.alpha * 255).toString(16).padStart(2, '0')).toUpperCase();\n            case 'rgb':\n                return `rgb(${this.red}, ${this.green}, ${this.blue})`;\n            case 'css':\n            case 'rgba':\n                return `rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;\n            default:\n                return this.toFormat(format).toString(format);\n        }\n    }\n    toFormat(format) {\n        switch(format){\n            case 'hex':\n            case 'hexa':\n            case 'rgb':\n            case 'rgba':\n                return this;\n            case 'hsb':\n            case 'hsba':\n                return this.toHSB();\n            case 'hsl':\n            case 'hsla':\n                return this.toHSL();\n            default:\n                throw new Error('Unsupported color conversion: rgb -> ' + format);\n        }\n    }\n    toHexInt() {\n        return this.red << 16 | this.green << 8 | this.blue;\n    }\n    /**\n   * Converts an RGB color value to HSB.\n   * Conversion formula adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#From_RGB.\n   * @returns An HSBColor object.\n   */ toHSB() {\n        const red = this.red / 255;\n        const green = this.green / 255;\n        const blue = this.blue / 255;\n        const min = Math.min(red, green, blue);\n        const brightness = Math.max(red, green, blue);\n        const chroma = brightness - min;\n        const saturation = brightness === 0 ? 0 : chroma / brightness;\n        let hue = 0; // achromatic\n        if (chroma !== 0) {\n            switch(brightness){\n                case red:\n                    hue = (green - blue) / chroma + (green < blue ? 6 : 0);\n                    break;\n                case green:\n                    hue = (blue - red) / chroma + 2;\n                    break;\n                case blue:\n                    hue = (red - green) / chroma + 4;\n                    break;\n            }\n            hue /= 6;\n        }\n        return new $799cddbef784668f$var$HSBColor($cBgAy$toFixedNumber(hue * 360, 2), $cBgAy$toFixedNumber(saturation * 100, 2), $cBgAy$toFixedNumber(brightness * 100, 2), this.alpha);\n    }\n    /**\n   * Converts an RGB color value to HSL.\n   * Conversion formula adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#From_RGB.\n   * @returns An HSLColor object.\n   */ toHSL() {\n        const red = this.red / 255;\n        const green = this.green / 255;\n        const blue = this.blue / 255;\n        const min = Math.min(red, green, blue);\n        const max = Math.max(red, green, blue);\n        const lightness = (max + min) / 2;\n        const chroma = max - min;\n        let hue;\n        let saturation;\n        if (chroma === 0) hue = saturation = 0; // achromatic\n        else {\n            saturation = chroma / (lightness < 0.5 ? max + min : 2 - max - min);\n            switch(max){\n                case red:\n                    hue = (green - blue) / chroma + (green < blue ? 6 : 0);\n                    break;\n                case green:\n                    hue = (blue - red) / chroma + 2;\n                    break;\n                case blue:\n                    hue = (red - green) / chroma + 4;\n                    break;\n            }\n            hue /= 6;\n        }\n        return new $799cddbef784668f$var$HSLColor($cBgAy$toFixedNumber(hue * 360, 2), $cBgAy$toFixedNumber(saturation * 100, 2), $cBgAy$toFixedNumber(lightness * 100, 2), this.alpha);\n    }\n    clone() {\n        return new $799cddbef784668f$var$RGBColor(this.red, this.green, this.blue, this.alpha);\n    }\n    getChannelRange(channel) {\n        switch(channel){\n            case 'red':\n            case 'green':\n            case 'blue':\n                return {\n                    minValue: 0,\n                    maxValue: 255,\n                    step: 1,\n                    pageSize: 17\n                };\n            case 'alpha':\n                return {\n                    minValue: 0,\n                    maxValue: 1,\n                    step: 0.01,\n                    pageSize: 0.1\n                };\n            default:\n                throw new Error('Unknown color channel: ' + channel);\n        }\n    }\n    formatChannelValue(channel, locale) {\n        let options;\n        let value = this.getChannelValue(channel);\n        switch(channel){\n            case 'red':\n            case 'green':\n            case 'blue':\n                options = {\n                    style: 'decimal'\n                };\n                break;\n            case 'alpha':\n                options = {\n                    style: 'percent'\n                };\n                break;\n            default:\n                throw new Error('Unknown color channel: ' + channel);\n        }\n        return new $cBgAy$NumberFormatter(locale, options).format(value);\n    }\n    getColorSpace() {\n        return 'rgb';\n    }\n    getColorChannels() {\n        return $799cddbef784668f$var$RGBColor.colorChannels;\n    }\n    constructor(red, green, blue, alpha){\n        super();\n        this.red = red;\n        this.green = green;\n        this.blue = blue;\n        this.alpha = alpha;\n    }\n}\n$799cddbef784668f$var$RGBColor.colorChannels = [\n    'red',\n    'green',\n    'blue'\n];\n// X = <negative/positive number with/without decimal places>\n// before/after a comma, 0 or more whitespaces are allowed\n// - hsb(X, X%, X%)\n// - hsba(X, X%, X%, X)\nconst $799cddbef784668f$var$HSB_REGEX = /hsb\\(([-+]?\\d+(?:.\\d+)?\\s*,\\s*[-+]?\\d+(?:.\\d+)?%\\s*,\\s*[-+]?\\d+(?:.\\d+)?%)\\)|hsba\\(([-+]?\\d+(?:.\\d+)?\\s*,\\s*[-+]?\\d+(?:.\\d+)?%\\s*,\\s*[-+]?\\d+(?:.\\d+)?%\\s*,\\s*[-+]?\\d(.\\d+)?)\\)/;\nclass $799cddbef784668f$var$HSBColor extends $799cddbef784668f$var$Color {\n    static parse(value) {\n        let m;\n        if (m = value.match($799cddbef784668f$var$HSB_REGEX)) {\n            var ref;\n            const [h, s, b, a] = ((ref = m[1]) !== null && ref !== void 0 ? ref : m[2]).split(',').map((n)=>Number(n.trim().replace('%', ''))\n            );\n            return new $799cddbef784668f$var$HSBColor($799cddbef784668f$var$mod(h, 360), $cBgAy$clamp(s, 0, 100), $cBgAy$clamp(b, 0, 100), $cBgAy$clamp(a !== null && a !== void 0 ? a : 1, 0, 1));\n        }\n    }\n    toString(format) {\n        switch(format){\n            case 'css':\n                return this.toHSL().toString('css');\n            case 'hex':\n                return this.toRGB().toString('hex');\n            case 'hexa':\n                return this.toRGB().toString('hexa');\n            case 'hsb':\n                return `hsb(${this.hue}, ${$cBgAy$toFixedNumber(this.saturation, 2)}%, ${$cBgAy$toFixedNumber(this.brightness, 2)}%)`;\n            case 'hsba':\n                return `hsba(${this.hue}, ${$cBgAy$toFixedNumber(this.saturation, 2)}%, ${$cBgAy$toFixedNumber(this.brightness, 2)}%, ${this.alpha})`;\n            default:\n                return this.toFormat(format).toString(format);\n        }\n    }\n    toFormat(format) {\n        switch(format){\n            case 'hsb':\n            case 'hsba':\n                return this;\n            case 'hsl':\n            case 'hsla':\n                return this.toHSL();\n            case 'rgb':\n            case 'rgba':\n                return this.toRGB();\n            default:\n                throw new Error('Unsupported color conversion: hsb -> ' + format);\n        }\n    }\n    /**\n   * Converts a HSB color to HSL.\n   * Conversion formula adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#HSV_to_HSL.\n   * @returns An HSLColor object.\n   */ toHSL() {\n        let saturation = this.saturation / 100;\n        let brightness = this.brightness / 100;\n        let lightness = brightness * (1 - saturation / 2);\n        saturation = lightness === 0 || lightness === 1 ? 0 : (brightness - lightness) / Math.min(lightness, 1 - lightness);\n        return new $799cddbef784668f$var$HSLColor($cBgAy$toFixedNumber(this.hue, 2), $cBgAy$toFixedNumber(saturation * 100, 2), $cBgAy$toFixedNumber(lightness * 100, 2), this.alpha);\n    }\n    /**\n   * Converts a HSV color value to RGB.\n   * Conversion formula adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#HSV_to_RGB_alternative.\n   * @returns An RGBColor object.\n   */ toRGB() {\n        let hue = this.hue;\n        let saturation = this.saturation / 100;\n        let brightness = this.brightness / 100;\n        let fn = (n, k = (n + hue / 60) % 6)=>brightness - saturation * brightness * Math.max(Math.min(k, 4 - k, 1), 0)\n        ;\n        return new $799cddbef784668f$var$RGBColor(Math.round(fn(5) * 255), Math.round(fn(3) * 255), Math.round(fn(1) * 255), this.alpha);\n    }\n    clone() {\n        return new $799cddbef784668f$var$HSBColor(this.hue, this.saturation, this.brightness, this.alpha);\n    }\n    getChannelRange(channel) {\n        switch(channel){\n            case 'hue':\n                return {\n                    minValue: 0,\n                    maxValue: 360,\n                    step: 1,\n                    pageSize: 15\n                };\n            case 'saturation':\n            case 'brightness':\n                return {\n                    minValue: 0,\n                    maxValue: 100,\n                    step: 1,\n                    pageSize: 10\n                };\n            case 'alpha':\n                return {\n                    minValue: 0,\n                    maxValue: 1,\n                    step: 0.01,\n                    pageSize: 0.1\n                };\n            default:\n                throw new Error('Unknown color channel: ' + channel);\n        }\n    }\n    formatChannelValue(channel, locale) {\n        let options;\n        let value = this.getChannelValue(channel);\n        switch(channel){\n            case 'hue':\n                options = {\n                    style: 'unit',\n                    unit: 'degree',\n                    unitDisplay: 'narrow'\n                };\n                break;\n            case 'saturation':\n            case 'brightness':\n                options = {\n                    style: 'percent'\n                };\n                value /= 100;\n                break;\n            case 'alpha':\n                options = {\n                    style: 'percent'\n                };\n                break;\n            default:\n                throw new Error('Unknown color channel: ' + channel);\n        }\n        return new $cBgAy$NumberFormatter(locale, options).format(value);\n    }\n    getColorSpace() {\n        return 'hsb';\n    }\n    getColorChannels() {\n        return $799cddbef784668f$var$HSBColor.colorChannels;\n    }\n    constructor(hue, saturation, brightness, alpha){\n        super();\n        this.hue = hue;\n        this.saturation = saturation;\n        this.brightness = brightness;\n        this.alpha = alpha;\n    }\n}\n$799cddbef784668f$var$HSBColor.colorChannels = [\n    'hue',\n    'saturation',\n    'brightness'\n];\n// X = <negative/positive number with/without decimal places>\n// before/after a comma, 0 or more whitespaces are allowed\n// - hsl(X, X%, X%)\n// - hsla(X, X%, X%, X)\nconst $799cddbef784668f$var$HSL_REGEX = /hsl\\(([-+]?\\d+(?:.\\d+)?\\s*,\\s*[-+]?\\d+(?:.\\d+)?%\\s*,\\s*[-+]?\\d+(?:.\\d+)?%)\\)|hsla\\(([-+]?\\d+(?:.\\d+)?\\s*,\\s*[-+]?\\d+(?:.\\d+)?%\\s*,\\s*[-+]?\\d+(?:.\\d+)?%\\s*,\\s*[-+]?\\d(.\\d+)?)\\)/;\nfunction $799cddbef784668f$var$mod(n, m) {\n    return (n % m + m) % m;\n}\nclass $799cddbef784668f$var$HSLColor extends $799cddbef784668f$var$Color {\n    static parse(value) {\n        let m;\n        if (m = value.match($799cddbef784668f$var$HSL_REGEX)) {\n            var ref;\n            const [h, s, l, a] = ((ref = m[1]) !== null && ref !== void 0 ? ref : m[2]).split(',').map((n)=>Number(n.trim().replace('%', ''))\n            );\n            return new $799cddbef784668f$var$HSLColor($799cddbef784668f$var$mod(h, 360), $cBgAy$clamp(s, 0, 100), $cBgAy$clamp(l, 0, 100), $cBgAy$clamp(a !== null && a !== void 0 ? a : 1, 0, 1));\n        }\n    }\n    toString(format) {\n        switch(format){\n            case 'hex':\n                return this.toRGB().toString('hex');\n            case 'hexa':\n                return this.toRGB().toString('hexa');\n            case 'hsl':\n                return `hsl(${this.hue}, ${$cBgAy$toFixedNumber(this.saturation, 2)}%, ${$cBgAy$toFixedNumber(this.lightness, 2)}%)`;\n            case 'css':\n            case 'hsla':\n                return `hsla(${this.hue}, ${$cBgAy$toFixedNumber(this.saturation, 2)}%, ${$cBgAy$toFixedNumber(this.lightness, 2)}%, ${this.alpha})`;\n            default:\n                return this.toFormat(format).toString(format);\n        }\n    }\n    toFormat(format) {\n        switch(format){\n            case 'hsl':\n            case 'hsla':\n                return this;\n            case 'hsb':\n            case 'hsba':\n                return this.toHSB();\n            case 'rgb':\n            case 'rgba':\n                return this.toRGB();\n            default:\n                throw new Error('Unsupported color conversion: hsl -> ' + format);\n        }\n    }\n    /**\n   * Converts a HSL color to HSB.\n   * Conversion formula adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#HSL_to_HSV.\n   * @returns An HSBColor object.\n   */ toHSB() {\n        let saturation = this.saturation / 100;\n        let lightness = this.lightness / 100;\n        let brightness = lightness + saturation * Math.min(lightness, 1 - lightness);\n        saturation = brightness === 0 ? 0 : 2 * (1 - lightness / brightness);\n        return new $799cddbef784668f$var$HSBColor($cBgAy$toFixedNumber(this.hue, 2), $cBgAy$toFixedNumber(saturation * 100, 2), $cBgAy$toFixedNumber(brightness * 100, 2), this.alpha);\n    }\n    /**\n   * Converts a HSL color to RGB.\n   * Conversion formula adapted from https://en.wikipedia.org/wiki/HSL_and_HSV#HSL_to_RGB_alternative.\n   * @returns An RGBColor object.\n   */ toRGB() {\n        let hue = this.hue;\n        let saturation = this.saturation / 100;\n        let lightness = this.lightness / 100;\n        let a = saturation * Math.min(lightness, 1 - lightness);\n        let fn = (n, k = (n + hue / 30) % 12)=>lightness - a * Math.max(Math.min(k - 3, 9 - k, 1), -1)\n        ;\n        return new $799cddbef784668f$var$RGBColor(Math.round(fn(0) * 255), Math.round(fn(8) * 255), Math.round(fn(4) * 255), this.alpha);\n    }\n    clone() {\n        return new $799cddbef784668f$var$HSLColor(this.hue, this.saturation, this.lightness, this.alpha);\n    }\n    getChannelRange(channel) {\n        switch(channel){\n            case 'hue':\n                return {\n                    minValue: 0,\n                    maxValue: 360,\n                    step: 1,\n                    pageSize: 15\n                };\n            case 'saturation':\n            case 'lightness':\n                return {\n                    minValue: 0,\n                    maxValue: 100,\n                    step: 1,\n                    pageSize: 10\n                };\n            case 'alpha':\n                return {\n                    minValue: 0,\n                    maxValue: 1,\n                    step: 0.01,\n                    pageSize: 0.1\n                };\n            default:\n                throw new Error('Unknown color channel: ' + channel);\n        }\n    }\n    formatChannelValue(channel, locale) {\n        let options;\n        let value = this.getChannelValue(channel);\n        switch(channel){\n            case 'hue':\n                options = {\n                    style: 'unit',\n                    unit: 'degree',\n                    unitDisplay: 'narrow'\n                };\n                break;\n            case 'saturation':\n            case 'lightness':\n                options = {\n                    style: 'percent'\n                };\n                value /= 100;\n                break;\n            case 'alpha':\n                options = {\n                    style: 'percent'\n                };\n                break;\n            default:\n                throw new Error('Unknown color channel: ' + channel);\n        }\n        return new $cBgAy$NumberFormatter(locale, options).format(value);\n    }\n    getColorSpace() {\n        return 'hsl';\n    }\n    getColorChannels() {\n        return $799cddbef784668f$var$HSLColor.colorChannels;\n    }\n    constructor(hue, saturation, lightness, alpha){\n        super();\n        this.hue = hue;\n        this.saturation = saturation;\n        this.lightness = lightness;\n        this.alpha = alpha;\n    }\n}\n$799cddbef784668f$var$HSLColor.colorChannels = [\n    'hue',\n    'saturation',\n    'lightness'\n];\n\n\n\n\n\nconst $6e14a98a7f67141d$var$DEFAULT_COLOR = $799cddbef784668f$export$6e865ea70d7724f('#ffffff');\nfunction $6e14a98a7f67141d$export$6df7f0e2cabc7eef(props) {\n    let { value: value1 , defaultValue: defaultValue , xChannel: xChannel , yChannel: yChannel , onChange: onChange , onChangeEnd: onChangeEnd  } = props;\n    if (!value1 && !defaultValue) defaultValue = $6e14a98a7f67141d$var$DEFAULT_COLOR;\n    let [color, setColor] = $cBgAy$useControlledState(value1 && $799cddbef784668f$export$4cde5df63f53f473(value1), defaultValue && $799cddbef784668f$export$4cde5df63f53f473(defaultValue), onChange);\n    let valueRef = $cBgAy$useRef(color);\n    valueRef.current = color;\n    let channels = $cBgAy$useMemo(()=>valueRef.current.getColorSpaceAxes({\n            xChannel: xChannel,\n            yChannel: yChannel\n        })\n    , [\n        xChannel,\n        yChannel\n    ]);\n    let xChannelRange = color.getChannelRange(channels.xChannel);\n    let yChannelRange = color.getChannelRange(channels.yChannel);\n    let { minValue: minValueX , maxValue: maxValueX , step: stepX , pageSize: pageSizeX  } = xChannelRange;\n    let { minValue: minValueY , maxValue: maxValueY , step: stepY , pageSize: pageSizeY  } = yChannelRange;\n    let [isDragging1, setDragging] = $cBgAy$useState(false);\n    let isDraggingRef = $cBgAy$useRef(false).current;\n    let xValue = color.getChannelValue(channels.xChannel);\n    let yValue = color.getChannelValue(channels.yChannel);\n    let setXValue = (v)=>{\n        if (v === xValue) return;\n        valueRef.current = color.withChannelValue(channels.xChannel, v);\n        setColor(valueRef.current);\n    };\n    let setYValue = (v)=>{\n        if (v === yValue) return;\n        valueRef.current = color.withChannelValue(channels.yChannel, v);\n        setColor(valueRef.current);\n    };\n    return {\n        channels: channels,\n        xChannelStep: stepX,\n        yChannelStep: stepY,\n        xChannelPageStep: pageSizeX,\n        yChannelPageStep: pageSizeY,\n        value: color,\n        setValue (value) {\n            let c = $799cddbef784668f$export$4cde5df63f53f473(value);\n            valueRef.current = c;\n            setColor(c);\n        },\n        xValue: xValue,\n        setXValue: setXValue,\n        yValue: yValue,\n        setYValue: setYValue,\n        setColorFromPoint (x, y) {\n            let newXValue = minValueX + $cBgAy$clamp(x, 0, 1) * (maxValueX - minValueX);\n            let newYValue = minValueY + (1 - $cBgAy$clamp(y, 0, 1)) * (maxValueY - minValueY);\n            let newColor;\n            if (newXValue !== xValue) {\n                // Round new value to multiple of step, clamp value between min and max\n                newXValue = $cBgAy$snapValueToStep(newXValue, minValueX, maxValueX, stepX);\n                newColor = color.withChannelValue(channels.xChannel, newXValue);\n            }\n            if (newYValue !== yValue) {\n                // Round new value to multiple of step, clamp value between min and max\n                newYValue = $cBgAy$snapValueToStep(newYValue, minValueY, maxValueY, stepY);\n                newColor = (newColor || color).withChannelValue(channels.yChannel, newYValue);\n            }\n            if (newColor) setColor(newColor);\n        },\n        getThumbPosition () {\n            let x = (xValue - minValueX) / (maxValueX - minValueX);\n            let y = 1 - (yValue - minValueY) / (maxValueY - minValueY);\n            return {\n                x: x,\n                y: y\n            };\n        },\n        incrementX (stepSize) {\n            setXValue(xValue + stepSize > maxValueX ? maxValueX : $cBgAy$snapValueToStep(xValue + stepSize, minValueX, maxValueX, stepX));\n        },\n        incrementY (stepSize) {\n            setYValue(yValue + stepSize > maxValueY ? maxValueY : $cBgAy$snapValueToStep(yValue + stepSize, minValueY, maxValueY, stepY));\n        },\n        decrementX (stepSize) {\n            setXValue($cBgAy$snapValueToStep(xValue - stepSize, minValueX, maxValueX, stepX));\n        },\n        decrementY (stepSize) {\n            setYValue($cBgAy$snapValueToStep(yValue - stepSize, minValueY, maxValueY, stepY));\n        },\n        setDragging (isDragging) {\n            let wasDragging = isDraggingRef;\n            isDraggingRef = isDragging;\n            if (onChangeEnd && !isDragging && wasDragging) onChangeEnd(valueRef.current);\n            setDragging(isDragging);\n        },\n        isDragging: isDragging1,\n        getDisplayColor () {\n            return color.withChannelValue('alpha', 1);\n        }\n    };\n}\n\n\n\n\n\nfunction $25a25ac0d1624665$export$57bc203e1c9c6d44(props) {\n    let { channel: channel , value: value1 , defaultValue: defaultValue , onChange: onChange , locale: locale , ...otherProps } = props;\n    if (value1 == null && defaultValue == null) throw new Error('useColorSliderState requires a value or defaultValue');\n    let [color, setColor] = $cBgAy$useControlledState(value1 && $799cddbef784668f$export$4cde5df63f53f473(value1), defaultValue && $799cddbef784668f$export$4cde5df63f53f473(defaultValue), onChange);\n    let sliderState = $cBgAy$useSliderState({\n        ...color.getChannelRange(channel),\n        ...otherProps,\n        // Unused except in getThumbValueLabel, which is overridden below. null to appease TypeScript.\n        numberFormatter: null,\n        value: color.getChannelValue(channel),\n        onChange (v) {\n            setColor(color.withChannelValue(channel, v));\n        },\n        onChangeEnd (v) {\n            // onChange will have already been called with the right value, this is just to trigger onChangeEnd\n            if (props.onChangeEnd) props.onChangeEnd(color.withChannelValue(channel, v));\n        }\n    });\n    let { step: step , pageSize: pageSize  } = color.getChannelRange(channel);\n    return {\n        ...sliderState,\n        value: color,\n        setValue (value) {\n            setColor($799cddbef784668f$export$4cde5df63f53f473(value));\n        },\n        getDisplayColor () {\n            switch(channel){\n                case 'hue':\n                    return $799cddbef784668f$export$6e865ea70d7724f(`hsl(${color.getChannelValue('hue')}, 100%, 50%)`);\n                case 'lightness':\n                case 'brightness':\n                case 'saturation':\n                case 'red':\n                case 'green':\n                case 'blue':\n                    return color.withChannelValue('alpha', 1);\n                case 'alpha':\n                    return color;\n                default:\n                    throw new Error('Unknown color channel: ' + channel);\n            }\n        },\n        getThumbValueLabel () {\n            return color.formatChannelValue(channel, locale);\n        },\n        step: step,\n        pageSize: pageSize\n    };\n}\n\n\n\n\n\nconst $ee4262c74a467b07$var$DEFAULT_COLOR = $799cddbef784668f$export$6e865ea70d7724f('hsl(0, 100%, 50%)');\nfunction $ee4262c74a467b07$var$roundToStep(value, step) {\n    return Math.round(value / step) * step;\n}\nfunction $ee4262c74a467b07$var$mod(n, m) {\n    return (n % m + m) % m;\n}\nfunction $ee4262c74a467b07$var$roundDown(v) {\n    let r = Math.floor(v);\n    if (r === v) return v - 1;\n    else return r;\n}\nfunction $ee4262c74a467b07$var$degToRad(deg) {\n    return deg * Math.PI / 180;\n}\nfunction $ee4262c74a467b07$var$radToDeg(rad) {\n    return rad * 180 / Math.PI;\n}\n// 0deg = 3 o'clock. increases clockwise\nfunction $ee4262c74a467b07$var$angleToCartesian(angle, radius) {\n    let rad = $ee4262c74a467b07$var$degToRad(360 - angle + 90);\n    let x = Math.sin(rad) * radius;\n    let y = Math.cos(rad) * radius;\n    return {\n        x: x,\n        y: y\n    };\n}\nfunction $ee4262c74a467b07$var$cartesianToAngle(x, y, radius) {\n    let deg = $ee4262c74a467b07$var$radToDeg(Math.atan2(y / radius, x / radius));\n    return (deg + 360) % 360;\n}\nfunction $ee4262c74a467b07$export$f4301076d9336137(props) {\n    let { defaultValue: defaultValue , onChange: onChange , onChangeEnd: onChangeEnd  } = props;\n    if (!props.value && !defaultValue) defaultValue = $ee4262c74a467b07$var$DEFAULT_COLOR;\n    let [value, setValue] = $cBgAy$useControlledState($799cddbef784668f$export$4cde5df63f53f473(props.value), $799cddbef784668f$export$4cde5df63f53f473(defaultValue), onChange);\n    let valueRef = $cBgAy$useRef(value);\n    valueRef.current = value;\n    let channelRange = value.getChannelRange('hue');\n    let { minValue: minValueX , maxValue: maxValueX , step: step , pageSize: pageStep  } = channelRange;\n    let [isDragging1, setDragging] = $cBgAy$useState(false);\n    let isDraggingRef = $cBgAy$useRef(false).current;\n    let hue = value.getChannelValue('hue');\n    function setHue(v) {\n        if (v > 360) // Make sure you can always get back to 0.\n        v = 0;\n        v = $ee4262c74a467b07$var$roundToStep($ee4262c74a467b07$var$mod(v, 360), step);\n        if (hue !== v) {\n            let color = value.withChannelValue('hue', v);\n            valueRef.current = color;\n            setValue(color);\n        }\n    }\n    return {\n        value: value,\n        step: step,\n        pageStep: pageStep,\n        setValue (v) {\n            let color = $799cddbef784668f$export$4cde5df63f53f473(v);\n            valueRef.current = color;\n            setValue(color);\n        },\n        hue: hue,\n        setHue: setHue,\n        setHueFromPoint (x, y, radius) {\n            setHue($ee4262c74a467b07$var$cartesianToAngle(x, y, radius));\n        },\n        getThumbPosition (radius) {\n            return $ee4262c74a467b07$var$angleToCartesian(value.getChannelValue('hue'), radius);\n        },\n        increment (stepSize = 1) {\n            let s = Math.max(stepSize, step);\n            let newValue = hue + s;\n            if (newValue >= maxValueX) // Make sure you can always get back to 0.\n            newValue = minValueX;\n            setHue($ee4262c74a467b07$var$roundToStep($ee4262c74a467b07$var$mod(newValue, 360), s));\n        },\n        decrement (stepSize = 1) {\n            let s = Math.max(stepSize, step);\n            if (hue === 0) // We can't just subtract step because this might be the case:\n            // |(previous step) - 0| < step size\n            setHue($ee4262c74a467b07$var$roundDown(360 / s) * s);\n            else setHue($ee4262c74a467b07$var$roundToStep($ee4262c74a467b07$var$mod(hue - s, 360), s));\n        },\n        setDragging (isDragging) {\n            let wasDragging = isDraggingRef;\n            isDraggingRef = isDragging;\n            if (onChangeEnd && !isDragging && wasDragging) onChangeEnd(valueRef.current);\n            setDragging(isDragging);\n        },\n        isDragging: isDragging1,\n        getDisplayColor () {\n            return value.toFormat('hsl').withChannelValue('saturation', 100).withChannelValue('lightness', 50).withChannelValue('alpha', 1);\n        }\n    };\n}\n\n\n\n\n\nfunction $aa90ad8b2b1d015f$export$5aadd9c0606af5c2(value) {\n    return $cBgAy$useMemo(()=>{\n        if (typeof value === 'string') try {\n            return $799cddbef784668f$export$6e865ea70d7724f(value);\n        } catch (err) {\n            return undefined;\n        }\n        return value;\n    }, [\n        value\n    ]);\n}\n\n\n\n\nconst $b335ada08155d9c0$var$MIN_COLOR = $799cddbef784668f$export$6e865ea70d7724f('#000000');\nconst $b335ada08155d9c0$var$MAX_COLOR = $799cddbef784668f$export$6e865ea70d7724f('#FFFFFF');\nconst $b335ada08155d9c0$var$MIN_COLOR_INT = $b335ada08155d9c0$var$MIN_COLOR.toHexInt();\nconst $b335ada08155d9c0$var$MAX_COLOR_INT = $b335ada08155d9c0$var$MAX_COLOR.toHexInt();\nfunction $b335ada08155d9c0$export$d52a01683abdfcd6(props) {\n    let { value: value1 , defaultValue: defaultValue , onChange: onChange  } = props;\n    let { step: step  } = $b335ada08155d9c0$var$MIN_COLOR.getChannelRange('red');\n    let initialValue = $aa90ad8b2b1d015f$export$5aadd9c0606af5c2(value1);\n    let initialDefaultValue = $aa90ad8b2b1d015f$export$5aadd9c0606af5c2(defaultValue);\n    let [colorValue, setColorValue] = $cBgAy$useControlledState(initialValue, initialDefaultValue, onChange);\n    let [inputValue, setInputValue] = $cBgAy$useState(()=>(value1 || defaultValue) && colorValue ? colorValue.toString('hex') : ''\n    );\n    let safelySetColorValue = (newColor)=>{\n        if (!colorValue || !newColor) {\n            setColorValue(newColor);\n            return;\n        }\n        if (newColor.toHexInt() !== colorValue.toHexInt()) {\n            setColorValue(newColor);\n            return;\n        }\n    };\n    let prevValue = $cBgAy$useRef(colorValue);\n    if (prevValue.current !== colorValue) {\n        setInputValue(colorValue ? colorValue.toString('hex') : '');\n        prevValue.current = colorValue;\n    }\n    let parsedValue = $cBgAy$useMemo(()=>{\n        let color;\n        try {\n            color = $799cddbef784668f$export$6e865ea70d7724f(inputValue.startsWith('#') ? inputValue : `#${inputValue}`);\n        } catch (err) {\n            color = null;\n        }\n        return color;\n    }, [\n        inputValue\n    ]);\n    let parsed = $cBgAy$useRef(null);\n    parsed.current = parsedValue;\n    let commit = ()=>{\n        // Set to empty state if input value is empty\n        if (!inputValue.length) {\n            safelySetColorValue(null);\n            setInputValue(value1 === undefined ? '' : colorValue.toString('hex'));\n            return;\n        }\n        // if it failed to parse, then reset input to formatted version of current number\n        if (parsed.current == null) {\n            setInputValue(colorValue ? colorValue.toString('hex') : '');\n            return;\n        }\n        safelySetColorValue(parsed.current);\n        // in a controlled state, the numberValue won't change, so we won't go back to our old input without help\n        let newColorValue = '';\n        if (colorValue) newColorValue = colorValue.toString('hex');\n        setInputValue(newColorValue);\n    };\n    let increment = ()=>{\n        let newValue = $b335ada08155d9c0$var$addColorValue(parsed.current, step);\n        // if we've arrived at the same value that was previously in the state, the\n        // input value should be updated to match\n        // ex type 4, press increment, highlight the number in the input, type 4 again, press increment\n        // you'd be at 5, then incrementing to 5 again, so no re-render would happen and 4 would be left in the input\n        if (newValue === colorValue) setInputValue(newValue.toString('hex'));\n        safelySetColorValue(newValue);\n    };\n    let decrement = ()=>{\n        let newValue = $b335ada08155d9c0$var$addColorValue(parsed.current, -step);\n        // if we've arrived at the same value that was previously in the state, the\n        // input value should be updated to match\n        // ex type 4, press increment, highlight the number in the input, type 4 again, press increment\n        // you'd be at 5, then incrementing to 5 again, so no re-render would happen and 4 would be left in the input\n        if (newValue === colorValue) setInputValue(newValue.toString('hex'));\n        safelySetColorValue(newValue);\n    };\n    let incrementToMax = ()=>safelySetColorValue($b335ada08155d9c0$var$MAX_COLOR)\n    ;\n    let decrementToMin = ()=>safelySetColorValue($b335ada08155d9c0$var$MIN_COLOR)\n    ;\n    let validate = (value)=>{\n        var ref;\n        return value === '' || !!((ref = value.match(/^#?[0-9a-f]{0,6}$/i)) === null || ref === void 0 ? void 0 : ref[0]);\n    };\n    return {\n        validate: validate,\n        colorValue: colorValue,\n        inputValue: inputValue,\n        setInputValue: setInputValue,\n        commit: commit,\n        increment: increment,\n        incrementToMax: incrementToMax,\n        decrement: decrement,\n        decrementToMin: decrementToMin\n    };\n}\nfunction $b335ada08155d9c0$var$addColorValue(color, step) {\n    let newColor = color ? color : $b335ada08155d9c0$var$MIN_COLOR;\n    let colorInt = newColor.toHexInt();\n    let clampInt = Math.min(Math.max(colorInt + step, $b335ada08155d9c0$var$MIN_COLOR_INT), $b335ada08155d9c0$var$MAX_COLOR_INT);\n    if (clampInt !== colorInt) {\n        let newColorString = `#${clampInt.toString(16).padStart(6, '0').toUpperCase()}`;\n        newColor = $799cddbef784668f$export$6e865ea70d7724f(newColorString);\n    }\n    return newColor;\n}\n\n\n\n\nexport {$799cddbef784668f$export$6e865ea70d7724f as parseColor, $6e14a98a7f67141d$export$6df7f0e2cabc7eef as useColorAreaState, $25a25ac0d1624665$export$57bc203e1c9c6d44 as useColorSliderState, $ee4262c74a467b07$export$f4301076d9336137 as useColorWheelState, $b335ada08155d9c0$export$d52a01683abdfcd6 as useColorFieldState};\n//# sourceMappingURL=module.js.map\n","import {parseColor} from '@react-stately/color';\n\nexport function themeValueToHex(value: string): string {\n  try {\n    return parseColor(`rgb(${value.split(' ').join(',')})`).toString('hex');\n  } catch (e) {\n    return value;\n  }\n}\n","import lazyLoader from '../../../utils/http/lazy-loader';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {RefObject, useCallback, useEffect, useRef} from 'react';\nimport {useThemeSelector} from '@common/ui/themes/theme-selector-context';\nimport {themeValueToHex} from '@common/ui/themes/utils/theme-value-to-hex';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {LocationDatasetItem} from '@common/admin/analytics/report-metric';\n\nconst loaderUrl = 'https://www.gstatic.com/charts/loader.js';\n\ninterface UseGoogleGeoChartProps {\n  placeholderRef: RefObject<HTMLDivElement>;\n  data: LocationDatasetItem[];\n}\nexport function useGoogleGeoChart({\n  placeholderRef,\n  data,\n}: UseGoogleGeoChartProps) {\n  const {trans} = useTrans();\n  const {analytics} = useSettings();\n  const apiKey = analytics?.gchart_api_key;\n  const {selectedTheme} = useThemeSelector();\n  const geoChartRef = useRef<google.visualization.GeoChart>();\n  const drawGoogleChart = useCallback(() => {\n    if (typeof google === 'undefined') return;\n\n    const seedData = data.map(location => [location.label, location.value]);\n    seedData.unshift([trans(message('Country')), trans(message('Clicks'))]);\n\n    const backgroundColor = `${themeValueToHex(\n      selectedTheme.colors['--be-paper']\n    )}`;\n    const chartColor = `${themeValueToHex(\n      selectedTheme.colors['--be-primary']\n    )}`;\n    const options: google.visualization.GeoChartOptions = {\n      colorAxis: {colors: [chartColor]},\n      backgroundColor,\n    };\n\n    if (\n      !geoChartRef.current &&\n      placeholderRef.current &&\n      google?.visualization?.GeoChart\n    ) {\n      geoChartRef.current = new google.visualization.GeoChart(\n        placeholderRef.current\n      );\n    }\n    geoChartRef.current?.draw(\n      google.visualization.arrayToDataTable(seedData),\n      options\n    );\n  }, [selectedTheme, data, placeholderRef]);\n\n  const initGoogleGeoChart = useCallback(() => {\n    if (lazyLoader.alreadyLoading(loaderUrl)) return;\n    lazyLoader.loadAsset(loaderUrl, {type: 'js'}).then(() => {\n      google.charts.load('current', {\n        packages: ['geochart'],\n        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings\n        mapsApiKey: apiKey,\n      });\n      google.charts.setOnLoadCallback(() => {\n        drawGoogleChart();\n      });\n    });\n  }, [apiKey, drawGoogleChart]);\n\n  // on component load: load chart library then draw, otherwise just draw\n  useEffect(() => {\n    initGoogleGeoChart();\n  }, [initGoogleGeoChart]);\n\n  // redraw chart if data or theme changes\n  useEffect(() => {\n    drawGoogleChart();\n  }, [selectedTheme, drawGoogleChart, data]);\n\n  return {drawGoogleChart};\n}\n","import {\n  LocationDatasetItem,\n  ReportMetric,\n} from '@common/admin/analytics/report-metric';\nimport React, {useMemo, useRef} from 'react';\nimport {useGoogleGeoChart} from './use-google-geo-chart';\nimport {ChartLayout, ChartLayoutProps} from '@common/charts/chart-layout';\nimport {Trans} from '@common/i18n/trans';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\n\ninterface GeoChartData extends Partial<ChartLayoutProps> {\n  data?: ReportMetric<LocationDatasetItem>;\n}\nexport function GeoChart({\n  data: metricData,\n  isLoading,\n  ...layoutProps\n}: GeoChartData) {\n  const placeholderRef = useRef<HTMLDivElement>(null);\n\n  // memo data to avoid redrawing chart on rerender\n  const initialData = metricData?.datasets[0].data;\n  const data = useMemo(() => {\n    return initialData || [];\n  }, [initialData]);\n  useGoogleGeoChart({placeholderRef, data});\n\n  return (\n    <ChartLayout\n      {...layoutProps}\n      className=\"min-w-500\"\n      title={<Trans message=\"Top Locations\" />}\n      contentIsFlex={isLoading}\n    >\n      {isLoading && <ChartLoadingIndicator />}\n      <div className=\"flex\">\n        <div\n          ref={placeholderRef}\n          className=\"flex-auto w-[480px] min-h-[340px]\"\n        />\n        <div className=\"text-sm max-h-[370px] w-[170px] flex-initial overflow-y-auto\">\n          {data.map(location => (\n            <div key={location.label} className=\"flex items-center gap-4 mb-4\">\n              <div className=\"max-w-110 whitespace-nowrap overflow-hidden overflow-ellipsis\">\n                {location.label}\n              </div>\n              <div>({location.percentage})%</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </ChartLayout>\n  );\n}\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {useSelectedLocale} from '../i18n/selected-locale';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {ReportMetric} from '../admin/analytics/report-metric';\nimport clsx from 'clsx';\n\ninterface BarChartProps extends Omit<BaseChartProps<'bar'>, 'type' | 'data'> {\n  direction?: 'horizontal' | 'vertical';\n  individualBarColors?: boolean;\n  data?: ReportMetric;\n}\nexport function BarChart({\n  data,\n  direction = 'vertical',\n  individualBarColors = false,\n  className,\n  ...props\n}: BarChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'bar', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: individualBarColors\n          ? ChartColors.map(c => c[1])\n          : ChartColors[i][1],\n        borderColor: individualBarColors\n          ? ChartColors.map(c => c[0])\n          : ChartColors[i][0],\n        borderWidth: 2,\n      }));\n      return formattedData;\n    }, [data, localeCode, individualBarColors]);\n\n  const isHorizontal = direction === 'horizontal';\n  const options: ChartOptions<'bar'> = useMemo(() => {\n    return {\n      indexAxis: isHorizontal ? 'y' : 'x',\n      parsing: {\n        xAxisKey: isHorizontal ? 'value' : 'label',\n        yAxisKey: isHorizontal ? 'label' : 'value',\n      },\n    };\n  }, [isHorizontal]);\n\n  return (\n    <BaseChart\n      type=\"bar\"\n      className={clsx(className, 'min-w-500')}\n      data={formattedData}\n      options={options}\n      {...props}\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {apiClient} from '@common/http/query-client';\nimport {\n  LocationDatasetItem,\n  ReportMetric,\n} from '@common/admin/analytics/report-metric';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\nconst endpoint = 'reports/clicks';\n\nexport interface FetchLinkReportResponse extends BackendResponse {\n  report: {\n    totalClicks: number;\n    clicks: ReportMetric;\n    browsers: ReportMetric;\n    locations: ReportMetric<LocationDatasetItem>;\n    devices: ReportMetric;\n    platforms: ReportMetric;\n    referrers: ReportMetric;\n  };\n}\n\nexport type ClicksReportMetric =\n  | 'clicks'\n  | 'devices'\n  | 'browsers'\n  | 'platforms'\n  | 'locations'\n  | 'referrers';\n\ninterface Payload {\n  dateRange: DateRangeValue;\n  model?: string;\n  metrics?: ClicksReportMetric[];\n}\n\ninterface Options {\n  isEnabled: boolean;\n}\n\nexport function useClicksReport(payload: Payload, options: Options) {\n  return useQuery(\n    [endpoint, payload],\n    () => fetchClicksReport(endpoint, payload),\n    {\n      keepPreviousData: true,\n      enabled: options.isEnabled,\n    }\n  );\n}\n\nfunction fetchClicksReport<\n  T extends FetchLinkReportResponse = FetchLinkReportResponse\n>(endpoint: string, payload: Payload): Promise<T> {\n  const params: Record<string, any> = {\n    model: payload.model,\n    metrics: payload.metrics?.join(','),\n  };\n  params.startDate = payload.dateRange.start.toAbsoluteString();\n  params.endDate = payload.dateRange.end.toAbsoluteString();\n  params.timezone = payload.dateRange.start.timeZone;\n\n  return apiClient.get(endpoint, {params}).then(response => response.data);\n}\n","import React, {\n  cloneElement,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport {LineChart} from '@common/charts/line-chart';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {PolarAreaChart} from '@common/charts/polar-area-chart';\nimport {ReferrerChart} from '@app/dashboard/reports/referrer-chart';\nimport {GeoChart} from '@app/common/admin/analytics/geo-chart/geo-chart';\nimport {BarChart} from '@common/charts/bar-chart';\nimport {\n  ClicksReportMetric,\n  FetchLinkReportResponse,\n  useClicksReport,\n} from '@app/dashboard/reports/clicks/use-clicks-report';\nimport {BaseChartProps} from '@common/charts/base-chart';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {UseQueryResult} from '@tanstack/react-query';\n\ninterface LinkClicksReportChartsProps {\n  dateRange: DateRangeValue;\n  model: string;\n}\nexport function ClicksReportCharts({\n  dateRange,\n  model,\n}: LinkClicksReportChartsProps) {\n  const colGap = 'gap-12 md:gap-24 mb-12 md:mb-24';\n  const rowClassName = `flex flex-col lg:flex-row lg:items-center overflow-x-auto ${colGap}`;\n\n  return (\n    <Fragment>\n      <div className={rowClassName}>\n        <AsyncChart metric=\"clicks\" model={model} dateRange={dateRange}>\n          {({data}) => (\n            <LineChart\n              className=\"flex-auto\"\n              title={<Trans message=\"Click count\" />}\n              hideLegend\n              description={\n                <Trans\n                  message=\":count total clicks\"\n                  values={{\n                    count: (\n                      <FormattedNumber value={data?.report.clicks.total || 0} />\n                    ),\n                  }}\n                />\n              }\n            />\n          )}\n        </AsyncChart>\n        <AsyncChart metric=\"devices\" model={model} dateRange={dateRange}>\n          <PolarAreaChart title={<Trans message=\"Top devices\" />} />\n        </AsyncChart>\n      </div>\n      <div className={rowClassName}>\n        <AsyncChart metric=\"referrers\" model={model} dateRange={dateRange}>\n          <ReferrerChart />\n        </AsyncChart>\n        <AsyncChart metric=\"locations\" model={model} dateRange={dateRange}>\n          <GeoChart className=\"flex-auto w-1/2 lg:max-w-[740px]\" />\n        </AsyncChart>\n      </div>\n      <div className={rowClassName}>\n        <AsyncChart metric=\"browsers\" model={model} dateRange={dateRange}>\n          <BarChart\n            className=\"max-w-500\"\n            direction=\"horizontal\"\n            individualBarColors\n            hideLegend\n            title={<Trans message=\"Top browsers\" />}\n          />\n        </AsyncChart>\n        <AsyncChart metric=\"platforms\" model={model} dateRange={dateRange}>\n          <PolarAreaChart\n            className=\"max-w-500\"\n            title={<Trans message=\"Top platforms\" />}\n          />\n        </AsyncChart>\n      </div>\n    </Fragment>\n  );\n}\n\ninterface AsyncChartProps {\n  children:\n    | ReactElement<BaseChartProps>\n    | ((\n        query: UseQueryResult<FetchLinkReportResponse>\n      ) => ReactElement<BaseChartProps>);\n  metric: ClicksReportMetric;\n  model: string;\n  dateRange: DateRangeValue;\n}\nfunction AsyncChart({children, metric, model, dateRange}: AsyncChartProps) {\n  const [isEnabled, setIsEnabled] = useState(false);\n  const query = useClicksReport(\n    {metrics: [metric], model, dateRange},\n    {isEnabled}\n  );\n  const chart = typeof children === 'function' ? children(query) : children;\n  const observerRef = useRef<IntersectionObserver>();\n\n  const contentRef = useCallback((el: HTMLDivElement | null) => {\n    if (el) {\n      const observer = new IntersectionObserver(\n        ([e]) => {\n          if (e.isIntersecting) {\n            setIsEnabled(true);\n            observerRef.current?.disconnect();\n            observerRef.current = undefined;\n          }\n        },\n        {threshold: 0.1} // if only header is visible, don't load\n      );\n      observerRef.current = observer;\n      observer.observe(el);\n    } else if (observerRef.current) {\n      observerRef.current?.disconnect();\n    }\n  }, []);\n\n  return cloneElement<BaseChartProps>(chart, {\n    data: query.data?.report?.[metric],\n    isLoading: query.isLoading,\n    contentRef,\n  });\n}\n","import {StaticPageTitle} from '@common/seo/static-page-title';\nimport {Trans} from '@common/i18n/trans';\nimport {ReportDateSelector} from '@common/admin/analytics/report-date-selector';\nimport {ClicksReportCharts} from '@app/dashboard/reports/clicks/clicks-report-charts';\nimport React, {ReactNode, useState} from 'react';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\n\ninterface ClicksReportPageLayoutProps {\n  model: string;\n  title: ReactNode;\n  actions?: ReactNode;\n}\nexport function ClicksReportPageLayout({\n  model,\n  title,\n  actions,\n}: ClicksReportPageLayoutProps) {\n  const [dateRange, setDateRange] = useState<DateRangeValue>(() => {\n    // This week\n    return DateRangePresets[2].getRangeValue();\n  });\n  return (\n    <div className=\"min-h-full gap-12 md:gap-24 p-12 md:p-24\">\n      <StaticPageTitle>\n        <Trans message=\"Clicks report\" />\n      </StaticPageTitle>\n      <div className=\"md:flex items-center justify-between gap-24 mb-24\">\n        {title}\n        <div className=\"flex-shrink-0 flex items-center md:justify-end mt-10 md:mt-0 gap-12\">\n          {actions}\n          <div className=\"text-sm font-semibold\">\n            <ReportDateSelector\n              value={dateRange}\n              onChange={setDateRange}\n              compactOnMobile={false}\n            />\n          </div>\n        </div>\n      </div>\n      <ClicksReportCharts dateRange={dateRange} model={model} />\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function AllClicksReportPage() {\n  const {workspaceId} = useActiveWorkspaceId();\n  const {user} = useAuth();\n\n  const model =\n    workspaceId && workspaceId > 0\n      ? `workspace=${workspaceId}`\n      : `user=${user?.id}`;\n\n  return (\n    <ClicksReportPageLayout\n      model={model}\n      title={\n        <h1 className=\"text-3xl font-light\">\n          <Trans message=\"Clicks report\" />\n        </h1>\n      }\n    />\n  );\n}\n","export const BackendFiltersUrlKey = 'filters';\n","import {FilterListValue} from './encode-backend-filters';\n\nexport function decodeBackendFilters(\n  encodedFilters: string | null\n): FilterListValue[] {\n  if (!encodedFilters) return [];\n  let filtersFromQuery: FilterListValue[] = [];\n  try {\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\n    filtersFromQuery.map(filterValue => {\n      // set value key as value so selects work properly\n      if (filterValue.valueKey != null) {\n        filterValue.value = filterValue.valueKey;\n      }\n      return filterValue;\n    });\n  } catch (e) {\n    //\n  }\n  return filtersFromQuery;\n}\n","import {Key} from 'react';\nimport {BackendFilter} from '../backend-filter';\n\nexport interface FilterListValue {\n  key: Key;\n  value: BackendFilter['defaultValue'];\n  operator?: BackendFilter['defaultOperator'];\n  valueKey?: Key;\n  isInactive?: boolean;\n}\n\nexport function encodeBackendFilters(\n  filterValue: FilterListValue[] | null,\n  filters?: BackendFilter[]\n): string {\n  if (!filterValue) return '';\n\n  // prepare values for backend\n  filterValue = !filters\n    ? filterValue\n    : filterValue\n        .filter(item => item.value !== '')\n        .map(item => {\n          return transformValue(item, filters);\n        });\n\n  // remove all placeholder filters\n  filterValue = filterValue.filter(fm => !fm.isInactive);\n\n  if (!filterValue.length) {\n    return '';\n  }\n\n  return encodeURIComponent(btoa(JSON.stringify(filterValue)));\n}\n\nfunction transformValue(\n  filterValue: FilterListValue,\n  filters: BackendFilter[]\n) {\n  const filterConfig = filters.find(f => f.key === filterValue.key);\n  // select components will use a key always, as we can't use objects as\n  // value, map over select options and replace key with actual value\n  if (filterConfig?.type === 'select') {\n    const option = (filterConfig.options || []).find(\n      o => o.key === filterValue.value\n    );\n    return {...filterValue, value: option?.value, valueKey: option?.key};\n  }\n  return filterValue;\n}\n","import {useNavigate, useSearchParams} from 'react-router-dom';\nimport {Key, useCallback, useMemo} from 'react';\nimport {BackendFilter} from './backend-filter';\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\nimport {\n  encodeBackendFilters,\n  FilterListValue,\n} from './utils/encode-backend-filters';\n\nexport function useBackendFilterUrlParams(\n  filters?: BackendFilter[],\n  pinnedFilters?: string[]\n) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\n\n  const decodedFilters: FilterListValue[] = useMemo(() => {\n    if (!filters) return [];\n    const decoded = decodeBackendFilters(encodedFilters);\n\n    // if filter is pinned, and it is not applied yet, add a placeholder\n    (pinnedFilters || []).forEach(key => {\n      if (!decoded.find(f => f.key === key)) {\n        const config = filters.find(f => f.key === key)!;\n        decoded.push({\n          key,\n          value: config.defaultValue,\n          operator: config.defaultOperator,\n          isInactive: true,\n        });\n      }\n    });\n\n    // preserve original filter order from configuration\n    decoded.sort(\n      (a, b) =>\n        filters.findIndex(f => f.key === a.key) -\n        filters.findIndex(f => f.key === b.key)\n    );\n\n    return decoded;\n  }, [encodedFilters, pinnedFilters, filters]);\n\n  const getDecodedWithoutKeys = useCallback(\n    (values: (FilterListValue | Key)[]) => {\n      const newFilters = [...decodedFilters];\n      values.forEach(value => {\n        const key = typeof value === 'object' ? value.key : value;\n        const index = newFilters.findIndex(f => f.key === key);\n        if (index > -1) {\n          newFilters.splice(index, 1);\n        }\n      });\n      return newFilters;\n    },\n    [decodedFilters]\n  );\n\n  const replaceAll = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\n      if (encodedFilters) {\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\n      } else {\n        searchParams.delete(BackendFiltersUrlKey);\n      }\n      navigate({search: `?${searchParams}`}, {replace: true});\n    },\n    [filters, navigate, searchParams]\n  );\n\n  const add = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const existing = getDecodedWithoutKeys(filterValues);\n      const decodedFilters = [...existing, ...filterValues];\n      replaceAll(decodedFilters);\n    },\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  const remove = useCallback(\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  return {\n    add,\n    remove,\n    replaceAll,\n    decodedFilters,\n    encodedFilters,\n  };\n}\n","import {useQuery, UseQueryOptions} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '../../http/backend-response/pagination-response';\nimport {apiClient} from '../../http/query-client';\n\nexport interface ResourcePaginationParams {\n  orderBy?: string;\n  orderDir?: 'asc' | 'desc';\n  filters?: string | null;\n  query?: string;\n  with?: string;\n  perPage?: number;\n  page?: number;\n  [key: string]: string | number | boolean | undefined | null;\n}\n\nexport const PaginatedResourcesQueryKey = (\n  endpoint: string,\n  params?: ResourcePaginationParams | Record<string, string | number | boolean>\n) => {\n  // split endpoint by slash, so we can clear cache from the root later,\n  // for example, 'link-group' will clear 'link-group/1/links' endpoint\n  const key: (string | ResourcePaginationParams)[] = endpoint.split('/');\n  if (params) {\n    key.push(params);\n  }\n  return key;\n};\n\nexport function usePaginatedResources<T = object>(\n  endpoint: string,\n  params: ResourcePaginationParams,\n  options?: Omit<\n    UseQueryOptions<\n      PaginatedBackendResponse<T>,\n      unknown,\n      PaginatedBackendResponse<T>,\n      any[]\n    >,\n    'queryKey' | 'queryFn'\n  >\n) {\n  return useQuery(\n    PaginatedResourcesQueryKey(endpoint, params),\n    () => paginateResources<T>(endpoint, params),\n    {\n      ...options,\n      keepPreviousData: true,\n    }\n  );\n}\n\nfunction paginateResources<T>(\n  endpoint: string,\n  params: ResourcePaginationParams\n): Promise<PaginatedBackendResponse<T>> {\n  return apiClient.get(endpoint, {params}).then(response => response.data);\n}\n","import React, {Key, useContext} from 'react';\nimport {ResourcePaginationParams} from '../requests/paginated-resources';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '../../http/backend-response/pagination-response';\n\nexport interface DataTableContextValue {\n  selectedRows: Key[];\n  setSelectedRows: (keys: Key[]) => void;\n  endpoint: string;\n  searchPlaceholder: MessageDescriptor;\n  params: ResourcePaginationParams;\n  setParams: (value: ResourcePaginationParams) => void;\n  query: UseQueryResult<PaginatedBackendResponse<unknown>, unknown>;\n}\n\nexport const DataTableContext = React.createContext<DataTableContextValue>(\n  null!\n);\n\nexport function useDataTable() {\n  return useContext(DataTableContext);\n}\n","import React from 'react';\nimport {ProgressBarBase, ProgressBarBaseProps} from './progress-bar-base';\n\ninterface Props extends ProgressBarBaseProps {\n  isIndeterminate?: boolean;\n}\n\nexport function ProgressBar(props: Props) {\n  return <ProgressBarBase {...props} />;\n}\n","import clsx from 'clsx';\nimport type {ColumnConfig} from '../../datatable/column-config';\n\ninterface CellStyleProps {\n  isFirst?: boolean;\n  isLast?: boolean;\n  width?: string;\n  isRowHeader?: boolean;\n  column?: ColumnConfig<any>;\n}\nexport function cellStyle({\n  isFirst,\n  isLast,\n  isRowHeader,\n  width,\n  column,\n}: CellStyleProps): string {\n  // make first column twice as wide as others by default, as it's a name or title usually\n  const finalWidth = column?.width || width || '';\n  const userPadding = column?.padding;\n\n  let justify = 'text-left';\n  if (column?.align === 'center') {\n    justify = 'text-center';\n  } else if (column?.align === 'end') {\n    justify = 'text-right';\n  }\n\n  return clsx(\n    'overflow-hidden whitespace-nowrap h-48 outline-none focus-visible:outline focus-visible:outline-offset-2 rounded',\n    justify,\n    !userPadding && isFirst && 'pl-24 pr-16',\n    !userPadding && isLast && 'pr-24 pl-16',\n    !isFirst && !isLast && !userPadding && 'px-16',\n    userPadding,\n    finalWidth\n  );\n}\n\ninterface RowStyleProps {\n  isHeader?: boolean;\n  isSelected?: boolean;\n  enabledSelection?: boolean;\n}\nexport function rowStyle({\n  isHeader,\n  isSelected,\n  enabledSelection,\n}: RowStyleProps): string {\n  return clsx(\n    'break-inside-avoid border-b outline-none',\n    isSelected &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    !isSelected &&\n      !isHeader &&\n      enabledSelection &&\n      'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T, merge?: boolean) => void;\n  onAction: TableProps<T>['onAction'];\n}\nexport const TableContext = createContext<TableContextValue>(\n  null!\n);\n","import {useContext} from 'react';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {Checkbox} from '../forms/toggle/checkbox';\nimport {TableDataItem} from './types/table-data-item';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\ninterface CheckboxCellProps {\n  item: TableDataItem;\n}\nexport function CheckboxCell({item}: CheckboxCellProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {selectedRows, enableSelection, toggleRow, selectionStyle} =\n    useContext(TableContext);\n\n  if (!enableSelection || selectionStyle === 'highlight' || isMobile)\n    return null;\n\n  return (\n    <td\n      className={cellStyle({\n        isFirst: true,\n        width: 'w-64 flex-shrink-0 flex-grow-0',\n      })}\n    >\n      <Checkbox\n        checked={selectedRows.includes(item.id)}\n        onChange={() => {\n          toggleRow(item);\n        }}\n      />\n    </td>\n  );\n}\n","import {useContext} from 'react';\nimport {cellStyle} from './table-style';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\n\ninterface TableCellProps {\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({index, item, id}: TableCellProps) {\n  const {enableSelection, columns, selectedRows} = useContext(TableContext);\n  const isFirst = enableSelection ? false : index === 0;\n  const isLast = index === columns.length - 1;\n  const column = columns[index];\n\n  return (\n    <td\n      id={id}\n      tabIndex={-1}\n      data-testid={`col-${column.key}`}\n      className={cellStyle({isFirst, isLast, column})}\n    >\n      {column.body(item, selectedRows)}\n    </td>\n  );\n}\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {useGlobalListeners} from '@react-aria/utils';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import {useMediaQuery} from './use-media-query';\n\nexport function useIsTouchDevice() {\n  return useMediaQuery('((hover: none) and (pointer: coarse))');\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext,\n} from 'react';\nimport {rowStyle} from './table-style';\nimport {TableContext} from './table-context';\nimport {CheckboxCell} from './checkbox-cell';\nimport {TableCell} from './table-cell';\nimport {TableDataItem} from './types/table-data-item';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {usePointerEvents} from '../interactions/use-pointer-events';\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useIsTouchDevice} from '../../utils/hooks/is-touch-device';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T;\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n}\nexport function TableRow({item, index, renderAs}: TableRowProps) {\n  const isTouchDevice = useIsTouchDevice();\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    enableSelection,\n    selectionStyle,\n  } = useContext(TableContext);\n  const isRowSelected = selectedRows.includes(item.id);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle == 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPress: handleRowTap,\n    onLongPress:\n      isTouchDevice && enableSelection ? () => toggleRow(item) : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  // prevent context menu on mobile\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (isTouchDevice) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const tableRowProps: HTMLAttributes<HTMLDivElement> = {\n    'aria-selected': isRowSelected,\n    className: rowStyle({isSelected: isRowSelected}),\n    onDoubleClick: createEventHandler(doubleClickHandler),\n    onKeyDown: createEventHandler(keyboardHandler),\n    onContextMenu: createEventHandler(contextMenuHandler),\n    ...domProps,\n  };\n\n  const RowElement = renderAs || 'tr';\n\n  return (\n    <RowElement\n      item={RowElement === 'tr' ? (undefined as any) : item}\n      {...tableRowProps}\n      data-testid=\"table-row\"\n    >\n      <CheckboxCell item={item} />\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {enableSelection, columns, sortDescriptor, onSortChange} =\n    useContext(TableContext);\n  const isFirst = enableSelection ? false : index === 0;\n  const isLast = index === columns.length - 1;\n  const column = columns[index];\n\n  const style = cellStyle({isFirst, isLast, column});\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <th\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n      tabIndex={-1}\n      aria-sort={ariaSort}\n      data-testid={`header-col-${column.key}`}\n      className={clsx(\n        style,\n        'text-muted font-medium text-xs',\n        allowSorting && 'cursor-pointer'\n      )}\n    >\n      {column.hideHeader ? (\n        <div className=\"sr-only\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"inline-block ml-6 -mt-2\"\n            data-testid=\"table-sort-button\"\n            aria-hidden={!sortVisible}\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform'\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </th>\n  );\n}\n","import {useContext} from 'react';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {Checkbox} from '../forms/toggle/checkbox';\nimport {useTrans} from '../../i18n/use-trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\nexport function SelectAllCell() {\n  const isMobile = useIsMobileMediaQuery();\n  const {trans} = useTrans();\n  const {\n    data,\n    selectedRows,\n    onSelectionChange,\n    enableSelection,\n    selectionStyle,\n  } = useContext(TableContext);\n\n  if (!enableSelection || selectionStyle === 'highlight' || isMobile)\n    return null;\n\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <th\n      aria-colindex={1}\n      className={cellStyle({\n        width: 'w-64 flex-shrink-0 flex-grow-0',\n        isFirst: true,\n      })}\n    >\n      <Checkbox\n        aria-label={trans({message: 'Select all'})}\n        inputTestId=\"select-all-checkbox\"\n        isIndeterminate={someRowsSelected}\n        checked={allRowsSelected}\n        onChange={() => {\n          if (allRowsSelected) {\n            onSelectionChange([]);\n          } else {\n            onSelectionChange(data.map(d => d.id));\n          }\n        }}\n      />\n    </th>\n  );\n}\n","import React, {\n  ComponentProps,\n  JSXElementConstructor,\n  useCallback,\n  useMemo,\n} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {rowStyle} from './table-style';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {HeaderCell} from './header-cell';\nimport {SelectAllCell} from './select-all-cell';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\n\nexport interface TableProps<T extends TableDataItem>\n  extends ComponentProps<'table'> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n}\nexport function Table<T extends TableDataItem>({\n  className,\n  columns,\n  hideHeaderRow,\n  data,\n  selectedRows: propsSelectedRows,\n  defaultSelectedRows: propsDefaultSelectedRows,\n  onSelectionChange: propsOnSelectionChange,\n  sortDescriptor: propsSortDescriptor,\n  onSortChange: propsOnSortChange,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  ariaLabelledBy,\n  onAction,\n  renderRowAs,\n  ...domProps\n}: TableProps<T>) {\n  const [selectedRows, onSelectionChange] = useControlledState(\n    propsSelectedRows,\n    propsDefaultSelectedRows || [],\n    propsOnSelectionChange\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    propsSortDescriptor,\n    undefined,\n    propsOnSortChange\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange]\n  );\n\n  const selectRow = useCallback(\n    (item: TableDataItem, merge?: boolean) => {\n      const newValues = merge ? [...selectedRows, item.id] : [item.id];\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange]\n  );\n\n  const contextValue: TableContextValue<T> = useMemo(() => {\n    return {\n      selectedRows,\n      onSelectionChange,\n      enableSelection,\n      selectionStyle,\n      data,\n      columns,\n      sortDescriptor,\n      onSortChange,\n      toggleRow,\n      selectRow,\n      onAction,\n    };\n  }, [\n    columns,\n    data,\n    enableSelection,\n    selectionStyle,\n    onAction,\n    onSelectionChange,\n    onSortChange,\n    selectedRows,\n    sortDescriptor,\n    toggleRow,\n    selectRow,\n  ]);\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const headerRow = hideHeaderRow ? null : (\n    <thead>\n      <tr aria-rowindex={1} className={rowStyle({isHeader: true})}>\n        <SelectAllCell />\n        {columns.map((column, columnIndex) => (\n          <HeaderCell index={columnIndex} key={column.key} />\n        ))}\n      </tr>\n    </thead>\n  );\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <table\n        {...domProps}\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'select-none isolate outline-none text-sm w-full max-w-full align-top'\n        )}\n        {...navProps}\n      >\n        {headerRow}\n        <tbody>\n          {data.map((item, rowIndex) => (\n            <TableRow\n              item={item}\n              index={rowIndex}\n              key={item.id}\n              renderAs={renderRowAs as any}\n            />\n          ))}\n        </tbody>\n      </table>\n    </TableContext.Provider>\n  );\n}\n","import {TableDataItem} from '../ui/tables/types/table-data-item';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '../http/backend-response/pagination-response';\nimport {useNumberFormatter} from '../i18n/use-number-formatter';\nimport {useDataTable} from './page/data-table-context';\nimport {Select} from '../ui/forms/select/select';\nimport {Trans} from '../i18n/trans';\nimport {Item} from '../ui/forms/listbox/item';\nimport {IconButton} from '../ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '../icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '../icons/material/KeyboardArrowRight';\nimport React from 'react';\nimport {useIsMobileMediaQuery} from '../utils/hooks/is-mobile-media-query';\n\nconst defaultPerPage = 15;\nconst perPageOptions = [{key: 10}, {key: 15}, {key: 20}, {key: 50}, {key: 100}];\n\ntype DataTablePaginationFooterProps<T extends TableDataItem> = {\n  query: UseQueryResult<PaginatedBackendResponse<T>>;\n};\nexport function DataTablePaginationFooter<T extends TableDataItem>({\n  query,\n}: DataTablePaginationFooterProps<T>) {\n  const isMobile = useIsMobileMediaQuery();\n  const numberFormatter = useNumberFormatter();\n  const {params, setParams} = useDataTable();\n  const pagination = query.data?.pagination;\n\n  if (!pagination) return null;\n\n  const perPageSelect = (\n    <Select\n      data-testid=\"paginate-per-page\"\n      minWidth=\"min-w-auto\"\n      selectionMode=\"single\"\n      disabled={query.isLoading}\n      labelPosition=\"side\"\n      size=\"xs\"\n      label={<Trans message=\"Items per page\" />}\n      selectedValue={params.perPage || defaultPerPage}\n      onSelectionChange={value => {\n        setParams({\n          ...params,\n          perPage: value as number,\n        });\n      }}\n    >\n      {perPageOptions.map(option => (\n        <Item key={option.key} value={option.key}>\n          {option.key}\n        </Item>\n      ))}\n    </Select>\n  );\n\n  return (\n    <div className=\"flex items-center justify-end gap-20 px-20 h-54 select-none\">\n      {!isMobile && perPageSelect}\n      {pagination.from && pagination.to && (\n        <div\n          className=\"text-sm\"\n          data-testid=\"pagination-info\"\n          data-total={pagination.total}\n        >\n          <Trans\n            message=\":from - :to of :total\"\n            values={{\n              from: pagination.from,\n              to: pagination.to,\n              total: numberFormatter.format(pagination.total),\n            }}\n          />\n        </div>\n      )}\n      <div className=\"text-muted\">\n        <IconButton\n          data-testid=\"paginate-prev\"\n          disabled={query.isLoading || !pagination.prev_page}\n          onClick={() => {\n            setParams({\n              ...params,\n              page: pagination.prev_page!,\n            });\n          }}\n        >\n          <KeyboardArrowLeftIcon />\n        </IconButton>\n        <IconButton\n          data-testid=\"paginate-next\"\n          disabled={query.isLoading || !pagination.next_page}\n          onClick={() => {\n            setParams({\n              ...params,\n              page: pagination.next_page!,\n            });\n          }}\n        >\n          <KeyboardArrowRightIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SearchIcon = createSvgIcon(\n  <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\n, 'SearchOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FilterAltIcon = createSvgIcon(\n  <path d=\"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z\" />\n, 'FilterAltOutlined');\n","import {Key} from 'react';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport class BackendFilter {\n  defaultValue: BackendFilterOptions['defaultValue'];\n  defaultOperator: BackendFilterOptions['defaultOperator'];\n  key: BackendFilterOptions['key'];\n  label: BackendFilterOptions['label'];\n  description?: BackendFilterOptions['description'];\n  type: BackendFilterOptions['type'];\n  inputType?: BackendFilterOptions['inputType'];\n  options: BackendFilterOptions['options'];\n  operators: BackendFilterOptions['operators'];\n  model?: BackendFilterOptions['model'];\n\n  constructor(options: Partial<BackendFilterOptions>) {\n    this.defaultValue =\n      options.defaultValue !== undefined ? options.defaultValue : '';\n    this.key = options.key!;\n    this.label = options.label!;\n    this.description = options.description;\n    this.defaultOperator = options.defaultOperator || FilterOperator.eq;\n    this.type = options.type || FilterControlType.Select;\n    this.inputType = options.inputType;\n    this.options = options.options || [];\n    this.operators = options.operators || [];\n    this.model = options.model;\n  }\n}\n\nexport interface BackendFilterOptions {\n  defaultValue: any;\n  key: string;\n  label: MessageDescriptor;\n  description?: MessageDescriptor;\n  defaultOperator: FilterOperator;\n  type: FilterControlType;\n  // for input filter\n  inputType: 'string' | 'number';\n  // for select filter\n  options: BackendFilterSelectOption[];\n  operators: FilterOperator[];\n  // for select normalized model filter\n  model: string;\n}\n\nexport interface BackendFilterSelectOption {\n  label: MessageDescriptor;\n  key: Key;\n  value: any;\n}\n\nexport enum FilterControlType {\n  Select = 'select',\n  DatePicker = 'datePicker',\n  SelectModel = 'selectModel',\n  Input = 'input',\n  BooleanToggle = 'booleanToggle',\n}\n\nexport enum FilterOperator {\n  eq = '=',\n  ne = '!=',\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  has = 'has',\n  doesntHave = 'doesntHave',\n  between = 'between',\n}\n\nexport const ALL_PRIMITIVE_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.gt,\n  FilterOperator.gte,\n  FilterOperator.lt,\n  FilterOperator.lte,\n];\n","import React, {\n  cloneElement,\n  isValidElement,\n  Key,\n  ReactElement,\n  ReactNode,\n  useId,\n  useRef,\n} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {FocusScope, useFocusManager} from '@react-aria/focus';\nimport {KeyboardArrowDownIcon} from '../../icons/material/KeyboardArrowDown';\n\ntype Props = {\n  variant?: 'outline' | 'default' | 'minimal';\n  children?: ReactNode;\n  mode?: 'single' | 'multiple';\n  expandedValues?: Key[];\n  defaultExpandedValues?: Key[];\n  onExpandedChange?: (key: Key[]) => void;\n  className?: string;\n};\nexport const Accordion = React.forwardRef<HTMLDivElement, Props>(\n  (\n    {variant = 'default', mode = 'single', children, className, ...other},\n    ref\n  ) => {\n    const [expandedValues, setExpandedValues] = useControlledState(\n      other.expandedValues,\n      other.defaultExpandedValues || [],\n      other.onExpandedChange\n    );\n\n    return (\n      <div\n        className={clsx(variant === 'outline' && 'space-y-10', className)}\n        ref={ref}\n        role=\"presentation\"\n      >\n        <AnimatePresence>\n          <FocusScope>\n            {React.Children.map(children, (child, index) => {\n              if (!isValidElement<ClonedItemProps>(child)) return null;\n              return cloneElement<ClonedItemProps>(child, {\n                key: child.key || index,\n                value: child.props.value || index,\n                mode,\n                variant,\n                expandedValues,\n                setExpandedValues,\n              });\n            })}\n          </FocusScope>\n        </AnimatePresence>\n      </div>\n    );\n  }\n);\n\ninterface AccordionItemProps {\n  children: ReactNode;\n  disabled?: boolean;\n  label: ReactNode;\n  description?: ReactNode;\n  value?: Key;\n  bodyClassName?: string;\n  chevronPosition?: 'left' | 'right';\n  startIcon?: ReactElement;\n  endAppend?: ReactElement;\n  dataTestId?: string;\n}\ninterface ClonedItemProps extends AccordionItemProps {\n  variant?: 'outline' | 'default' | 'minimal';\n  expandedValues: Key[];\n  setExpandedValues: (keys: Key[]) => void;\n  mode: 'single' | 'multiple';\n  value: Key;\n}\nexport function AccordionItem({\n  children,\n  label,\n  disabled,\n  bodyClassName,\n  startIcon,\n  description,\n  endAppend,\n  chevronPosition = 'right',\n  dataTestId,\n  ...other\n}: AccordionItemProps) {\n  const {expandedValues, setExpandedValues, variant, value, mode} =\n    other as ClonedItemProps;\n  const ref = useRef<HTMLButtonElement>(null);\n  const isExpanded = !disabled && expandedValues.includes(value);\n  const focusManager = useFocusManager();\n  const id = useId();\n  const buttonId = `${id}-button`;\n  const panelId = `${id}-panel`;\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        focusManager.focusNext();\n        break;\n      case 'ArrowUp':\n        focusManager.focusPrevious();\n        break;\n      case 'Home':\n        focusManager.focusFirst();\n        break;\n      case 'End':\n        focusManager.focusLast();\n        break;\n    }\n  };\n\n  const variants = {\n    open: {\n      height: 'auto',\n      visibility: 'visible',\n      transitionEnd: {\n        overflow: 'auto',\n      },\n    },\n    closed: {\n      height: 0,\n      overflow: 'hidden',\n      transitionEnd: {\n        visibility: 'hidden',\n      },\n    },\n  } as const;\n\n  const toggle = () => {\n    const i = expandedValues.indexOf(value);\n    if (i > -1) {\n      const newKeys = [...expandedValues];\n      newKeys.splice(i, 1);\n      setExpandedValues(newKeys);\n    } else if (mode === 'single') {\n      setExpandedValues([value]);\n    } else {\n      setExpandedValues([...expandedValues, value]);\n    }\n  };\n\n  const chevron = (\n    <div className={clsx(variant === 'minimal' && '')}>\n      <KeyboardArrowDownIcon\n        aria-hidden=\"true\"\n        size=\"md\"\n        className={clsx(\n          disabled ? 'text-disabled' : 'text-muted',\n          isExpanded && 'rotate-180 transition-transform'\n        )}\n      />\n    </div>\n  );\n\n  return (\n    <div\n      className={clsx(\n        variant === 'default' && 'border-b',\n        variant === 'outline' && 'border rounded',\n        disabled && 'text-disabled'\n      )}\n    >\n      <h3\n        className={clsx(\n          'flex items-center text-sm justify-between w-full',\n          disabled && 'pointer-events-none',\n          isExpanded && variant !== 'minimal' && 'border-b',\n          variant === 'outline'\n            ? isExpanded\n              ? 'rounded-t'\n              : 'rounded'\n            : undefined\n        )}\n      >\n        <button\n          data-testid={dataTestId}\n          disabled={disabled}\n          aria-expanded={isExpanded}\n          id={buttonId}\n          aria-controls={panelId}\n          type=\"button\"\n          ref={ref}\n          onKeyDown={onKeyDown}\n          onClick={() => {\n            if (!disabled) {\n              toggle();\n            }\n          }}\n          className=\"flex items-center text-left gap-10 flex-auto pl-14 pr-10 py-10 hover:bg-hover outline-none focus-visible:bg-primary/focus\"\n        >\n          {chevronPosition === 'left' && chevron}\n          {startIcon &&\n            cloneElement(startIcon, {\n              size: 'md',\n              className: clsx(\n                startIcon.props.className,\n                disabled ? 'text-disabled' : 'text-muted'\n              ),\n            })}\n          <div className=\"flex-auto overflow-hidden overflow-ellipsis\">\n            <div data-testid=\"accordion-label\">{label}</div>\n            {description && (\n              <div className=\"text-muted text-xs\">{description}</div>\n            )}\n          </div>\n          {chevronPosition === 'right' && chevron}\n        </button>\n        {endAppend && (\n          <div className=\"flex-shrink-0 text-sm text-muted px-4\">\n            {endAppend}\n          </div>\n        )}\n      </h3>\n      <m.div\n        aria-labelledby={id}\n        role=\"region\"\n        variants={variants}\n        transition={{type: 'tween', duration: 0.2}}\n        initial={false}\n        animate={isExpanded ? 'open' : 'closed'}\n      >\n        <div className={clsx('p-16', bodyClassName)}>{children}</div>\n      </m.div>\n    </div>\n  );\n}\n","import {FormSelect} from '../../../ui/forms/select/select';\nimport {Item} from '../../../ui/forms/listbox/item';\nimport {Trans} from '../../../i18n/trans';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function SelectFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormSelect\n      size=\"sm\"\n      autoFocus\n      name={`${filter.key}.value`}\n      selectionMode=\"single\"\n    >\n      {filter.options.map(option => (\n        <Item key={option.key} value={option.key}>\n          <Trans {...option.label} />\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {DateRangeIcon} from '../../../../../icons/material/DateRange';\nimport {DialogTrigger} from '../../../../overlays/dialog/dialog-trigger';\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\nimport {useDateRangePickerState} from './use-date-range-picker-state';\nimport {ArrowRightAltIcon} from '../../../../../icons/material/ArrowRightAlt';\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {DateRangeDialog} from './dialog/date-range-dialog';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface DateRangePickerProps\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\n    Omit<DatePickerFieldProps, 'children'> {}\nexport function DateRangePicker(props: DateRangePickerProps) {\n  const {granularity, closeDialogOnSelection, ...fieldProps} = props;\n  const state = useDateRangePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const isMobile = useIsMobileMediaQuery();\n  const hideCalendarIcon = isMobile && granularity !== 'day';\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <DateRangeDialog state={state} />\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  const value = state.selectedValue;\n  const onChange = state.setSelectedValue;\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\n        {...fieldProps}\n      >\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.start}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.start}\n          onChange={newValue => {\n            onChange({...value, start: newValue});\n          }}\n        />\n        <ArrowRightAltIcon\n          className=\"block flex-shrink-0 text-muted\"\n          size=\"md\"\n        />\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.end}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.end}\n          onChange={newValue => {\n            onChange({...value, end: newValue});\n          }}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {DateRangeValue} from './date-range-value';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\n\nexport interface AbsoluteDateRange {\n  start?: string;\n  end?: string;\n  preset?: number;\n}\n\ninterface FormDateRange {\n  start?: string | ZonedDateTime;\n  end?: string | ZonedDateTime;\n  preset?: number;\n}\n\ninterface FormDateRangePickerProps extends DateRangePickerProps {\n  name: string;\n}\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<DateRangePickerProps> = {\n    onChange: e => {\n      onChange(e ? dateRangeToAbsoluteRange(e) : null);\n    },\n    onBlur,\n    value: absoluteRangeToDateRange(value),\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\n}\n\nexport function absoluteRangeToDateRange(props: FormDateRange | null) {\n  const {start, end, preset} = props || {};\n  const dateRange: Partial<DateRangeValue> = {preset};\n  if (start) {\n    dateRange.start =\n      typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\n  }\n  if (end) {\n    dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\n  }\n  return dateRange;\n}\n\nexport function dateRangeToAbsoluteRange({\n  start,\n  end,\n  preset,\n}: Partial<DateRangeValue> = {}) {\n  const absoluteRange: AbsoluteDateRange = {\n    preset,\n  };\n  if (start) {\n    absoluteRange.start = start.toAbsoluteString();\n  }\n  if (end) {\n    absoluteRange.end = end.toAbsoluteString();\n  }\n  return absoluteRange;\n}\n","import {FormDateRangePicker} from '../../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function DateFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormDateRangePicker\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      autoFocus\n      granularity=\"day\"\n      closeDialogOnSelection={true}\n    />\n  );\n}\n","import {useQuery, UseQueryOptions} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\nconst endpoint = (model: string) => `normalized-models/${model}`;\n\ninterface Response extends BackendResponse {\n  results: NormalizedModel[];\n}\n\ninterface Params {\n  query?: string;\n  perPage?: number;\n}\n\nexport function useNormalizedModels(\n  model: string,\n  params: Params,\n  options?: Omit<\n    UseQueryOptions<Response, unknown, Response, [string, Params]>,\n    'queryKey' | 'queryFn'\n  >\n) {\n  return useQuery([endpoint(model), params], () => fetchUsers(model, params), {\n    keepPreviousData: true,\n    ...options,\n  });\n}\n\nasync function fetchUsers(model: string, params: Params): Promise<Response> {\n  return apiClient\n    .get(endpoint(model), {\n      params,\n    })\n    .then(r => r.data);\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\nconst endpoint = (modelName: string, modelId: string | number) =>\n  `normalized-models/${modelName}/${modelId}`;\n\ninterface Response extends BackendResponse {\n  model: NormalizedModel;\n}\n\nexport function useNormalizedModel(model: string, modelId: string | number) {\n  return useQuery(\n    [endpoint(model, modelId)],\n    () => fetchModel(model, modelId),\n    {enabled: model != null && modelId != null}\n  );\n}\n\nasync function fetchModel(\n  model: string,\n  modelId: string | number\n): Promise<Response> {\n  return apiClient.get(endpoint(model, modelId), {}).then(r => r.data);\n}\n","import React, {ReactNode, useRef, useState} from 'react';\nimport {useTrans} from '../../i18n/use-trans';\nimport {Trans} from '../../i18n/trans';\nimport {Avatar} from '../images/avatar';\nimport {Tooltip} from '../tooltip/tooltip';\nimport {IconButton} from '../buttons/icon-button';\nimport {EditIcon} from '../../icons/material/Edit';\nimport {message} from '../../i18n/message';\nimport {Item} from './listbox/item';\nimport {ComboBox} from './combobox/combobox';\nimport {useController} from 'react-hook-form';\nimport {useControlledState} from '@react-stately/utils';\nimport {getInputFieldClassNames} from './input-field/get-input-field-class-names';\nimport clsx from 'clsx';\nimport {Skeleton} from '../skeleton/skeleton';\nimport {useNormalizedModels} from '../../users/queries/use-normalized-models';\nimport {useNormalizedModel} from '../../users/queries/use-normalized-model';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '../animation/opacity-animation';\n\ninterface NormalizedModelFieldProps {\n  modelType: string;\n  label?: ReactNode;\n  className?: string;\n  value?: string | number;\n  defaultValue?: string | number;\n  onChange?: (value: string | number) => void;\n  invalid?: boolean;\n  errorMessage?: string;\n  description?: ReactNode;\n  openMenuOnFocus?: boolean;\n  autoFocus?: boolean;\n}\nexport function NormalizedModelField({\n  modelType,\n  label,\n  className,\n  value,\n  defaultValue = '',\n  onChange,\n  description,\n  errorMessage,\n  invalid,\n  openMenuOnFocus,\n  autoFocus,\n}: NormalizedModelFieldProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedValue, setSelectedValue] = useControlledState(\n    value,\n    defaultValue,\n    onChange\n  );\n  const query = useNormalizedModels(modelType, {query: inputValue});\n  const {trans} = useTrans();\n\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\n\n  if (selectedValue) {\n    return (\n      <div className={className}>\n        <div className={fieldClassNames.label}>{label}</div>\n        <div\n          className={clsx(\n            'p-10 border rounded mb-20',\n            invalid && 'border-danger'\n          )}\n        >\n          <AnimatePresence initial={false} mode=\"wait\">\n            <SelectedModelPreview\n              modelType={modelType}\n              modelId={selectedValue}\n              onEditClick={() => {\n                setSelectedValue('');\n                setInputValue('');\n                requestAnimationFrame(() => {\n                  inputRef.current?.focus();\n                });\n              }}\n            />\n          </AnimatePresence>\n        </div>\n        {description && !errorMessage && (\n          <div className={fieldClassNames.description}>{description}</div>\n        )}\n        {errorMessage && (\n          <div className={fieldClassNames.error}>{errorMessage}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <ComboBox\n      className={className}\n      invalid={invalid}\n      errorMessage={errorMessage}\n      description={description}\n      isAsync\n      placeholder={trans(message('Find item..'))}\n      label={label}\n      isLoading={query.isFetching}\n      items={query.data?.results}\n      inputValue={inputValue}\n      onInputValueChange={setInputValue}\n      clearInputOnItemSelection\n      selectionMode=\"single\"\n      selectedValue={selectedValue}\n      onSelectionChange={setSelectedValue}\n      ref={inputRef}\n      openMenuOnFocus={openMenuOnFocus}\n      autoFocus={autoFocus}\n    >\n      {model => (\n        <Item\n          value={model.id}\n          key={model.id}\n          description={model.description}\n          startIcon={<Avatar src={model.image} />}\n        >\n          {model.name}\n        </Item>\n      )}\n    </ComboBox>\n  );\n}\n\ninterface SelectedModelPreviewProps {\n  modelType: string;\n  modelId: string | number;\n  selectedValue?: number | string;\n  onEditClick?: () => void;\n}\nfunction SelectedModelPreview({\n  modelType,\n  modelId,\n  onEditClick,\n}: SelectedModelPreviewProps) {\n  const {data, isLoading} = useNormalizedModel(modelType, modelId);\n\n  if (isLoading || !data?.model) {\n    return <LoadingSkeleton key=\"skeleton\" />;\n  }\n\n  return (\n    <m.div\n      className=\"flex items-center gap-10\"\n      key=\"preview\"\n      {...opacityAnimation}\n    >\n      <Avatar src={data.model.image} />\n      <div>\n        <div>{data.model.name}</div>\n        <div className=\"text-muted text-xs\">{data.model.description}</div>\n      </div>\n      <Tooltip label={<Trans message=\"Change item\" />}>\n        <IconButton\n          className=\"ml-auto text-muted\"\n          size=\"sm\"\n          onClick={onEditClick}\n        >\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\n      <div className=\"flex-auto max-h-[36px]\">\n        <Skeleton className=\"text-xs\" />\n        <Skeleton className=\"text-xs max-h-8\" />\n      </div>\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\n    </m.div>\n  );\n}\n\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\n  name: string;\n}\nexport function FormNormalizedModelField({\n  name,\n  ...fieldProps\n}: FormNormalizedModelFieldProps) {\n  const {\n    field: {onChange, value = ''},\n    fieldState: {invalid, error},\n  } = useController({\n    name,\n  });\n\n  return (\n    <NormalizedModelField\n      value={value}\n      onChange={onChange}\n      invalid={invalid}\n      errorMessage={error?.message}\n      {...fieldProps}\n    />\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FormNormalizedModelField} from '../../../ui/forms/normalized-model-field';\n\nexport function NormalizedModelFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormNormalizedModelField\n      name={`${filter.key}.value`}\n      className=\"mb-20\"\n      modelType={filter.model!}\n      openMenuOnFocus\n      autoFocus\n    />\n  );\n}\n","import {FilterOperator} from './backend-filter';\nimport {message} from '../../i18n/message';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\n  {\n    '=': message('is'),\n    '!=': message('is not'),\n    '>': message('is greater than'),\n    '>=': message('is greater than or equal to'),\n    '<': message('is less than'),\n    '<=': message('is less than or equal to'),\n    has: message('Include'),\n    doesntHave: message('Do not include'),\n    between: message('Is between'),\n  };\n","import {FormTextField} from '../../../ui/forms/input-field/text-field/text-field';\nimport {Trans} from '../../../i18n/trans';\nimport {FormSelect} from '../../../ui/forms/select/select';\nimport {Item} from '../../../ui/forms/listbox/item';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {Fragment} from 'react';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function InputFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <Fragment>\n      <FormSelect\n        autoFocus\n        selectionMode=\"single\"\n        name={`${filter.key}.operator`}\n        className=\"mb-14\"\n        size=\"sm\"\n        required\n      >\n        {filter.operators.map(operator => (\n          <Item key={operator} value={operator}>\n            {<Trans {...FilterOperatorNames[operator]} />}\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        size=\"sm\"\n        name={`${filter.key}.value`}\n        type={filter.inputType}\n        required\n      />\n    </Fragment>\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\n\nexport function BooleanFilterPanel({filter}: FilterPanelProps) {\n  // Toggling accordion in the dialog will already apply boolean filter, no need for any extra fields here\n  return null;\n}\n","import {Dialog} from '../../ui/overlays/dialog/dialog';\nimport {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {Trans} from '../../i18n/trans';\nimport {Key, useState} from 'react';\nimport {DialogHeader} from '../../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../../ui/overlays/dialog/dialog-body';\nimport {useBackendFilterUrlParams} from './backend-filter-url-params';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Accordion, AccordionItem} from '../../ui/accordion/accordion';\nimport {Button} from '../../ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {Form} from '../../ui/forms/form';\nimport {Checkbox} from '../../ui/forms/toggle/checkbox';\nimport {SelectFilterPanel} from './panels/select-filter-panel';\nimport {DateFilterPanel} from './panels/date-filter-panel';\nimport {NormalizedModelFilterPanel} from './panels/normalized-model-filter-panel';\nimport {InputFilterPanel} from './panels/input-filter-panel';\nimport {BooleanFilterPanel} from './panels/boolean-filter-panel';\nimport clsx from 'clsx';\n\nexport interface FilterItemFormValue<T = any> {\n  value: T;\n  operator?: FilterOperator;\n}\n\ninterface AddFilterDialogProps {\n  filters: BackendFilter[];\n}\nexport function AddFilterDialog({filters}: AddFilterDialogProps) {\n  const {decodedFilters} = useBackendFilterUrlParams(filters);\n  const {formId} = useDialogContext();\n\n  // expand currently active filters\n  const [expandedFilters, setExpandedFilters] = useState<Key[]>(() => {\n    return decodedFilters.map(f => f.key);\n  });\n\n  const clearButton = (\n    <Button\n      size=\"xs\"\n      variant=\"outline\"\n      className=\"mr-auto\"\n      onClick={() => {\n        setExpandedFilters([]);\n      }}\n      data-testid=\"clear-filters-button\"\n    >\n      <Trans message=\"Clear\" />\n    </Button>\n  );\n\n  const applyButton = (\n    <Button\n      size=\"xs\"\n      variant=\"flat\"\n      color=\"primary\"\n      className=\"ml-auto\"\n      type=\"submit\"\n      form={formId}\n      data-testid=\"apply-filters-button\"\n    >\n      <Trans message=\"Apply\" />\n    </Button>\n  );\n\n  return (\n    <Dialog className=\"min-w-[300px]\" maxWidth=\"max-w-400\" size=\"auto\">\n      <DialogHeader\n        padding=\"px-14 py-10\"\n        leftAdornment={clearButton}\n        rightAdornment={applyButton}\n      >\n        <Trans message=\"Filter\" />\n      </DialogHeader>\n      <DialogBody padding=\"p-0\">\n        <FilterList\n          filters={filters}\n          expandedFilters={expandedFilters}\n          setExpandedFilters={setExpandedFilters}\n        />\n      </DialogBody>\n    </Dialog>\n  );\n}\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  expandedFilters: Key[];\n  setExpandedFilters: (value: Key[]) => void;\n}\nfunction FilterList({\n  filters,\n  expandedFilters,\n  setExpandedFilters,\n}: FilterListProps) {\n  const {decodedFilters, replaceAll} = useBackendFilterUrlParams(filters);\n\n  // either get value and operator from url params if filter is active, or get defaults from filter config\n  const defaultValues: Record<string, FilterItemFormValue> = {};\n  filters.forEach(filter => {\n    const appliedFilter = decodedFilters.find(f => f.key === filter.key);\n    defaultValues[filter.key] =\n      appliedFilter?.value !== undefined\n        ? {value: appliedFilter.value, operator: appliedFilter.operator}\n        : {value: filter.defaultValue, operator: filter.defaultOperator};\n  });\n  const form = useForm<Record<string, FilterItemFormValue>>({defaultValues});\n  const {formId, close} = useDialogContext();\n\n  return (\n    <Form\n      form={form}\n      id={formId}\n      onSubmit={formValue => {\n        const filterValue = Object.entries(formValue)\n          // remove undefined and non-expanded filters, so \"clear\" button will correctly remove active filters\n          .filter(\n            ([key, fieldValue]) =>\n              expandedFilters.includes(key) && fieldValue !== undefined\n          )\n          .map(([key, fieldValue]) => ({\n            key,\n            ...fieldValue, // value and operator from form\n          }));\n\n        replaceAll(filterValue);\n        close();\n      }}\n    >\n      <Accordion\n        mode=\"multiple\"\n        expandedValues={expandedFilters}\n        onExpandedChange={setExpandedFilters}\n      >\n        {filters.map(filter => (\n          <AccordionItem\n            dataTestId={`filter-${filter.key}-toggle`}\n            startIcon={\n              <Checkbox checked={expandedFilters.includes(filter.key)} />\n            }\n            key={filter.key}\n            value={filter.key}\n            label={<Trans {...filter.label} />}\n          >\n            {filter.description && (\n              <div\n                className={clsx(\n                  'text-muted text-xs',\n                  // boolean filter will have nothing in the panel, no need to add margin\n                  filter.type !== FilterControlType.BooleanToggle && 'mb-14'\n                )}\n              >\n                <Trans {...filter.description} />\n              </div>\n            )}\n            <AddFilterDialogPanel filter={filter} />\n          </AccordionItem>\n        ))}\n      </Accordion>\n    </Form>\n  );\n}\n\ninterface ActiveFilterPanelProps {\n  filter: BackendFilter;\n}\nexport function AddFilterDialogPanel({filter}: ActiveFilterPanelProps) {\n  switch (filter.type) {\n    case FilterControlType.Select:\n      return <SelectFilterPanel filter={filter} />;\n    case FilterControlType.DatePicker:\n      return <DateFilterPanel filter={filter} />;\n    case FilterControlType.SelectModel:\n      return <NormalizedModelFilterPanel filter={filter} />;\n    case FilterControlType.Input:\n      return <InputFilterPanel filter={filter} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanFilterPanel filter={filter} />;\n  }\n}\n","import {Button} from '../../ui/buttons/button';\nimport {BackendFilter} from './backend-filter';\nimport {FilterAltIcon} from '../../icons/material/FilterAlt';\nimport {Trans} from '../../i18n/trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {AddFilterDialog} from './add-filter-dialog';\n\ninterface AddFilterButtonProps {\n  filters: BackendFilter[];\n}\nexport function AddFilterButton({filters}: AddFilterButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  const desktopButton = (\n    <Button\n      variant=\"outline\"\n      color=\"primary\"\n      startIcon={<FilterAltIcon />}\n      size=\"sm\"\n      className=\"text-muted\"\n      data-testid=\"add-filter-button\"\n    >\n      <Trans message=\"Filter\" />\n    </Button>\n  );\n\n  const mobileButton = (\n    <IconButton\n      color=\"primary\"\n      size=\"sm\"\n      variant=\"outline\"\n      radius=\"rounded\"\n      className=\"flex-shrink-0\"\n      data-testid=\"add-filter-button\"\n    >\n      <FilterAltIcon />\n    </IconButton>\n  );\n\n  return (\n    <DialogTrigger type=\"popover\">\n      {isMobile ? mobileButton : desktopButton}\n      <AddFilterDialog filters={filters} />\n    </DialogTrigger>\n  );\n}\n","import React, {ComponentPropsWithoutRef, ReactNode} from 'react';\nimport {BackendFilter} from './filters/backend-filter';\nimport {useTrans} from '../i18n/use-trans';\nimport {useDataTable} from './page/data-table-context';\nimport {TextField} from '../ui/forms/input-field/text-field/text-field';\nimport {SearchIcon} from '../icons/material/Search';\nimport {AddFilterButton} from './filters/add-filter-button';\nimport {Trans} from '../i18n/trans';\n\ninterface PageHeaderProps {\n  actions?: ReactNode;\n  filters?: BackendFilter[];\n}\nexport function DataTableHeader({actions, filters}: PageHeaderProps) {\n  const {trans} = useTrans();\n  const {params, setParams, searchPlaceholder} = useDataTable();\n  return (\n    <HeaderLayout>\n      <TextField\n        inputTestId=\"datatable-search\"\n        className=\"flex-auto max-w-440 mr-auto\"\n        inputWrapperClassName=\"mr-24 md:mr-0\"\n        placeholder={trans(searchPlaceholder)}\n        startAdornment={<SearchIcon />}\n        value={params.query || ''}\n        onChange={e => {\n          setParams({...params, query: e.target.value});\n        }}\n      />\n      {filters && <AddFilterButton filters={filters} />}\n      {actions}\n    </HeaderLayout>\n  );\n}\n\ninterface SelectedPageHeaderProps {\n  actions?: ReactNode;\n}\nexport function SelectedStateDataTableHeader({\n  actions,\n}: SelectedPageHeaderProps) {\n  const {selectedRows} = useDataTable();\n  return (\n    <HeaderLayout data-testid=\"datatable-selected-header\">\n      <div className=\"mr-auto\">\n        <Trans\n          message=\"[one 1 item|other :count items] selected\"\n          values={{count: selectedRows.length}}\n        />\n      </div>\n      {actions}\n    </HeaderLayout>\n  );\n}\n\ninterface AnimatedHeaderProps extends ComponentPropsWithoutRef<'div'> {\n  children: ReactNode;\n}\nfunction HeaderLayout({children, ...domProps}: AnimatedHeaderProps) {\n  return (\n    <div\n      className=\"mb-24 flex items-center gap-8 md:gap-12 text-muted relative h-42\"\n      {...domProps}\n    >\n      {children}\n    </div>\n  );\n}\n","import {BackendFilter, FilterControlType} from '../backend-filter';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {Button} from '../../../ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '../../../icons/material/KeyboardArrowDown';\nimport {Trans} from '../../../i18n/trans';\nimport clsx from 'clsx';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"paper\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'border-r border-r-primary-light mr-8 pr-8'\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import {DialogTrigger} from '../../../ui/overlays/dialog/dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {ReactNode} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useDialogContext} from '../../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../../ui/overlays/dialog/dialog-header';\nimport {Trans} from '../../../i18n/trans';\nimport {DialogBody} from '../../../ui/overlays/dialog/dialog-body';\nimport {Form} from '../../../ui/forms/form';\nimport {DialogFooter} from '../../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../../ui/buttons/button';\nimport {FilterListControlProps} from './filter-list-control';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody padding=\"px-14 pt-14 pb-4\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"text-muted text-xs mb-14\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '../backend-filter';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {Trans} from '../../../i18n/trans';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {Avatar} from '../../../ui/images/avatar';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {DateFilterPanel} from '../panels/date-filter-panel';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {DateRangePresets} from '../../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {FormattedDateTimeRange} from '../../../i18n/formatted-date-time-range';\nimport {AbsoluteDateRange} from '../../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useNormalizedModel} from '../../../users/queries/use-normalized-model';\nimport {Skeleton} from '../../../ui/skeleton/skeleton';\n\nexport interface FilterListControlProps<T = unknown> {\n  filter: BackendFilter;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any>) {\n  switch (props.filter.type) {\n    case FilterControlType.DatePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select: {\n      return <SelectControl {...props} />;\n    }\n    case FilterControlType.Input: {\n      return <InputControl {...props} />;\n    }\n    case FilterControlType.SelectModel: {\n      return <SelectModelControl {...props} />;\n    }\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<Required<AbsoluteDateRange>>\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<boolean>) {\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: true});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(props: FilterListControlProps<Key>) {\n  const {filter, value} = props;\n  const option = filter.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={option ? <Trans {...option.label} /> : null}\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction InputControl(props: FilterListControlProps<string>) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {value}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(props: FilterListControlProps<string>) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(filter.model!, value);\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar size=\"xs\" src={data?.model.image} className=\"mr-6\" />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '../../../ui/buttons/icon-button';\nimport {CloseIcon} from '../../../icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key)!;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key}>\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey != null ? field.valueKey : field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentProps,\n  Key,\n  ReactElement,\n  ReactNode,\n  useState,\n} from 'react';\nimport {TableDataItem} from '../ui/tables/types/table-data-item';\nimport {BackendFilter} from './filters/backend-filter';\nimport {MessageDescriptor} from '../i18n/message-descriptor';\nimport {ColumnConfig} from './column-config';\nimport {useTrans} from '../i18n/use-trans';\nimport {useBackendFilterUrlParams} from './filters/backend-filter-url-params';\nimport {\n  ResourcePaginationParams,\n  usePaginatedResources,\n} from './requests/paginated-resources';\nimport {message} from '../i18n/message';\nimport {DataTableContext} from './page/data-table-context';\nimport {AnimatePresence} from 'framer-motion';\nimport {ProgressBar} from '../ui/progress/progress-bar';\nimport {Table, TableProps} from '../ui/tables/table';\nimport {DataTablePaginationFooter} from './data-table-pagination-footer';\nimport {\n  DataTableHeader,\n  SelectedStateDataTableHeader,\n} from './data-table-header';\nimport {FilterList} from './filters/filter-list/filter-list';\n\nexport interface DataTableProps<T extends TableDataItem> {\n  filters?: BackendFilter[];\n  columns: ColumnConfig<T>[];\n  searchPlaceholder?: MessageDescriptor;\n  queryParams?: Record<string, string | number | undefined | null>;\n  endpoint: string;\n  resourceName?: ReactNode;\n  emptyStateMessage: ReactElement<{isFiltering: boolean}>;\n  actions?: ReactNode;\n  enableSelection?: boolean;\n  selectedActions?: ReactNode;\n  onRowAction?: TableProps<T>['onAction'];\n  tableDomProps?: ComponentProps<'table'>;\n  children?: ReactNode;\n}\nexport function DataTable<T extends TableDataItem>({\n  filters,\n  columns,\n  searchPlaceholder,\n  queryParams,\n  endpoint,\n  actions,\n  selectedActions,\n  emptyStateMessage,\n  tableDomProps,\n  onRowAction,\n  enableSelection = true,\n  children,\n}: DataTableProps<T>) {\n  const {trans} = useTrans();\n  const {encodedFilters} = useBackendFilterUrlParams(filters);\n  const [params, setParams] = useState<ResourcePaginationParams>({perPage: 15});\n  const [selectedRows, setSelectedRows] = useState<Key[]>([]);\n  const query = usePaginatedResources<T>(\n    endpoint,\n    {\n      ...params,\n      ...queryParams,\n      filters: encodedFilters,\n    },\n    {\n      onSuccess: () => {\n        // clear selected rows when table is reloaded from backend to avoid stale ids\n        setSelectedRows([]);\n      },\n    }\n  );\n\n  const isFiltering = !!(params.query || params.filters || encodedFilters);\n  const pagination = query.data?.pagination;\n  if (!searchPlaceholder) {\n    searchPlaceholder = message('Type to search...');\n  }\n\n  return (\n    <DataTableContext.Provider\n      value={{\n        selectedRows,\n        setSelectedRows,\n        endpoint,\n        searchPlaceholder,\n        params,\n        setParams,\n        query,\n      }}\n    >\n      {children}\n      <AnimatePresence initial={false} mode=\"wait\">\n        {selectedRows.length ? (\n          <SelectedStateDataTableHeader\n            actions={selectedActions}\n            key=\"selected\"\n          />\n        ) : (\n          <DataTableHeader actions={actions} filters={filters} key=\"default\" />\n        )}\n      </AnimatePresence>\n      {filters && <FilterList className=\"mb-14\" filters={filters} />}\n      <div className=\"relative border rounded\">\n        {query.isLoading && (\n          <ProgressBar\n            isIndeterminate\n            className=\"absolute top-0 left-0 w-full z-10\"\n            aria-label={trans({message: 'Loading'})}\n            size=\"xs\"\n          />\n        )}\n\n        <div className=\"relative overflow-x-auto md:overflow-hidden\">\n          <Table\n            {...tableDomProps}\n            data-loaded={!query.isLoading}\n            columns={columns}\n            data={pagination?.data || []}\n            sortDescriptor={params}\n            onSortChange={descriptor => {\n              setParams({...params, ...descriptor});\n            }}\n            selectedRows={selectedRows}\n            enableSelection={enableSelection}\n            onSelectionChange={setSelectedRows}\n            onAction={onRowAction}\n          />\n        </div>\n\n        {(query.isFetched || query.isPreviousData) &&\n        !pagination?.data.length ? (\n          <div className=\"pt-50\" data-testid=\"empty-state-message\">\n            {cloneElement(emptyStateMessage, {\n              isFiltering,\n            })}\n          </div>\n        ) : undefined}\n\n        <DataTablePaginationFooter query={query} />\n      </div>\n    </DataTableContext.Provider>\n  );\n}\n","import React, {ReactElement, ReactNode, useId} from 'react';\nimport {TableDataItem} from '../../ui/tables/types/table-data-item';\nimport {DataTable, DataTableProps} from '../data-table';\nimport {TableProps} from '../../ui/tables/table';\nimport {StaticPageTitle} from '../../seo/static-page-title';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport clsx from 'clsx';\n\ninterface Props<T extends TableDataItem> extends DataTableProps<T> {\n  title?: ReactElement<MessageDescriptor>;\n  headerContent?: ReactNode;\n  headerItemsAlign?: string;\n  enableSelection?: boolean;\n  onRowAction?: TableProps<T>['onAction'];\n}\nexport function DataTablePage<T extends TableDataItem>({\n  title,\n  headerContent,\n  headerItemsAlign = 'items-end',\n  ...dataTableProps\n}: Props<T>) {\n  const titleId = useId();\n\n  return (\n    <div className=\"p-12 md:p-24\">\n      {title && (\n        <div\n          className={clsx(\n            'mb-16',\n            headerContent && `flex ${headerItemsAlign} gap-4`\n          )}\n        >\n          <StaticPageTitle>{title}</StaticPageTitle>\n          <h1 className=\"text-3xl font-light\" id={titleId}>\n            {title}\n          </h1>\n          {headerContent}\n        </div>\n      )}\n\n      <DataTable\n        {...dataTableProps}\n        tableDomProps={{\n          'aria-labelledby': title ? titleId : undefined,\n        }}\n      />\n    </div>\n  );\n}\n","import {AddIcon} from '../icons/material/Add';\nimport {Button} from '../ui/buttons/button';\nimport React, {ReactNode} from 'react';\nimport {useIsMobileMediaQuery} from '../utils/hooks/is-mobile-media-query';\nimport {IconButton} from '../ui/buttons/icon-button';\nimport {To} from 'react-router-dom';\nimport {ButtonBaseProps} from '../ui/buttons/button-base';\n\nexport interface DataTableAddItemButtonProps {\n  children: ReactNode;\n  to?: To;\n  elementType?: ButtonBaseProps['elementType'];\n  onClick?: ButtonBaseProps['onClick'];\n}\nexport const DataTableAddItemButton = React.forwardRef<\n  HTMLButtonElement,\n  DataTableAddItemButtonProps\n>(({children, to, elementType, onClick}, ref) => {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    return (\n      <IconButton\n        ref={ref}\n        variant=\"flat\"\n        color=\"primary\"\n        radius=\"rounded\"\n        className=\"flex-shrink-0\"\n        size=\"sm\"\n        to={to}\n        elementType={elementType}\n        onClick={onClick}\n      >\n        <AddIcon />\n      </IconButton>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref}\n      startIcon={<AddIcon />}\n      variant=\"flat\"\n      color=\"primary\"\n      size=\"sm\"\n      to={to}\n      elementType={elementType}\n      onClick={onClick}\n    >\n      {children}\n    </Button>\n  );\n});\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {PaginatedResourcesQueryKey} from './paginated-resources';\nimport {useDataTable} from '../page/data-table-context';\nimport {message} from '../../i18n/message';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\nimport {Key} from 'react';\n\ninterface Response extends BackendResponse {\n  //\n}\n\nfunction deleteSelectedRows(endpoint: string, ids: Key[]): Promise<Response> {\n  return apiClient.delete(`${endpoint}/${ids.join(',')}`).then(r => r.data);\n}\n\nexport function useDeleteSelectedRows() {\n  const {endpoint, selectedRows, setSelectedRows} = useDataTable();\n  return useMutation(() => deleteSelectedRows(endpoint, selectedRows), {\n    onSuccess: () => {\n      toast(\n        message('Deleted [one 1 record|other :count records]', {\n          values: {count: selectedRows.length},\n        })\n      );\n      setSelectedRows([]);\n      queryClient.invalidateQueries(PaginatedResourcesQueryKey(endpoint));\n    },\n    onError: err =>\n      showHttpErrorToast(err, message('Could not delete records')),\n  });\n}\n","import {Button} from '../../ui/buttons/button';\nimport {Trans} from '../../i18n/trans';\nimport {ConfirmationDialog} from '../../ui/overlays/dialog/confirmation-dialog';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport React from 'react';\nimport {useDeleteSelectedRows} from '../requests/delete-selected-rows';\nimport {useDataTable} from './data-table-context';\n\nexport function DeleteSelectedItemsAction() {\n  const deleteSelectedRows = useDeleteSelectedRows();\n  const {selectedRows} = useDataTable();\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          deleteSelectedRows.mutate();\n        }\n      }}\n    >\n      <Button\n        variant=\"flat\"\n        color=\"danger\"\n        className=\"ml-auto\"\n        disabled={deleteSelectedRows.isLoading}\n        data-testid=\"delete-rows-button\"\n      >\n        <Trans message=\"Delete\" />\n      </Button>\n      <ConfirmationDialog\n        title={\n          <Trans\n            message=\"Delete [one 1 item|other :count items]?\"\n            values={{count: selectedRows.length}}\n          />\n        }\n        body={\n          <Trans message=\"This will permanently remove the items and cannot be undone.\" />\n        }\n        confirm={<Trans message=\"Delete\" />}\n        isDanger\n      />\n    </DialogTrigger>\n  );\n}\n","import React, {ReactNode} from 'react';\nimport {IllustratedMessage} from '../../ui/images/illustrated-message';\nimport {SvgImage} from '../../ui/images/svg-image/svg-image';\nimport {Trans} from '../../i18n/trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\nexport interface DataTableEmptyStateMessageProps {\n  isFiltering?: boolean;\n  title: ReactNode;\n  filteringTitle?: ReactNode;\n  image: string;\n}\nexport function DataTableEmptyStateMessage({\n  isFiltering,\n  title,\n  filteringTitle,\n  image,\n}: DataTableEmptyStateMessageProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  // allow user to disable filtering message variation by not passing in \"filteringTitle\"\n  return (\n    <IllustratedMessage\n      size={isMobile ? 'sm' : 'md'}\n      image={<SvgImage src={image} />}\n      title={isFiltering && filteringTitle ? filteringTitle : title}\n      description={\n        isFiltering && filteringTitle ? (\n          <Trans message=\"Try another search query or different filters\" />\n        ) : undefined\n      }\n    />\n  );\n}\n","import {\n  BackendFilter,\n  BackendFilterOptions,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {\n  DateRangePreset,\n  DateRangePresets,\n} from '../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {message} from '../../i18n/message';\nimport {dateRangeToAbsoluteRange} from '../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\n\nexport class TimestampFilter extends BackendFilter {\n  type = FilterControlType.DatePicker;\n  defaultOperator = FilterOperator.between;\n  constructor(options: Partial<BackendFilterOptions>) {\n    if (!options.defaultValue) {\n      options.defaultValue = dateRangeToAbsoluteRange(\n        (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue()\n      );\n    }\n    super(options);\n  }\n}\n\nexport class CreatedAtFilter extends TimestampFilter {\n  key = 'created_at';\n  label = message('Date created');\n}\n\nexport class UpdatedAtFilter extends TimestampFilter {\n  key = 'updated_at';\n  label = message('Last updated');\n}\n","import {Permission} from './permission';\nimport {Subscription} from '../billing/subscription';\nimport {Role} from './role';\nimport {SocialProfile} from './social-profile';\nimport {AccessToken} from './access-token';\n\nexport const USER_MODEL = 'user';\n\nexport interface User {\n  id: number;\n  display_name: string;\n  username?: string;\n  first_name?: string;\n  last_name?: string;\n  avatar?: string;\n  email_verified_at: string;\n  permissions?: Permission[];\n  email: string;\n  password: string;\n  language: string;\n  timezone: string;\n  country: string;\n  created_at: string;\n  updated_at: string;\n  subscriptions?: Omit<Subscription, 'user'>[];\n  roles: Role[];\n  social_profiles: SocialProfile[];\n  tokens?: AccessToken[];\n  has_password: boolean;\n  available_space: number | null;\n  unread_notifications_count?: number;\n  card_last_four?: number;\n  card_brand?: string;\n  card_expires?: string;\n  model_type: 'user';\n}\n","import {\n  ALL_PRIMITIVE_OPERATORS,\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  CreatedAtFilter,\n  TimestampFilter,\n  UpdatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\n\nexport const LinksDatatableFilters: BackendFilter[] = [\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'type',\n    label: message('Type'),\n    description: message('Type of the link'),\n    defaultValue: '01',\n    defaultOperator: FilterOperator.eq,\n    options: [\n      {\n        key: '01',\n        label: message('Direct'),\n        value: 'direct',\n      },\n      {\n        key: '02',\n        label: message('Overlay'),\n        value: 'overlay',\n      },\n      {\n        key: '03',\n        label: message('Frame'),\n        value: 'frame',\n      },\n      {\n        key: '04',\n        label: message('Custom page'),\n        value: 'link_page',\n      },\n    ],\n  }),\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'active',\n    label: message('Status'),\n    description: message('Whether link is disabled or not'),\n    defaultValue: '01',\n    defaultOperator: FilterOperator.eq,\n    options: [\n      {\n        key: '01',\n        label: message('Enabled'),\n        value: true,\n      },\n      {\n        key: '02',\n        label: message('Disabled'),\n        value: false,\n      },\n    ],\n  }),\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'password',\n    label: message('Password'),\n    description: message('Whether link is password protected'),\n    defaultValue: '01',\n    defaultOperator: FilterOperator.eq,\n    options: [\n      {\n        key: '01',\n        label: message('Has a password'),\n        value: {value: null, operator: FilterOperator.ne},\n      },\n      {\n        key: '02',\n        label: message('Does not have a password'),\n        value: {value: null, operator: FilterOperator.eq},\n      },\n    ],\n  }),\n  new BackendFilter({\n    type: FilterControlType.Input,\n    inputType: 'number',\n    key: 'clicks_count',\n    label: message('Click count'),\n    description: message('Total number of clicks for link'),\n    defaultValue: 1,\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n  }),\n  new TimestampFilter({\n    key: 'clicked_at',\n    label: message('Clicked at'),\n    description: message('Date link was last clicked'),\n  }),\n  new TimestampFilter({\n    key: 'expires_at',\n    label: message('Expires at'),\n    description: message('Date link will expire'),\n  }),\n  new CreatedAtFilter({\n    description: message('Date link was created'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date link was last updated'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'user_id',\n    label: message('User'),\n    description: message('User link was created by'),\n  }),\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SettingsIcon = createSvgIcon(\n  <path d=\"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\" />\n, 'SettingsOutlined');\n","import {\n  FetchValueListsResponse,\n  prefetchValueLists,\n  useValueLists,\n} from '@common/http/value-lists';\nimport {useAuth} from '@common/auth/use-auth';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\nconst names: (keyof FetchValueListsResponse)[] = [\n  'countries',\n  'domains',\n  'pages',\n  'overlays',\n  'pixels',\n  'groups',\n];\n\nexport function useLinkFormValueLists() {\n  const {user} = useAuth();\n  return useValueLists(names, {userId: user?.id, pageType: 'link_page'});\n}\n\nexport function prefetchLinkFormValueLists() {\n  prefetchValueLists(names, {\n    userId: getBootstrapData().user?.id,\n    pageType: 'link_page',\n  });\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {useLinkFormValueLists} from '../requests/use-link-form-value-lists';\nimport {useFormContext} from 'react-hook-form';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Trans} from '@common/i18n/trans';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\n\nexport function LinkTypeField() {\n  const {\n    branding: {site_name},\n  } = useSettings();\n  const {data} = useLinkFormValueLists();\n  const {watch, setValue} = useFormContext<CrupdateLinkFormValues>();\n  const type = watch('type');\n\n  return (\n    <div className=\"flex items-center gap-12\">\n      <FormSelect\n        className=\"mb-24 flex-auto\"\n        name=\"type\"\n        label={<Trans message=\"Type\" />}\n        selectionMode=\"single\"\n        onSelectionChange={() => {\n          // clear type id when link type changes\n          setValue('type_id', null);\n        }}\n      >\n        <Item\n          value=\"direct\"\n          description={<Trans message=\"Redirect user to url instantly\" />}\n        >\n          <Trans message=\"Direct\" />\n        </Item>\n        <Item\n          value=\"frame\"\n          description={\n            <Trans\n              message=\" Show url inside iframe with :siteName navigation bar.\"\n              values={{siteName: site_name}}\n            />\n          }\n        >\n          <Trans message=\"Frame\" />\n        </Item>\n        <Item\n          value=\"splash\"\n          description={\n            <Trans message=\"Show splash page with optional ads and redirect user to url after a delay.\" />\n          }\n        >\n          <Trans message=\"Splash\" />\n        </Item>\n        {data?.pages?.length ? (\n          <Item\n            value=\"page\"\n            description={\n              <Trans\n                message=\"Show specified link page with :siteName navigation bar and button to open\n      long url.\"\n                values={{siteName: site_name}}\n              />\n            }\n          >\n            <Trans message=\"Link page\" />\n          </Item>\n        ) : null}\n        {data?.overlays.length ? (\n          <Item\n            value=\"overlay\"\n            description={\n              <Trans message=\"Redirect user instantly and show specified overlay over the link.\" />\n            }\n          >\n            <Trans message=\"Overlay\" />\n          </Item>\n        ) : null}\n      </FormSelect>\n      {type === 'page' && (\n        <FormSelect\n          label={<Trans message=\"Link page\" />}\n          name=\"type_id\"\n          selectionMode=\"single\"\n          className=\"mb-24 flex-auto\"\n          required\n        >\n          {data?.pages?.map(page => (\n            <Item key={page.id} value={page.id}>\n              {page.title}\n            </Item>\n          ))}\n        </FormSelect>\n      )}\n      {type === 'overlay' && (\n        <FormSelect\n          label={<Trans message=\"Link overlay\" />}\n          name=\"type_id\"\n          selectionMode=\"single\"\n          className=\"mb-24 flex-auto\"\n          required\n        >\n          {data?.overlays?.map(overlay => (\n            <Item key={overlay.id} value={overlay.id}>\n              {overlay.name}\n            </Item>\n          ))}\n        </FormSelect>\n      )}\n    </div>\n  );\n}\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex items-center select-none\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            aria-checked={domProps.checked}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark',\n              invalid && 'checked:bg-danger checked:border-danger',\n              'outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none',\n              'before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'opacity-80 cursor-not-allowed'\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled'\n              )}\n            >\n              {children}\n            </span>\n          )}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange,\n    onBlur,\n    checked: value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const LockIcon = createSvgIcon(\n  <path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\" />\n, 'LockOutlined');\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  isSameDay,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timezone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  clear: () => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<V, CV = V> {\n  value?: V | null | '';\n  defaultValue?: V | null;\n  onChange?: (value: CV | null) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>\n): BaseDatePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue\n  );\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value || now,\n    props.defaultValue || now,\n    setStateValue\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(internalValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = internalValue\n        ? internalValue.set(newValue)\n        : toZoned(newValue, timezone);\n      setInternalValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setInternalValue, min, max, internalValue, timezone]\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\n    [internalValue, isPlaceholder]\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection]\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {useTrans} from '@common/i18n/use-trans';\nimport clsx from 'clsx';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const now = useCurrentDateTime();\n\n  const footer = showCalendarFooter && (\n    <DialogFooter\n      padding=\"px-14 pb-14\"\n      startAction={\n        <Button\n          disabled={state.isPlaceholder}\n          variant=\"text\"\n          color=\"primary\"\n          onClick={() => {\n            state.clear();\n          }}\n        >\n          <Trans message=\"Clear\" />\n        </Button>\n      }\n    >\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        onClick={() => {\n          state.setSelectedValue(now);\n          state.setCalendarIsOpen(false);\n        }}\n      >\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody\n          className=\"flex items-start gap-40\"\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\n        >\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\n        }\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","export default \"__VITE_ASSET__1a8523e3__\"","import {ReactNode} from 'react';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport upgradeSvg from '@app/dashboard/upgrade/upgrade.svg';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\n\ninterface UpgradeDialogProps {\n  message?: ReactNode;\n  messageSuffix?: ReactNode;\n}\nexport function UpgradeDialog({message, messageSuffix}: UpgradeDialogProps) {\n  const {close} = useDialogContext();\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Join the PROs\" />\n      </DialogHeader>\n      <DialogBody>\n        <div className=\"text-center mb-20\">\n          <SvgImage src={upgradeSvg} className=\"h-100 mx-auto\" />\n        </div>\n        <div>\n          {message} {messageSuffix}\n        </div>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          size=\"xs\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Maybe later\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          size=\"xs\"\n          color=\"primary\"\n          elementType={Link}\n          to=\"/pricing\"\n          target=\"_blank\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Find out more\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {UpgradeDialog} from '@app/dashboard/upgrade/upgrade-dialog';\nimport {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\n\ninterface FeatureLockedDialogProps {\n  message?: ReactNode;\n}\nexport function FeatureLockedDialog({message}: FeatureLockedDialogProps) {\n  return (\n    <UpgradeDialog\n      message={message}\n      messageSuffix={\n        <Trans message=\"Upgrade to unlock this feature and many more.\" />\n      }\n    />\n  );\n}\n","import {LockIcon} from '@common/icons/material/Lock';\nimport {Trans} from '@common/i18n/trans';\nimport {Button} from '@common/ui/buttons/button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ReactNode} from 'react';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {FeatureLockedDialog} from '@app/dashboard/upgrade/feature-locked-dialog';\n\ninterface UpgradeButtonProps {\n  message?: ReactNode;\n  className?: string;\n}\nexport function NoPermissionButton({message, className}: UpgradeButtonProps) {\n  const {billing} = useSettings();\n\n  if (!billing.enable) {\n    return <GenericButton />;\n  }\n\n  return (\n    <DialogTrigger type=\"popover\">\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"2xs\"\n        startIcon={<LockIcon />}\n        className={className}\n      >\n        <Trans message=\"Upgrade\" />\n      </Button>\n      <FeatureLockedDialog message={message} />\n    </DialogTrigger>\n  );\n}\n\nfunction GenericButton() {\n  return (\n    <Tooltip\n      label={\n        <Trans message=\"You don't have permissions to access this feature.\" />\n      }\n    >\n      <LockIcon size=\"sm\" className=\"text-muted\" />\n    </Tooltip>\n  );\n}\n","import {ReactElement, ReactNode} from 'react';\nimport {NoPermissionButton} from '@app/dashboard/upgrade/no-permission-button';\nimport clsx from 'clsx';\n\ninterface LinkFormSectionProps {\n  title: ReactElement;\n  description: ReactElement;\n  children: ReactNode;\n  upgradeMessage?: ReactNode;\n}\nexport function LinkFormSection({\n  title,\n  description,\n  children,\n  upgradeMessage,\n}: LinkFormSectionProps) {\n  return (\n    <div className=\"border-t pt-24\">\n      <div\n        className={clsx(\n          'font-semibold',\n          upgradeMessage && 'flex items-center gap-10 mb-8'\n        )}\n      >\n        <div className=\"text-sm\">{title}</div>\n        {upgradeMessage && <NoPermissionButton message={upgradeMessage} />}\n      </div>\n      <div className=\"text-muted text-sm\">{description}</div>\n      {children}\n    </div>\n  );\n}\n","import {\n  LinkFeaturePermissions,\n  useLinkSummary,\n} from '@app/dashboard/layout/sidenav/use-link-summary';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function useLinkFeatureStatus(feature: keyof LinkFeaturePermissions) {\n  const {data} = useLinkSummary();\n  const {hasPermission} = useAuth();\n\n  const disabled: boolean =\n    !data?.usage.links[feature] && !hasPermission('admin');\n  return {disabled};\n}\n","import {Fragment, ReactElement} from 'react';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\nimport {FormDatePicker} from '@common/ui/forms/input-field/date/date-picker/date-picker';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {LinkFormSection} from './link-form-section';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {NoPermissionButton} from '@app/dashboard/upgrade/no-permission-button';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\ninterface LinkRestrictionFieldsProps {\n  linkName: ReactElement<MessageDescriptor>;\n}\nexport function LinkRestrictionFields({linkName}: LinkRestrictionFieldsProps) {\n  const {disabled} = useLinkFeatureStatus('password');\n\n  return (\n    <Fragment>\n      <FormTextField\n        type=\"password\"\n        name=\"password\"\n        label={<Trans message=\"Password\" />}\n        autoComplete=\"new-password\"\n        className=\"mb-24\"\n        labelSuffix={\n          disabled && (\n            <NoPermissionButton\n              message={\n                <Trans message=\"Your current plan doesn't include link password protection.\" />\n              }\n            />\n          )\n        }\n        disabled={disabled}\n      />\n      <ScheduleFields linkName={linkName} />\n      <ExpirationClicksField linkName={linkName} />\n    </Fragment>\n  );\n}\n\nfunction ScheduleFields({linkName}: LinkRestrictionFieldsProps) {\n  const now = useCurrentDateTime();\n  const {disabled} = useLinkFeatureStatus('expiration');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"Schedule\" />}\n      description={\n        <Trans\n          message=\"Specify a date when :name should become active and when it should expire. Both activation and expiration dates are optional.\"\n          values={{name: linkName}}\n        />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans\n            message=\"Your current plan doesn't include :name scheduling.\"\n            values={{name: linkName}}\n          />\n        )\n      }\n    >\n      <div className=\"block md:flex items-center gap-24 mt-24\">\n        <FormDatePicker\n          showCalendarFooter\n          label={<Trans message=\"Activation date\" />}\n          min={now}\n          name=\"activates_at\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormDatePicker\n          showCalendarFooter\n          label={<Trans message=\"Expiration date\" />}\n          min={now}\n          name=\"expires_at\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n    </LinkFormSection>\n  );\n}\n\nfunction ExpirationClicksField({linkName}: LinkRestrictionFieldsProps) {\n  const {trans} = useTrans();\n  const {disabled} = useLinkFeatureStatus('expiration');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"Expiration clicks\" />}\n      description={\n        <Trans\n          message=\"After :name is visited specified amount of times, it will no longer be accessible.\nOptionally, after click amount is reached :name can redirect to specified url instead.\"\n          values={{name: linkName}}\n        />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include expiration clicks.\" />\n        )\n      }\n    >\n      <div className=\"block md:flex items-center gap-24 mt-24\">\n        <FormTextField\n          type=\"number\"\n          label={<Trans message=\"Max clicks\" />}\n          name=\"exp_clicks_rule.key\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormTextField\n          type=\"url\"\n          label={<Trans message=\"Redirect URL\" />}\n          placeholder={trans(message('Optional'))}\n          name=\"exp_clicks_rule.value\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n    </LinkFormSection>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SwapVertIcon = createSvgIcon(\n  <path d=\"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z\" />\n, 'SwapVertOutlined');\n","import {LinkFormSection} from './link-form-section';\nimport {Trans} from '../../../common/i18n/trans';\nimport {FormComboBox} from '../../../common/ui/forms/combobox/form-combobox';\nimport {useLinkFormValueLists} from '../requests/use-link-form-value-lists';\nimport {useFieldArray} from 'react-hook-form';\nimport {Item} from '../../../common/ui/forms/listbox/item';\nimport {FormTextField} from '../../../common/ui/forms/input-field/text-field/text-field';\nimport {Button} from '../../../common/ui/buttons/button';\nimport {AddIcon} from '../../../common/icons/material/Add';\nimport {IconButton} from '../../../common/ui/buttons/icon-button';\nimport {CloseIcon} from '../../../common/icons/material/Close';\nimport {cloneElement, ReactElement} from 'react';\nimport {FormSelect} from '../../../common/ui/forms/select/select';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\nexport function LinkRetargetingFields() {\n  return (\n    <div>\n      <GeoFields />\n      <DeviceFields />\n      <PlatformFields />\n    </div>\n  );\n}\n\nfunction GeoFields() {\n  const {data} = useLinkFormValueLists();\n  return (\n    <FieldsLayout\n      defaultKey=\"us\"\n      name=\"geo_rules\"\n      title={<Trans message=\"Location targeting\" />}\n      description={\n        <Trans message=\"Redirect users to different url based on their location.\" />\n      }\n      buttonLabel={<Trans message=\"Add location\" />}\n    >\n      <FormComboBox\n        required\n        useOptionLabelAsInputValue={true}\n        items={data?.countries}\n        name=\"temp\"\n        label={<Trans message=\"Country\" />}\n        className=\"flex-auto mt-24\"\n      >\n        {country => (\n          <Item key={country.code} value={country.code}>\n            {country.name}\n          </Item>\n        )}\n      </FormComboBox>\n    </FieldsLayout>\n  );\n}\n\nfunction DeviceFields() {\n  return (\n    <FieldsLayout\n      name=\"device_rules\"\n      title={<Trans message=\"Device targeting\" />}\n      description={\n        <Trans message=\"Redirect users to different url based on their device.\" />\n      }\n      buttonLabel={<Trans message=\"Add device\" />}\n      defaultKey=\"desktop\"\n    >\n      <FormSelect\n        required\n        selectionMode=\"single\"\n        name=\"temp\"\n        label={<Trans message=\"Device\" />}\n        className=\"flex-auto mt-24\"\n      >\n        <Item value=\"desktop\">\n          <Trans message=\"Desktop\" />\n        </Item>\n        <Item value=\"table\">\n          <Trans message=\"Tablet\" />\n        </Item>\n        <Item value=\"mobile\">\n          <Trans message=\"Mobile\" />\n        </Item>\n      </FormSelect>\n    </FieldsLayout>\n  );\n}\n\nfunction PlatformFields() {\n  return (\n    <FieldsLayout\n      name=\"platform_rules\"\n      title={<Trans message=\"Platform targeting\" />}\n      description={\n        <Trans message=\"Redirect users to different url based on their platform.\" />\n      }\n      defaultKey=\"windows\"\n      buttonLabel={<Trans message=\"Add platform\" />}\n    >\n      <FormSelect\n        name=\"temp\"\n        required\n        selectionMode=\"single\"\n        label={<Trans message=\"Platform\" />}\n        className=\"flex-auto mt-24\"\n      >\n        <Item value=\"windows\">\n          <Trans message=\"Windows\" />\n        </Item>\n        <Item value=\"osx\">\n          <Trans message=\"MacOs\" />\n        </Item>\n        <Item value=\"ios\">\n          <Trans message=\"iOS\" />\n        </Item>\n        <Item value=\"android\">\n          <Trans message=\"Android\" />\n        </Item>\n        <Item value=\"linux\">\n          <Trans message=\"Linux\" />\n        </Item>\n      </FormSelect>\n    </FieldsLayout>\n  );\n}\n\ninterface FieldsLayoutProps {\n  name: 'geo_rules' | 'device_rules' | 'platform_rules';\n  title: ReactElement;\n  description: ReactElement;\n  buttonLabel: ReactElement;\n  defaultKey: string;\n  children: ReactElement;\n}\nfunction FieldsLayout({\n  name,\n  title,\n  description,\n  buttonLabel,\n  defaultKey,\n  children,\n}: FieldsLayoutProps) {\n  const {fields, append, remove} = useFieldArray<CrupdateLinkFormValues>({\n    name,\n  });\n  const {disabled} = useLinkFeatureStatus('retargeting');\n\n  return (\n    <LinkFormSection\n      title={title}\n      description={description}\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include link retargeting.\" />\n        )\n      }\n    >\n      {fields.map((field, index) => (\n        <div key={field.id} className=\"block md:flex items-end gap-14\">\n          {cloneElement(children, {name: `${name}.${index}.key`, disabled})}\n          <FormTextField\n            required\n            type=\"url\"\n            name={`${name}.${index}.value`}\n            label={<Trans message=\"URL\" />}\n            className=\"flex-auto mt-24\"\n            disabled={disabled}\n          />\n          <RemoveButton onClick={() => remove(index)} />\n        </div>\n      ))}\n      <Button\n        className=\"my-8\"\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        onClick={() => {\n          append({key: defaultKey, value: ''} as any);\n        }}\n        disabled={disabled}\n      >\n        {buttonLabel}\n      </Button>\n    </LinkFormSection>\n  );\n}\n\ninterface RemoveButtonProps {\n  onClick: () => void;\n}\nfunction RemoveButton({onClick}: RemoveButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    return (\n      <div className=\"mt-12\">\n        <Button variant=\"outline\" color=\"danger\" size=\"xs\" onClick={onClick}>\n          <Trans message=\"Remove\" />\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <IconButton color=\"danger\" onClick={onClick}>\n      <CloseIcon />\n    </IconButton>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const PublicIcon = createSvgIcon(\n  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z\" />\n, 'PublicOutlined');\n","import { createContext as createContext$1, useRef, createElement, useContext, useMemo } from 'react';\nimport { useStore } from 'zustand';\n\nfunction createContext() {\n  const ZustandContext = createContext$1(void 0);\n  const Provider = ({\n    createStore,\n    children\n  }) => {\n    const storeRef = useRef();\n    if (!storeRef.current) {\n      storeRef.current = createStore();\n    }\n    return createElement(\n      ZustandContext.Provider,\n      { value: storeRef.current },\n      children\n    );\n  };\n  const useBoundStore = (selector, equalityFn) => {\n    const store = useContext(ZustandContext);\n    if (!store) {\n      throw new Error(\n        \"Seems like you have not used zustand provider as an ancestor.\"\n      );\n    }\n    return useStore(\n      store,\n      selector,\n      equalityFn\n    );\n  };\n  const useStoreApi = () => {\n    const store = useContext(ZustandContext);\n    if (!store) {\n      throw new Error(\n        \"Seems like you have not used zustand provider as an ancestor.\"\n      );\n    }\n    return useMemo(\n      () => ({\n        getState: store.getState,\n        setState: store.setState,\n        subscribe: store.subscribe,\n        destroy: store.destroy\n      }),\n      [store]\n    );\n  };\n  return {\n    Provider,\n    useStore: useBoundStore,\n    useStoreApi\n  };\n}\n\nexport { createContext as default };\n","'use strict';\n\nconst denyList = new Set([\n\t'ENOTFOUND',\n\t'ENETUNREACH',\n\n\t// SSL errors from https://github.com/nodejs/node/blob/fc8e3e2cdc521978351de257030db0076d79e0ab/src/crypto/crypto_common.cc#L301-L328\n\t'UNABLE_TO_GET_ISSUER_CERT',\n\t'UNABLE_TO_GET_CRL',\n\t'UNABLE_TO_DECRYPT_CERT_SIGNATURE',\n\t'UNABLE_TO_DECRYPT_CRL_SIGNATURE',\n\t'UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY',\n\t'CERT_SIGNATURE_FAILURE',\n\t'CRL_SIGNATURE_FAILURE',\n\t'CERT_NOT_YET_VALID',\n\t'CERT_HAS_EXPIRED',\n\t'CRL_NOT_YET_VALID',\n\t'CRL_HAS_EXPIRED',\n\t'ERROR_IN_CERT_NOT_BEFORE_FIELD',\n\t'ERROR_IN_CERT_NOT_AFTER_FIELD',\n\t'ERROR_IN_CRL_LAST_UPDATE_FIELD',\n\t'ERROR_IN_CRL_NEXT_UPDATE_FIELD',\n\t'OUT_OF_MEM',\n\t'DEPTH_ZERO_SELF_SIGNED_CERT',\n\t'SELF_SIGNED_CERT_IN_CHAIN',\n\t'UNABLE_TO_GET_ISSUER_CERT_LOCALLY',\n\t'UNABLE_TO_VERIFY_LEAF_SIGNATURE',\n\t'CERT_CHAIN_TOO_LONG',\n\t'CERT_REVOKED',\n\t'INVALID_CA',\n\t'PATH_LENGTH_EXCEEDED',\n\t'INVALID_PURPOSE',\n\t'CERT_UNTRUSTED',\n\t'CERT_REJECTED',\n\t'HOSTNAME_MISMATCH'\n]);\n\n// TODO: Use `error?.code` when targeting Node.js 14\nmodule.exports = error => !denyList.has(error && error.code);\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport isRetryAllowed from 'is-retry-allowed';\nvar namespace = 'axios-retry';\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isNetworkError(error) {\n  return !error.response && Boolean(error.code) && // Prevents retrying cancelled requests\n  error.code !== 'ECONNABORTED' && // Prevents retrying timed out requests\n  isRetryAllowed(error); // Prevents retrying unsafe errors\n}\nvar SAFE_HTTP_METHODS = ['get', 'head', 'options'];\nvar IDEMPOTENT_HTTP_METHODS = SAFE_HTTP_METHODS.concat(['put', 'delete']);\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isRetryableError(error) {\n  return error.code !== 'ECONNABORTED' && (!error.response || error.response.status >= 500 && error.response.status <= 599);\n}\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isSafeRequestError(error) {\n  if (!error.config) {\n    // Cannot determine if the request can be retried\n    return false;\n  }\n\n  return isRetryableError(error) && SAFE_HTTP_METHODS.indexOf(error.config.method) !== -1;\n}\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isIdempotentRequestError(error) {\n  if (!error.config) {\n    // Cannot determine if the request can be retried\n    return false;\n  }\n\n  return isRetryableError(error) && IDEMPOTENT_HTTP_METHODS.indexOf(error.config.method) !== -1;\n}\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isNetworkOrIdempotentRequestError(error) {\n  return isNetworkError(error) || isIdempotentRequestError(error);\n}\n/**\n * @return {number} - delay in milliseconds, always 0\n */\n\nfunction noDelay() {\n  return 0;\n}\n/**\n * @param  {number} [retryNumber=0]\n * @return {number} - delay in milliseconds\n */\n\n\nexport function exponentialDelay() {\n  var retryNumber = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var delay = Math.pow(2, retryNumber) * 100;\n  var randomSum = delay * 0.2 * Math.random(); // 0-20% of the delay\n\n  return delay + randomSum;\n}\n/**\n * Initializes and returns the retry state for the given request/config\n * @param  {AxiosRequestConfig} config\n * @return {Object}\n */\n\nfunction getCurrentState(config) {\n  var currentState = config[namespace] || {};\n  currentState.retryCount = currentState.retryCount || 0;\n  config[namespace] = currentState;\n  return currentState;\n}\n/**\n * Returns the axios-retry options for the current request\n * @param  {AxiosRequestConfig} config\n * @param  {AxiosRetryConfig} defaultOptions\n * @return {AxiosRetryConfig}\n */\n\n\nfunction getRequestOptions(config, defaultOptions) {\n  return _objectSpread(_objectSpread({}, defaultOptions), config[namespace]);\n}\n/**\n * @param  {Axios} axios\n * @param  {AxiosRequestConfig} config\n */\n\n\nfunction fixConfig(axios, config) {\n  if (axios.defaults.agent === config.agent) {\n    delete config.agent;\n  }\n\n  if (axios.defaults.httpAgent === config.httpAgent) {\n    delete config.httpAgent;\n  }\n\n  if (axios.defaults.httpsAgent === config.httpsAgent) {\n    delete config.httpsAgent;\n  }\n}\n/**\n * Checks retryCondition if request can be retried. Handles it's retruning value or Promise.\n * @param  {number} retries\n * @param  {Function} retryCondition\n * @param  {Object} currentState\n * @param  {Error} error\n * @return {boolean}\n */\n\n\nfunction shouldRetry(_x, _x2, _x3, _x4) {\n  return _shouldRetry.apply(this, arguments);\n}\n/**\n * Adds response interceptors to an axios instance to retry requests failed due to network issues\n *\n * @example\n *\n * import axios from 'axios';\n *\n * axiosRetry(axios, { retries: 3 });\n *\n * axios.get('http://example.com/test') // The first request fails and the second returns 'ok'\n *   .then(result => {\n *     result.data; // 'ok'\n *   });\n *\n * // Exponential back-off retry delay between requests\n * axiosRetry(axios, { retryDelay : axiosRetry.exponentialDelay});\n *\n * // Custom retry delay\n * axiosRetry(axios, { retryDelay : (retryCount) => {\n *   return retryCount * 1000;\n * }});\n *\n * // Also works with custom axios instances\n * const client = axios.create({ baseURL: 'http://example.com' });\n * axiosRetry(client, { retries: 3 });\n *\n * client.get('/test') // The first request fails and the second returns 'ok'\n *   .then(result => {\n *     result.data; // 'ok'\n *   });\n *\n * // Allows request-specific configuration\n * client\n *   .get('/test', {\n *     'axios-retry': {\n *       retries: 0\n *     }\n *   })\n *   .catch(error => { // The first request fails\n *     error !== undefined\n *   });\n *\n * @param {Axios} axios An axios instance (the axios object or one created from axios.create)\n * @param {Object} [defaultOptions]\n * @param {number} [defaultOptions.retries=3] Number of retries\n * @param {boolean} [defaultOptions.shouldResetTimeout=false]\n *        Defines if the timeout should be reset between retries\n * @param {Function} [defaultOptions.retryCondition=isNetworkOrIdempotentRequestError]\n *        A function to determine if the error can be retried\n * @param {Function} [defaultOptions.retryDelay=noDelay]\n *        A function to determine the delay between retry requests\n * @param {Function} [defaultOptions.onRetry=()=>{}]\n *        A function to get notified when a retry occurs\n */\n\n\nfunction _shouldRetry() {\n  _shouldRetry = _asyncToGenerator(function* (retries, retryCondition, currentState, error) {\n    var shouldRetryOrPromise = currentState.retryCount < retries && retryCondition(error); // This could be a promise\n\n    if (typeof shouldRetryOrPromise === 'object') {\n      try {\n        var shouldRetryPromiseResult = yield shouldRetryOrPromise; // keep return true unless shouldRetryPromiseResult return false for compatibility\n\n        return shouldRetryPromiseResult !== false;\n      } catch (_err) {\n        return false;\n      }\n    }\n\n    return shouldRetryOrPromise;\n  });\n  return _shouldRetry.apply(this, arguments);\n}\n\nexport default function axiosRetry(axios, defaultOptions) {\n  axios.interceptors.request.use(config => {\n    var currentState = getCurrentState(config);\n    currentState.lastRequestTime = Date.now();\n    return config;\n  });\n  axios.interceptors.response.use(null, /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (error) {\n      var {\n        config\n      } = error; // If we have no information to retry the request\n\n      if (!config) {\n        return Promise.reject(error);\n      }\n\n      var {\n        retries = 3,\n        retryCondition = isNetworkOrIdempotentRequestError,\n        retryDelay = noDelay,\n        shouldResetTimeout = false,\n        onRetry = () => {}\n      } = getRequestOptions(config, defaultOptions);\n      var currentState = getCurrentState(config);\n\n      if (yield shouldRetry(retries, retryCondition, currentState, error)) {\n        currentState.retryCount += 1;\n        var delay = retryDelay(currentState.retryCount, error); // Axios fails merging this configuration to the default configuration because it has an issue\n        // with circular structures: https://github.com/mzabriskie/axios/issues/370\n\n        fixConfig(axios, config);\n\n        if (!shouldResetTimeout && config.timeout && currentState.lastRequestTime) {\n          var lastRequestDuration = Date.now() - currentState.lastRequestTime; // Minimum 1ms timeout (passing 0 or less to XHR means no timeout)\n\n          config.timeout = Math.max(config.timeout - lastRequestDuration - delay, 1);\n        }\n\n        config.transformRequest = [data => data];\n        onRetry(currentState.retryCount, error, config);\n        return new Promise(resolve => setTimeout(() => resolve(axios(config)), delay));\n      }\n\n      return Promise.reject(error);\n    });\n\n    return function (_x5) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n} // Compatibility with CommonJS\n\naxiosRetry.isNetworkError = isNetworkError;\naxiosRetry.isSafeRequestError = isSafeRequestError;\naxiosRetry.isIdempotentRequestError = isIdempotentRequestError;\naxiosRetry.isNetworkOrIdempotentRequestError = isNetworkOrIdempotentRequestError;\naxiosRetry.exponentialDelay = exponentialDelay;\naxiosRetry.isRetryableError = isRetryableError;\n//# sourceMappingURL=index.js.map","import {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {UploadedFile} from '../../uploaded-file';\nimport axios, {AxiosInstance} from 'axios';\nimport {FileEntry} from '../../file-entry';\nimport {\n  getFromLocalStorage,\n  removeFromLocalStorage,\n  setInLocalStorage,\n} from '../../../utils/hooks/local-storage';\nimport {apiClient} from '../../../http/query-client';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\nimport axiosRetry from 'axios-retry';\n\nconst oneMB = 1024 * 1024;\n// chunk size that will be uploaded to s3 per request\nconst desiredChunkSize = 20 * oneMB;\n// how many urls should be pre-signed per call to backend\nconst batchSize = 10;\n// number of concurrent requests to s3 api\nconst concurrency = 5;\n\ninterface ChunkState {\n  blob: Blob | File;\n  done: boolean;\n  etag?: string;\n  partNumber: number;\n  bytesUploaded: number;\n}\n\ninterface SignedUrl {\n  url: string;\n  partNumber: number;\n}\n\ninterface StoredUrl {\n  createdAt: string;\n  uploadId: string;\n  fileKey: string;\n}\n\ninterface UploadedPart {\n  PartNumber: number;\n  ETag: string;\n  Size: string;\n  LastModified: string;\n}\n\nexport class S3MultipartUpload implements UploadStrategy {\n  private abortController: AbortController;\n  private chunks: ChunkState[] = [];\n  private uploadId?: string;\n  private fileKey?: string;\n  private readonly chunkAxios: AxiosInstance;\n  private abortedByUser = false;\n  private uploadedParts?: UploadedPart[];\n\n  get storageKey(): string {\n    return `s3-multipart::${this.file.fingerprint}`;\n  }\n\n  constructor(\n    private file: UploadedFile,\n    private config: UploadStrategyConfig\n  ) {\n    this.abortController = new AbortController();\n    this.chunkAxios = axios.create();\n    axiosRetry(this.chunkAxios, {retries: 3});\n  }\n\n  async start() {\n    const storedUrl = getFromLocalStorage(this.storageKey);\n    if (storedUrl) {\n      await this.getUploadedParts(storedUrl);\n    }\n\n    if (!this.uploadedParts?.length) {\n      await this.createMultipartUpload();\n      if (!this.uploadId) return;\n    }\n\n    this.prepareChunks();\n\n    const result = await this.uploadParts();\n    if (result === 'done') {\n      const isCompleted = await this.completeMultipartUpload();\n      if (!isCompleted) return;\n\n      // catch any errors so below \"onError\" handler gets executed\n      try {\n        const response = await this.createFileEntry();\n        if (response?.fileEntry) {\n          this.config.onSuccess?.(response?.fileEntry);\n          removeFromLocalStorage(this.storageKey);\n          return;\n        }\n      } catch {}\n    }\n\n    // upload failed\n    if (!this.abortController.signal.aborted) {\n      this.abortController.abort();\n    }\n    if (!this.abortedByUser) {\n      this.config.onError?.();\n    }\n  }\n\n  async abort() {\n    this.abortedByUser = true;\n    this.abortController.abort();\n    await this.abortUploadOnS3();\n  }\n\n  private async uploadParts(): Promise<any> {\n    const pendingChunks = this.chunks.filter(c => !c.done);\n    if (!pendingChunks.length) {\n      return Promise.resolve('done');\n    }\n\n    const signedUrls = await this.batchSignUrls(\n      pendingChunks.slice(0, batchSize)\n    );\n    if (!signedUrls) return;\n\n    while (signedUrls.length) {\n      const batch = signedUrls.splice(0, concurrency);\n      const pendingUploads = batch.map(item => {\n        return this.uploadPartToS3(item);\n      });\n      const result = await Promise.all(pendingUploads);\n      // if not all uploads in batch completed, bail\n      if (!result.every(r => r)) return;\n    }\n\n    return await this.uploadParts();\n  }\n\n  private async batchSignUrls(\n    batch: ChunkState[]\n  ): Promise<SignedUrl[] | undefined> {\n    const response = await this.chunkAxios\n      .post(\n        'api/v1/s3/multipart/batch-sign-part-urls',\n        {\n          partNumbers: batch.map(i => i.partNumber),\n          uploadId: this.uploadId,\n          key: this.fileKey,\n        },\n        {signal: this.abortController.signal}\n      )\n      .then(r => r.data as {urls: SignedUrl[]})\n      .catch(err => {\n        if (!this.abortController.signal.aborted) {\n          this.abortController.abort();\n        }\n      });\n\n    return response?.urls;\n  }\n\n  private async uploadPartToS3({\n    url,\n    partNumber,\n  }: SignedUrl): Promise<boolean | void> {\n    const chunk = this.chunks.find(c => c.partNumber === partNumber);\n    if (!chunk) return;\n    return this.chunkAxios\n      .put(url, chunk.blob, {\n        withCredentials: false,\n        signal: this.abortController.signal,\n        onUploadProgress: (e: ProgressEvent) => {\n          if (!e.lengthComputable) return;\n\n          chunk.bytesUploaded = e.loaded;\n          const totalUploaded = this.chunks.reduce(\n            (n, c) => n + c.bytesUploaded,\n            0\n          );\n\n          this.config.onProgress?.({\n            bytesUploaded: totalUploaded,\n            bytesTotal: this.file.size,\n          });\n        },\n      })\n      .then(r => {\n        const etag = r.headers.etag;\n        if (etag) {\n          chunk.done = true;\n          chunk.etag = etag;\n          return true;\n        }\n      })\n      .catch(err => {\n        if (!this.abortController.signal.aborted && err !== undefined) {\n          this.abortController.abort();\n        }\n      });\n  }\n\n  private async createMultipartUpload(): Promise<void> {\n    const response = await apiClient\n      .post('s3/multipart/create', {\n        filename: this.file.name,\n        mime: this.file.mime,\n        size: this.file.size,\n        extension: this.file.extension,\n        ...this.config.metadata,\n      })\n      .then(r => r.data as {uploadId: string; key: string})\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n\n    if (response) {\n      this.uploadId = response.uploadId;\n      this.fileKey = response.key;\n      setInLocalStorage(this.storageKey, {\n        createdAt: new Date().toISOString(),\n        fileKey: this.fileKey,\n        uploadId: this.uploadId,\n      } as StoredUrl);\n    }\n  }\n\n  private async getUploadedParts({fileKey, uploadId}: StoredUrl) {\n    const response = await apiClient\n      .post('s3/multipart/get-uploaded-parts', {\n        key: fileKey,\n        uploadId,\n      })\n      .then(r => r.data as {parts: UploadedPart[]})\n      .catch(() => {\n        removeFromLocalStorage(this.storageKey);\n        return null;\n      });\n    if (response?.parts?.length) {\n      this.uploadedParts = response.parts;\n      this.uploadId = uploadId;\n      this.fileKey = fileKey;\n    }\n  }\n\n  private async completeMultipartUpload(): Promise<{location: string} | null> {\n    return apiClient\n      .post('s3/multipart/complete', {\n        key: this.fileKey,\n        uploadId: this.uploadId,\n        parts: this.chunks.map(c => {\n          return {\n            ETag: c.etag,\n            PartNumber: c.partNumber,\n          };\n        }),\n      })\n      .then(r => r.data)\n      .catch(() => {\n        this.config.onError?.();\n        this.abortUploadOnS3();\n      })\n      .finally(() => {\n        removeFromLocalStorage(this.storageKey);\n      });\n  }\n\n  private async createFileEntry(): Promise<{fileEntry: FileEntry}> {\n    return await apiClient\n      .post('s3/entries', {\n        ...this.config.metadata,\n        clientMime: this.file.mime,\n        clientName: this.file.name,\n        filename: this.fileKey!.split('/').pop(),\n        size: this.file.size,\n        clientExtension: this.file.extension,\n      })\n      .then(r => r.data)\n      .catch();\n  }\n\n  private prepareChunks() {\n    this.chunks = [];\n    // at least 5MB per request, at most 10k requests\n    const minChunkSize = Math.max(5 * oneMB, Math.ceil(this.file.size / 10000));\n    const chunkSize = Math.max(desiredChunkSize, minChunkSize);\n\n    // Upload zero-sized files in one zero-sized chunk\n    if (this.file.size === 0) {\n      this.chunks.push({\n        blob: this.file.native,\n        done: false,\n        partNumber: 1,\n        bytesUploaded: 0,\n      });\n    } else {\n      let partNumber = 1;\n      for (let i = 0; i < this.file.size; i += chunkSize) {\n        const end = Math.min(this.file.size, i + chunkSize);\n        // check if this part was already uploaded previously\n        const previouslyUploaded = this.uploadedParts?.find(\n          p => p.PartNumber === partNumber\n        );\n        this.chunks.push({\n          blob: this.file.native.slice(i, end),\n          done: !!previouslyUploaded,\n          partNumber,\n          etag: previouslyUploaded ? previouslyUploaded.ETag : undefined,\n          bytesUploaded: previouslyUploaded?.Size\n            ? parseInt(previouslyUploaded?.Size)\n            : 0,\n        });\n        partNumber++;\n      }\n    }\n  }\n\n  private abortUploadOnS3() {\n    return apiClient.post('s3/multipart/abort', {\n      key: this.fileKey,\n      uploadId: this.uploadId,\n    });\n  }\n\n  static async create(\n    file: UploadedFile,\n    config: UploadStrategyConfig\n  ): Promise<S3MultipartUpload> {\n    return new S3MultipartUpload(file, config);\n  }\n}\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.2';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it, fn = (x) => x) => new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a), c => c.charCodeAt(0));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar DetailedError = /*#__PURE__*/function (_Error) {\n  _inherits(DetailedError, _Error);\n\n  var _super = _createSuper(DetailedError);\n\n  function DetailedError(message) {\n    var _this;\n\n    var causingErr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var req = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var res = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, DetailedError);\n\n    _this = _super.call(this, message);\n    _this.originalRequest = req;\n    _this.originalResponse = res;\n    _this.causingError = causingErr;\n\n    if (causingErr != null) {\n      message += \", caused by \".concat(causingErr.toString());\n    }\n\n    if (req != null) {\n      var requestId = req.getHeader('X-Request-ID') || 'n/a';\n      var method = req.getMethod();\n      var url = req.getURL();\n      var status = res ? res.getStatus() : 'n/a';\n      var body = res ? res.getBody() || '' : 'n/a';\n      message += \", originated from request (method: \".concat(method, \", url: \").concat(url, \", response code: \").concat(status, \", response text: \").concat(body, \", request id: \").concat(requestId, \")\");\n    }\n\n    _this.message = message;\n    return _this;\n  }\n\n  return _createClass(DetailedError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nexport default DetailedError;","/**\n * Generate a UUID v4 based on random numbers. We intentioanlly use the less\n * secure Math.random function here since the more secure crypto.getRandomNumbers\n * is not available on all platforms.\n * This is not a problem for us since we use the UUID only for generating a\n * request ID, so we can correlate server logs to client errors.\n *\n * This function is taken from following site:\n * https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n *\n * @return {string} The generate UUID\n */\nexport default function uuid() {\n  /* eslint-disable no-bitwise */\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport { Base64 } from 'js-base64';\nimport URL from 'url-parse';\nimport DetailedError from './error.js';\nimport { log } from './logger.js';\nimport uuid from './uuid.js';\nvar defaultOptions = {\n  endpoint: null,\n  uploadUrl: null,\n  metadata: {},\n  fingerprint: null,\n  uploadSize: null,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  _onUploadUrlAvailable: null,\n  overridePatchMethod: false,\n  headers: {},\n  addRequestId: false,\n  onBeforeRequest: null,\n  onAfterResponse: null,\n  onShouldRetry: null,\n  chunkSize: Infinity,\n  retryDelays: [0, 1000, 3000, 5000],\n  parallelUploads: 1,\n  parallelUploadBoundaries: null,\n  storeFingerprintForResuming: true,\n  removeFingerprintOnSuccess: false,\n  uploadLengthDeferred: false,\n  uploadDataDuringCreation: false,\n  urlStorage: null,\n  fileReader: null,\n  httpStack: null\n};\n\nvar BaseUpload = /*#__PURE__*/function () {\n  function BaseUpload(file, options) {\n    _classCallCheck(this, BaseUpload);\n\n    // Warn about removed options from previous versions\n    if ('resume' in options) {\n      console.log('tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead.'); // eslint-disable-line no-console\n    } // The default options will already be added from the wrapper classes.\n\n\n    this.options = options; // Cast chunkSize to integer\n\n    this.options.chunkSize = Number(this.options.chunkSize); // The storage module used to store URLs\n\n    this._urlStorage = this.options.urlStorage; // The underlying File/Blob object\n\n    this.file = file; // The URL against which the file will be uploaded\n\n    this.url = null; // The underlying request object for the current PATCH request\n\n    this._req = null; // The fingerpinrt for the current file (set after start())\n\n    this._fingerprint = null; // The key that the URL storage returned when saving an URL with a fingerprint,\n\n    this._urlStorageKey = null; // The offset used in the current PATCH request\n\n    this._offset = null; // True if the current PATCH request has been aborted\n\n    this._aborted = false; // The file's size in bytes\n\n    this._size = null; // The Source object which will wrap around the given file and provides us\n    // with a unified interface for getting its size and slice chunks from its\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\n\n    this._source = null; // The current count of attempts which have been made. Zero indicates none.\n\n    this._retryAttempt = 0; // The timeout's ID which is used to delay the next retry\n\n    this._retryTimeout = null; // The offset of the remote upload before the latest attempt was started.\n\n    this._offsetBeforeRetry = 0; // An array of BaseUpload instances which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n\n    this._parallelUploads = null; // An array of upload URLs which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n\n    this._parallelUploadUrls = null;\n  }\n  /**\n   * Use the Termination extension to delete an upload from the server by sending a DELETE\n   * request to the specified upload URL. This is only possible if the server supports the\n   * Termination extension. If the `options.retryDelays` property is set, the method will\n   * also retry if an error ocurrs.\n   *\n   * @param {String} url The upload's URL which will be terminated.\n   * @param {object} options Optional options for influencing HTTP requests.\n   * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n   */\n\n\n  _createClass(BaseUpload, [{\n    key: \"findPreviousUploads\",\n    value: function findPreviousUploads() {\n      var _this = this;\n\n      return this.options.fingerprint(this.file, this.options).then(function (fingerprint) {\n        return _this._urlStorage.findUploadsByFingerprint(fingerprint);\n      });\n    }\n  }, {\n    key: \"resumeFromPreviousUpload\",\n    value: function resumeFromPreviousUpload(previousUpload) {\n      this.url = previousUpload.uploadUrl || null;\n      this._parallelUploadUrls = previousUpload.parallelUploadUrls || null;\n      this._urlStorageKey = previousUpload.urlStorageKey;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      var file = this.file;\n\n      if (!file) {\n        this._emitError(new Error('tus: no file or stream to upload provided'));\n\n        return;\n      }\n\n      if (!this.options.endpoint && !this.options.uploadUrl && !this.url) {\n        this._emitError(new Error('tus: neither an endpoint or an upload URL is provided'));\n\n        return;\n      }\n\n      var retryDelays = this.options.retryDelays;\n\n      if (retryDelays != null && Object.prototype.toString.call(retryDelays) !== '[object Array]') {\n        this._emitError(new Error('tus: the `retryDelays` option must either be an array or null'));\n\n        return;\n      }\n\n      if (this.options.parallelUploads > 1) {\n        // Test which options are incompatible with parallel uploads.\n        for (var _i = 0, _arr = ['uploadUrl', 'uploadSize', 'uploadLengthDeferred']; _i < _arr.length; _i++) {\n          var optionName = _arr[_i];\n\n          if (this.options[optionName]) {\n            this._emitError(new Error(\"tus: cannot use the \".concat(optionName, \" option when parallelUploads is enabled\")));\n\n            return;\n          }\n        }\n      }\n\n      if (this.options.parallelUploadBoundaries) {\n        if (this.options.parallelUploads <= 1) {\n          this._emitError(new Error('tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled'));\n\n          return;\n        }\n\n        if (this.options.parallelUploads !== this.options.parallelUploadBoundaries.length) {\n          this._emitError(new Error('tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`'));\n\n          return;\n        }\n      }\n\n      this.options.fingerprint(file, this.options).then(function (fingerprint) {\n        if (fingerprint == null) {\n          log('No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.');\n        } else {\n          log(\"Calculated fingerprint: \".concat(fingerprint));\n        }\n\n        _this2._fingerprint = fingerprint;\n\n        if (_this2._source) {\n          return _this2._source;\n        }\n\n        return _this2.options.fileReader.openFile(file, _this2.options.chunkSize);\n      }).then(function (source) {\n        _this2._source = source; // First, we look at the uploadLengthDeferred option.\n        // Next, we check if the caller has supplied a manual upload size.\n        // Finally, we try to use the calculated size from the source object.\n\n        if (_this2.options.uploadLengthDeferred) {\n          _this2._size = null;\n        } else if (_this2.options.uploadSize != null) {\n          _this2._size = Number(_this2.options.uploadSize);\n\n          if (Number.isNaN(_this2._size)) {\n            _this2._emitError(new Error('tus: cannot convert `uploadSize` option into a number'));\n\n            return;\n          }\n        } else {\n          _this2._size = _this2._source.size;\n\n          if (_this2._size == null) {\n            _this2._emitError(new Error(\"tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option\"));\n\n            return;\n          }\n        } // If the upload was configured to use multiple requests or if we resume from\n        // an upload which used multiple requests, we start a parallel upload.\n\n\n        if (_this2.options.parallelUploads > 1 || _this2._parallelUploadUrls != null) {\n          _this2._startParallelUpload();\n        } else {\n          _this2._startSingleUpload();\n        }\n      })[\"catch\"](function (err) {\n        _this2._emitError(err);\n      });\n    }\n    /**\n     * Initiate the uploading procedure for a parallelized upload, where one file is split into\n     * multiple request which are run in parallel.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startParallelUpload\",\n    value: function _startParallelUpload() {\n      var _this$options$paralle,\n          _this3 = this;\n\n      var totalSize = this._size;\n      var totalProgress = 0;\n      this._parallelUploads = [];\n      var partCount = this._parallelUploadUrls != null ? this._parallelUploadUrls.length : this.options.parallelUploads; // The input file will be split into multiple slices which are uploaded in separate\n      // requests. Here we get the start and end position for the slices.\n\n      var parts = (_this$options$paralle = this.options.parallelUploadBoundaries) !== null && _this$options$paralle !== void 0 ? _this$options$paralle : splitSizeIntoParts(this._source.size, partCount); // Attach URLs from previous uploads, if available.\n\n      if (this._parallelUploadUrls) {\n        parts.forEach(function (part, index) {\n          part.uploadUrl = _this3._parallelUploadUrls[index] || null;\n        });\n      } // Create an empty list for storing the upload URLs\n\n\n      this._parallelUploadUrls = new Array(parts.length); // Generate a promise for each slice that will be resolve if the respective\n      // upload is completed.\n\n      var uploads = parts.map(function (part, index) {\n        var lastPartProgress = 0;\n        return _this3._source.slice(part.start, part.end).then(function (_ref) {\n          var value = _ref.value;\n          return new Promise(function (resolve, reject) {\n            // Merge with the user supplied options but overwrite some values.\n            var options = _objectSpread(_objectSpread({}, _this3.options), {}, {\n              // If available, the partial upload should be resumed from a previous URL.\n              uploadUrl: part.uploadUrl || null,\n              // We take manually care of resuming for partial uploads, so they should\n              // not be stored in the URL storage.\n              storeFingerprintForResuming: false,\n              removeFingerprintOnSuccess: false,\n              // Reset the parallelUploads option to not cause recursion.\n              parallelUploads: 1,\n              // Reset this option as we are not doing a parallel upload.\n              parallelUploadBoundaries: null,\n              metadata: {},\n              // Add the header to indicate the this is a partial upload.\n              headers: _objectSpread(_objectSpread({}, _this3.options.headers), {}, {\n                'Upload-Concat': 'partial'\n              }),\n              // Reject or resolve the promise if the upload errors or completes.\n              onSuccess: resolve,\n              onError: reject,\n              // Based in the progress for this partial upload, calculate the progress\n              // for the entire final upload.\n              onProgress: function onProgress(newPartProgress) {\n                totalProgress = totalProgress - lastPartProgress + newPartProgress;\n                lastPartProgress = newPartProgress;\n\n                _this3._emitProgress(totalProgress, totalSize);\n              },\n              // Wait until every partial upload has an upload URL, so we can add\n              // them to the URL storage.\n              _onUploadUrlAvailable: function _onUploadUrlAvailable() {\n                _this3._parallelUploadUrls[index] = upload.url; // Test if all uploads have received an URL\n\n                if (_this3._parallelUploadUrls.filter(function (u) {\n                  return Boolean(u);\n                }).length === parts.length) {\n                  _this3._saveUploadInUrlStorage();\n                }\n              }\n            });\n\n            var upload = new BaseUpload(value, options);\n            upload.start(); // Store the upload in an array, so we can later abort them if necessary.\n\n            _this3._parallelUploads.push(upload);\n          });\n        });\n      });\n      var req; // Wait until all partial uploads are finished and we can send the POST request for\n      // creating the final upload.\n\n      Promise.all(uploads).then(function () {\n        req = _this3._openRequest('POST', _this3.options.endpoint);\n        req.setHeader('Upload-Concat', \"final;\".concat(_this3._parallelUploadUrls.join(' '))); // Add metadata if values have been added\n\n        var metadata = encodeMetadata(_this3.options.metadata);\n\n        if (metadata !== '') {\n          req.setHeader('Upload-Metadata', metadata);\n        }\n\n        return _this3._sendRequest(req, null);\n      }).then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this3._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n\n          return;\n        }\n\n        var location = res.getHeader('Location');\n\n        if (location == null) {\n          _this3._emitHttpError(req, res, 'tus: invalid or missing Location header');\n\n          return;\n        }\n\n        _this3.url = resolveUrl(_this3.options.endpoint, location);\n        log(\"Created upload at \".concat(_this3.url));\n\n        _this3._emitSuccess();\n      })[\"catch\"](function (err) {\n        _this3._emitError(err);\n      });\n    }\n    /**\n     * Initiate the uploading procedure for a non-parallel upload. Here the entire file is\n     * uploaded in a sequential matter.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startSingleUpload\",\n    value: function _startSingleUpload() {\n      // Reset the aborted flag when the upload is started or else the\n      // _performUpload will stop before sending a request if the upload has been\n      // aborted previously.\n      this._aborted = false; // The upload had been started previously and we should reuse this URL.\n\n      if (this.url != null) {\n        log(\"Resuming upload from previous URL: \".concat(this.url));\n\n        this._resumeUpload();\n\n        return;\n      } // A URL has manually been specified, so we try to resume\n\n\n      if (this.options.uploadUrl != null) {\n        log(\"Resuming upload from provided URL: \".concat(this.options.uploadUrl));\n        this.url = this.options.uploadUrl;\n\n        this._resumeUpload();\n\n        return;\n      } // An upload has not started for the file yet, so we start a new one\n\n\n      log('Creating a new upload');\n\n      this._createUpload();\n    }\n    /**\n     * Abort any running request and stop the current upload. After abort is called, no event\n     * handler will be invoked anymore. You can use the `start` method to resume the upload\n     * again.\n     * If `shouldTerminate` is true, the `terminate` function will be called to remove the\n     * current upload from the server.\n     *\n     * @param {boolean} shouldTerminate True if the upload should be deleted from the server.\n     * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n     */\n\n  }, {\n    key: \"abort\",\n    value: function abort(shouldTerminate) {\n      var _this4 = this;\n\n      // Stop any parallel partial uploads, that have been started in _startParallelUploads.\n      if (this._parallelUploads != null) {\n        this._parallelUploads.forEach(function (upload) {\n          upload.abort(shouldTerminate);\n        });\n      } // Stop any current running request.\n\n\n      if (this._req !== null) {\n        this._req.abort(); // Note: We do not close the file source here, so the user can resume in the future.\n\n      }\n\n      this._aborted = true; // Stop any timeout used for initiating a retry.\n\n      if (this._retryTimeout != null) {\n        clearTimeout(this._retryTimeout);\n        this._retryTimeout = null;\n      }\n\n      if (!shouldTerminate || this.url == null) {\n        return Promise.resolve();\n      }\n\n      return BaseUpload.terminate(this.url, this.options) // Remove entry from the URL storage since the upload URL is no longer valid.\n      .then(function () {\n        return _this4._removeFromUrlStorage();\n      });\n    }\n  }, {\n    key: \"_emitHttpError\",\n    value: function _emitHttpError(req, res, message, causingErr) {\n      this._emitError(new DetailedError(message, causingErr, req, res));\n    }\n  }, {\n    key: \"_emitError\",\n    value: function _emitError(err) {\n      var _this5 = this;\n\n      // Do not emit errors, e.g. from aborted HTTP requests, if the upload has been stopped.\n      if (this._aborted) return; // Check if we should retry, when enabled, before sending the error to the user.\n\n      if (this.options.retryDelays != null) {\n        // We will reset the attempt counter if\n        // - we were already able to connect to the server (offset != null) and\n        // - we were able to upload a small chunk of data to the server\n        var shouldResetDelays = this._offset != null && this._offset > this._offsetBeforeRetry;\n\n        if (shouldResetDelays) {\n          this._retryAttempt = 0;\n        }\n\n        if (shouldRetry(err, this._retryAttempt, this.options)) {\n          var delay = this.options.retryDelays[this._retryAttempt++];\n          this._offsetBeforeRetry = this._offset;\n          this._retryTimeout = setTimeout(function () {\n            _this5.start();\n          }, delay);\n          return;\n        }\n      }\n\n      if (typeof this.options.onError === 'function') {\n        this.options.onError(err);\n      } else {\n        throw err;\n      }\n    }\n    /**\n     * Publishes notification if the upload has been successfully completed.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_emitSuccess\",\n    value: function _emitSuccess() {\n      if (this.options.removeFingerprintOnSuccess) {\n        // Remove stored fingerprint and corresponding endpoint. This causes\n        // new uploads of the same file to be treated as a different file.\n        this._removeFromUrlStorage();\n      }\n\n      if (typeof this.options.onSuccess === 'function') {\n        this.options.onSuccess();\n      }\n    }\n    /**\n     * Publishes notification when data has been sent to the server. This\n     * data may not have been accepted by the server yet.\n     *\n     * @param {number} bytesSent  Number of bytes sent to the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n\n  }, {\n    key: \"_emitProgress\",\n    value: function _emitProgress(bytesSent, bytesTotal) {\n      if (typeof this.options.onProgress === 'function') {\n        this.options.onProgress(bytesSent, bytesTotal);\n      }\n    }\n    /**\n     * Publishes notification when a chunk of data has been sent to the server\n     * and accepted by the server.\n     * @param {number} chunkSize  Size of the chunk that was accepted by the server.\n     * @param {number} bytesAccepted Total number of bytes that have been\n     *                                accepted by the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n\n  }, {\n    key: \"_emitChunkComplete\",\n    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n      if (typeof this.options.onChunkComplete === 'function') {\n        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n      }\n    }\n    /**\n     * Create a new upload using the creation extension by sending a POST\n     * request to the endpoint. After successful creation the file will be\n     * uploaded\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_createUpload\",\n    value: function _createUpload() {\n      var _this6 = this;\n\n      if (!this.options.endpoint) {\n        this._emitError(new Error('tus: unable to create upload because no endpoint is provided'));\n\n        return;\n      }\n\n      var req = this._openRequest('POST', this.options.endpoint);\n\n      if (this.options.uploadLengthDeferred) {\n        req.setHeader('Upload-Defer-Length', 1);\n      } else {\n        req.setHeader('Upload-Length', this._size);\n      } // Add metadata if values have been added\n\n\n      var metadata = encodeMetadata(this.options.metadata);\n\n      if (metadata !== '') {\n        req.setHeader('Upload-Metadata', metadata);\n      }\n\n      var promise;\n\n      if (this.options.uploadDataDuringCreation && !this.options.uploadLengthDeferred) {\n        this._offset = 0;\n        promise = this._addChunkToRequest(req);\n      } else {\n        promise = this._sendRequest(req, null);\n      }\n\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this6._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n\n          return;\n        }\n\n        var location = res.getHeader('Location');\n\n        if (location == null) {\n          _this6._emitHttpError(req, res, 'tus: invalid or missing Location header');\n\n          return;\n        }\n\n        _this6.url = resolveUrl(_this6.options.endpoint, location);\n        log(\"Created upload at \".concat(_this6.url));\n\n        if (typeof _this6.options._onUploadUrlAvailable === 'function') {\n          _this6.options._onUploadUrlAvailable();\n        }\n\n        if (_this6._size === 0) {\n          // Nothing to upload and file was successfully created\n          _this6._emitSuccess();\n\n          _this6._source.close();\n\n          return;\n        }\n\n        _this6._saveUploadInUrlStorage().then(function () {\n          if (_this6.options.uploadDataDuringCreation) {\n            _this6._handleUploadResponse(req, res);\n          } else {\n            _this6._offset = 0;\n\n            _this6._performUpload();\n          }\n        });\n      })[\"catch\"](function (err) {\n        _this6._emitHttpError(req, null, 'tus: failed to create upload', err);\n      });\n    }\n    /*\n     * Try to resume an existing upload. First a HEAD request will be sent\n     * to retrieve the offset. If the request fails a new upload will be\n     * created. In the case of a successful response the file will be uploaded.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_resumeUpload\",\n    value: function _resumeUpload() {\n      var _this7 = this;\n\n      var req = this._openRequest('HEAD', this.url);\n\n      var promise = this._sendRequest(req, null);\n\n      promise.then(function (res) {\n        var status = res.getStatus();\n\n        if (!inStatusCategory(status, 200)) {\n          // If the upload is locked (indicated by the 423 Locked status code), we\n          // emit an error instead of directly starting a new upload. This way the\n          // retry logic can catch the error and will retry the upload. An upload\n          // is usually locked for a short period of time and will be available\n          // afterwards.\n          if (status === 423) {\n            _this7._emitHttpError(req, res, 'tus: upload is currently locked; retry later');\n\n            return;\n          }\n\n          if (inStatusCategory(status, 400)) {\n            // Remove stored fingerprint and corresponding endpoint,\n            // on client errors since the file can not be found\n            _this7._removeFromUrlStorage();\n          }\n\n          if (!_this7.options.endpoint) {\n            // Don't attempt to create a new upload if no endpoint is provided.\n            _this7._emitHttpError(req, res, 'tus: unable to resume upload (new upload cannot be created without an endpoint)');\n\n            return;\n          } // Try to create a new upload\n\n\n          _this7.url = null;\n\n          _this7._createUpload();\n\n          return;\n        }\n\n        var offset = parseInt(res.getHeader('Upload-Offset'), 10);\n\n        if (Number.isNaN(offset)) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing offset value');\n\n          return;\n        }\n\n        var length = parseInt(res.getHeader('Upload-Length'), 10);\n\n        if (Number.isNaN(length) && !_this7.options.uploadLengthDeferred) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing length value');\n\n          return;\n        }\n\n        if (typeof _this7.options._onUploadUrlAvailable === 'function') {\n          _this7.options._onUploadUrlAvailable();\n        }\n\n        _this7._saveUploadInUrlStorage().then(function () {\n          // Upload has already been completed and we do not need to send additional\n          // data to the server\n          if (offset === length) {\n            _this7._emitProgress(length, length);\n\n            _this7._emitSuccess();\n\n            return;\n          }\n\n          _this7._offset = offset;\n\n          _this7._performUpload();\n        });\n      })[\"catch\"](function (err) {\n        _this7._emitHttpError(req, null, 'tus: failed to resume upload', err);\n      });\n    }\n    /**\n     * Start uploading the file using PATCH requests. The file will be divided\n     * into chunks as specified in the chunkSize option. During the upload\n     * the onProgress event handler may be invoked multiple times.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_performUpload\",\n    value: function _performUpload() {\n      var _this8 = this;\n\n      // If the upload has been aborted, we will not send the next PATCH request.\n      // This is important if the abort method was called during a callback, such\n      // as onChunkComplete or onProgress.\n      if (this._aborted) {\n        return;\n      }\n\n      var req; // Some browser and servers may not support the PATCH method. For those\n      // cases, you can tell tus-js-client to use a POST request with the\n      // X-HTTP-Method-Override header for simulating a PATCH request.\n\n      if (this.options.overridePatchMethod) {\n        req = this._openRequest('POST', this.url);\n        req.setHeader('X-HTTP-Method-Override', 'PATCH');\n      } else {\n        req = this._openRequest('PATCH', this.url);\n      }\n\n      req.setHeader('Upload-Offset', this._offset);\n\n      var promise = this._addChunkToRequest(req);\n\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this8._emitHttpError(req, res, 'tus: unexpected response while uploading chunk');\n\n          return;\n        }\n\n        _this8._handleUploadResponse(req, res);\n      })[\"catch\"](function (err) {\n        // Don't emit an error if the upload was aborted manually\n        if (_this8._aborted) {\n          return;\n        }\n\n        _this8._emitHttpError(req, null, \"tus: failed to upload chunk at offset \".concat(_this8._offset), err);\n      });\n    }\n    /**\n     * _addChunktoRequest reads a chunk from the source and sends it using the\n     * supplied request object. It will not handle the response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_addChunkToRequest\",\n    value: function _addChunkToRequest(req) {\n      var _this9 = this;\n\n      var start = this._offset;\n      var end = this._offset + this.options.chunkSize;\n      req.setProgressHandler(function (bytesSent) {\n        _this9._emitProgress(start + bytesSent, _this9._size);\n      });\n      req.setHeader('Content-Type', 'application/offset+octet-stream'); // The specified chunkSize may be Infinity or the calcluated end position\n      // may exceed the file's size. In both cases, we limit the end position to\n      // the input's total size for simpler calculations and correctness.\n\n      if ((end === Infinity || end > this._size) && !this.options.uploadLengthDeferred) {\n        end = this._size;\n      }\n\n      return this._source.slice(start, end).then(function (_ref2) {\n        var value = _ref2.value,\n            done = _ref2.done;\n\n        // If the upload length is deferred, the upload size was not specified during\n        // upload creation. So, if the file reader is done reading, we know the total\n        // upload size and can tell the tus server.\n        if (_this9.options.uploadLengthDeferred && done) {\n          _this9._size = _this9._offset + (value && value.size ? value.size : 0);\n          req.setHeader('Upload-Length', _this9._size);\n        }\n\n        if (value === null) {\n          return _this9._sendRequest(req);\n        }\n\n        _this9._emitProgress(_this9._offset, _this9._size);\n\n        return _this9._sendRequest(req, value);\n      });\n    }\n    /**\n     * _handleUploadResponse is used by requests that haven been sent using _addChunkToRequest\n     * and already have received a response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_handleUploadResponse\",\n    value: function _handleUploadResponse(req, res) {\n      var offset = parseInt(res.getHeader('Upload-Offset'), 10);\n\n      if (Number.isNaN(offset)) {\n        this._emitHttpError(req, res, 'tus: invalid or missing offset value');\n\n        return;\n      }\n\n      this._emitProgress(offset, this._size);\n\n      this._emitChunkComplete(offset - this._offset, offset, this._size);\n\n      this._offset = offset;\n\n      if (offset === this._size) {\n        // Yay, finally done :)\n        this._emitSuccess();\n\n        this._source.close();\n\n        return;\n      }\n\n      this._performUpload();\n    }\n    /**\n     * Create a new HTTP request object with the given method and URL.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_openRequest\",\n    value: function _openRequest(method, url) {\n      var req = openRequest(method, url, this.options);\n      this._req = req;\n      return req;\n    }\n    /**\n     * Remove the entry in the URL storage, if it has been saved before.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_removeFromUrlStorage\",\n    value: function _removeFromUrlStorage() {\n      var _this10 = this;\n\n      if (!this._urlStorageKey) return;\n\n      this._urlStorage.removeUpload(this._urlStorageKey)[\"catch\"](function (err) {\n        _this10._emitError(err);\n      });\n\n      this._urlStorageKey = null;\n    }\n    /**\n     * Add the upload URL to the URL storage, if possible.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_saveUploadInUrlStorage\",\n    value: function _saveUploadInUrlStorage() {\n      var _this11 = this;\n\n      // We do not store the upload URL\n      // - if it was disabled in the option, or\n      // - if no fingerprint was calculated for the input (i.e. a stream), or\n      // - if the URL is already stored (i.e. key is set alread).\n      if (!this.options.storeFingerprintForResuming || !this._fingerprint || this._urlStorageKey !== null) {\n        return Promise.resolve();\n      }\n\n      var storedUpload = {\n        size: this._size,\n        metadata: this.options.metadata,\n        creationTime: new Date().toString()\n      };\n\n      if (this._parallelUploads) {\n        // Save multiple URLs if the parallelUploads option is used ...\n        storedUpload.parallelUploadUrls = this._parallelUploadUrls;\n      } else {\n        // ... otherwise we just save the one available URL.\n        storedUpload.uploadUrl = this.url;\n      }\n\n      return this._urlStorage.addUpload(this._fingerprint, storedUpload).then(function (urlStorageKey) {\n        _this11._urlStorageKey = urlStorageKey;\n      });\n    }\n    /**\n     * Send a request with the provided body.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_sendRequest\",\n    value: function _sendRequest(req) {\n      var body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      return sendRequest(req, body, this.options);\n    }\n  }], [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var req = openRequest('DELETE', url, options);\n      return sendRequest(req, null, options).then(function (res) {\n        // A 204 response indicates a successfull request\n        if (res.getStatus() === 204) {\n          return;\n        }\n\n        throw new DetailedError('tus: unexpected response while terminating upload', null, req, res);\n      })[\"catch\"](function (err) {\n        if (!(err instanceof DetailedError)) {\n          err = new DetailedError('tus: failed to terminate upload', err, req, null);\n        }\n\n        if (!shouldRetry(err, 0, options)) {\n          throw err;\n        } // Instead of keeping track of the retry attempts, we remove the first element from the delays\n        // array. If the array is empty, all retry attempts are used up and we will bubble up the error.\n        // We recursively call the terminate function will removing elements from the retryDelays array.\n\n\n        var delay = options.retryDelays[0];\n        var remainingDelays = options.retryDelays.slice(1);\n\n        var newOptions = _objectSpread(_objectSpread({}, options), {}, {\n          retryDelays: remainingDelays\n        });\n\n        return new Promise(function (resolve) {\n          return setTimeout(resolve, delay);\n        }).then(function () {\n          return BaseUpload.terminate(url, newOptions);\n        });\n      });\n    }\n  }]);\n\n  return BaseUpload;\n}();\n\nfunction encodeMetadata(metadata) {\n  return Object.entries(metadata).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    return \"\".concat(key, \" \").concat(Base64.encode(String(value)));\n  }).join(',');\n}\n/**\n * Checks whether a given status is in the range of the expected category.\n * For example, only a status between 200 and 299 will satisfy the category 200.\n *\n * @api private\n */\n\n\nfunction inStatusCategory(status, category) {\n  return status >= category && status < category + 100;\n}\n/**\n * Create a new HTTP request with the specified method and URL.\n * The necessary headers that are included in every request\n * will be added, including the request ID.\n *\n * @api private\n */\n\n\nfunction openRequest(method, url, options) {\n  var req = options.httpStack.createRequest(method, url);\n  req.setHeader('Tus-Resumable', '1.0.0');\n  var headers = options.headers || {};\n  Object.entries(headers).forEach(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        name = _ref6[0],\n        value = _ref6[1];\n\n    req.setHeader(name, value);\n  });\n\n  if (options.addRequestId) {\n    var requestId = uuid();\n    req.setHeader('X-Request-ID', requestId);\n  }\n\n  return req;\n}\n/**\n * Send a request with the provided body while invoking the onBeforeRequest\n * and onAfterResponse callbacks.\n *\n * @api private\n */\n\n\nfunction sendRequest(req, body, options) {\n  var onBeforeRequestPromise = typeof options.onBeforeRequest === 'function' ? Promise.resolve(options.onBeforeRequest(req)) : Promise.resolve();\n  return onBeforeRequestPromise.then(function () {\n    return req.send(body).then(function (res) {\n      var onAfterResponsePromise = typeof options.onAfterResponse === 'function' ? Promise.resolve(options.onAfterResponse(req, res)) : Promise.resolve();\n      return onAfterResponsePromise.then(function () {\n        return res;\n      });\n    });\n  });\n}\n/**\n * Checks whether the browser running this code has internet access.\n * This function will always return true in the node.js environment\n *\n * @api private\n */\n\n\nfunction isOnline() {\n  var online = true;\n\n  if (typeof window !== 'undefined' && 'navigator' in window // eslint-disable-line no-undef\n  && window.navigator.onLine === false) {\n    // eslint-disable-line no-undef\n    online = false;\n  }\n\n  return online;\n}\n/**\n * Checks whether or not it is ok to retry a request.\n * @param {Error} err the error returned from the last request\n * @param {number} retryAttempt the number of times the request has already been retried\n * @param {object} options tus Upload options\n *\n * @api private\n */\n\n\nfunction shouldRetry(err, retryAttempt, options) {\n  // We only attempt a retry if\n  // - retryDelays option is set\n  // - we didn't exceed the maxium number of retries, yet, and\n  // - this error was caused by a request or it's response and\n  // - the error is server error (i.e. not a status 4xx except a 409 or 423) or\n  // a onShouldRetry is specified and returns true\n  // - the browser does not indicate that we are offline\n  if (options.retryDelays == null || retryAttempt >= options.retryDelays.length || err.originalRequest == null) {\n    return false;\n  }\n\n  if (options && typeof options.onShouldRetry === 'function') {\n    return options.onShouldRetry(err, retryAttempt, options);\n  }\n\n  var status = err.originalResponse ? err.originalResponse.getStatus() : 0;\n  return (!inStatusCategory(status, 400) || status === 409 || status === 423) && isOnline();\n}\n/**\n * Resolve a relative link given the origin as source. For example,\n * if a HTTP request to http://example.com/files/ returns a Location\n * header with the value /upload/abc, the resolved URL will be:\n * http://example.com/upload/abc\n */\n\n\nfunction resolveUrl(origin, link) {\n  return new URL(link, origin).toString();\n}\n/**\n * Calculate the start and end positions for the parts if an upload\n * is split into multiple parallel requests.\n *\n * @param {number} totalSize The byte size of the upload, which will be split.\n * @param {number} partCount The number in how many parts the upload will be split.\n * @return {object[]}\n * @api private\n */\n\n\nfunction splitSizeIntoParts(totalSize, partCount) {\n  var partSize = Math.floor(totalSize / partCount);\n  var parts = [];\n\n  for (var i = 0; i < partCount; i++) {\n    parts.push({\n      start: partSize * i,\n      end: partSize * (i + 1)\n    });\n  }\n\n  parts[partCount - 1].end = totalSize;\n  return parts;\n}\n\nBaseUpload.defaultOptions = defaultOptions;\nexport default BaseUpload;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/* eslint no-unused-vars: \"off\" */\nvar NoopUrlStorage = /*#__PURE__*/function () {\n  function NoopUrlStorage() {\n    _classCallCheck(this, NoopUrlStorage);\n  }\n\n  _createClass(NoopUrlStorage, [{\n    key: \"listAllUploads\",\n    value: function listAllUploads() {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      return Promise.resolve(null);\n    }\n  }]);\n\n  return NoopUrlStorage;\n}();\n\nexport { NoopUrlStorage as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar hasStorage = false;\n\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n\n  var key = 'tusSupport';\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n\n        if (_key.indexOf(prefix) !== 0) continue;\n\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return WebStorageUrlStorage;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/* eslint-disable max-classes-per-file */\nvar XHRHttpStack = /*#__PURE__*/function () {\n  function XHRHttpStack() {\n    _classCallCheck(this, XHRHttpStack);\n  }\n\n  _createClass(XHRHttpStack, [{\n    key: \"createRequest\",\n    value: function createRequest(method, url) {\n      return new Request(method, url);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return 'XHRHttpStack';\n    }\n  }]);\n\n  return XHRHttpStack;\n}();\n\nexport { XHRHttpStack as default };\n\nvar Request = /*#__PURE__*/function () {\n  function Request(method, url) {\n    _classCallCheck(this, Request);\n\n    this._xhr = new XMLHttpRequest();\n\n    this._xhr.open(method, url, true);\n\n    this._method = method;\n    this._url = url;\n    this._headers = {};\n  }\n\n  _createClass(Request, [{\n    key: \"getMethod\",\n    value: function getMethod() {\n      return this._method;\n    }\n  }, {\n    key: \"getURL\",\n    value: function getURL() {\n      return this._url;\n    }\n  }, {\n    key: \"setHeader\",\n    value: function setHeader(header, value) {\n      this._xhr.setRequestHeader(header, value);\n\n      this._headers[header] = value;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._headers[header];\n    }\n  }, {\n    key: \"setProgressHandler\",\n    value: function setProgressHandler(progressHandler) {\n      // Test support for progress events before attaching an event listener\n      if (!('upload' in this._xhr)) {\n        return;\n      }\n\n      this._xhr.upload.onprogress = function (e) {\n        if (!e.lengthComputable) {\n          return;\n        }\n\n        progressHandler(e.loaded);\n      };\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      var _this = this;\n\n      var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return new Promise(function (resolve, reject) {\n        _this._xhr.onload = function () {\n          resolve(new Response(_this._xhr));\n        };\n\n        _this._xhr.onerror = function (err) {\n          reject(err);\n        };\n\n        _this._xhr.send(body);\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._xhr.abort();\n\n      return Promise.resolve();\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n\n  return Request;\n}();\n\nvar Response = /*#__PURE__*/function () {\n  function Response(xhr) {\n    _classCallCheck(this, Response);\n\n    this._xhr = xhr;\n  }\n\n  _createClass(Response, [{\n    key: \"getStatus\",\n    value: function getStatus() {\n      return this._xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._xhr.getResponseHeader(header);\n    }\n  }, {\n    key: \"getBody\",\n    value: function getBody() {\n      return this._xhr.responseText;\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n\n  return Response;\n}();","var isReactNative = function isReactNative() {\n  return typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative';\n};\n\nexport default isReactNative;","/**\n * uriToBlob resolves a URI to a Blob object. This is used for\n * React Native to retrieve a file (identified by a file://\n * URI) as a blob.\n */\nexport default function uriToBlob(uri) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n\n    xhr.onload = function () {\n      var blob = xhr.response;\n      resolve(blob);\n    };\n\n    xhr.onerror = function (err) {\n      reject(err);\n    };\n\n    xhr.open('GET', uri);\n    xhr.send();\n  });\n}","var isCordova = function isCordova() {\n  return typeof window !== 'undefined' && (typeof window.PhoneGap !== 'undefined' || typeof window.Cordova !== 'undefined' || typeof window.cordova !== 'undefined');\n};\n\nexport default isCordova;","/**\n * readAsByteArray converts a File object to a Uint8Array.\n * This function is only used on the Apache Cordova platform.\n * See https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/index.html#read-a-file\n */\nexport default function readAsByteArray(chunk) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      var value = new Uint8Array(reader.result);\n      resolve({\n        value: value\n      });\n    };\n\n    reader.onerror = function (err) {\n      reject(err);\n    };\n\n    reader.readAsArrayBuffer(chunk);\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport isCordova from './isCordova.js';\nimport readAsByteArray from './readAsByteArray.js';\n\nvar FileSource = /*#__PURE__*/function () {\n  // Make this.size a method\n  function FileSource(file) {\n    _classCallCheck(this, FileSource);\n\n    this._file = file;\n    this.size = file.size;\n  }\n\n  _createClass(FileSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      // In Apache Cordova applications, a File must be resolved using\n      // FileReader instances, see\n      // https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html#read-a-file\n      if (isCordova()) {\n        return readAsByteArray(this._file.slice(start, end));\n      }\n\n      var value = this._file.slice(start, end);\n\n      return Promise.resolve({\n        value: value\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {// Nothing to do here since we don't need to release any resources.\n    }\n  }]);\n\n  return FileSource;\n}();\n\nexport { FileSource as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction len(blobOrArray) {\n  if (blobOrArray === undefined) return 0;\n  if (blobOrArray.size !== undefined) return blobOrArray.size;\n  return blobOrArray.length;\n}\n/*\n  Typed arrays and blobs don't have a concat method.\n  This function helps StreamSource accumulate data to reach chunkSize.\n*/\n\n\nfunction concat(a, b) {\n  if (a.concat) {\n    // Is `a` an Array?\n    return a.concat(b);\n  }\n\n  if (a instanceof Blob) {\n    return new Blob([a, b], {\n      type: a.type\n    });\n  }\n\n  if (a.set) {\n    // Is `a` a typed array?\n    var c = new a.constructor(a.length + b.length);\n    c.set(a);\n    c.set(b, a.length);\n    return c;\n  }\n\n  throw new Error('Unknown data type');\n}\n\nvar StreamSource = /*#__PURE__*/function () {\n  function StreamSource(reader) {\n    _classCallCheck(this, StreamSource);\n\n    this._buffer = undefined;\n    this._bufferOffset = 0;\n    this._reader = reader;\n    this._done = false;\n  }\n\n  _createClass(StreamSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      if (start < this._bufferOffset) {\n        return Promise.reject(new Error(\"Requested data is before the reader's current offset\"));\n      }\n\n      return this._readUntilEnoughDataOrDone(start, end);\n    }\n  }, {\n    key: \"_readUntilEnoughDataOrDone\",\n    value: function _readUntilEnoughDataOrDone(start, end) {\n      var _this = this;\n\n      var hasEnoughData = end <= this._bufferOffset + len(this._buffer);\n\n      if (this._done || hasEnoughData) {\n        var value = this._getDataFromBuffer(start, end);\n\n        var done = value == null ? this._done : false;\n        return Promise.resolve({\n          value: value,\n          done: done\n        });\n      }\n\n      return this._reader.read().then(function (_ref) {\n        var value = _ref.value,\n            done = _ref.done;\n\n        if (done) {\n          _this._done = true;\n        } else if (_this._buffer === undefined) {\n          _this._buffer = value;\n        } else {\n          _this._buffer = concat(_this._buffer, value);\n        }\n\n        return _this._readUntilEnoughDataOrDone(start, end);\n      });\n    }\n  }, {\n    key: \"_getDataFromBuffer\",\n    value: function _getDataFromBuffer(start, end) {\n      // Remove data from buffer before `start`.\n      // Data might be reread from the buffer if an upload fails, so we can only\n      // safely delete data when it comes *before* what is currently being read.\n      if (start > this._bufferOffset) {\n        this._buffer = this._buffer.slice(start - this._bufferOffset);\n        this._bufferOffset = start;\n      } // If the buffer is empty after removing old data, all data has been read.\n\n\n      var hasAllDataBeenRead = len(this._buffer) === 0;\n\n      if (this._done && hasAllDataBeenRead) {\n        return null;\n      } // We already removed data before `start`, so we just return the first\n      // chunk from the buffer.\n\n\n      return this._buffer.slice(0, end - start);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (this._reader.cancel) {\n        this._reader.cancel();\n      }\n    }\n  }]);\n\n  return StreamSource;\n}();\n\nexport { StreamSource as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport isReactNative from './isReactNative.js';\nimport uriToBlob from './uriToBlob.js';\nimport FileSource from './sources/FileSource.js';\nimport StreamSource from './sources/StreamSource.js';\n\nvar FileReader = /*#__PURE__*/function () {\n  function FileReader() {\n    _classCallCheck(this, FileReader);\n  }\n\n  _createClass(FileReader, [{\n    key: \"openFile\",\n    value: function openFile(input, chunkSize) {\n      // In React Native, when user selects a file, instead of a File or Blob,\n      // you usually get a file object {} with a uri property that contains\n      // a local path to the file. We use XMLHttpRequest to fetch\n      // the file blob, before uploading with tus.\n      if (isReactNative() && input && typeof input.uri !== 'undefined') {\n        return uriToBlob(input.uri).then(function (blob) {\n          return new FileSource(blob);\n        })[\"catch\"](function (err) {\n          throw new Error(\"tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. \".concat(err));\n        });\n      } // Since we emulate the Blob type in our tests (not all target browsers\n      // support it), we cannot use `instanceof` for testing whether the input value\n      // can be handled. Instead, we simply check is the slice() function and the\n      // size property are available.\n\n\n      if (typeof input.slice === 'function' && typeof input.size !== 'undefined') {\n        return Promise.resolve(new FileSource(input));\n      }\n\n      if (typeof input.read === 'function') {\n        chunkSize = Number(chunkSize);\n\n        if (!Number.isFinite(chunkSize)) {\n          return Promise.reject(new Error('cannot create source for stream without a finite value for the `chunkSize` option'));\n        }\n\n        return Promise.resolve(new StreamSource(input, chunkSize));\n      }\n\n      return Promise.reject(new Error('source object may only be an instance of File, Blob, or Reader in this environment'));\n    }\n  }]);\n\n  return FileReader;\n}();\n\nexport { FileReader as default };","import isReactNative from './isReactNative.js'; // TODO: Differenciate between input types\n\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @param {Object} options\n * @param {Function} callback\n */\n\nexport default function fingerprint(file, options) {\n  if (isReactNative()) {\n    return Promise.resolve(reactNativeFingerprint(file, options));\n  }\n\n  return Promise.resolve(['tus-br', file.name, file.type, file.size, file.lastModified, options.endpoint].join('-'));\n}\n\nfunction reactNativeFingerprint(file, options) {\n  var exifHash = file.exif ? hashCode(JSON.stringify(file.exif)) : 'noexif';\n  return ['tus-rn', file.name || 'noname', file.size || 'nosize', exifHash, options.endpoint].join('/');\n}\n\nfunction hashCode(str) {\n  /* eslint-disable no-bitwise */\n  // from https://stackoverflow.com/a/8831937/151666\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport BaseUpload from '../upload.js';\nimport NoopUrlStorage from '../noopUrlStorage.js';\nimport { enableDebugLog } from '../logger.js';\nimport DetailedError from '../error.js';\nimport { canStoreURLs, WebStorageUrlStorage } from './urlStorage.js';\nimport DefaultHttpStack from './httpStack.js';\nimport FileReader from './fileReader.js';\nimport fingerprint from './fileSignature.js';\n\nvar defaultOptions = _objectSpread(_objectSpread({}, BaseUpload.defaultOptions), {}, {\n  httpStack: new DefaultHttpStack(),\n  fileReader: new FileReader(),\n  urlStorage: canStoreURLs ? new WebStorageUrlStorage() : new NoopUrlStorage(),\n  fingerprint: fingerprint\n});\n\nvar Upload = /*#__PURE__*/function (_BaseUpload) {\n  _inherits(Upload, _BaseUpload);\n\n  var _super = _createSuper(Upload);\n\n  function Upload() {\n    var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Upload);\n\n    options = _objectSpread(_objectSpread({}, defaultOptions), options);\n    return _super.call(this, file, options);\n  }\n\n  _createClass(Upload, null, [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      options = _objectSpread(_objectSpread({}, defaultOptions), options);\n      return BaseUpload.terminate(url, options);\n    }\n  }]);\n\n  return Upload;\n}(BaseUpload);\n\nvar _window = window,\n    XMLHttpRequest = _window.XMLHttpRequest,\n    Blob = _window.Blob;\nvar isSupported = XMLHttpRequest && Blob && typeof Blob.prototype.slice === 'function';\nexport { Upload, canStoreURLs, defaultOptions, isSupported, enableDebugLog, DefaultHttpStack, DetailedError };","import {Upload} from 'tus-js-client';\nimport {UploadedFile} from '../../uploaded-file';\nimport {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {FileEntry} from '../../file-entry';\nimport {getAxiosErrorMessage} from '@common/utils/http/get-axios-error-message';\nimport {apiClient} from '@common/http/query-client';\nimport {getCookie} from 'react-use-cookie';\n\nexport class TusUpload implements UploadStrategy {\n  constructor(private upload: Upload) {}\n\n  start() {\n    this.upload.start();\n  }\n\n  abort() {\n    return this.upload.abort(true);\n  }\n\n  static async create(\n    file: UploadedFile,\n    {\n      onProgress,\n      onSuccess,\n      onError,\n      metadata,\n      chunkSize,\n      baseUrl,\n    }: UploadStrategyConfig\n  ): Promise<TusUpload> {\n    const tusFingerprint = ['tus', file.fingerprint, 'drive'].join('-');\n    const upload = new Upload(file.native, {\n      fingerprint: () => Promise.resolve(tusFingerprint),\n      removeFingerprintOnSuccess: true,\n      endpoint: `${baseUrl}/api/v1/tus/upload`,\n      chunkSize,\n      retryDelays: [0, 3000, 5000, 10000, 20000],\n      overridePatchMethod: true,\n      metadata: {\n        name: window.btoa(file.id),\n        clientName: file.name,\n        clientExtension: file.extension,\n        clientMime: file.mime || '',\n        clientSize: `${file.size}`,\n        ...(metadata as Record<string, string>),\n      },\n      headers: {\n        'X-XSRF-TOKEN': getCookie('XSRF-TOKEN'),\n      },\n      onError: err => {\n        if ('originalResponse' in err) {\n          try {\n            const message = JSON.parse(err.originalResponse.getBody())?.message;\n            onError?.(message);\n          } catch (e) {\n            onError?.();\n          }\n        } else {\n          onError?.();\n        }\n      },\n      onProgress(bytesUploaded, bytesTotal) {\n        onProgress?.({bytesUploaded, bytesTotal});\n      },\n      onSuccess: async () => {\n        const uploadKey = upload.url?.split('/').pop();\n        try {\n          if (uploadKey) {\n            const response = await createFileEntry(uploadKey);\n            onSuccess?.(response.fileEntry);\n          }\n        } catch (err) {\n          localStorage.removeItem(tusFingerprint);\n          onError?.(getAxiosErrorMessage(err));\n        }\n      },\n    });\n\n    const previousUploads = await upload.findPreviousUploads();\n    if (previousUploads.length) {\n      upload.resumeFromPreviousUpload(previousUploads[0]);\n    }\n\n    return new TusUpload(upload);\n  }\n}\n\nfunction createFileEntry(uploadKey: string): Promise<{fileEntry: FileEntry}> {\n  return apiClient.post('tus/entries', {uploadKey}).then(r => r.data);\n}\n","export interface BackendMetadata {\n  disk?: Disk;\n  diskPrefix?: string;\n  relativePath?: string | null;\n  [key: string]: number | string | null | undefined;\n}\n\nexport enum Disk {\n  public = 'public',\n  uploads = 'uploads',\n}\n","import {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {UploadedFile} from '../../uploaded-file';\nimport axios from 'axios';\nimport {FileEntry} from '../../file-entry';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\nimport {apiClient} from '../../../http/query-client';\n\ninterface PresignedRequest {\n  url: string;\n  key: string;\n  acl: string;\n}\n\nexport class S3Upload implements UploadStrategy {\n  private abortController: AbortController;\n  private presignedRequest?: PresignedRequest;\n\n  constructor(\n    private file: UploadedFile,\n    private config: UploadStrategyConfig\n  ) {\n    this.abortController = new AbortController();\n  }\n\n  async start() {\n    this.presignedRequest = await this.presignPostUrl();\n    if (!this.presignedRequest) return;\n\n    const result = await this.uploadFileToS3();\n    if (result !== 'uploaded') return;\n\n    const response = await this.createFileEntry();\n    if (response?.fileEntry) {\n      this.config.onSuccess?.(response.fileEntry);\n    } else if (!this.abortController.signal) {\n      this.config.onError?.();\n    }\n  }\n\n  abort() {\n    this.abortController.abort();\n    return Promise.resolve();\n  }\n\n  private presignPostUrl(): Promise<PresignedRequest> {\n    return apiClient\n      .post(\n        's3/simple/presign',\n        {\n          filename: this.file.name,\n          mime: this.file.mime,\n          disk: this.config.metadata?.disk,\n          size: this.file.size,\n          extension: this.file.extension,\n          ...this.config.metadata,\n        },\n        {signal: this.abortController.signal}\n      )\n      .then(r => r.data)\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n  }\n\n  private uploadFileToS3() {\n    const {url, acl} = this.presignedRequest!;\n    return axios\n      .put(url, this.file.native, {\n        signal: this.abortController.signal,\n        withCredentials: false,\n        headers: {\n          'Content-Type': this.file.mime,\n          'x-amz-acl': acl,\n        },\n        onUploadProgress: (e: ProgressEvent) => {\n          if (e.lengthComputable) {\n            this.config.onProgress?.({\n              bytesUploaded: e.loaded,\n              bytesTotal: e.total,\n            });\n          }\n        },\n      })\n      .then(() => 'uploaded')\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n  }\n\n  private async createFileEntry() {\n    return await apiClient\n      .post('s3/entries', {\n        ...this.config.metadata,\n        clientMime: this.file.mime,\n        clientName: this.file.name,\n        filename: this.presignedRequest!.key.split('/').pop(),\n        size: this.file.size,\n        clientExtension: this.file.extension,\n      })\n      .then(r => {\n        return r.data as {fileEntry: FileEntry};\n      })\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n  }\n\n  static async create(\n    file: UploadedFile,\n    config: UploadStrategyConfig\n  ): Promise<S3Upload> {\n    return new S3Upload(file, config);\n  }\n}\n","import {UploadedFile} from '../../uploaded-file';\nimport {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {apiClient} from '../../../http/query-client';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\n\nexport class AxiosUpload implements UploadStrategy {\n  private abortController: AbortController;\n  constructor(\n    private file: UploadedFile,\n    private config: UploadStrategyConfig\n  ) {\n    this.abortController = new AbortController();\n  }\n\n  async start() {\n    const formData = new FormData();\n    const {onSuccess, onError, onProgress, metadata} = this.config;\n\n    formData.set('file', this.file.native);\n    if (metadata) {\n      Object.entries(metadata).forEach(([key, value]) => {\n        formData.set(key, `${value}`);\n      });\n    }\n\n    const response = await apiClient\n      .post('file-entries', formData, {\n        onUploadProgress: (e: ProgressEvent) => {\n          if (e.lengthComputable) {\n            onProgress?.({\n              bytesUploaded: e.loaded,\n              bytesTotal: e.total,\n            });\n          }\n        },\n        signal: this.abortController.signal,\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          onError?.(getAxiosErrorMessage(err));\n        }\n      });\n\n    // if upload was aborted, it will be handled and set\n    // as \"aborted\" already, no need to set it as \"failed\"\n    if (this.abortController.signal.aborted) {\n      return;\n    }\n\n    if (response && response.data.fileEntry) {\n      onSuccess?.(response.data.fileEntry);\n    }\n  }\n\n  abort() {\n    this.abortController.abort();\n    return Promise.resolve();\n  }\n\n  static async create(\n    file: UploadedFile,\n    config: UploadStrategyConfig\n  ): Promise<AxiosUpload> {\n    return new AxiosUpload(file, config);\n  }\n}\n","export class ProgressTimeout {\n  public aliveTimer: any;\n  public isDone = false;\n  public timeout = 30000;\n  public timeoutHandler: (() => void) | null = null;\n\n  progress() {\n    // Some browsers fire another progress event when the upload is\n    // cancelled, so we have to ignore progress after the timer was\n    // told to stop.\n    if (this.isDone || !this.timeoutHandler) return;\n\n    if (this.timeout > 0) {\n      clearTimeout(this.aliveTimer);\n      this.aliveTimer = setTimeout(this.timeoutHandler, this.timeout);\n    }\n  }\n\n  done() {\n    if (!this.isDone) {\n      clearTimeout(this.aliveTimer);\n      this.aliveTimer = null;\n      this.isDone = true;\n    }\n  }\n}\n","import {UploadStrategy, UploadStrategyConfig} from './strategy/upload-strategy';\nimport {UploadedFile} from '../uploaded-file';\nimport {Disk} from '../types/backend-metadata';\nimport {S3MultipartUpload} from './strategy/s3-multipart-upload';\nimport {S3Upload} from './strategy/s3-upload';\nimport {TusUpload} from './strategy/tus-upload';\nimport {AxiosUpload} from './strategy/axios-upload';\nimport {FileUpload, FileUploadState} from './file-upload-store';\nimport {validateUpload} from './validate-upload';\nimport {getBootstrapData} from '../../core/bootstrap-data/use-backend-bootstrap-data';\nimport {toast} from '../../ui/toast/toast';\nimport {ProgressTimeout} from './progress-timeout';\nimport {message} from '../../i18n/message';\n\nexport async function startUploading(\n  upload: FileUpload,\n  state: FileUploadState\n): Promise<UploadStrategy | null> {\n  const settings = getBootstrapData().settings;\n  const options = upload.options;\n  const file = upload.file;\n\n  // validate file, if validation fails, error the upload and bail\n  if (options?.restrictions) {\n    const errorMessage = validateUpload(file, options.restrictions);\n    if (errorMessage) {\n      state.updateFileUpload(file.id, {\n        errorMessage,\n        status: 'failed',\n        request: undefined,\n        timer: undefined,\n      });\n\n      if (options.showToastOnRestrictionFail) {\n        toast.danger(errorMessage);\n      }\n\n      state.runQueue();\n      return null;\n    }\n  }\n\n  // prepare config for file upload strategy\n  const timer = new ProgressTimeout();\n  const config: UploadStrategyConfig = {\n    metadata: {\n      ...options?.metadata,\n      relativePath: file.relativePath,\n      disk: options?.metadata?.disk || Disk.uploads,\n      parentId: options?.metadata?.parentId || '',\n    },\n    chunkSize: settings.uploads.chunk_size,\n    baseUrl: settings.base_url,\n    onError: errorMessage => {\n      state.updateFileUpload(file.id, {\n        errorMessage,\n        status: 'failed',\n      });\n      state.runQueue();\n      timer.done();\n      options?.onError?.(errorMessage);\n    },\n    onSuccess: entry => {\n      state.updateFileUpload(file.id, {\n        status: 'completed',\n        entry,\n      });\n      state.runQueue();\n      timer.done();\n      options?.onSuccess?.(entry);\n    },\n    onProgress: ({bytesUploaded, bytesTotal}) => {\n      const percentage = (bytesUploaded / bytesTotal) * 100;\n      state.updateFileUpload(file.id, {\n        percentage,\n        bytesUploaded,\n      });\n      timer.progress();\n      options?.onProgress?.({bytesUploaded, bytesTotal});\n    },\n  };\n\n  // choose and create upload strategy, based on file size and settings\n  const strategy = chooseUploadStrategy(file, config);\n  const request = await strategy.create(file, config);\n\n  // add handler for when upload times out (no progress for 30+ seconds)\n  timer.timeoutHandler = () => {\n    request.abort();\n    state.updateFileUpload(file.id, {\n      status: 'failed',\n      errorMessage: message('Upload timed out'),\n    });\n    state.runQueue();\n  };\n\n  state.updateFileUpload(file.id, {\n    status: 'inProgress',\n  });\n  request.start();\n\n  return request;\n}\n\nconst OneMB = 1024 * 1024;\nconst FourMB = 4 * OneMB;\nconst HundredMB = 100 * OneMB;\n\nconst chooseUploadStrategy = (\n  file: UploadedFile,\n  config: UploadStrategyConfig\n) => {\n  const settings = getBootstrapData().settings;\n  const disk = config.metadata?.disk || Disk.uploads;\n  const driver =\n    disk === Disk.uploads\n      ? settings.uploads.uploads_driver\n      : settings.uploads.public_driver;\n\n  if (driver?.endsWith('s3') && settings.uploads.s3_direct_upload) {\n    return file.size >= HundredMB ? S3MultipartUpload : S3Upload;\n  } else {\n    // 4MB = Axios, otherwise Tus\n    return file.size >= FourMB && !settings.uploads.disable_tus\n      ? TusUpload\n      : AxiosUpload;\n  }\n};\n","import {UploadedFile} from '../uploaded-file';\nimport {UploadStrategyConfig} from './strategy/upload-strategy';\nimport {FileUpload} from './file-upload-store';\n\nexport function createUpload(\n  file: UploadedFile | File,\n  options?: UploadStrategyConfig\n): FileUpload {\n  const uploadedFile =\n    file instanceof UploadedFile ? file : new UploadedFile(file);\n  return {\n    file: uploadedFile,\n    percentage: 0,\n    bytesUploaded: 0,\n    status: 'pending',\n    options: options || {},\n  };\n}\n","import create from 'zustand';\nimport {immer} from 'zustand/middleware/immer';\nimport {enableMapSet} from 'immer';\nimport {WritableDraft} from 'immer/dist/types/types-external';\nimport {UploadedFile} from '../uploaded-file';\nimport {UploadStrategy, UploadStrategyConfig} from './strategy/upload-strategy';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport {FileEntry} from '../file-entry';\nimport {S3MultipartUpload} from './strategy/s3-multipart-upload';\nimport {Settings} from '../../core/settings/settings';\nimport {TusUpload} from './strategy/tus-upload';\nimport {ProgressTimeout} from './progress-timeout';\nimport {startUploading} from './start-uploading';\nimport {createUpload} from './create-file-upload';\n\nenableMapSet();\n\nexport interface FileUpload {\n  file: UploadedFile;\n  percentage: number;\n  bytesUploaded: number;\n  status: 'pending' | 'inProgress' | 'aborted' | 'failed' | 'completed';\n  errorMessage?: string | MessageDescriptor;\n  entry?: FileEntry;\n  request?: UploadStrategy;\n  timer?: ProgressTimeout;\n  options: UploadStrategyConfig;\n}\n\nexport interface FileUploadState {\n  concurrency: number;\n  fileUploads: Map<string, FileUpload>;\n  // uploads with pending and inProgress status\n  activeUploadsCount: number;\n  completedUploadsCount: number;\n  uploadMultiple: (\n    files: (File | UploadedFile)[] | FileList,\n    options?: Omit<\n      UploadStrategyConfig,\n      // progress would be called for each upload simultaneously\n      'onProgress' | 'showToastOnRestrictionFail'\n    >\n  ) => string[];\n  uploadSingle: (\n    file: File | UploadedFile,\n    options?: UploadStrategyConfig\n  ) => string;\n  clearInactive: () => void;\n  abortUpload: (id: string) => void;\n  updateFileUpload: (id: string, state: Partial<FileUpload>) => void;\n  runQueue: () => void;\n}\n\ninterface StoreProps {\n  settings: Settings;\n}\nexport const createFileUploadStore = ({settings}: StoreProps) =>\n  create<FileUploadState>()(\n    immer((set, get) => {\n      return {\n        concurrency: 3,\n        fileUploads: new Map<string, FileUpload>(),\n        activeUploadsCount: 0,\n        completedUploadsCount: 0,\n\n        clearInactive: () => {\n          set(state => {\n            state.fileUploads.forEach((upload, key) => {\n              if (upload.status !== 'inProgress') {\n                state.fileUploads.delete(key);\n              }\n            });\n          });\n          get().runQueue();\n        },\n\n        abortUpload: id => {\n          const upload = get().fileUploads.get(id);\n          if (upload) {\n            upload.request?.abort();\n            get().updateFileUpload(id, {status: 'aborted'});\n            get().runQueue();\n          }\n        },\n\n        updateFileUpload: (id, newUploadState) => {\n          set(state => {\n            const fileUpload = state.fileUploads.get(id);\n            if (fileUpload) {\n              state.fileUploads.set(id, {\n                ...fileUpload,\n                ...newUploadState,\n              });\n\n              // only need to update inProgress count if status of the uploads in queue change\n              if ('status' in newUploadState) {\n                updateTotals(state);\n              }\n            }\n          });\n        },\n\n        uploadSingle: (file, userOptions) => {\n          const upload = createUpload(file, userOptions);\n          const fileUploads = new Map(get().fileUploads);\n          fileUploads.set(upload.file.id, upload);\n\n          set(state => {\n            updateTotals(state);\n            return {fileUploads};\n          });\n\n          get().runQueue();\n\n          return upload.file.id;\n        },\n\n        uploadMultiple: (files, options) => {\n          // create file upload items from specified files\n          const uploads = new Map<string, FileUpload>(get().fileUploads);\n          [...files].forEach(file => {\n            const upload = createUpload(file, options);\n            uploads.set(upload.file.id, upload);\n          });\n\n          // set state only once, there might be thousands of files, don't want to trigger a rerender for each one\n          set(state => {\n            updateTotals(state);\n            return {fileUploads: uploads};\n          });\n\n          console.log(uploads);\n\n          get().runQueue();\n          return [...uploads.keys()];\n        },\n\n        runQueue: async () => {\n          const uploads = [...get().fileUploads.values()];\n          const activeUploads = uploads.filter(u => u.status === 'inProgress');\n\n          let concurrency = get().concurrency;\n          if (\n            activeUploads.filter(\n              activeUpload =>\n                // only upload one file from folder at a time to avoid creating duplicate folders\n                activeUpload.file.relativePath ||\n                // only allow one s3 multipart upload at a time, it will already upload multiple parts in parallel\n                activeUpload.request instanceof S3MultipartUpload ||\n                // only allow one tus upload if file is larger than chunk size, tus will have parallel uploads already in that case\n                (activeUpload.request instanceof TusUpload &&\n                  settings.uploads.chunk_size &&\n                  activeUpload.file.size > settings.uploads.chunk_size)\n            ).length\n          ) {\n            concurrency = 1;\n          }\n\n          if (activeUploads.length < concurrency) {\n            //const pendingUploads = uploads.filter(u => u.status === 'pending');\n            //const next = pendingUploads.find(a => !!a.request);\n            const next = uploads.find(u => u.status === 'pending');\n            if (next) {\n              await startUploading(next, get());\n            }\n          }\n        },\n      };\n    })\n  );\n\nconst updateTotals = (state: WritableDraft<FileUploadState>) => {\n  state.completedUploadsCount = [...state.fileUploads.values()].filter(\n    u => u.status === 'completed'\n  ).length;\n  state.activeUploadsCount = [...state.fileUploads.values()].filter(\n    u => u.status === 'inProgress' || u.status === 'pending'\n  ).length;\n};\n","import createContext from 'zustand/context';\nimport {StoreApi} from 'zustand';\nimport {ReactNode} from 'react';\nimport {createFileUploadStore, FileUploadState} from './file-upload-store';\nimport {useSettings} from '../../core/settings/use-settings';\n\nconst {Provider, useStore} = createContext<StoreApi<FileUploadState>>();\nexport const useFileUploadStore = useStore;\n\ninterface FileUploadProviderProps {\n  children: ReactNode;\n}\nexport function FileUploadProvider({children}: FileUploadProviderProps) {\n  const settings = useSettings();\n  return (\n    <Provider createStore={() => createFileUploadStore({settings})}>\n      {children}\n    </Provider>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {apiClient} from '../../http/query-client';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  entryIds?: number[];\n  deleteForever?: boolean;\n  paths?: string[];\n}\n\nfunction deleteFileEntries(payload: Payload): Promise<Response> {\n  return apiClient.post('file-entries/delete', payload).then(r => r.data);\n}\n\nexport function useDeleteFileEntries() {\n  return useMutation((props: Payload) => deleteFileEntries(props), {\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {useCallback, useRef} from 'react';\nimport {useFileUploadStore} from './file-upload-provider';\nimport {UploadedFile} from '../uploaded-file';\nimport {UploadStrategyConfig} from './strategy/upload-strategy';\nimport {openUploadWindow} from '../utils/open-upload-window';\nimport {useDeleteFileEntries} from '@common/uploads/requests/delete-file-entries';\n\ninterface DeleteEntryProps {\n  onSuccess: () => void;\n  entryPath?: string;\n}\n\nexport function useActiveUpload() {\n  const deleteFileEntries = useDeleteFileEntries();\n\n  // use ref for setting ID to avoid extra renders, zustand selector\n  // will pick up changed selector on first progress event\n  const uploadIdRef = useRef<string>();\n\n  const uploadSingle = useFileUploadStore(s => s.uploadSingle);\n  const updateFileUpload = useFileUploadStore(s => s.updateFileUpload);\n  const activeUpload = useFileUploadStore(s =>\n    uploadIdRef.current ? s.fileUploads.get(uploadIdRef.current) : null\n  );\n\n  const uploadFile = useCallback(\n    (file: File | UploadedFile, config?: UploadStrategyConfig) => {\n      uploadIdRef.current = uploadSingle(file, config);\n    },\n    [uploadSingle]\n  );\n\n  const selectAndUploadFile = useCallback(\n    async (config?: UploadStrategyConfig) => {\n      const files = await openUploadWindow({\n        types: config?.restrictions?.allowedFileTypes,\n      });\n      uploadFile(files[0], config);\n    },\n    [uploadFile]\n  );\n\n  const deleteEntry = useCallback(\n    ({onSuccess, entryPath}: DeleteEntryProps) => {\n      const handleSuccess = () => {\n        if (activeUpload) {\n          updateFileUpload(activeUpload.file.id, {\n            ...activeUpload,\n            entry: undefined,\n          });\n        }\n        onSuccess();\n      };\n\n      if (!entryPath && !activeUpload?.entry?.id) {\n        handleSuccess();\n        return;\n      }\n\n      deleteFileEntries.mutate(\n        {\n          paths: entryPath ? [entryPath] : undefined,\n          entryIds: activeUpload?.entry?.id\n            ? [activeUpload?.entry?.id]\n            : undefined,\n          deleteForever: true,\n        },\n        {onSuccess: handleSuccess}\n      );\n    },\n    [deleteFileEntries, activeUpload, updateFileUpload]\n  );\n\n  return {\n    uploadFile,\n    selectAndUploadFile,\n    percentage: activeUpload?.percentage || 0,\n    uploadStatus: activeUpload?.status,\n    entry: activeUpload?.entry,\n    deleteEntry,\n    isDeletingEntry: deleteFileEntries.isLoading,\n  };\n}\n","import {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {ChipField, ChipFieldProps} from './chip-field';\n\nexport type FormChipFieldProps<T> = ChipFieldProps<T> & {\n  name: string;\n};\n\nexport function FormChipField<T>({children, ...props}: FormChipFieldProps<T>) {\n  const {\n    field: {onChange, onBlur, value = [], ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<ChipFieldProps<T>> = {\n    onChange,\n    onBlur,\n    value,\n    invalid,\n    errorMessage: error?.message,\n  };\n\n  return (\n    <ChipField ref={ref} {...mergeProps(formProps, props)}>\n      {children}\n    </ChipField>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useActiveUpload} from '@common/uploads/uploader/use-active-upload';\nimport {\n  AvatarImageSelector,\n  MaxImageSize,\n} from '@common/ui/images/avatar-image-selector';\nimport {UploadInputType} from '@common/uploads/types/upload-input-config';\nimport {useFormContext} from 'react-hook-form';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {Disk} from '@common/uploads/types/backend-metadata';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\n\ninterface LinkSeoFieldsProps {\n  hideTitle?: boolean;\n}\nexport function LinkSeoFields({hideTitle}: LinkSeoFieldsProps) {\n  return (\n    <div>\n      <div className=\"block md:flex gap-24 mb-24\">\n        <FileUploadProvider>\n          <ImageField />\n        </FileUploadProvider>\n        <div className=\"flex-auto my-24 md:my-0\">\n          {!hideTitle && (\n            <FormTextField\n              name=\"name\"\n              label={<Trans message=\"Title\" />}\n              className=\"mb-24\"\n            />\n          )}\n          <FormTextField\n            inputElementType=\"textarea\"\n            name=\"description\"\n            rows={2}\n            label={<Trans message=\"description\" />}\n          />\n        </div>\n      </div>\n      <FormChipField\n        name=\"tags\"\n        label={<Trans message=\"Tags\" />}\n        valueKey=\"name\"\n      />\n    </div>\n  );\n}\n\nfunction ImageField() {\n  const {uploadFile, uploadStatus} = useActiveUpload();\n  const {setValue, watch} = useFormContext<CrupdateLinkFormValues>();\n  const imageUrl = watch('image');\n  return (\n    <AvatarImageSelector\n      className=\"flex-shrink-0\"\n      imageRadius=\"rounded\"\n      defaultImage={<div className=\"bg-alt w-full h-full rounded\" />}\n      value={imageUrl}\n      onUpload={file => {\n        uploadFile(file, {\n          metadata: {\n            disk: Disk.public,\n            diskPrefix: 'link',\n          },\n          restrictions: {\n            maxFileSize: MaxImageSize,\n            allowedFileTypes: [UploadInputType.image],\n          },\n          showToastOnRestrictionFail: true,\n          onSuccess: ({url}) => {\n            setValue('image', url, {shouldDirty: true});\n          },\n        });\n      }}\n      onRemove={() => {\n        setValue('image', null, {shouldDirty: true});\n      }}\n      isLoading={uploadStatus === 'inProgress'}\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AccountTreeIcon = createSvgIcon(\n  <path d=\"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z\" />\n, 'AccountTreeOutlined');\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {AddIcon} from '@common/icons/material/Add';\nimport {Button} from '@common/ui/buttons/button';\nimport {useFieldArray} from 'react-hook-form';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {LinkFormSection} from '@app/dashboard/links/forms/link-form-section';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\nexport function LinkUtmFields() {\n  const {trans} = useTrans();\n  const {disabled} = useLinkFeatureStatus('utm');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"UTM tags\" />}\n      description={\n        <Trans message=\"Add UTMs to track web traffic in analytics tools.\" />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include UTM functionality.\" />\n        )\n      }\n    >\n      <div className=\"block md:flex gap-24 items-center mt-24\">\n        <FormTextField\n          name=\"utm.source\"\n          label={<Trans message=\"Source\" />}\n          placeholder={trans(message('e.g: adwords, google, facebook'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormTextField\n          name=\"utm.medium\"\n          label={<Trans message=\"Medium\" />}\n          placeholder={trans(message('e.g: banner, email, social post'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n      <div className=\"block md:flex gap-24 items-center\">\n        <FormTextField\n          name=\"utm.campaign\"\n          label={<Trans message=\"Campaign\" />}\n          placeholder={trans(message('e.g: holiday special, birthday promo'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormTextField\n          name=\"utm.term\"\n          label={<Trans message=\"Term\" />}\n          placeholder={trans(message('Use to identify ppc keywords'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n      <FormTextField\n        name=\"utm.content\"\n        label={<Trans message=\"Content\" />}\n        placeholder={trans(\n          message('Use to differentiate ads or words on a page')\n        )}\n        className=\"mb-24\"\n        disabled={disabled}\n      />\n      <CustomTagsSection />\n    </LinkFormSection>\n  );\n}\n\nfunction CustomTagsSection() {\n  const {fields, append, remove} = useFieldArray<CrupdateLinkFormValues>({\n    name: 'utm_custom',\n  });\n  const {disabled} = useLinkFeatureStatus('utm');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"Custom parameters\" />}\n      description={\n        <Trans message=\"Add query parameters to track web traffic in analytics tools.\" />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include query parameters functionality.\" />\n        )\n      }\n    >\n      {fields.map((field, index) => (\n        <div key={field.id} className=\"block md:flex items-end gap-14\">\n          <FormTextField\n            required\n            name={`utm_custom.${index}.key`}\n            label={<Trans message=\"Key\" />}\n            className=\"flex-auto mt-24\"\n            disabled={disabled}\n          />\n          <FormTextField\n            required\n            name={`utm_custom.${index}.value`}\n            label={<Trans message=\"Value\" />}\n            className=\"flex-auto mt-24\"\n            disabled={disabled}\n          />\n          <RemoveButton onClick={() => remove(index)} />\n        </div>\n      ))}\n      <Button\n        className=\"mb-24 mt-12\"\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        onClick={() => {\n          append({key: '', value: ''});\n        }}\n        disabled={disabled}\n      >\n        <Trans message=\"Add parameter\" />\n      </Button>\n    </LinkFormSection>\n  );\n}\n\ninterface RemoveButtonProps {\n  onClick: () => void;\n}\nfunction RemoveButton({onClick}: RemoveButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    return (\n      <div className=\"mt-12\">\n        <Button variant=\"outline\" color=\"danger\" size=\"xs\" onClick={onClick}>\n          <Trans message=\"Remove\" />\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <IconButton color=\"danger\" onClick={onClick}>\n      <CloseIcon />\n    </IconButton>\n  );\n}\n","import {useMemo} from 'react';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\nexport function useDefaultCustomDomainHost(\n  allDomains?: CustomDomain[]\n): string {\n  const {custom_domains, base_url} = useSettings();\n  return useMemo(() => {\n    const selectedHost = custom_domains?.default_host;\n    if (selectedHost) {\n      const host = allDomains?.find(d => d.host === selectedHost)?.host;\n      if (host) return host;\n    }\n    return base_url.replace(/\\/$/, '').replace(/(^\\w+:|^)\\/\\//, '');\n  }, [custom_domains, base_url, allDomains]);\n}\n","import {FormSelect, FormSelectProps} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport {useDefaultCustomDomainHost} from '@common/custom-domains/use-default-custom-domain-host';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\n\ninterface FormCustomDomainSelectProps\n  extends Omit<FormSelectProps, 'children' | 'selectionMode'> {}\nexport function LinkDomainSelect({\n  ...selectProps\n}: FormCustomDomainSelectProps) {\n  const {data} = useLinkFormValueLists();\n  const defaultHost = useDefaultCustomDomainHost(data?.domains);\n  const {custom_domains} = useSettings();\n  const domains = data?.domains || [];\n\n  if (!custom_domains?.allow_select || !domains.length) return null;\n\n  return (\n    <FormSelect\n      selectionMode=\"single\"\n      label={<Trans message=\"Domain\" />}\n      {...selectProps}\n    >\n      {custom_domains.allow_all_option && (\n        <Item value={undefined} key=\"all\">\n          <Trans message=\"All my domains (including default)\" />\n        </Item>\n      )}\n      <Item\n        value={0}\n        key=\"default\"\n        startIcon={<RemoteFavicon url={defaultHost} />}\n      >\n        {removeProtocol(defaultHost)}\n      </Item>\n      {data?.domains?.map(domain => {\n        if (domain.host === defaultHost) return null;\n        return (\n          <Item\n            value={domain.id}\n            key={domain.id}\n            startIcon={<RemoteFavicon url={domain.host} />}\n          >\n            {removeProtocol(domain.host)}\n          </Item>\n        );\n      })}\n    </FormSelect>\n  );\n}\n","import {Accordion, AccordionItem} from '@common/ui/accordion/accordion';\nimport {Trans} from '@common/i18n/trans';\nimport {SettingsIcon} from '@common/icons/material/Settings';\nimport {LinkTypeField} from '@app/dashboard/links/forms/link-type-field';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {LockIcon} from '@common/icons/material/Lock';\nimport {LinkRestrictionFields} from '@app/dashboard/links/forms/link-restriction-fields';\nimport {SwapVertIcon} from '@common/icons/material/SwapVert';\nimport {LinkRetargetingFields} from '@app/dashboard/links/forms/link-retargeting-fields';\nimport {PublicIcon} from '@common/icons/material/Public';\nimport {LinkSeoFields} from '@app/dashboard/links/forms/link-seo-fields';\nimport {AccountTreeIcon} from '@common/icons/material/AccountTree';\nimport {LinkUtmFields} from '@app/dashboard/links/forms/link-utm-fields';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {LinkDomainSelect} from '@app/dashboard/links/forms/link-domain-select';\nimport {Fragment, ReactElement, useState} from 'react';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\ntype AccordionKey = 'options' | 'restrictions' | 'retargeting' | 'seo' | 'utm';\nexport type HidableLinkSettingsField =\n  | 'type'\n  | 'groups'\n  | 'seo'\n  | 'enabled'\n  | 'alias'\n  | 'title';\n\ninterface LinkSettingsFormProps {\n  multipleLinks?: boolean;\n  defaultExpanded?: AccordionKey[];\n  hiddenFields?: HidableLinkSettingsField[];\n  linkName?: ReactElement<MessageDescriptor>;\n}\nexport function LinkSettingsForm({\n  defaultExpanded,\n  multipleLinks,\n  hiddenFields = [],\n  linkName = <Trans message=\"link\" />,\n}: LinkSettingsFormProps) {\n  const {\n    links: {retargeting},\n  } = useSettings();\n  const [expandedValues, setExpandedValues] = useState<AccordionKey[]>(\n    defaultExpanded || []\n  );\n\n  return (\n    <Accordion\n      className=\"-ml-14 -mr-14\"\n      mode=\"multiple\"\n      variant=\"minimal\"\n      expandedValues={expandedValues}\n      onExpandedChange={values => {\n        setExpandedValues(values as AccordionKey[]);\n      }}\n    >\n      <AccordionItem\n        value=\"options\"\n        label={<Trans message=\"Settings\" />}\n        startIcon={<SettingsIcon />}\n      >\n        <LinkOptionsFields\n          multipleLinks={multipleLinks}\n          hiddenFields={hiddenFields}\n          linkName={linkName}\n        />\n      </AccordionItem>\n      <AccordionItem\n        value=\"restrictions\"\n        label={<Trans message=\"Restrictions\" />}\n        startIcon={<LockIcon />}\n      >\n        <LinkRestrictionFields linkName={linkName} />\n      </AccordionItem>\n      {retargeting && (\n        <AccordionItem\n          value=\"retargeting\"\n          label={<Trans message=\"Retargeting\" />}\n          startIcon={<SwapVertIcon />}\n        >\n          <LinkRetargetingFields />\n        </AccordionItem>\n      )}\n      {!hiddenFields.includes('seo') && (\n        <AccordionItem\n          label={<Trans message=\"SEO\" />}\n          startIcon={<PublicIcon />}\n          value=\"seo\"\n        >\n          <LinkSeoFields hideTitle={hiddenFields?.includes('title')} />\n        </AccordionItem>\n      )}\n      <AccordionItem\n        value=\"utm\"\n        label={<Trans message=\"UTM\" />}\n        startIcon={<AccountTreeIcon />}\n      >\n        <LinkUtmFields />\n      </AccordionItem>\n    </Accordion>\n  );\n}\n\ninterface LinkOptionsFieldsProps {\n  multipleLinks?: boolean;\n  hiddenFields: HidableLinkSettingsField[];\n  linkName: ReactElement<MessageDescriptor>;\n}\nfunction LinkOptionsFields({\n  multipleLinks,\n  hiddenFields,\n  linkName,\n}: LinkOptionsFieldsProps) {\n  const {\n    links: {enable_type, pixels},\n  } = useSettings();\n  const linkCount = multipleLinks ? 2 : 1;\n  const hideGroups = hiddenFields.includes('groups');\n  const hideType = hiddenFields.includes('type');\n  const hideEnabled = hiddenFields.includes('enabled');\n\n  return (\n    <Fragment>\n      {enable_type && !hideType && <LinkTypeField />}\n      <LinkDomainSelect\n        name=\"domain_id\"\n        className=\"mb-24\"\n        description={\n          <Trans\n            message=\"Select which domain should [one :name|other :names] be accessible with.\"\n            values={{name: linkName, count: linkCount}}\n          />\n        }\n      />\n      {!hideGroups && <LinkGroupsField multipleLinks={multipleLinks} />}\n      {pixels && (\n        <LinkPixelsField multipleLinks={multipleLinks} linkName={linkName} />\n      )}\n      {!hideEnabled && (\n        <FormSwitch\n          name=\"active\"\n          description={\n            <Trans\n              message=\"When [one :name is|other :names are] disabled, 404 page will be shown when short URL is visited.\"\n              values={{name: linkName, count: linkCount}}\n            />\n          }\n        >\n          <Trans message=\"Enabled\" />\n        </FormSwitch>\n      )}\n    </Fragment>\n  );\n}\n\ninterface LinkGroupsFieldProps {\n  multipleLinks?: boolean;\n}\nfunction LinkGroupsField({multipleLinks}: LinkGroupsFieldProps) {\n  const {data} = useLinkFormValueLists();\n  return (\n    <FormChipField\n      suggestions={data?.groups}\n      openMenuOnFocus={true}\n      allowCustomValue={false}\n      showDropdownArrow\n      className=\"mb-24\"\n      name=\"groups\"\n      label={<Trans message=\"Groups\" />}\n      description={\n        <Trans\n          message=\"Which groups should [one link|other these links] belong to.\"\n          values={{count: multipleLinks ? 2 : 1}}\n        />\n      }\n    >\n      {group => <Item value={group.id}>{group.name}</Item>}\n    </FormChipField>\n  );\n}\n\ninterface LinkPixelsFieldProps {\n  multipleLinks?: boolean;\n  linkName: ReactElement<MessageDescriptor>;\n}\nfunction LinkPixelsField({multipleLinks, linkName}: LinkPixelsFieldProps) {\n  const {data} = useLinkFormValueLists();\n  return (\n    <FormChipField\n      suggestions={data?.pixels}\n      openMenuOnFocus={true}\n      className=\"mb-24\"\n      name=\"pixels\"\n      label={<Trans message=\"Pixels\" />}\n      description={\n        <Trans\n          message=\"Which tracking pixels should be used for [one this :name|other these :names].\"\n          values={{count: multipleLinks ? 2 : 1, name: linkName}}\n        />\n      }\n    >\n      {pixel => <Item value={pixel.id}>{pixel.name}</Item>}\n    </FormChipField>\n  );\n}\n","import React, {Fragment, useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {RefCallBack} from 'react-hook-form';\nimport {Button} from './buttons/button';\nimport {LinkIcon} from '../icons/material/Link';\nimport {TextField} from './forms/input-field/text-field/text-field';\nimport {Trans} from '../i18n/trans';\nimport {useSettings} from '../core/settings/use-settings';\n\nexport interface SlugEditorProps {\n  suffix?: string;\n  host?: string;\n  value?: string | null;\n  onChange?: (value: string) => void;\n  className?: string;\n  inputRef?: RefCallBack;\n  onInputBlur?: () => void;\n  showLinkIcon?: boolean;\n  pattern?: string;\n  minLength?: number;\n  maxLength?: number;\n  hideButton?: boolean;\n}\nexport function SlugEditor({\n  suffix,\n  host,\n  value: initialValue,\n  onChange,\n  className,\n  inputRef,\n  onInputBlur,\n  showLinkIcon = true,\n  pattern,\n  minLength,\n  maxLength,\n  hideButton,\n}: SlugEditorProps) {\n  const {base_url} = useSettings();\n  const fullSuffix = suffix ? `/${suffix}` : '';\n  const [isEditing, setIsEditing] = useState(false);\n  const [value, setValue] = useState(initialValue);\n  host = host || base_url;\n\n  useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n\n  const handleSubmit = () => {\n    if (!isEditing) {\n      setIsEditing(true);\n    } else {\n      setIsEditing(false);\n      if (value) {\n        onChange?.(value);\n      }\n    }\n  };\n\n  return (\n    // can't use <form/> here as component might be used inside another form\n    <div className={clsx('flex items-center', className)}>\n      {showLinkIcon && <LinkIcon className=\"icon-md text-muted\" />}\n      <div className=\"text-primary ml-6 mr-14\">\n        {host}\n        {fullSuffix}\n        {!isEditing && value && (\n          <Fragment>\n            <span>/</span>\n            <span className=\"font-medium\">{value}</span>\n          </Fragment>\n        )}\n      </div>\n      {isEditing && (\n        <TextField\n          pattern={pattern}\n          minLength={minLength}\n          maxLength={maxLength}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              handleSubmit();\n            }\n          }}\n          ref={inputRef}\n          aria-label=\"slug\"\n          autoFocus\n          className=\"mr-14\"\n          size=\"2xs\"\n          value={value as string}\n          onBlur={onInputBlur}\n          onChange={e => {\n            setValue(e.target.value);\n          }}\n        />\n      )}\n      {!hideButton && (\n        <Button\n          type=\"button\"\n          color=\"chip\"\n          variant=\"outline\"\n          size=\"2xs\"\n          onClick={() => {\n            handleSubmit();\n          }}\n        >\n          {isEditing ? <Trans message=\"Save\" /> : <Trans message=\"Edit\" />}\n        </Button>\n      )}\n    </div>\n  );\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {SlugEditor} from '@common/ui/slug-editor';\nimport {NoPermissionButton} from '@app/dashboard/upgrade/no-permission-button';\nimport {Trans} from '@common/i18n/trans';\nimport {UseFormReturn} from 'react-hook-form';\n\ninterface AliasFieldProps {\n  form: UseFormReturn<{hash: string; alias: string} | any>;\n  name: 'alias' | 'hash';\n}\nexport function AliasField({form, name}: AliasFieldProps) {\n  const {\n    links: {alias_min, alias_max},\n    custom_domains,\n  } = useSettings();\n  const {disabled} = useLinkFeatureStatus('alias');\n  const {watch, setValue, formState} = form;\n  const currentAlias = watch('alias') || watch('hash');\n  const aliasError =\n    formState.errors.alias?.message || formState.errors.hash?.message;\n\n  return (\n    <div className=\"mb-24\">\n      <div className=\"flex items-center\">\n        <SlugEditor\n          host={custom_domains?.default_host}\n          pattern=\"[A-Za-z0-9_-]+\"\n          minLength={alias_min}\n          maxLength={alias_max}\n          value={currentAlias}\n          onChange={newAlias => {\n            setValue(name, newAlias);\n          }}\n          hideButton={disabled}\n        />\n        {disabled && (\n          <NoPermissionButton\n            message={\n              <Trans message=\"Your current plan does not include alias editing.\" />\n            }\n          />\n        )}\n      </div>\n      {aliasError && (\n        <div className=\"text-xs text-danger mt-6\">{aliasError as string}</div>\n      )}\n    </div>\n  );\n}\n","import {UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {Link} from '../link';\nimport {\n  HidableLinkSettingsField,\n  LinkSettingsForm,\n} from '@app/dashboard/links/forms/link-settings-form';\nimport {urlIsValid} from '@app/dashboard/links/utils/url-is-valid';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\nimport {LinkeableFormValues} from '@app/dashboard/links/utils/build-linkeable-payload';\nimport clsx from 'clsx';\n\nexport interface CrupdateLinkFormValues\n  extends Omit<Link, 'id' | 'utm'>,\n    LinkeableFormValues {\n  position?: number;\n}\n\ninterface CrupdateLinkFormProps {\n  onSubmit: (values: CrupdateLinkFormValues) => void;\n  formId?: string;\n  form: UseFormReturn<CrupdateLinkFormValues>;\n  showButtonLabelField?: boolean;\n  hiddenFields?: HidableLinkSettingsField[];\n}\nexport function CrupdateLinkForm({\n  form,\n  onSubmit,\n  formId,\n  showButtonLabelField,\n  hiddenFields,\n}: CrupdateLinkFormProps) {\n  const {clearErrors} = form;\n  const {trans} = useTrans();\n  const {\n    links: {min_len, max_len},\n  } = useSettings();\n  const hideAlias = hiddenFields?.includes('alias');\n\n  return (\n    <Form\n      form={form}\n      onSubmit={values => {\n        if (!urlIsValid(values.long_url)) {\n          form.setError('long_url', {\n            message: trans(message('This url is invalid.')),\n          });\n        } else {\n          onSubmit(values);\n        }\n      }}\n      onBeforeSubmit={() => {\n        // hook form won't clear errors for fields that are not bound to input\n        clearErrors('alias');\n      }}\n      id={formId}\n    >\n      {showButtonLabelField && (\n        <FormTextField\n          name=\"name\"\n          label={<Trans message=\"Button label\" />}\n          className=\"mb-24 flex-auto\"\n          placeholder={trans(message('e.g. My Webpage'))}\n          autoFocus\n        />\n      )}\n      <FormTextField\n        label={<Trans message=\"Destination URL\" />}\n        name=\"long_url\"\n        placeholder=\"https://example.com\"\n        autoComplete=\"off\"\n        spellCheck=\"false\"\n        required\n        className={clsx(hideAlias ? 'mb-24' : 'mb-12')}\n        autoFocus={!showButtonLabelField}\n        minLength={min_len}\n        maxLength={max_len}\n      />\n      {!hideAlias && <AliasField form={form} name=\"alias\" />}\n      <LinkSettingsForm hiddenFields={hiddenFields} />\n    </Form>\n  );\n}\n","import {removeEmptyValuesFromObject} from '@common/utils/objects/remove-empty-values-from-object';\nimport {Tag} from '@common/tags/tag';\nimport {LinkRule} from '@app/dashboard/links/link-rule';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\n\nexport const defaultUtmTags = [\n  'source',\n  'medium',\n  'campaign',\n  'term',\n  'content',\n];\n\nexport interface CrupdateLinkeablePayload\n  extends Omit<LinkeableFormValues, 'utm' | 'groups' | 'pixels' | 'tags'> {\n  utm?: string | null;\n  groups?: number[] | null;\n  pixels?: number[] | null;\n  tags?: string[] | null;\n}\n\nexport interface LinkeableFormValues {\n  exp_clicks_rule?: LinkRule;\n  geo_rules?: LinkRule[];\n  device_rules?: LinkRule[];\n  platform_rules?: LinkRule[];\n  pixels?: TrackingPixel[];\n  tags?: Tag[];\n  utm?: {\n    source?: string;\n    medium?: string;\n    campaign?: string;\n    term?: string;\n    content?: string;\n    [key: string]: string | undefined;\n  };\n  utm_custom?: {key: string; value: string}[];\n}\n\nexport function buildLinkeablePayload<R extends CrupdateLinkeablePayload>(\n  values: LinkeableFormValues\n): R {\n  let payload: CrupdateLinkeablePayload = {\n    ...values,\n    utm: null,\n    groups: null,\n    pixels: null,\n    tags: null,\n  };\n  payload = addUtmAndCustomQueryParams(payload, values);\n  payload.pixels = values.pixels ? values.pixels.map(pixel => pixel.id) : [];\n  payload.tags = values.tags?.map((tag: Tag | string) =>\n    typeof tag === 'string' ? tag : tag.name\n  );\n  return payload as R;\n}\n\nfunction addUtmAndCustomQueryParams(\n  payload: CrupdateLinkeablePayload,\n  values: LinkeableFormValues\n): CrupdateLinkeablePayload {\n  if (!values.utm && !values.utm_custom) return payload;\n  const utm = removeEmptyValuesFromObject(values.utm || {}) as Record<\n    string,\n    string\n  >;\n  values.utm_custom?.forEach(({key, value}) => {\n    utm[key] = value;\n  });\n\n  payload.utm = new URLSearchParams(utm).toString();\n  return payload;\n}\n","import {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {\n  buildLinkeablePayload,\n  CrupdateLinkeablePayload,\n} from '@app/dashboard/links/utils/build-linkeable-payload';\n\nexport interface CrupdateLinkPayload\n  extends Omit<CrupdateLinkFormValues, 'utm' | 'groups' | 'pixels' | 'tags'>,\n    CrupdateLinkeablePayload {}\n\nexport function buildLinkPayload(\n  values: CrupdateLinkFormValues\n): CrupdateLinkPayload {\n  const payload = buildLinkeablePayload<CrupdateLinkPayload>(values);\n  payload.groups = values.groups?.map(group => group.id);\n  return payload;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {buildLinkPayload} from '@app/dashboard/links/requests/build-link-payload';\n\ninterface Response extends BackendResponse {}\n\ninterface Options {\n  endpoint?: string;\n  invalidateQueries?: boolean;\n}\n\nexport function useCreateLink(\n  form: UseFormReturn<CrupdateLinkFormValues>,\n  {endpoint, invalidateQueries = true}: Options = {}\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: CrupdateLinkFormValues) => createLink(payload, endpoint),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Link created')));\n        if (invalidateQueries) {\n          queryClient.invalidateQueries(PaginatedResourcesQueryKey('link'));\n          queryClient.invalidateQueries(\n            PaginatedResourcesQueryKey('link-group')\n          );\n          queryClient.invalidateQueries(PaginatedResourcesQueryKey('biolink'));\n        }\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createLink(\n  values: CrupdateLinkFormValues,\n  endpoint?: string\n): Promise<Response> {\n  return apiClient\n    .post(endpoint || `link`, buildLinkPayload(values))\n    .then(r => r.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {\n  CrupdateLinkForm,\n  CrupdateLinkFormValues,\n} from '../forms/crupdate-link-form';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useCreateLink} from '../requests/use-create-link';\nimport {useForm} from 'react-hook-form';\nimport {nanoid} from 'nanoid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {HidableLinkSettingsField} from '@app/dashboard/links/forms/link-settings-form';\n\nexport interface CreateLinkDialogProps {\n  group?: LinkGroup | Biolink | null;\n  showButtonLabelField?: boolean;\n  hiddenFields?: HidableLinkSettingsField[];\n  endpoint?: string;\n  position?: number;\n  invalidateQueries?: boolean;\n  onSuccess?: (response: any) => void;\n}\nexport function CreateLinkDialog({\n  group,\n  position,\n  showButtonLabelField,\n  hiddenFields,\n  endpoint,\n  onSuccess,\n  invalidateQueries,\n}: CreateLinkDialogProps) {\n  const {close, formId} = useDialogContext();\n  const {\n    links: {default_type},\n    custom_domains,\n  } = useSettings();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const form = useForm<CrupdateLinkFormValues>({\n    defaultValues: {\n      hash: nanoid(5),\n      active: true,\n      type: default_type || 'direct',\n      geo_rules: [],\n      device_rules: [],\n      platform_rules: [],\n      // set undefined if no group id specified, so existing groups are not cleared in backend\n      groups: group ? [group as LinkGroup] : [],\n      position: position, // for biolink\n      utm: {},\n      utm_custom: [],\n      domain_id: custom_domains?.allow_all_option ? undefined : 0,\n    },\n  });\n  const createLink = useCreateLink(form, {endpoint, invalidateQueries});\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Create link\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkForm\n          hiddenFields={hiddenFields}\n          showButtonLabelField={showButtonLabelField}\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              createLink.mutate(values, {\n                onSuccess: response => {\n                  onSuccess?.(response);\n                  close();\n                },\n              });\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createLink.isLoading || isVerifying}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkFormValues} from '../forms/crupdate-link-form';\nimport {buildLinkPayload} from '@app/dashboard/links/requests/build-link-payload';\nimport {Link} from '../link';\n\ninterface Response extends BackendResponse {\n  link: Link;\n}\n\ninterface Options {\n  endpoint?: string;\n  invalidateQueries?: boolean;\n}\n\nexport function useUpdateLink(\n  form: UseFormReturn<CrupdateLinkFormValues>,\n  linkId: number,\n  {endpoint, invalidateQueries = true}: Options = {}\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: CrupdateLinkFormValues) => updateLink(linkId, payload, endpoint),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Link updated')));\n        if (invalidateQueries) {\n          queryClient.invalidateQueries(PaginatedResourcesQueryKey('link'));\n          queryClient.invalidateQueries(\n            PaginatedResourcesQueryKey('link-group')\n          );\n          queryClient.invalidateQueries(PaginatedResourcesQueryKey('biolink'));\n        }\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction updateLink(\n  id: number,\n  values: CrupdateLinkFormValues,\n  endpoint?: string\n): Promise<Response> {\n  return apiClient\n    .put(endpoint || `link/${id}`, buildLinkPayload(values))\n    .then(r => r.data);\n}\n","import {Biolink} from '@app/dashboard/biolink/biolink';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {Link} from '@app/dashboard/links/link';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {defaultUtmTags} from '@app/dashboard/links/utils/build-linkeable-payload';\n\nexport function buildLinkeableDefaultFormValues(\n  linkeable: Biolink | LinkGroup | Link\n) {\n  const rules = linkeable.rules || [];\n  const defaultUtm: CrupdateLinkFormValues['utm'] = {};\n  const customUtm: CrupdateLinkFormValues['utm_custom'] = [];\n\n  if (linkeable.utm) {\n    const queryParams = new URLSearchParams(linkeable.utm);\n    for (const [key, value] of queryParams.entries()) {\n      if (defaultUtmTags.includes(key)) {\n        defaultUtm[key] = value;\n      } else {\n        customUtm.push({key, value});\n      }\n    }\n  }\n\n  return {\n    hash: linkeable.hash,\n    active: linkeable.active,\n    activates_at: linkeable.activates_at,\n    expires_at: linkeable.expires_at,\n    name: linkeable.name,\n    description: linkeable.description,\n    image: linkeable.image,\n    geo_rules: rules.filter(rule => rule.type === 'geo'),\n    device_rules: rules.filter(rule => rule.type === 'device'),\n    platform_rules: rules.filter(rule => rule.type === 'platform'),\n    exp_clicks_rule: rules.find(r => r.type === 'exp_clicks'),\n    // show an indication to user that password exists\n    password: linkeable.has_password ? '********' : '',\n    utm: defaultUtm,\n    utm_custom: customUtm,\n    domain_id: linkeable.domain_id,\n    pixels: linkeable.pixels,\n    tags: linkeable.tags,\n  };\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {\n  CrupdateLinkForm,\n  CrupdateLinkFormValues,\n} from '../forms/crupdate-link-form';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useForm} from 'react-hook-form';\nimport {useUpdateLink} from '../requests/use-update-link';\nimport {Link} from '../link';\nimport {useMemo} from 'react';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\nimport {buildLinkeableDefaultFormValues} from '@app/dashboard/links/utils/build-linkeable-default-form-values';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {CreateLinkDialogProps} from '@app/dashboard/links/dialogs/create-link-dialog';\n\ninterface UpdateLinkDialogProps extends Omit<CreateLinkDialogProps, 'group'> {\n  link: Link;\n}\nexport function UpdateLinkDialog({\n  link,\n  showButtonLabelField,\n  hiddenFields,\n  invalidateQueries,\n  onSuccess,\n  endpoint,\n}: UpdateLinkDialogProps) {\n  const {close, formId} = useDialogContext();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const defaultValues = useMemo(() => buildDefaultFormValues(link), [link]);\n  const form = useForm<CrupdateLinkFormValues>({\n    defaultValues,\n  });\n  const updateLink = useUpdateLink(form, link.id, {\n    endpoint,\n    invalidateQueries,\n  });\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Update link\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkForm\n          hiddenFields={hiddenFields}\n          showButtonLabelField={showButtonLabelField}\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              updateLink.mutate(values, {\n                onSuccess: response => {\n                  onSuccess?.(response);\n                  close();\n                },\n              });\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateLink.isLoading || isVerifying}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nexport function buildDefaultFormValues(link: Link) {\n  const values = buildLinkeableDefaultFormValues(link);\n  return {\n    ...values,\n    long_url: link.long_url,\n    alias: link.alias,\n    type: link.type,\n    type_id: link.type_id,\n    groups: link.groups as LinkGroup[],\n  };\n}\n","import {Link} from '@app/dashboard/links/link';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport React from 'react';\n\ninterface LinkImageProps {\n  link: Link;\n  className?: string;\n}\nexport function LinkImage({link, className}: LinkImageProps) {\n  return link.image ? (\n    <img className={className} alt=\"\" src={link.image} />\n  ) : (\n    <RemoteFavicon className={className} url={link.long_url} />\n  );\n}\n","import React, {ReactNode} from 'react';\nimport {Avatar} from '../../ui/images/avatar';\n\ninterface Props {\n  image?: string;\n  label: ReactNode;\n  description: ReactNode;\n}\nexport function NameWithAvatar({image, label, description}: Props) {\n  return (\n    <div className=\"flex items-center gap-12 w-max\">\n      {image && <Avatar size=\"md\" src={image} />}\n      <div>\n        <div>{label}</div>\n        <div className=\"text-muted text-xs\">{description}</div>\n      </div>\n    </div>\n  );\n}\n","import {UpgradeDialog} from '@app/dashboard/upgrade/upgrade-dialog';\nimport {Trans} from '@common/i18n/trans';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {useTrans} from '@common/i18n/use-trans';\n\ninterface FeatureLockedDialogProps {\n  resourceName: MessageDescriptor;\n}\nexport function OverQuotaDialog({resourceName}: FeatureLockedDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <UpgradeDialog\n      message={\n        <Trans\n          message=\"You've reached the maximum number of :resource allowed for your current plan.\"\n          values={{resource: trans(resourceName)}}\n        />\n      }\n      messageSuffix={\n        <Trans message=\"Upgrade to increase this limit and unlock other features.\" />\n      }\n    />\n  );\n}\n","import React, {\n  cloneElement,\n  forwardRef,\n  ReactElement,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  FetchLinkUsageResponse,\n  useLinkSummary,\n} from '@app/dashboard/layout/sidenav/use-link-summary';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {OverQuotaDialog} from '@app/dashboard/upgrade/over-quota-dialog';\nimport {resourceTranslationMap} from '@app/dashboard/layout/sidenav/resource-usage-list';\nimport {createEventHandler} from '@common/utils/dom/create-event-handler';\nimport {Link} from '@app/dashboard/links/link';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {useAuth} from '@common/auth/use-auth';\n\ntype ResourceName =\n  | Link['model_type']\n  | Biolink['model_type']\n  | LinkOverlay['model_type']\n  | CustomPage['model_type']\n  | CustomDomain['model_type']\n  | LinkGroup['model_type']\n  | TrackingPixel['model_type'];\n\ninterface PermissionAwareButtonProps {\n  resource:\n    | ResourceName\n    | Link\n    | LinkGroup\n    | Biolink\n    | CustomDomain\n    | LinkOverlay\n    | CustomPage\n    | TrackingPixel;\n  action: 'create' | 'update' | 'delete';\n  children: ReactElement;\n}\n\nexport const PermissionAwareButton = forwardRef<\n  HTMLElement,\n  PermissionAwareButtonProps\n>(({children, resource, action, ...childProps}, ref) => {\n  const {user} = useAuth();\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n  const {data} = useLinkSummary();\n\n  const usageKey = useMemo(() => {\n    // extract model type from resource\n    const resourceName =\n      typeof resource === 'string' ? resource : resource.model_type;\n\n    // pluralize model type and convert to snake case\n    return `${camelCaseToSnakeCase(\n      resourceName\n    )}s` as keyof FetchLinkUsageResponse['usage'];\n  }, [resource]);\n\n  const hasPermission = data?.usage[usageKey][action];\n  const messageType = data?.usage[usageKey].createMsgType;\n\n  // user has permission or owns the resource\n  if (\n    hasPermission ||\n    (typeof resource === 'object' && resource.user_id === user?.id)\n  ) {\n    return cloneElement(children, {...childProps, ref});\n  }\n\n  if (!hasPermission && messageType !== 'overQuota') {\n    return null;\n  }\n\n  return (\n    <div\n      onPointerDown={createEventHandler(e => {\n        e.preventDefault();\n        e.stopPropagation();\n      })}\n      onClickCapture={createEventHandler(e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDialogIsOpen(true);\n      })}\n      onKeyDownCapture={createEventHandler(event => {\n        const e = event as unknown as KeyboardEvent;\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.key === 'Enter' || e.key === ' ') {\n          setDialogIsOpen(true);\n        }\n      })}\n    >\n      {children}\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={dialogIsOpen}\n        onOpenChange={setDialogIsOpen}\n      >\n        <OverQuotaDialog resourceName={resourceTranslationMap[usageKey]} />\n      </DialogTrigger>\n    </div>\n  );\n});\n\nfunction camelCaseToSnakeCase(str: string) {\n  return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const BarChartIcon = createSvgIcon(\n  <path d=\"M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z\" />\n, 'BarChartOutlined');\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Link} from '../link';\nimport {Trans} from '@common/i18n/trans';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Link as RouterLink} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {UpdateLinkDialog} from '../dialogs/update-link-dialog';\nimport React from 'react';\nimport {LinkImage} from '@app/dashboard/links/link-image';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport {LinkClipboardButton} from '@app/dashboard/links/sharing/link-clipboard-button';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\n\nexport const linksDatatableColumns: ColumnConfig<Link>[] = [\n  {\n    key: 'summary',\n    header: () => <Trans message=\"Summary\" />,\n    // prevent long urls from overflowing the table\n    width: 'w-5/6 max-w-200',\n    body: link => (\n      <div>\n        <div className=\"flex items-center gap-6 whitespace-nowrap\">\n          <LinkImage link={link} className=\"w-16 h-16\" />\n          <a\n            className=\"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min\"\n            href={link.long_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            data-testid=\"long-url\"\n          >\n            {removeProtocol(link.long_url)}\n          </a>\n        </div>\n        <LinkClipboardButton\n          link={link}\n          variant=\"text\"\n          className=\"block text-muted hover:underline w-min\"\n          data-testid=\"short-url\"\n        />\n      </div>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: link => {\n      if (!link.user) return '';\n      return (\n        <NameWithAvatar\n          image={link.user.avatar}\n          label={link.user.display_name}\n          description={link.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'clicks',\n    sortingKey: 'clicks_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Clicks\" />,\n    body: link =>\n      link.clicks_count ? <FormattedNumber value={link.clicks_count} /> : '',\n  },\n  {\n    key: 'type',\n    sortingKey: 'type',\n    allowsSorting: true,\n    header: () => <Trans message=\"Type\" />,\n    body: link => (\n      <Chip size=\"xs\" radius=\"rounded\" className=\"capitalize\">\n        <Trans message={link.type} />\n      </Chip>\n    ),\n  },\n  {\n    key: 'password',\n    allowsSorting: true,\n    header: () => <Trans message=\"Password\" />,\n    body: link =>\n      link.has_password ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'expires_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Expires at\" />,\n    body: link =>\n      link.expires_at ? <FormattedDate date={link.expires_at} /> : '',\n  },\n  {\n    key: 'clicked_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last clicked\" />,\n    body: link =>\n      link.clicked_at ? <FormattedDate date={link.clicked_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    body: link => (\n      <div className=\"text-muted\">\n        <Tooltip label={<Trans message=\"Link statistics\" />}>\n          <RouterLink to={`${link.id}`}>\n            <IconButton size=\"md\">\n              <BarChartIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <ShareLinkButton link={link} />\n        <PermissionAwareButton resource={link} action=\"update\">\n          <DialogTrigger type=\"modal\">\n            <Tooltip label={<Trans message=\"Edit link\" />}>\n              <IconButton size=\"md\">\n                <EditIcon />\n              </IconButton>\n            </Tooltip>\n            <UpdateLinkDialog link={link} />\n          </DialogTrigger>\n        </PermissionAwareButton>\n      </div>\n    ),\n  },\n];\n","import {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  downloadPath?: string;\n  result?: 'jobQueued';\n}\n\nexport type ExportCsvPayload = Record<string, string | number | undefined>;\n\nexport function useExportCsv(endpoint: string) {\n  return useMutation(\n    (payload: ExportCsvPayload | undefined) => exportCsv(endpoint, payload),\n    {\n      onError: err => showHttpErrorToast(err),\n    }\n  );\n}\n\nfunction exportCsv(\n  endpoint: string,\n  payload: ExportCsvPayload | undefined\n): Promise<Response> {\n  return apiClient.post(endpoint, payload).then(r => r.data);\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddLinkIcon = createSvgIcon(\n  <path d=\"M8 11h8v2H8v-2zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3z\" />\n, 'AddLinkOutlined');\n","import {createSvgIcon} from '../../icons/create-svg-icon';\n\nexport const ExportCsvIcon = createSvgIcon(\n  <path d=\"M 7 2 C 5.895 2 5 2.895 5 4 L 5 9 L 4 9 C 2.895 9 2 9.895 2 11 L 2 16 C 2 17.105 2.895 18 4 18 L 5 18 L 5 20 C 5 21.105 5.895 22 7 22 L 15.171875 22 L 13.171875 20 L 7 20 L 7 18 L 17 18 L 17 16 C 17 14.895 17.895 14 19 14 L 21 14 L 21 7 L 16 2 L 7 2 z M 7 4 L 15 4 L 15 8 L 19 8 L 19 9 L 7 9 L 7 4 z M 6 11 C 7.105 11 8 11.895 8 13 L 7 13 C 7 12.449 6.551 12 6 12 C 5.449 12 5 12.449 5 13 L 5 14 C 5 14.551 5.449 15 6 15 C 6.551 15 7 14.551 7 14 L 8 14 C 8 15.105 7.105 16 6 16 C 4.895 16 4 15.105 4 14 L 4 13 C 4 11.895 4.895 11 6 11 z M 10.644531 11 C 12.067531 11.041 12.154297 12.282906 12.154297 12.503906 L 11.1875 12.503906 C 11.1875 12.400906 11.204906 11.806641 10.628906 11.806641 C 10.453906 11.806641 10.059844 11.884188 10.089844 12.367188 C 10.118844 12.810188 10.703547 13.019406 10.810547 13.066406 C 11.034547 13.148406 12.141391 13.642391 12.150391 14.650391 C 12.152391 14.864391 12.097062 15.985 10.664062 16 C 9.1050625 16.017 9 14.675438 9 14.398438 L 9.9746094 14.398438 C 9.9746094 14.545438 9.9870625 15.256172 10.664062 15.201172 C 11.071063 15.167172 11.159828 14.87425 11.173828 14.65625 C 11.196828 14.28925 10.846563 14.068625 10.476562 13.890625 C 9.9565625 13.640625 9.1341406 13.333375 9.1191406 12.359375 C 9.1061406 11.482375 9.7505312 10.975 10.644531 11 z M 13 11 L 14.052734 11 L 14.992188 14.646484 L 15.9375 11 L 17 11 L 15.646484 16 L 14.345703 16 L 13 11 z M 19 16 L 19 20 L 16 20 L 20 24 L 24 20 L 21 20 L 21 16 L 19 16 z\"></path>\n);\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import {DialogBody} from '../../ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '../../ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '../../ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\nimport {Button} from '../../ui/buttons/button';\nimport {Trans} from '../../i18n/trans';\n\nexport function CsvExportInfoDialog() {\n  const {close} = useDialogContext();\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Csv export\" />\n      </DialogHeader>\n      <DialogBody>\n        <Trans\n          message=\"Your request is being processed. We'll email you when the report is ready to download. In\n            certain cases, it might take a little longer, depending on the number of items beings\n            exported and the volume of activity.\"\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"flat\" color=\"primary\" onClick={close}>\n          <Trans message=\"Got it\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {\n  buildLinkPayload,\n  CrupdateLinkPayload,\n} from '@app/dashboard/links/requests/build-link-payload';\nimport {CreateMultipleLinksFormValue} from '@app/dashboard/links/dialogs/create-multiple-links-dialog';\nimport {Link} from '@app/dashboard/links/link';\n\ninterface CreateMultipleLinksPayload\n  extends Omit<CrupdateLinkPayload, 'hash' | 'long_url'> {\n  long_urls: string[];\n}\n\ninterface Response extends BackendResponse {\n  links: Link[];\n}\n\nexport function useCreateMultipleLinks(\n  form: UseFormReturn<CreateMultipleLinksFormValue>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (values: CreateMultipleLinksFormValue) => createLinks(values),\n    {\n      onSuccess: response => {\n        toast.positive(\n          trans(\n            message('[one 1 link|other :count links] shortened', {\n              values: {count: response.links.length},\n            })\n          )\n        );\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('link'));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('link-group'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createLinks(values: CreateMultipleLinksFormValue): Promise<Response> {\n  return apiClient\n    .post('link/batch/shorten', formToPayload(values))\n    .then(r => r.data);\n}\n\nfunction formToPayload(\n  values: CreateMultipleLinksFormValue\n): CreateMultipleLinksPayload {\n  const payload = buildLinkPayload(values as any);\n  const longUrls = values.long_urls.split(/\\n/g);\n  return {\n    ...payload,\n    long_urls: longUrls,\n  };\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {CrupdateLinkFormValues} from '../forms/crupdate-link-form';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useForm} from 'react-hook-form';\nimport {useCreateMultipleLinks} from '@app/dashboard/links/requests/use-create-multiple-links';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {LinkSettingsForm} from '@app/dashboard/links/forms/link-settings-form';\nimport {urlIsValid} from '@app/dashboard/links/utils/url-is-valid';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\nexport interface CreateMultipleLinksFormValue\n  extends Omit<CrupdateLinkFormValues, 'hash' | 'long_url'> {\n  long_urls: string;\n}\n\ninterface CreateMultipleLinksDialogProps {\n  group?: LinkGroup | Biolink | null;\n}\nexport function CreateMultipleLinksDialog({\n  group,\n}: CreateMultipleLinksDialogProps) {\n  const {trans} = useTrans();\n  const {close, formId} = useDialogContext();\n  const form = useForm<CreateMultipleLinksFormValue>({\n    defaultValues: {\n      active: true,\n      type: 'direct',\n      geo_rules: [],\n      device_rules: [],\n      platform_rules: [],\n      // set undefined if no group id specified, so existing groups are not cleared in backend\n      groups: group ? [group as LinkGroup] : undefined,\n      utm: {},\n      utm_custom: [],\n    },\n  });\n  const createMultiple = useCreateMultipleLinks(form);\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Shorten links\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            const someUrlsInvalid = values.long_urls\n              .split(/\\r?\\n/)\n              .some(url => !urlIsValid(url));\n            if (someUrlsInvalid) {\n              form.setError('long_urls', {\n                message: trans(message('Some of the urls are not valid.')),\n              });\n            } else {\n              createMultiple.mutate(values, {onSuccess: () => close()});\n            }\n          }}\n        >\n          <FormTextField\n            label={<Trans message=\"Multiple URLs (one per line)\" />}\n            inputElementType=\"textarea\"\n            rows={10}\n            name=\"long_urls\"\n            autoComplete=\"off\"\n            spellCheck=\"false\"\n            required\n            className=\"mb-24\"\n            autoFocus\n          />\n          <LinkSettingsForm multipleLinks />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createMultiple.isLoading}\n        >\n          <Trans message=\"Shorten\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React, {Fragment, useEffect, useMemo, useState} from 'react';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport shareLink from '../share-link.svg';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {LinksDatatableFilters} from './links-datatable-filters';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {CreateLinkDialog} from '../dialogs/create-link-dialog';\nimport {useAuth} from '@common/auth/use-auth';\nimport {linksDatatableColumns} from './links-datatable-columns';\nimport {useExportCsv} from '@common/datatable/requests/use-export-csv';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {MoreHorizIcon} from '@common/icons/material/MoreHoriz';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {AddLinkIcon} from '@common/icons/material/AddLink';\nimport {ExportCsvIcon} from '@common/datatable/csv-export/export-csv-icon';\nimport {downloadFileFromUrl} from '@common/uploads/utils/download-file-from-url';\nimport {CsvExportInfoDialog} from '@common/datatable/csv-export/csv-export-info-dialog';\nimport {CreateMultipleLinksDialog} from '@app/dashboard/links/dialogs/create-multiple-links-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface LinksDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinksDatablePage({forCurrentUser}: LinksDatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? linksDatatableColumns\n      : linksDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? LinksDatatableFilters\n      : LinksDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, []);\n\n  return (\n    <DataTablePage\n      endpoint=\"link\"\n      queryParams={{userId, workspaceId, with: 'user'}}\n      title={<Trans message=\"Links\" />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"link\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={shareLink}\n          title={<Trans message=\"No links have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching links\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  const [activeDialog, setActiveDialog] = useState<\n    'export' | 'addMultiple' | null\n  >(null);\n  const exportCsv = useExportCsv('link/csv/export');\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <IconButton\n          variant=\"outline\"\n          color=\"primary\"\n          radius=\"rounded\"\n          size=\"sm\"\n          className=\"flex-shrink-0\"\n        >\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu>\n          <Item\n            value=\"addMultiple\"\n            startIcon={<AddLinkIcon />}\n            onSelected={() => {\n              setActiveDialog('addMultiple');\n            }}\n          >\n            <Trans message=\"Shorten multiple links\" />\n          </Item>\n          <Item\n            value=\"export\"\n            startIcon={<ExportCsvIcon />}\n            onSelected={() => {\n              exportCsv.mutate(\n                {},\n                {\n                  onSuccess: response => {\n                    if (response.downloadPath) {\n                      downloadFileFromUrl(response.downloadPath);\n                    } else {\n                      setActiveDialog('export');\n                    }\n                  },\n                }\n              );\n            }}\n          >\n            <Trans message=\"Export links\" />\n          </Item>\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={activeDialog !== null}\n        onOpenChange={isOpen => {\n          if (!isOpen) {\n            setActiveDialog(null);\n          }\n        }}\n      >\n        {activeDialog === 'export' && <CsvExportInfoDialog />}\n        {activeDialog === 'addMultiple' && <CreateMultipleLinksDialog />}\n      </DialogTrigger>\n      <PermissionAwareButton resource=\"link\" action=\"create\">\n        <DialogTrigger type=\"modal\">\n          <DataTableAddItemButton>\n            <Trans message=\"Shorten link\" />\n          </DataTableAddItemButton>\n          <CreateLinkDialog />\n        </DialogTrigger>\n      </PermissionAwareButton>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoveDownIcon = createSvgIcon(\n  <path d=\"M3 11c0 2.45 1.76 4.47 4.08 4.91l-1.49-1.49L7 13l4 4.01L7 21l-1.41-1.41 1.58-1.58v-.06C3.7 17.54 1 14.58 1 11c0-3.87 3.13-7 7-7h3v2H8c-2.76 0-5 2.24-5 5zm19 0V4h-9v7h9zm-2-2h-5V6h5v3zm-7 4h9v7h-9z\" />\n, 'MoveDownOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  linkIds: number[];\n}\n\nexport function useMoveLinksToGroup(group: LinkGroup) {\n  const {trans} = useTrans();\n  return useMutation((payload: Payload) => moveLinks(group.id, payload), {\n    onSuccess: () => {\n      toast.positive(\n        trans(message('Moved links to “:group“', {values: {group: group.name}}))\n      );\n      queryClient.invalidateQueries(PaginatedResourcesQueryKey('link-group'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction moveLinks(groupId: number, payload: Payload): Promise<Response> {\n  return apiClient\n    .post(`link-group/${groupId}/attach`, payload)\n    .then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Trans} from '@common/i18n/trans';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {\n  ResourcePaginationParams,\n  usePaginatedResources,\n} from '@common/datatable/requests/paginated-resources';\nimport {List, ListItem} from '@common/ui/list/list';\nimport {Link} from '@app/dashboard/links/link';\nimport {useMoveLinksToGroup} from '@app/dashboard/link-groups/link-group-links-datatable-page/requests/use-move-links-to-group';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport React, {useState} from 'react';\nimport {TextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Checkbox} from '@common/ui/forms/toggle/checkbox';\nimport {LinkImage} from '@app/dashboard/links/link-image';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport linkSvg from '@app/dashboard/links/share-link.svg';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\n\ninterface MoveLinksToGroupDialogProps {\n  group: LinkGroup;\n}\nexport function MoveLinksToGroupDialog({group}: MoveLinksToGroupDialogProps) {\n  const {close} = useDialogContext();\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const [params, setParams] = useState<ResourcePaginationParams>({\n    groupId: `!${group.id}`,\n    query: '',\n    perPage: 8,\n  });\n  const {data, isLoading} = usePaginatedResources<Link>('link', params);\n  const pagination = data?.pagination;\n  const moveLinks = useMoveLinksToGroup(group);\n\n  const paginationButtons = (\n    <div className=\"text-muted\">\n      <IconButton\n        disabled={isLoading || !pagination?.prev_page}\n        onClick={() => {\n          setParams({\n            ...params,\n            page: pagination?.prev_page!,\n          });\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <IconButton\n        disabled={isLoading || !pagination?.next_page}\n        onClick={() => {\n          setParams({\n            ...params,\n            page: pagination?.next_page!,\n          });\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n\n  const emptyStageMessage = (\n    <IllustratedMessage\n      image={<SvgImage src={linkSvg} />}\n      title={<Trans message=\"No links found\" />}\n    />\n  );\n\n  const list = (\n    <div className=\"min-h-[464px]\">\n      <List>\n        <AnimatePresence mode=\"wait\">\n          {isLoading ? (\n            <LinksSkeleton />\n          ) : (\n            <LinksList\n              links={pagination?.data}\n              selectedIds={selectedIds}\n              setSelectedIds={setSelectedIds}\n            />\n          )}\n        </AnimatePresence>\n      </List>\n    </div>\n  );\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Move links to “:group“\" values={{group: group.name}} />\n      </DialogHeader>\n      <DialogBody>\n        <TextField\n          className=\"mb-14\"\n          label={<Trans message=\"Search for links...\" />}\n          value={params.query}\n          onChange={e => {\n            setParams({...params, query: e.target.value});\n          }}\n        />\n        {!isLoading && !pagination?.data.length ? emptyStageMessage : list}\n      </DialogBody>\n      <DialogFooter startAction={paginationButtons}>\n        <Button variant=\"text\" onClick={close}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          onClick={() => {\n            moveLinks.mutate({linkIds: selectedIds}, {onSuccess: close});\n          }}\n          disabled={moveLinks.isLoading}\n        >\n          <Trans message=\"Move\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface ListItemsProps {\n  links?: Link[];\n  selectedIds: number[];\n  setSelectedIds: (ids: number[]) => void;\n}\nfunction LinksList({links, selectedIds, setSelectedIds}: ListItemsProps) {\n  return (\n    <m.div key=\"links-list\" {...opacityAnimation}>\n      <List>\n        {(links || []).map(link => {\n          const isSelected = selectedIds.includes(link.id);\n          return (\n            <ListItem\n              key={link.id}\n              isSelected={isSelected}\n              onSelected={() => {\n                if (isSelected) {\n                  setSelectedIds(selectedIds.filter(id => id !== link.id));\n                } else {\n                  setSelectedIds([...selectedIds, link.id]);\n                }\n              }}\n              startIcon={<Checkbox checked={isSelected} />}\n              description={removeProtocol(link.short_url)}\n            >\n              <div className=\"flex items-center gap-8\">\n                <LinkImage className=\"w-14 h-14\" link={link} />\n                <div>{removeProtocol(link.long_url)}</div>\n              </div>\n            </ListItem>\n          );\n        })}\n      </List>\n    </m.div>\n  );\n}\n\nconst skeletonCount = 8;\nfunction LinksSkeleton() {\n  return (\n    <m.div key=\"links-skeleton\" {...opacityAnimation}>\n      <List>\n        {Array.from({length: skeletonCount}).map((_, index) => (\n          <ListItem key={index} isDisabled>\n            <Skeleton variant=\"text\" className=\"min-h-40\" />\n          </ListItem>\n        ))}\n      </List>\n    </m.div>\n  );\n}\n","import React, {Fragment, useContext, useState} from 'react';\nimport {Trans} from '@common/i18n/trans';\nimport {LinksDatatableFilters} from '@app/dashboard/links/links-datatable-page/links-datatable-filters';\nimport {linksDatatableColumns} from '@app/dashboard/links/links-datatable-page/links-datatable-columns';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport shareLink from '../../links/share-link.svg';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {useParams} from 'react-router-dom';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {DataTable} from '@common/datatable/data-table';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {Link} from '@app/dashboard/links/link';\nimport {StaticPageTitle} from '@common/seo/static-page-title';\nimport {CreateLinkDialog} from '@app/dashboard/links/dialogs/create-link-dialog';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {AddLinkIcon} from '@common/icons/material/AddLink';\nimport {ExportCsvIcon} from '@common/datatable/csv-export/export-csv-icon';\nimport {MoreHorizIcon} from '@common/icons/material/MoreHoriz';\nimport {MoveDownIcon} from '@common/icons/material/MoveDown';\nimport {useExportCsv} from '@common/datatable/requests/use-export-csv';\nimport {downloadFileFromUrl} from '@common/uploads/utils/download-file-from-url';\nimport {CsvExportInfoDialog} from '@common/datatable/csv-export/csv-export-info-dialog';\nimport {MoveLinksToGroupDialog} from '@app/dashboard/link-groups/link-group-links-datatable-page/move-links-to-group-dialog';\nimport {DataTableContext} from '@common/datatable/page/data-table-context';\nimport {CreateMultipleLinksDialog} from '@app/dashboard/links/dialogs/create-multiple-links-dialog';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface LinkGroupLinksResponse extends PaginatedBackendResponse<Link> {\n  linkGroup: LinkGroup;\n}\n\nexport function LinkGroupsLinksDatatablePage() {\n  const {groupId} = useParams();\n\n  return (\n    <div className=\"p-12 md:p-24\">\n      <DataTable\n        endpoint={`link-group/${groupId}/links`}\n        filters={LinksDatatableFilters}\n        columns={linksDatatableColumns}\n        actions={<Actions groupId={groupId ? +groupId : undefined} />}\n        selectedActions={\n          <PermissionAwareButton resource=\"link\" action=\"delete\">\n            <DeleteSelectedItemsAction />\n          </PermissionAwareButton>\n        }\n        emptyStateMessage={\n          <DataTableEmptyStateMessage\n            image={shareLink}\n            title={<Trans message=\"There are no links in this group yet\" />}\n            filteringTitle={<Trans message=\"No matching links\" />}\n          />\n        }\n      >\n        <PageTitle />\n      </DataTable>\n    </div>\n  );\n}\n\nfunction PageTitle() {\n  const navigate = useNavigate();\n  const {query} = useContext(DataTableContext);\n  const linkGroup = (query.data as LinkGroupLinksResponse)?.linkGroup;\n\n  // avoid layout shift when link group is not loaded yet\n  if (!linkGroup) return <Breadcrumb size=\"xl\" className=\"mb-16\" />;\n\n  const title = (\n    <Trans message=\"“:group“ links\" values={{group: linkGroup.name}} />\n  );\n  return (\n    <Fragment>\n      <StaticPageTitle>{title}</StaticPageTitle>\n      <Breadcrumb size=\"xl\" className=\"mb-16\">\n        <BreadcrumbItem\n          onSelected={() => {\n            navigate('/dashboard/link-groups');\n          }}\n        >\n          <Trans message=\"Link groups\" />\n        </BreadcrumbItem>\n        <BreadcrumbItem className=\"first-letter:capitalize\">\n          {title}\n        </BreadcrumbItem>\n      </Breadcrumb>\n    </Fragment>\n  );\n}\n\ninterface ActionsProps {\n  groupId?: number;\n}\nfunction Actions({groupId}: ActionsProps) {\n  const [activeDialog, setActiveDialog] = useState<\n    'move' | 'export' | 'addMultiple' | null\n  >(null);\n  const exportCsv = useExportCsv('link/csv/export');\n\n  const {query} = useContext(DataTableContext);\n  const linkGroup = (query.data as LinkGroupLinksResponse)?.linkGroup;\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <IconButton\n          variant=\"outline\"\n          color=\"primary\"\n          radius=\"rounded\"\n          size=\"sm\"\n          className=\"flex-shrink-0\"\n        >\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu>\n          <Item\n            value=\"moveLinks\"\n            startIcon={<MoveDownIcon />}\n            onSelected={() => {\n              setActiveDialog('move');\n            }}\n          >\n            <Trans message=\"Move links to this group\" />\n          </Item>\n          <Item\n            value=\"addMultiple\"\n            startIcon={<AddLinkIcon />}\n            onSelected={() => {\n              setActiveDialog('addMultiple');\n            }}\n          >\n            <Trans message=\"Add multiple links\" />\n          </Item>\n          <Item\n            value=\"export\"\n            startIcon={<ExportCsvIcon />}\n            onSelected={() => {\n              exportCsv.mutate(\n                {groupId},\n                {\n                  onSuccess: response => {\n                    if (response.downloadPath) {\n                      downloadFileFromUrl(response.downloadPath);\n                    } else {\n                      setActiveDialog('export');\n                    }\n                  },\n                }\n              );\n            }}\n          >\n            <Trans message=\"Export links\" />\n          </Item>\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={activeDialog !== null}\n        onOpenChange={isOpen => {\n          if (!isOpen) {\n            setActiveDialog(null);\n          }\n        }}\n      >\n        {activeDialog === 'move' && (\n          <MoveLinksToGroupDialog group={linkGroup} />\n        )}\n        {activeDialog === 'export' && <CsvExportInfoDialog />}\n        {activeDialog === 'addMultiple' && (\n          <CreateMultipleLinksDialog group={linkGroup} />\n        )}\n      </DialogTrigger>\n      <PermissionAwareButton resource=\"link\" action=\"create\">\n        <DialogTrigger type=\"modal\">\n          <DataTableAddItemButton>\n            <Trans message=\"Add link\" />\n          </DataTableAddItemButton>\n          <CreateLinkDialog group={linkGroup} />\n        </DialogTrigger>\n      </PermissionAwareButton>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","import {IconButton} from '../../ui/buttons/icon-button';\nimport {FileDownloadIcon} from '../../icons/material/FileDownload';\nimport React, {Fragment, useState} from 'react';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {ExportCsvPayload, useExportCsv} from '../requests/use-export-csv';\nimport {downloadFileFromUrl} from '../../uploads/utils/download-file-from-url';\nimport {CsvExportInfoDialog} from './csv-export-info-dialog';\n\ninterface DataTableExportCsvButtonProps {\n  endpoint: string;\n  payload?: ExportCsvPayload;\n}\nexport function DataTableExportCsvButton({\n  endpoint,\n  payload,\n}: DataTableExportCsvButtonProps) {\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n  const exportCsv = useExportCsv(endpoint);\n\n  return (\n    <Fragment>\n      <IconButton\n        variant=\"outline\"\n        color=\"primary\"\n        radius=\"rounded\"\n        size=\"sm\"\n        className=\"flex-shrink-0\"\n        disabled={exportCsv.isLoading}\n        onClick={() => {\n          exportCsv.mutate(payload, {\n            onSuccess: response => {\n              if (response.downloadPath) {\n                downloadFileFromUrl(response.downloadPath);\n              } else {\n                setDialogIsOpen(true);\n              }\n            },\n          });\n        }}\n      >\n        <FileDownloadIcon />\n      </IconButton>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={dialogIsOpen}\n        onOpenChange={setDialogIsOpen}\n      >\n        <CsvExportInfoDialog />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ListAltIcon = createSvgIcon(\n  <path d=\"M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM19 19H5V5h14v14z\" />\n, 'ListAltOutlined');\n","import {UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {LinkDomainSelect} from '@app/dashboard/links/forms/link-domain-select';\nimport {LinkGroup} from '../../link-group';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\n\nexport interface CrupdateLinkGroupPayload\n  extends Pick<\n    LinkGroup,\n    'name' | 'description' | 'hash' | 'active' | 'rotator' | 'domain_id'\n  > {}\n\ninterface CrupdateLinkGroupFormProps {\n  formId: string;\n  form: UseFormReturn<CrupdateLinkGroupPayload>;\n  onSubmit: (values: CrupdateLinkGroupPayload) => void;\n}\nexport function CrupdateLinkGroupForm({\n  onSubmit,\n  form,\n  formId,\n}: CrupdateLinkGroupFormProps) {\n  const {clearErrors} = form;\n  return (\n    <Form\n      form={form}\n      id={formId}\n      onBeforeSubmit={() => {\n        // hook form won't clear errors for fields that are not bound to input\n        clearErrors('hash');\n      }}\n      onSubmit={onSubmit}\n    >\n      <div className=\"mb-24\">\n        <FormTextField\n          name=\"name\"\n          label={<Trans message=\"Name\" />}\n          minLength={3}\n          className=\"mb-8\"\n          autoFocus\n        />\n        <AliasField form={form} name=\"hash\" />\n      </div>\n      <LinkDomainSelect name=\"domain_id\" className=\"mb-24\" />\n      <FormTextField\n        name=\"description\"\n        className=\"mb-24\"\n        label={<Trans message=\"Description\" />}\n        inputElementType=\"textarea\"\n        rows={2}\n      />\n      <FormSwitch\n        name=\"active\"\n        description={\n          <Trans message=\"Whether this link group is viewable publicly.\" />\n        }\n        className=\"mb-24\"\n      >\n        <Trans message=\"Active\" />\n      </FormSwitch>\n      <FormSwitch\n        name=\"rotator\"\n        description={\n          <Trans message=\"When checked, url above will redirect to random link from the group, instead of showing all links belonging to group.\" />\n        }\n      >\n        <Trans message=\"Rotator\" />\n      </FormSwitch>\n    </Form>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '../../../../common/i18n/use-trans';\nimport {BackendResponse} from '../../../../common/http/backend-response/backend-response';\nimport {onFormQueryError} from '../../../../common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '../../../../common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '../../../../common/datatable/requests/paginated-resources';\nimport {toast} from '../../../../common/ui/toast/toast';\nimport {message} from '../../../../common/i18n/message';\nimport {CrupdateLinkGroupPayload} from '../crupdate/crupdate-link-group-form';\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdateLinkGroup(\n  form: UseFormReturn<CrupdateLinkGroupPayload>,\n  groupId: number\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: CrupdateLinkGroupPayload) => updateLinkGroup(groupId, payload),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Link group updated')));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('link-group'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction updateLinkGroup(\n  id: number,\n  payload: CrupdateLinkGroupPayload\n): Promise<Response> {\n  return apiClient.put(`link-group/${id}`, payload).then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {\n  CrupdateLinkGroupForm,\n  CrupdateLinkGroupPayload,\n} from './crupdate-link-group-form';\nimport {useForm} from 'react-hook-form';\nimport {useUpdateLinkGroup} from '../requests/use-update-link-group';\nimport {LinkGroup} from '../../link-group';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\n\ninterface UpdateLinkGroupDialogProps {\n  group: LinkGroup;\n}\nexport function UpdateLinkGroupDialog({group}: UpdateLinkGroupDialogProps) {\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n  const {formId, close} = useDialogContext();\n  const form = useForm<CrupdateLinkGroupPayload>({\n    defaultValues: {\n      name: group.name,\n      hash: group.hash,\n      description: group.description,\n      active: group.active,\n      rotator: group.rotator,\n    },\n  });\n  const updateGroup = useUpdateLinkGroup(form, group.id);\n\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Update link group\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkGroupForm\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              updateGroup.mutate(values, {onSuccess: () => close()});\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateGroup.isLoading || isVerifying}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Link as RouterLink} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport React from 'react';\nimport {LinkGroup} from '../link-group';\nimport {ListAltIcon} from '@common/icons/material/ListAlt';\nimport {UpdateLinkGroupDialog} from '@app/dashboard/link-groups/link-groups-datatable-page/crupdate/update-link-group-dialog';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\nexport const LinkGroupsDatatableColumns: ColumnConfig<LinkGroup>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    // prevent long names from overflowing the table\n    width: 'w-5/6 max-w-200',\n    body: group => (\n      <a\n        href={group.short_url}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className={LinkStyle}\n      >\n        {group.name}\n      </a>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: group => {\n      if (!group.user) return '';\n      return (\n        <NameWithAvatar\n          image={group.user.avatar}\n          label={group.user.display_name}\n          description={group.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'links_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Links\" />,\n    body: group =>\n      group.links_count ? <FormattedNumber value={group.links_count} /> : '-',\n  },\n  {\n    key: 'active',\n    allowsSorting: true,\n    header: () => <Trans message=\"Active\" />,\n    body: group =>\n      group.active ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'rotator',\n    allowsSorting: true,\n    header: () => <Trans message=\"Rotator\" />,\n    body: group =>\n      group.rotator ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: link =>\n      link.updated_at ? <FormattedDate date={link.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    body: group => (\n      <div className=\"text-muted\">\n        <Tooltip label={<Trans message=\"Clicks report\" />}>\n          <RouterLink to={`${group.id}`}>\n            <IconButton size=\"md\">\n              <BarChartIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <Tooltip label={<Trans message=\"Manage links\" />}>\n          <RouterLink to={`${group.id}/links`}>\n            <IconButton size=\"md\">\n              <ListAltIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <ShareLinkButton link={group} />\n        <PermissionAwareButton resource={group} action=\"update\">\n          <DialogTrigger type=\"modal\">\n            <Tooltip label={<Trans message=\"Edit link\" />}>\n              <IconButton size=\"md\">\n                <EditIcon />\n              </IconButton>\n            </Tooltip>\n            <UpdateLinkGroupDialog group={group} />\n          </DialogTrigger>\n        </PermissionAwareButton>\n      </div>\n    ),\n  },\n];\n","import {\n  ALL_PRIMITIVE_OPERATORS,\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '../../../common/datatable/filters/backend-filter';\nimport {message} from '../../../common/i18n/message';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '../../../common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '../../../common/auth/user';\n\nexport const LinkGroupsDatatableFilters: BackendFilter[] = [\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'rotator',\n    label: message('Type'),\n    description: message('Type of the group'),\n    defaultValue: '01',\n    defaultOperator: FilterOperator.eq,\n    options: [\n      {\n        key: '01',\n        label: message('Default'),\n        value: false,\n      },\n      {\n        key: '02',\n        label: message('Rotator'),\n        value: true,\n      },\n    ],\n  }),\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'active',\n    label: message('Status'),\n    description: message('Whether group is disabled or not'),\n    defaultValue: '01',\n    defaultOperator: FilterOperator.eq,\n    options: [\n      {\n        key: '01',\n        label: message('Enabled'),\n        value: true,\n      },\n      {\n        key: '02',\n        label: message('Disabled'),\n        value: false,\n      },\n    ],\n  }),\n  new BackendFilter({\n    type: FilterControlType.Input,\n    inputType: 'number',\n    key: 'links_count',\n    label: message('Link count'),\n    description: message('Number of links in the group'),\n    defaultValue: 1,\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n  }),\n  new CreatedAtFilter({\n    description: message('Date group was created'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date group was last updated'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'user_id',\n    label: message('User'),\n    description: message('User group was created by'),\n  }),\n];\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '../../../../common/i18n/use-trans';\nimport {BackendResponse} from '../../../../common/http/backend-response/backend-response';\nimport {onFormQueryError} from '../../../../common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '../../../../common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '../../../../common/datatable/requests/paginated-resources';\nimport {toast} from '../../../../common/ui/toast/toast';\nimport {message} from '../../../../common/i18n/message';\nimport {CrupdateLinkGroupPayload} from '../crupdate/crupdate-link-group-form';\n\ninterface Response extends BackendResponse {}\n\nexport function useCreateLinkGroup(\n  form: UseFormReturn<CrupdateLinkGroupPayload>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (props: CrupdateLinkGroupPayload) => createLinkGroup(props),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Link group created')));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('link-group'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createLinkGroup(payload: CrupdateLinkGroupPayload): Promise<Response> {\n  return apiClient.post(`link-group`, payload).then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {\n  CrupdateLinkGroupForm,\n  CrupdateLinkGroupPayload,\n} from './crupdate-link-group-form';\nimport {useForm} from 'react-hook-form';\nimport {useCreateLinkGroup} from '../requests/use-create-link-group';\nimport {nanoid} from 'nanoid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\n\nexport function CreateLinkGroupDialog() {\n  const {formId, close} = useDialogContext();\n  const {custom_domains} = useSettings();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const form = useForm<CrupdateLinkGroupPayload>({\n    defaultValues: {\n      active: true,\n      hash: nanoid(6),\n      rotator: false,\n      domain_id: custom_domains?.allow_all_option ? undefined : 0,\n    },\n  });\n\n  const createGroup = useCreateLinkGroup(form);\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Create link group\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkGroupForm\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              createGroup.mutate(values, {onSuccess: () => close()});\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createGroup.isLoading || isVerifying}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const InfoDialogTriggerIcon = createSvgIcon(\n  <path d=\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\" />,\n  'InfoDialogTrigger'\n);\n","import {IconButton} from '@common/ui/buttons/icon-button';\nimport {InfoDialogTriggerIcon} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger-icon';\nimport {Dialog, DialogSize} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport React, {ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InfoDialogTriggerProps {\n  title?: ReactNode;\n  body: ReactNode;\n  dialogSize?: DialogSize;\n  className?: string;\n}\nexport function InfoDialogTrigger({\n  title,\n  body,\n  dialogSize = 'sm',\n  className,\n}: InfoDialogTriggerProps) {\n  return (\n    <DialogTrigger type=\"popover\" triggerOnHover>\n      <IconButton\n        className={clsx('text-muted opacity-70', className)}\n        size=\"xs\"\n      >\n        <InfoDialogTriggerIcon viewBox=\"0 0 16 16\" />\n      </IconButton>\n      <Dialog size={dialogSize}>\n        {title && (\n          <DialogHeader padding=\"px-18 pt-12\" size=\"md\" hideDismissButton>\n            {title}\n          </DialogHeader>\n        )}\n        <DialogBody>{body}</DialogBody>\n      </Dialog>\n    </DialogTrigger>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport React, {Fragment, useEffect, useMemo} from 'react';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport shareLink from '../../links/share-link.svg';\nimport {DataTableExportCsvButton} from '@common/datatable/csv-export/data-table-export-csv-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {LinkGroupsDatatableColumns} from './link-groups-datatable-columns';\nimport {LinkGroupsDatatableFilters} from './link-groups-datatable-filters';\nimport {CreateLinkGroupDialog} from './crupdate/create-link-group-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface LinkGroupsDatatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinkGroupsDatatablePage({\n  forCurrentUser,\n}: LinkGroupsDatatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? LinkGroupsDatatableColumns\n      : LinkGroupsDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? LinkGroupsDatatableFilters\n      : LinkGroupsDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, []);\n\n  const userId = forCurrentUser ? user?.id : '';\n  return (\n    <DataTablePage\n      endpoint=\"link-group\"\n      queryParams={{\n        userId,\n        withCount: 'links',\n        with: 'user',\n        workspaceId,\n      }}\n      title={<Trans message=\"Link groups\" />}\n      headerContent={<InfoTrigger />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"linkGroup\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={shareLink}\n          title={<Trans message=\"No groups have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching groups\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      dialogSize=\"auto\"\n      title={<Trans message=\"Group links together to:\" />}\n      body={\n        <ul className=\"list-disc list-inside whitespace-nowrap\">\n          <li>\n            <Trans message=\"Simplify multiple link management.\" />\n          </li>\n          <li>\n            <Trans message=\"View aggregated clicks report for the whole group.\" />\n          </li>\n          <li>\n            <Trans message=\"Redirect to a random link from within the group.\" />\n          </li>\n          <li>\n            <Trans message=\"Share all links in the group with one link.\" />\n          </li>\n        </ul>\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <Fragment>\n      <DataTableExportCsvButton endpoint=\"link-group/csv/export\" />\n      <PermissionAwareButton resource=\"linkGroup\" action=\"create\">\n        <DialogTrigger type=\"modal\">\n          <DataTableAddItemButton>\n            <Trans message=\"New group\" />\n          </DataTableAddItemButton>\n          <CreateLinkGroupDialog />\n        </DialogTrigger>\n      </PermissionAwareButton>\n    </Fragment>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface FetchLinkGroupResponse extends BackendResponse {\n  linkGroup: LinkGroup;\n}\n\nexport function useLinkGroup(groupId: number | string) {\n  return useQuery(['link-group', groupId], () => fetchLinkGroup(groupId), {\n    initialData: seedInitialDataFromPaginatedList(groupId),\n  });\n}\n\nfunction fetchLinkGroup(\n  groupId: number | string\n): Promise<FetchLinkGroupResponse> {\n  return apiClient.get(`link-group/${groupId}`).then(response => response.data);\n}\n\nfunction seedInitialDataFromPaginatedList(groupId: number | string) {\n  const linkGroup = queryClient\n    .getQueryData<PaginatedBackendResponse<LinkGroup>>(\n      PaginatedResourcesQueryKey('link-group'),\n      {exact: false}\n    )\n    ?.pagination?.data.find(link => link.id === +groupId);\n  return linkGroup ? {linkGroup} : undefined;\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {useLinkGroup} from '@app/dashboard/link-groups/link-group-links-datatable-page/requests/use-link-group';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport clsx from 'clsx';\n\nexport function LinkGroupClicksReportPage() {\n  const navigate = useNavigate();\n  const {groupId} = useParams();\n  const query = useLinkGroup(groupId!);\n  const group = query.data?.linkGroup;\n\n  return (\n    <ClicksReportPageLayout\n      model={`link-group=${groupId}`}\n      title={\n        <Breadcrumb size=\"xl\" className={clsx(query.isLoading && 'invisible')}>\n          <BreadcrumbItem\n            onSelected={() => {\n              navigate('..', {relative: 'path'});\n            }}\n          >\n            <Trans message=\"Link groups\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem className=\"first-letter:capitalize\">\n            <Trans message=\"“:name“ clicks\" values={{name: group?.name}} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n      }\n      actions={\n        group && (\n          <ShareLinkButton className=\"flex-shrink-0 text-muted\" link={group} />\n        )\n      }\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {Link} from '@app/dashboard/links/link';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface GetLinkResponse extends BackendResponse {\n  link: Link;\n}\n\nexport function useLink(linkId: number | string) {\n  return useQuery(['link', linkId], () => fetchLink(linkId), {\n    initialData: seedInitialDataFromPaginatedList(linkId),\n  });\n}\n\nfunction fetchLink(linkId: number | string): Promise<GetLinkResponse> {\n  return apiClient.get(`link/${linkId}`).then(response => response.data);\n}\n\nfunction seedInitialDataFromPaginatedList(linkId: number | string) {\n  const link = queryClient\n    .getQueryData<PaginatedBackendResponse<Link>>(\n      PaginatedResourcesQueryKey('link'),\n      {exact: false}\n    )\n    ?.pagination?.data.find(link => link.id === +linkId);\n  return link ? {link} : undefined;\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {useLink} from '@app/dashboard/layout/sidenav/use-link';\nimport clsx from 'clsx';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\n\nexport function LinkClicksReportPage() {\n  const navigate = useNavigate();\n  const {linkId} = useParams();\n  const query = useLink(linkId!);\n  const link = query.data?.link;\n\n  return (\n    <ClicksReportPageLayout\n      model={`link=${linkId}`}\n      title={\n        <Breadcrumb size=\"xl\" className={clsx(query.isLoading && 'invisible')}>\n          <BreadcrumbItem\n            onSelected={() => {\n              navigate('..', {relative: 'path'});\n            }}\n          >\n            <Trans message=\"Links\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem className=\"first-letter:capitalize\">\n            <Trans message=\"“:name“ clicks\" values={{name: link?.name}} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n      }\n      actions={\n        link && (\n          <ShareLinkButton className=\"flex-shrink-0 text-muted\" link={link} />\n        )\n      }\n    />\n  );\n}\n","export default \"__VITE_ASSET__ea41c34b__\"","import world from '@common/custom-domains/datatable/world.svg';\nimport {Trans} from '@common/i18n/trans';\nimport {\n  DataTableEmptyStateMessage,\n  DataTableEmptyStateMessageProps,\n} from '@common/datatable/page/data-table-emty-state-message';\nimport React from 'react';\n\nexport function DomainsEmptyStateMessage(\n  props: Partial<DataTableEmptyStateMessageProps>\n) {\n  return (\n    <DataTableEmptyStateMessage\n      {...props}\n      image={world}\n      title={<Trans message=\"No domains have been connected yet\" />}\n      filteringTitle={<Trans message=\"No matching domains\" />}\n    />\n  );\n}\n","import {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport React from 'react';\n\ninterface BooleanIndicatorProps {\n  value: boolean;\n}\nexport function BooleanIndicator({value}: BooleanIndicatorProps) {\n  if (value) {\n    return <CheckIcon className=\"icon-md text-positive\" />;\n  }\n  return <CloseIcon className=\"icon-md text-danger\" />;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  domain: CustomDomain;\n}\n\nexport function useDeleteDomain() {\n  const {trans} = useTrans();\n  return useMutation((props: Payload) => deleteDomain(props), {\n    onSuccess: (response, props) => {\n      toast.positive(\n        trans(\n          message('“:domain” removed', {values: {domain: props.domain.host}})\n        )\n      );\n      queryClient.invalidateQueries(\n        PaginatedResourcesQueryKey('custom-domain')\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction deleteDomain({domain}: Payload): Promise<Response> {\n  return apiClient.delete(`custom-domain/${domain.id}`).then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport React from 'react';\nimport {useDeleteDomain} from '@common/custom-domains/datatable/requests/use-delete-domain';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\ninterface DeleteDomainButtonProps {\n  domain: CustomDomain;\n}\nexport function DeleteDomainButton({domain}: DeleteDomainButtonProps) {\n  const deleteDomain = useDeleteDomain();\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          deleteDomain.mutate({domain});\n        }\n      }}\n    >\n      <Button\n        variant=\"outline\"\n        color=\"danger\"\n        size=\"xs\"\n        disabled={deleteDomain.isLoading}\n      >\n        <Trans message=\"Remove\" />\n      </Button>\n      <ConfirmationDialog\n        title={<Trans message=\"Remove domain?\" />}\n        body={\n          <Trans\n            message=\"Are you sure you want to remove “:domain“?\"\n            values={{domain: domain.host}}\n          />\n        }\n        confirm={<Trans message=\"Remove\" />}\n        isDanger\n      />\n    </DialogTrigger>\n  );\n}\n","import {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Trans} from '@common/i18n/trans';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport React from 'react';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {BooleanIndicator} from '@common/datatable/column-templates/boolean-indicator';\nimport {DeleteDomainButton} from '@common/custom-domains/datatable/delete-domain-button';\n\nexport const domainsDatatableColumns: ColumnConfig<CustomDomain>[] = [\n  {\n    key: 'host',\n    allowsSorting: true,\n    header: () => <Trans message=\"Domain\" />,\n    // prevent long urls from overflowing the table\n    width: 'w-5/6 max-w-200',\n    body: domain => (\n      <div>\n        <div className=\"flex items-center gap-6 whitespace-nowrap\">\n          <RemoteFavicon url={domain.host} />\n          <a\n            className=\"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min\"\n            href={domain.host}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            data-testid=\"host-name\"\n          >\n            {domain.host}\n          </a>\n        </div>\n      </div>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: domain => {\n      if (!domain.user) return '';\n      return (\n        <NameWithAvatar\n          image={domain.user.avatar}\n          label={domain.user.display_name}\n          description={domain.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'global',\n    allowsSorting: true,\n    header: () => <Trans message=\"Global\" />,\n    body: domain => <BooleanIndicator value={domain.global} />,\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: domain =>\n      domain.updated_at ? <FormattedDate date={domain.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    body: domain => <DeleteDomainButton domain={domain} />,\n  },\n];\n","import {\n  BackendFilter,\n  FilterControlType,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\n\nexport const DomainsDatatableFilters: BackendFilter[] = [\n  new BackendFilter({\n    type: FilterControlType.BooleanToggle,\n    key: 'global',\n    defaultValue: true,\n    label: message('Global'),\n    description: message('Whether domain is marked as global'),\n  }),\n  new CreatedAtFilter({\n    description: message('Date domain was created'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date domain was last updated'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User domain belongs to'),\n  }),\n];\n","export function isSubdomain(host: string): boolean {\n  return (host.replace('www.', '').match(/\\./g) || []).length > 1;\n}\n","import {ProgressCircle} from '@common/ui/progress/progress-circle';\nimport {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\n\ninterface DomainProgressIndicatorProps {\n  message?: ReactNode;\n}\nexport function DomainProgressIndicator({\n  message = <Trans message=\"Checking DNS configuration...\" />,\n}: DomainProgressIndicatorProps) {\n  return (\n    <div className=\"flex items-center gap-18 text-base p-12 rounded bg-primary/10 text-primary\">\n      <ProgressCircle isIndeterminate size=\"sm\" />\n      <div>{message}</div>\n    </div>\n  );\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\nimport {ConnectDomainStepProps} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {isSubdomain} from '@common/custom-domains/datatable/connect-domain-dialog/is-subdomain';\nimport {DomainProgressIndicator} from '@common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator';\n\nexport function InfoStep({\n  stepper: {\n    state: {isLoading, host, serverIp},\n  },\n}: ConnectDomainStepProps) {\n  const {base_url} = useSettings();\n\n  if (isLoading) {\n    return <DomainProgressIndicator />;\n  }\n\n  if (isSubdomain(host)) {\n    return (\n      <Message\n        title={\n          <Trans message=\"Add this CNAME record to your domain by visiting your DNS provider or registrar.\" />\n        }\n        record=\"CNAME\"\n        target={base_url}\n      />\n    );\n  }\n\n  return (\n    <Message\n      title={\n        <Trans message=\"Add this A record to your domain by visiting your DNS provider or registrar.\" />\n      }\n      record=\"A\"\n      target={serverIp}\n    />\n  );\n}\n\ninterface MessageProps {\n  title: ReactNode;\n  record: string;\n  target: string;\n}\n\nfunction Message({title, record, target}: MessageProps) {\n  return (\n    <div>\n      <div className=\"text-muted mb-10\">{title}</div>\n      <div className=\"flex items-center gap-12 text-base p-12 rounded bg-primary/10 text-primary font-semibold\">\n        <div>{record}</div>\n        {target}\n      </div>\n    </div>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Fragment} from 'react';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {ConnectDomainStepProps} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\n\nexport function HostStep({stepper}: ConnectDomainStepProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        autoFocus\n        name=\"host\"\n        required\n        maxLength={100}\n        label={<Trans message=\"Host\" />}\n        placeholder=\"https://example.com\"\n        description={\n          <Trans message=\"Enter the exact domain name you want your items to be accessible with. It can be a subdomain (example.yourdomain.com) or root domain (yourdomain.com).\" />\n        }\n      />\n      {stepper.showGlobalField && (\n        <FormSwitch\n          className=\"mt-24 border-t pt-24\"\n          name=\"global\"\n          description={\n            <Trans message=\"Whether all users should be able to select this domain.\" />\n          }\n        >\n          <Trans message=\"Global\" />\n        </FormSwitch>\n      )}\n    </Fragment>\n  );\n}\n","import {useConnectDomainStepper} from '@common/custom-domains/datatable/connect-domain-dialog/use-connect-domain-stepper';\n\nexport enum ConnectDomainStep {\n  Host = 1,\n  Info = 2,\n  ValidationFailed = 3,\n  Finalize = 4,\n}\n\nexport interface ConnectDomainStepProps {\n  stepper: ReturnType<typeof useConnectDomainStepper>;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  result: 'connected' | null;\n}\n\ninterface Payload {\n  host: string;\n}\n\nexport function useValidateDomainDns() {\n  return useMutation((props: Payload) => authorize(props));\n}\n\nfunction authorize(payload: Payload): Promise<Response> {\n  return apiClient\n    .post('secure/custom-domain/validate/2BrM45vvfS/api', payload)\n    .then(r => r.data);\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {Trans} from '@common/i18n/trans';\nimport {Fragment, ReactNode} from 'react';\nimport {ConnectDomainStepProps} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {useAuth} from '@common/auth/use-auth';\nimport {isSubdomain} from '@common/custom-domains/datatable/connect-domain-dialog/is-subdomain';\nimport {WarningIcon} from '@common/icons/material/Warning';\nimport {useValidateDomainDns} from '@common/custom-domains/datatable/requests/use-validate-domain-dns';\nimport {DomainProgressIndicator} from '@common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator';\n\nexport function ValidationFailedStep({\n  stepper: {\n    goToNextStep,\n    state: {host, serverIp, isLoading, validationFailReason},\n  },\n}: ConnectDomainStepProps) {\n  const validateDns = useValidateDomainDns();\n  const {base_url} = useSettings();\n  const {hasPermission} = useAuth();\n  const subdomain = isSubdomain(host);\n  const record = subdomain ? 'CNAME' : 'A';\n  const location = subdomain ? base_url : serverIp;\n\n  if (isLoading) {\n    return <DomainProgressIndicator />;\n  }\n\n  const errorMessage =\n    validationFailReason === 'serverNotConfigured' && hasPermission('admin') ? (\n      <ErrorMessage>\n        <Trans\n          message=\"DNS records for the domain are setup, however it seems that your server is not configured to handle requests from “:host“\"\n          values={{host: location}}\n        />\n      </ErrorMessage>\n    ) : (\n      <ErrorMessage>\n        <Trans\n          message=\"The domain is missing :record record pointing to :location or the changes haven't propagated yet.\"\n          values={{record, location}}\n        />\n      </ErrorMessage>\n    );\n\n  return (\n    <Fragment>\n      {errorMessage}\n      <div className=\"whitespace-nowrap text-xs text-muted mt-10\">\n        <Trans\n          message=\"You can wait and try again later, or <b>refresh</b>\"\n          values={{\n            b: (text: string) => (\n              <button\n                disabled={isLoading}\n                type=\"button\"\n                className=\"text-primary underline\"\n                onClick={() => {\n                  goToNextStep();\n                }}\n              >\n                {text}\n              </button>\n            ),\n          }}\n        />\n      </div>\n    </Fragment>\n  );\n}\n\ninterface ErrorMessageProps {\n  children: ReactNode;\n}\nfunction ErrorMessage({children}: ErrorMessageProps) {\n  return (\n    <div className=\"flex items-center gap-12 text-base p-12 rounded bg-warning/15 text-warning font-medium\">\n      <WarningIcon size=\"lg\" />\n      {children}\n    </div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\n\ninterface Response extends BackendResponse {\n  serverIp: string;\n}\n\nexport interface AuthorizeDomainConnectPayload {\n  host: string;\n}\n\n// check if is this host is not connected already and if user has permissions to connect domains\nexport function useAuthorizeDomainConnect(\n  form: UseFormReturn<AuthorizeDomainConnectPayload>\n) {\n  return useMutation(\n    (props: AuthorizeDomainConnectPayload) => authorize(props),\n    {\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction authorize(payload: AuthorizeDomainConnectPayload): Promise<Response> {\n  return apiClient\n    .post('secure/custom-domain/authorize/store', payload)\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\ninterface Response extends BackendResponse {\n  domain: CustomDomain;\n}\n\ninterface Payload {\n  host: string;\n  global?: boolean;\n}\n\nexport function useConnectDomain() {\n  const {trans} = useTrans();\n  return useMutation((props: Payload) => connectDomain(props), {\n    onSuccess: response => {\n      toast.positive(\n        trans(\n          message('“:domain” connected', {\n            values: {domain: response.domain.host},\n          })\n        )\n      );\n      queryClient.invalidateQueries(\n        PaginatedResourcesQueryKey('custom-domain')\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction connectDomain(payload: Payload): Promise<Response> {\n  return apiClient.post('custom-domain', payload).then(r => r.data);\n}\n","import {useState} from 'react';\nimport {ConnectDomainStep} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {DomainValidationErrorResponse} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-dialog';\nimport {\n  AuthorizeDomainConnectPayload,\n  useAuthorizeDomainConnect,\n} from '@common/custom-domains/datatable/requests/use-authorize-domain-connect';\nimport {useForm} from 'react-hook-form';\nimport {AxiosError} from 'axios';\nimport {useValidateDomainDns} from '@common/custom-domains/datatable/requests/use-validate-domain-dns';\nimport {useConnectDomain} from '@common/custom-domains/datatable/requests/use-connect-domain';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\n\ninterface ConnectDomainStepperState {\n  isLoading: boolean;\n  currentStep: ConnectDomainStep;\n  host: string;\n  serverIp: string;\n  validationFailReason?: DomainValidationErrorResponse['failReason'];\n}\n\ninterface StepHandlerResult {\n  status: 'success' | 'error';\n  newState?: Partial<ConnectDomainStepperState>;\n}\n\ninterface UseConnectDomainStepperProps {\n  showGlobalField?: boolean;\n}\nexport function useConnectDomainStepper({\n  showGlobalField,\n}: UseConnectDomainStepperProps) {\n  const {close} = useDialogContext();\n  const form = useForm<AuthorizeDomainConnectPayload>();\n  const authorizeDomainConnect = useAuthorizeDomainConnect(form);\n  const validateDns = useValidateDomainDns();\n  const connectDomain = useConnectDomain();\n\n  const [state, setState] = useState<ConnectDomainStepperState>({\n    isLoading: false,\n    currentStep: ConnectDomainStep.Host,\n    host: '',\n    serverIp: '',\n  });\n\n  const startLoading = () => {\n    setState({\n      ...state,\n      isLoading: true,\n    });\n  };\n\n  const handleDomainValidation = (): Promise<StepHandlerResult> => {\n    return new Promise(resolve => {\n      validateDns.mutate(\n        {host: state.host},\n        {\n          onSuccess: () => {\n            resolve({\n              status: 'success',\n              newState: {validationFailReason: undefined},\n            });\n          },\n          onError: err => {\n            resolve({\n              status: 'error',\n              newState: {\n                validationFailReason: (\n                  err as AxiosError<DomainValidationErrorResponse>\n                ).response?.data.failReason,\n              },\n            });\n          },\n        }\n      );\n    });\n  };\n\n  const handleDomainAuthorization = (): Promise<StepHandlerResult> => {\n    return new Promise(resolve => {\n      authorizeDomainConnect.mutate(form.getValues(), {\n        onSuccess: response => {\n          resolve({\n            status: 'success',\n            newState: {\n              host: form.getValues().host,\n              serverIp: response.serverIp,\n            },\n          });\n        },\n        onError: () => {\n          resolve({status: 'error'});\n        },\n      });\n    });\n  };\n\n  const hasPreviousStep = state.currentStep !== ConnectDomainStep.Host;\n\n  const goToPreviousStep = () => {\n    if (!hasPreviousStep || state.isLoading) return;\n\n    if (state.currentStep === ConnectDomainStep.Info) {\n      setState({\n        ...state,\n        currentStep: ConnectDomainStep.Host,\n      });\n    } else if (state.currentStep === ConnectDomainStep.ValidationFailed) {\n      setState({\n        ...state,\n        currentStep: ConnectDomainStep.Info,\n      });\n    }\n  };\n\n  const goToNextStep = async () => {\n    if (state.currentStep === ConnectDomainStep.Host) {\n      startLoading();\n      const result = await handleDomainAuthorization();\n      setState({\n        ...state,\n        ...result.newState,\n        isLoading: false,\n        currentStep:\n          result.status === 'success'\n            ? ConnectDomainStep.Info\n            : ConnectDomainStep.Host,\n      });\n    } else if (\n      state.currentStep === ConnectDomainStep.Info ||\n      state.currentStep === ConnectDomainStep.ValidationFailed\n    ) {\n      startLoading();\n      const validationResult = await handleDomainValidation();\n      const nextStep =\n        validationResult.status === 'success'\n          ? ConnectDomainStep.Finalize\n          : ConnectDomainStep.ValidationFailed;\n      setState({\n        ...state,\n        ...validationResult.newState,\n        isLoading: false,\n        currentStep: nextStep,\n      });\n      if (nextStep === ConnectDomainStep.Finalize) {\n        connectDomain.mutate(form.getValues(), {\n          onSettled: () => {\n            close();\n          },\n        });\n      }\n    }\n  };\n\n  return {\n    form,\n    state,\n    goToNextStep,\n    hasPreviousStep,\n    goToPreviousStep,\n    showGlobalField,\n  };\n}\n","import {Trans} from '@common/i18n/trans';\nimport {DomainProgressIndicator} from '@common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator';\n\nexport function FinalizeStep() {\n  return (\n    <div>\n      <DomainProgressIndicator\n        message={<Trans message=\"Connecting domain...\" />}\n      />\n      <div className=\"text-muted mt-10 text-xs\">\n        <Trans message=\"Don't close this window until domain is connected.\" />\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {InfoStep} from '@common/custom-domains/datatable/connect-domain-dialog/info-step';\nimport {HostStep} from '@common/custom-domains/datatable/connect-domain-dialog/host-step';\nimport {ConnectDomainStep} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {BackendErrorResponse} from '@common/errors/backend-error-response';\nimport {ValidationFailedStep} from '@common/custom-domains/datatable/connect-domain-dialog/validation-failed-step';\nimport {useConnectDomainStepper} from '@common/custom-domains/datatable/connect-domain-dialog/use-connect-domain-stepper';\nimport {Form} from '@common/ui/forms/form';\nimport {FinalizeStep} from '@common/custom-domains/datatable/connect-domain-dialog/finalize-step';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\n\nexport interface DomainValidationErrorResponse extends BackendErrorResponse {\n  failReason: 'serverNotConfigured' | 'dnsNotSetup';\n}\n\ninterface ConnectDomainDialogProps {\n  showGlobalField?: boolean;\n}\nexport function ConnectDomainDialog({\n  showGlobalField,\n}: ConnectDomainDialogProps) {\n  const {close, formId} = useDialogContext();\n  const stepper = useConnectDomainStepper({showGlobalField});\n  const StepComponent = getStepComponent(stepper.state.currentStep);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Connect domain\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={stepper.form}\n          id={formId}\n          onSubmit={() => {\n            stepper.goToNextStep();\n          }}\n        >\n          <StepComponent stepper={stepper} />\n        </Form>\n      </DialogBody>\n      <DialogFooter\n        startAction={\n          <Button\n            variant=\"text\"\n            onClick={() => {\n              close();\n            }}\n          >\n            <Trans message=\"Cancel\" />\n          </Button>\n        }\n      >\n        {stepper.hasPreviousStep && (\n          <Button\n            startIcon={<KeyboardArrowLeftIcon />}\n            color=\"primary\"\n            variant=\"text\"\n            onClick={() => {\n              stepper.goToPreviousStep();\n            }}\n            disabled={stepper.state.isLoading}\n          >\n            <Trans message=\"Previous\" />\n          </Button>\n        )}\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          endIcon={<KeyboardArrowRightIcon />}\n          disabled={stepper.state.isLoading}\n        >\n          <Trans message=\"Next\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction getStepComponent(step: ConnectDomainStep) {\n  switch (step) {\n    case ConnectDomainStep.Host:\n      return HostStep;\n    case ConnectDomainStep.Info:\n      return InfoStep;\n    case ConnectDomainStep.ValidationFailed:\n      return ValidationFailedStep;\n    case ConnectDomainStep.Finalize:\n      return FinalizeStep;\n  }\n}\n","import {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport React, {useMemo} from 'react';\nimport {DomainsEmptyStateMessage} from '@common/custom-domains/datatable/domains-empty-state-message';\nimport {domainsDatatableColumns} from '@common/custom-domains/datatable/domains-datatable-columns';\nimport {DomainsDatatableFilters} from '@common/custom-domains/datatable/domains-datatable-filters';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ConnectDomainDialog} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-dialog';\nimport {useAuth} from '@common/auth/use-auth';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {DeleteDomainButton} from '@common/custom-domains/datatable/delete-domain-button';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\n\nconst datatableColumns = domainsDatatableColumns.map(col => {\n  if (col.key === 'actions') {\n    return {\n      ...col,\n      body: (domain: CustomDomain) => (\n        <PermissionAwareButton resource={domain} action=\"delete\">\n          <DeleteDomainButton domain={domain} />\n        </PermissionAwareButton>\n      ),\n    };\n  }\n  return col;\n});\n\ninterface DomainsDatatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function DomainsDatatablePage({\n  forCurrentUser,\n}: DomainsDatatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? datatableColumns\n      : datatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? DomainsDatatableFilters\n      : DomainsDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      enableSelection={false}\n      endpoint=\"custom-domain\"\n      queryParams={{userId, workspaceId, with: 'user'}}\n      title={<Trans message=\"Branded domains\" />}\n      headerContent={<InfoTrigger />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      emptyStateMessage={<DomainsEmptyStateMessage />}\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"customDomain\" action=\"create\">\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"Connect domain\" />\n        </DataTableAddItemButton>\n        <ConnectDomainDialog />\n      </DialogTrigger>\n    </PermissionAwareButton>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Create trusted links with your own branded domains. Once connected, you can set the domain as default or only use it for specific links.\" />\n      }\n    />\n  );\n}\n","export interface SupportedTrackingPixel {\n  name: string;\n  type: 'number' | 'text';\n  pattern?: string;\n  docsUrl?: string;\n}\n\nexport const SupportedTrackingPixels: SupportedTrackingPixel[] = [\n  {\n    name: 'facebook',\n    type: 'number',\n    docsUrl:\n      'https://www.facebook.com/business/help/952192354843755?id=1205376682832142',\n  },\n  {\n    name: 'twitter',\n    type: 'number',\n    docsUrl:\n      'https://business.twitter.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html',\n  },\n  {\n    name: 'google-tag-manager',\n    type: 'text',\n    pattern: 'GTM-[a-zA-Z0-9]+',\n    docsUrl: 'https://tagmanager.google.com',\n  },\n  {\n    name: 'google-analytics',\n    type: 'text',\n    docsUrl: 'https://analytics.google.com',\n  },\n  {\n    name: 'adwords',\n    type: 'number',\n    docsUrl: 'https://ads.google.com',\n  },\n  {\n    name: 'bing',\n    type: 'number',\n    docsUrl:\n      'https://about.ads.microsoft.com/en-us/solutions/tools/universal-event-tracking',\n  },\n  {\n    name: 'pinterest',\n    type: 'number',\n    docsUrl:\n      'https://help.pinterest.com/en/business/article/track-conversions-with-pinterest-tag',\n  },\n  {\n    name: 'linkedin',\n    type: 'text',\n    docsUrl:\n      'https://www.linkedin.com/help/lms/answer/a418880/add-the-linkedin-insight-tag-to-your-website',\n  },\n  {\n    name: 'quora',\n    type: 'text',\n    pattern: '[a-z0-9]+',\n    docsUrl:\n      'https://quoraadsupport.zendesk.com/hc/en-us/articles/115010303387-About-the-Quora-Pixel',\n  },\n  {\n    name: 'adroll',\n    type: 'text',\n    docsUrl:\n      'https://help.adroll.com/hc/en-us/articles/211846018-What-is-the-AdRoll-Pixel',\n  },\n  {\n    name: 'nexus-segment',\n    type: 'text',\n    docsUrl: 'https://segment.com/catalog/integrations/appnexus',\n  },\n  {\n    name: 'custom',\n    type: 'text',\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const TuneIcon = createSvgIcon(\n  <path d=\"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z\" />\n, 'TuneOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const HelpOutlineIcon = createSvgIcon(\n  <path d=\"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z\" />\n, 'HelpOutlineOutlined');\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {Trans} from '@common/i18n/trans';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {SupportedTrackingPixels} from '@app/dashboard/tracking-pixels/supported-tracking-pixels';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {TuneIcon} from '@common/icons/material/Tune';\nimport {Fragment} from 'react';\nimport {HelpOutlineIcon} from '@common/icons/material/HelpOutline';\n\nexport interface CrupdatePixelFormValue {\n  name: string;\n  type: string;\n  pixel_id?: string | number;\n  head_code?: string;\n  body_code?: string;\n}\n\ninterface CrupdatePixelFormProps {\n  formId: string;\n  form: UseFormReturn<CrupdatePixelFormValue>;\n  onSubmit: (value: CrupdatePixelFormValue) => void;\n}\nexport function CrupdatePixelForm({\n  formId,\n  form,\n  onSubmit,\n}: CrupdatePixelFormProps) {\n  const {watch} = form;\n  const type = watch('type');\n  const config = SupportedTrackingPixels.find(p => p.name === type);\n\n  return (\n    <Form id={formId} form={form} onSubmit={onSubmit}>\n      <FormTextField\n        autoFocus\n        required\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        className=\"mb-24\"\n      />\n      <FormSelect\n        name=\"type\"\n        selectionMode=\"single\"\n        className=\"mb-24\"\n        label={<Trans message=\"Type\" />}\n        description={\n          config?.docsUrl ? (\n            <div className=\"flex items-center gap-6\">\n              <HelpOutlineIcon size=\"sm\" />\n              <a\n                data-testid=\"pixel-docs-link\"\n                href={config.docsUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className=\"underline\"\n              >\n                <Trans message=\"More information\" />\n              </a>\n            </div>\n          ) : null\n        }\n      >\n        {SupportedTrackingPixels.map(pixel => (\n          <Item\n            capitalizeFirst\n            key={pixel.name}\n            value={pixel.name}\n            startIcon={\n              pixel.docsUrl ? (\n                <RemoteFavicon url={pixel.docsUrl} />\n              ) : (\n                <TuneIcon size=\"xs\" />\n              )\n            }\n          >\n            {pixel.name}\n          </Item>\n        ))}\n      </FormSelect>\n      {type !== 'custom' && (\n        <FormTextField\n          required\n          pattern={config?.pattern}\n          type={config?.type === 'number' ? 'number' : 'text'}\n          name=\"pixel_id\"\n          label={<Trans message=\"Pixel ID\" />}\n        />\n      )}\n      {type === 'custom' && <CustomCodeFields />}\n    </Form>\n  );\n}\n\nfunction CustomCodeFields() {\n  return (\n    <Fragment>\n      <FormTextField\n        name=\"head_code\"\n        label={<Trans message=\"Custom code for page head\" />}\n        className=\"mb-24\"\n        inputElementType=\"textarea\"\n        rows={5}\n      />\n      <FormTextField\n        name=\"body_code\"\n        label={<Trans message=\"Custom code for page body\" />}\n        inputElementType=\"textarea\"\n        rows={5}\n      />\n    </Fragment>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {CrupdatePixelFormValue} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdatePixel(\n  pixelId: number,\n  form: UseFormReturn<CrupdatePixelFormValue>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (props: CrupdatePixelFormValue) => createPixel(pixelId, props),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Pixel updated')));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('tp'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createPixel(\n  pixelId: number,\n  payload: CrupdatePixelFormValue\n): Promise<Response> {\n  return apiClient.put(`tp/${pixelId}`, payload).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {\n  CrupdatePixelForm,\n  CrupdatePixelFormValue,\n} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {Trans} from '@app/common/i18n/trans';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {useUpdatePixel} from '@app/dashboard/tracking-pixels/requests/use-update-pixel';\n\ninterface UpdatePixelDialogProps {\n  pixel: TrackingPixel;\n}\nexport function UpdatePixelDialog({pixel}: UpdatePixelDialogProps) {\n  const form = useForm<CrupdatePixelFormValue>({\n    defaultValues: {\n      name: pixel.name,\n      type: pixel.type,\n      pixel_id: pixel.pixel_id,\n      head_code: pixel.head_code,\n      body_code: pixel.body_code,\n    },\n  });\n  const {formId, close} = useDialogContext();\n  const updatePixel = useUpdatePixel(pixel.id, form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Update “:name“\" values={{name: pixel.name}} />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdatePixelForm\n          formId={formId}\n          form={form}\n          onSubmit={values => {\n            updatePixel.mutate(values, {\n              onSuccess: () => {\n                close();\n              },\n            });\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updatePixel.isLoading}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {SupportedTrackingPixels} from '@app/dashboard/tracking-pixels/supported-tracking-pixels';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {UpdatePixelDialog} from '@app/dashboard/tracking-pixels/crupdate-dialog/update-pixel-dialog';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\nexport const TrackingPixelsDatatableColumns: ColumnConfig<TrackingPixel>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    body: pixel => pixel.name,\n  },\n  {\n    key: 'type',\n    allowsSorting: true,\n    header: () => <Trans message=\"Type\" />,\n    body: pixel => {\n      const docsUrl = SupportedTrackingPixels.find(\n        p => p.name === pixel.type\n      )?.docsUrl;\n\n      return (\n        <div>\n          <div className=\"flex items-center gap-10\">\n            {docsUrl ? <RemoteFavicon url={docsUrl} /> : null}\n            {docsUrl ? (\n              <a\n                href={docsUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className={LinkStyle}\n              >\n                {pixel.type}\n              </a>\n            ) : (\n              pixel.type\n            )}\n          </div>\n        </div>\n      );\n    },\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: pixel => {\n      if (!pixel.user) return '';\n      return (\n        <NameWithAvatar\n          image={pixel.user.avatar}\n          label={pixel.user.display_name}\n          description={pixel.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'pixel_id',\n    header: () => <Trans message=\"Pixel ID\" />,\n    body: pixel => pixel.pixel_id,\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: pixel =>\n      pixel.updated_at ? <FormattedDate date={pixel.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    body: pixel => {\n      return (\n        <PermissionAwareButton resource={pixel} action=\"update\">\n          <DialogTrigger type=\"modal\">\n            <IconButton className=\"text-muted\">\n              <EditIcon />\n            </IconButton>\n            <UpdatePixelDialog pixel={pixel} />\n          </DialogTrigger>\n        </PermissionAwareButton>\n      );\n    },\n  },\n];\n","export default \"__VITE_ASSET__0df79a5f__\"","import {\n  BackendFilter,\n  FilterControlType,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\nimport {SupportedTrackingPixels} from '@app/dashboard/tracking-pixels/supported-tracking-pixels';\n\nexport const TrackingPixelsDatatableFilters: BackendFilter[] = [\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'type',\n    label: message('Type'),\n    description: message('Type of the pixel'),\n    options: SupportedTrackingPixels.map((pixel, index) => {\n      return {key: pixel.name, value: pixel.name, label: message(pixel.name)};\n    }),\n  }),\n  new CreatedAtFilter({\n    description: message('Date pixel was created'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date pixel was last updated'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User pixel belongs to'),\n  }),\n];\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {CrupdatePixelFormValue} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\n\ninterface Response extends BackendResponse {}\n\nexport function useCreatePixel(form: UseFormReturn<CrupdatePixelFormValue>) {\n  const {trans} = useTrans();\n  return useMutation((props: CrupdatePixelFormValue) => createPixel(props), {\n    onSuccess: () => {\n      toast.positive(trans(message('Pixel created')));\n      queryClient.invalidateQueries(PaginatedResourcesQueryKey('tp'));\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createPixel(payload: CrupdatePixelFormValue): Promise<Response> {\n  return apiClient.post('tp', payload).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useCreatePixel} from '@app/dashboard/tracking-pixels/requests/use-create-pixel';\nimport {\n  CrupdatePixelForm,\n  CrupdatePixelFormValue,\n} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {Trans} from '@app/common/i18n/trans';\n\nexport function CreatePixelDialog() {\n  const form = useForm<CrupdatePixelFormValue>({\n    defaultValues: {type: 'facebook'},\n  });\n  const {formId, close} = useDialogContext();\n  const createPixel = useCreatePixel(form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Create pixel\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdatePixelForm\n          formId={formId}\n          form={form}\n          onSubmit={values => {\n            createPixel.mutate(values, {\n              onSuccess: () => {\n                close();\n              },\n            });\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createPixel.isLoading}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport React, {useMemo} from 'react';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {TrackingPixelsDatatableColumns} from '@app/dashboard/tracking-pixels/tracking-pixels-datatable-columns';\nimport locationTracking from './location-tracking.svg';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {TrackingPixelsDatatableFilters} from '@app/dashboard/tracking-pixels/tracking-pixels-datatable-filters';\nimport {CreatePixelDialog} from '@app/dashboard/tracking-pixels/crupdate-dialog/create-pixel-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\n\ninterface TrackingPixelsDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function TrackingPixelsDatablePage({\n  forCurrentUser,\n}: TrackingPixelsDatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? TrackingPixelsDatatableColumns\n      : TrackingPixelsDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? TrackingPixelsDatatableFilters\n      : TrackingPixelsDatatableFilters.filter(\n          filter => filter.key !== 'user_id'\n        );\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      endpoint=\"tp\"\n      queryParams={{userId, with: 'user', workspaceId}}\n      title={<Trans message=\"Tracking pixels\" />}\n      filters={filters}\n      columns={columns}\n      headerContent={<InfoTrigger />}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"trackingPixel\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={locationTracking}\n          title={<Trans message=\"No tracking pixels have been added yet\" />}\n          filteringTitle={<Trans message=\"No matching tracking pixels\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"trackingPixel\" action=\"create\">\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"Add pixel\" />\n        </DataTableAddItemButton>\n        <CreatePixelDialog />\n      </DialogTrigger>\n    </PermissionAwareButton>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Add third party tracking integration to your links using pixels or custom code snippet.\" />\n      }\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {useParams} from 'react-router-dom';\nimport {CustomPage} from '../../custom-page';\nimport {BackendResponse} from '../../../../http/backend-response/backend-response';\nimport {apiClient} from '../../../../http/query-client';\n\nexport interface FetchUseCustomPageResponse extends BackendResponse {\n  page: CustomPage;\n}\n\nfunction fetchCustomPage(\n  pageId: number | string\n): Promise<FetchUseCustomPageResponse> {\n  return apiClient\n    .get(`custom-pages/${pageId}`)\n    .then(response => response.data);\n}\n\nexport function useCustomPage() {\n  const {pageId} = useParams();\n  return useQuery(['custom-pages', pageId], () => fetchCustomPage(pageId!), {\n    enabled: !!pageId,\n  });\n}\n","import React, {Suspense, useEffect} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {useCustomPage} from './requests/use-custom-page';\nimport {CustomPage} from '../custom-page';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\n\nconst TextEditor = React.lazy(() => import('./text-editor'));\n\ninterface PageEditorLayoutProps {\n  allowSlugEditing?: boolean;\n  endpoint?: string;\n}\nexport function PageEditorLayout({\n  allowSlugEditing = true,\n  endpoint,\n}: PageEditorLayoutProps) {\n  const {data, isFetched, fetchStatus} = useCustomPage();\n  const pageIsLoading = !isFetched && fetchStatus !== 'idle';\n  const form = useForm<Partial<CustomPage>>();\n\n  useEffect(() => {\n    if (data?.page) {\n      form.reset(data.page);\n    }\n  }, [form, data?.page]);\n\n  return (\n    <Suspense fallback={<FullPageLoader />}>\n      <div className=\"min-h-full\">\n        {!pageIsLoading && (\n          <TextEditor\n            page={data?.page}\n            allowSlugEditing={allowSlugEditing}\n            endpoint={endpoint}\n          />\n        )}\n      </div>\n    </Suspense>\n  );\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n} from '../../datatable/filters/backend-filter';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '../../datatable/filters/timestamp-filters';\nimport {message} from '../../i18n/message';\nimport {USER_MODEL} from '../../auth/user';\nimport {SiteConfigContextValue} from '@common/core/settings/site-config-context';\n\nexport const CustomPageDatatableFilters = (\n  config: SiteConfigContextValue\n): BackendFilter[] => {\n  const dynamicFilters =\n    config.customPages.types.length > 1\n      ? [\n          new BackendFilter({\n            type: FilterControlType.Select,\n            key: 'type',\n            label: message('Type'),\n            description: message('Type of the page'),\n            defaultValue: 'default',\n            options: config.customPages.types.map(type => {\n              return {value: type.type, label: type.label, key: type.type};\n            }),\n          }),\n        ]\n      : [];\n\n  return [\n    new BackendFilter({\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n      key: 'user_id',\n      label: message('User'),\n      description: message('User page was created by'),\n    }),\n    ...dynamicFilters,\n    new CreatedAtFilter({\n      description: message('Date page was created'),\n    }),\n    new UpdatedAtFilter({\n      description: message('Date page was last updated'),\n    }),\n  ];\n};\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport React from 'react';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\n\nexport const CustomPageDatatableColumns: ColumnConfig<CustomPage>[] = [\n  {\n    key: 'slug',\n    allowsSorting: true,\n    header: () => <Trans message=\"Slug\" />,\n    body: page => (\n      <Link target=\"_blank\" to={`/pages/${page.slug}`} className={LinkStyle}>\n        {page.slug}\n      </Link>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: page =>\n      page.user && (\n        <NameWithAvatar\n          image={page.user.avatar}\n          label={page.user.display_name}\n          description={page.user.email}\n        />\n      ),\n  },\n  {\n    key: 'type',\n    header: () => <Trans message=\"Type\" />,\n    body: page => <Trans message={page.type} />,\n    width: 'w-1',\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: page => <FormattedDate date={page.updated_at} />,\n    width: 'w-1',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-1',\n    body: page => (\n      <IconButton\n        size=\"md\"\n        className=\"text-muted\"\n        elementType={Link}\n        to={`${page.id}/edit`}\n      >\n        <EditIcon />\n      </IconButton>\n    ),\n  },\n];\n","export default \"__VITE_ASSET__8bfd9f17__\"","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\n\ninterface Response extends BackendResponse {}\n\nexport interface UpdateLinkPageOptionsPayload {\n  hideNavbar: boolean;\n  hideFooter: boolean;\n}\n\nexport function useUpdateLinkPageOptions(\n  pageId: number | string,\n  form: UseFormReturn<UpdateLinkPageOptionsPayload>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (props: UpdateLinkPageOptionsPayload) => updatePage(pageId, props),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Page options updated')));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('link-page'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction updatePage(\n  pageId: number | string,\n  payload: UpdateLinkPageOptionsPayload\n): Promise<Response> {\n  return apiClient\n    .put(`link-page/${pageId}`, {meta: payload})\n    .then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {SettingsIcon} from '@common/icons/material/Settings';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Form} from '@common/ui/forms/form';\nimport {useForm} from 'react-hook-form';\nimport {\n  UpdateLinkPageOptionsPayload,\n  useUpdateLinkPageOptions,\n} from '@app/dashboard/link-pages/requests/use-update-link-page-options';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\n\ninterface LinkPageOptionsTriggerProps {\n  page: CustomPage;\n}\nexport function LinkPageOptionsTrigger({page}: LinkPageOptionsTriggerProps) {\n  return (\n    <DialogTrigger type=\"modal\">\n      <Tooltip label={<Trans message=\"Page options\" />}>\n        <IconButton className=\"text-muted\">\n          <SettingsIcon />\n        </IconButton>\n      </Tooltip>\n      <OptionsDialog page={page} />\n    </DialogTrigger>\n  );\n}\n\ninterface OptionsDialogProps {\n  page: CustomPage;\n}\nfunction OptionsDialog({page}: OptionsDialogProps) {\n  const {formId, close} = useDialogContext();\n  const form = useForm<UpdateLinkPageOptionsPayload>({\n    defaultValues: {\n      hideFooter: Boolean(page.meta?.hideFooter),\n      hideNavbar: Boolean(page.meta?.hideNavbar),\n    },\n  });\n  const updateOptions = useUpdateLinkPageOptions(page.id, form);\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Link page options\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            updateOptions.mutate(values, {onSuccess: close});\n          }}\n        >\n          <FormSwitch\n            className=\"mb-24\"\n            name=\"hideNavbar\"\n            description={\n              <Trans message=\"Whether navbar should be hidden on this link page.\" />\n            }\n          >\n            <Trans message=\"Hide navbar\" />\n          </FormSwitch>\n          <FormSwitch\n            name=\"hideFooter\"\n            description={\n              <Trans message=\"Whether footer should be hidden on this link page.\" />\n            }\n          >\n            <Trans message=\"Hide footer\" />\n          </FormSwitch>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateOptions.isLoading}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {CustomPageDatatableFilters} from '@common/admin/custom-pages/custom-page-datatable-filters';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {useAuth} from '@common/auth/use-auth';\nimport React, {Fragment, useContext, useMemo} from 'react';\nimport {CustomPageDatatableColumns} from '@common/admin/custom-pages/custom-page-datatable-columns';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport articlesSvg from '@common/admin/custom-pages/articles.svg';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {LinkPageOptionsTrigger} from '@app/dashboard/link-pages/link-page-options-trigger';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\n\nconst actionColumn: ColumnConfig<CustomPage> = {\n  ...CustomPageDatatableColumns[4],\n  body: page => {\n    return (\n      <Fragment>\n        <LinkPageOptionsTrigger page={page} />\n        <PermissionAwareButton resource={page} action=\"update\">\n          <Tooltip label={<Trans message=\"Edit page\" />}>\n            <IconButton\n              size=\"md\"\n              className=\"text-muted\"\n              elementType={Link}\n              to={`${page.id}/edit`}\n            >\n              <EditIcon />\n            </IconButton>\n          </Tooltip>\n        </PermissionAwareButton>\n      </Fragment>\n    );\n  },\n};\n\nconst columnConfig = [\n  ...CustomPageDatatableColumns.filter(\n    col => col.key !== 'actions' && col.key !== 'type'\n  ),\n  actionColumn,\n];\n\ninterface CustomPageDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinkPagesDatatablePage({\n  forCurrentUser,\n}: CustomPageDatablePageProps) {\n  const config = useContext(SiteConfigContext);\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? columnConfig\n      : columnConfig.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? CustomPageDatatableFilters(config)\n      : CustomPageDatatableFilters(config).filter(\n          filter => filter.key !== 'user_id'\n        );\n\n    return {filters, columns};\n  }, [forCurrentUser, config]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      endpoint=\"link-page\"\n      title={<Trans message=\"Link pages\" />}\n      filters={filters}\n      columns={columns}\n      headerContent={<InfoTrigger />}\n      queryParams={{userId, with: 'user', workspaceId}}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"customPage\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={articlesSvg}\n          title={<Trans message=\"No link pages have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching link pages\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"customPage\" action=\"create\">\n      <DataTableAddItemButton elementType={Link} to=\"new\">\n        <Trans message=\"New page\" />\n      </DataTableAddItemButton>\n    </PermissionAwareButton>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Show a transitional page with fully custom markup. Users who visit the short url will briefly see the page before being redirected to destination url.\" />\n      }\n    />\n  );\n}\n","export default \"__VITE_ASSET__824a74c6__\"","import {createSvgIcon} from '../../../../icons/create-svg-icon';\n\nexport const ColorIcon = createSvgIcon(\n  <path\n    stroke=\"#E0E0E0\"\n    d=\"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z\"\n  />\n);\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {Link} from 'react-router-dom';\nimport {ColorIcon} from '@common/admin/appearance/sections/themes/color-icon';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\nexport const LinkOverlaysDatatableColumns: ColumnConfig<LinkOverlay>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    body: overlay => overlay.name,\n  },\n  {\n    key: 'message',\n    allowsSorting: true,\n    header: () => <Trans message=\"Message\" />,\n    body: overlay => overlay.message,\n  },\n  {\n    key: 'btn_text',\n    allowsSorting: true,\n    header: () => <Trans message=\"Button text\" />,\n    body: overlay => overlay.btn_text,\n  },\n  {\n    key: 'color',\n    header: () => <Trans message=\"Color\" />,\n    body: overlay => (\n      <ColorIcon\n        viewBox=\"0 0 48 48\"\n        className=\"icon-lg\"\n        style={{fill: overlay.colors['bg-color']}}\n      />\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: overlay => {\n      if (!overlay.user) return '';\n      return (\n        <NameWithAvatar\n          image={overlay.user.avatar}\n          label={overlay.user.display_name}\n          description={overlay.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: pixel =>\n      pixel.updated_at ? <FormattedDate date={pixel.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    body: overlay => {\n      return (\n        <PermissionAwareButton resource={overlay} action=\"update\">\n          <IconButton\n            className=\"text-muted\"\n            elementType={Link}\n            to={`${overlay.id}/edit`}\n          >\n            <EditIcon />\n          </IconButton>\n        </PermissionAwareButton>\n      );\n    },\n  },\n];\n","import {message} from '@common/i18n/message';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport const LinkOverlayThemes = [\n  {key: 'default', label: message('Default')},\n  {key: 'full-width', label: message('Full width')},\n  {key: 'rounded', label: message('Rounded')},\n  {key: 'pill', label: message('Pill')},\n];\n\nexport const LinkOverlayPositions = [\n  {key: 'top-left', label: message('Top left')},\n  {key: 'top-right', label: message('Top right')},\n  {key: 'bottom-left', label: message('Bottom left')},\n  {key: 'bottom-right', label: message('Bottom right')},\n];\n\nexport const LinkOverlayColors: {\n  key: keyof LinkOverlay['colors'];\n  label: MessageDescriptor;\n}[] = [\n  {key: 'bg-color', label: message('Background color')},\n  {key: 'text-color', label: message('Text color')},\n  {key: 'btn-bg-color', label: message('Button background')},\n  {key: 'btn-text-color', label: message('Button text')},\n  {key: 'label-bg-color', label: message('Label background')},\n  {key: 'label-color', label: message('Label text')},\n];\n","import {\n  BackendFilter,\n  FilterControlType,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\nimport {\n  LinkOverlayPositions,\n  LinkOverlayThemes,\n} from '@app/dashboard/link-overlays/crupdate/link-overlay-constants';\n\nexport const LinkOverlaysDatatableFilters: BackendFilter[] = [\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'theme',\n    label: message('Theme'),\n    description: message('Theme for the overlay'),\n    defaultValue: 'default',\n    options: LinkOverlayThemes.map(theme => ({\n      key: theme.key,\n      value: theme.key,\n      label: theme.label,\n    })),\n  }),\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'position',\n    label: message('Position'),\n    description: message('Position for the overlay'),\n    defaultValue: 'bottom-left',\n    options: LinkOverlayPositions.map(position => ({\n      key: position.key,\n      value: position.key,\n      label: position.label,\n    })),\n  }),\n  new CreatedAtFilter({\n    description: message('Date overlay was created'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date overlay was last updated'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User overlay belongs to'),\n  }),\n];\n","import {useAuth} from '@common/auth/use-auth';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport React, {useMemo} from 'react';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport preferencesPopup from './preferences-popup.svg';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {Link} from 'react-router-dom';\nimport {LinkOverlaysDatatableColumns} from '@app/dashboard/link-overlays/link-overlays-datatable-columns';\nimport {LinkOverlaysDatatableFilters} from '@app/dashboard/link-overlays/link-overlays-datatable-filters';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface TrackingPixelsDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinkOverlaysDatatablePage({\n  forCurrentUser,\n}: TrackingPixelsDatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? LinkOverlaysDatatableColumns\n      : LinkOverlaysDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? LinkOverlaysDatatableFilters\n      : LinkOverlaysDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      endpoint=\"link-overlay\"\n      queryParams={{userId, with: 'user', workspaceId}}\n      title={<Trans message=\"Call-to-action overlays\" />}\n      headerContent={<InfoTrigger />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"linkOverlay\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={preferencesPopup}\n          title={<Trans message=\"No overlays have been added yet\" />}\n          filteringTitle={<Trans message=\"No matching overlays\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Display fully customizable, non-intrusive overlay with a message and call-to-action button over destination website.\" />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"linkOverlay\" action=\"create\">\n      <DataTableAddItemButton to=\"new\" elementType={Link}>\n        <Trans message=\"Add overlay\" />\n      </DataTableAddItemButton>\n    </PermissionAwareButton>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\n\ninterface Response extends BackendResponse {}\n\nexport function useCreateLinkOverlay(\n  form: UseFormReturn<CrupdateLinkOverlayPayload>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: CrupdateLinkOverlayPayload) => createOverlay(payload),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Overlay created')));\n        queryClient.invalidateQueries(\n          PaginatedResourcesQueryKey('link-overlay')\n        );\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createOverlay(payload: CrupdateLinkOverlayPayload): Promise<Response> {\n  return apiClient.post('link-overlay', payload).then(r => r.data);\n}\n","import React, {RefObject} from 'react';\n\ninterface TabsContext {\n  selectedTab: number;\n  setSelectedTab: (newTab: number) => void;\n  tabsRef: RefObject<HTMLElement[]>;\n  size: 'sm' | 'md';\n  isLazy?: boolean;\n  id: string;\n}\n\nexport const TabContext = React.createContext<TabsContext>(null!);\n","import React, {ReactElement, useId, useMemo, useRef} from 'react';\nimport clsx from 'clsx';\nimport {useControlledState} from '@react-stately/utils';\nimport {TabContext} from './tabs-context';\nimport {TabListProps} from './tab-list';\nimport {TabPanelsProps} from './tab-panels';\n\nexport interface TabsProps {\n  children: [ReactElement<TabListProps>, ReactElement<TabPanelsProps>];\n  size?: 'sm' | 'md';\n  className?: string;\n  selectedTab?: number;\n  defaultSelectedTab?: number;\n  onTabChange?: (newTab: number) => void;\n  isLazy?: boolean;\n  overflow?: string;\n}\n\nexport function Tabs(props: TabsProps) {\n  const {\n    size = 'md',\n    children,\n    className,\n    isLazy,\n    overflow = 'overflow-hidden',\n  } = props;\n\n  const tabsRef = useRef<HTMLButtonElement[]>([]);\n  const id = useId();\n\n  const [selectedTab, setSelectedTab] = useControlledState(\n    props.selectedTab,\n    props.defaultSelectedTab || 0,\n    props.onTabChange\n  );\n\n  const ContextValue = useMemo(() => {\n    return {\n      selectedTab,\n      setSelectedTab,\n      tabsRef,\n      size,\n      isLazy,\n      id,\n    };\n  }, [selectedTab, id, isLazy, setSelectedTab, size]);\n\n  return (\n    <TabContext.Provider value={ContextValue}>\n      <div className={clsx(className, overflow, 'max-w-full')}>{children}</div>\n    </TabContext.Provider>\n  );\n}\n","import React, {useContext, useState} from 'react';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport clsx from 'clsx';\nimport {TabContext} from './tabs-context';\n\ninterface TabLineStyle {\n  width?: string;\n  transform?: string;\n  className?: string;\n}\n\nexport function TabLine() {\n  const {tabsRef, selectedTab} = useContext(TabContext);\n  const [style, setStyle] = useState<TabLineStyle>({\n    width: undefined,\n    transform: undefined,\n    className: undefined,\n  });\n\n  useLayoutEffect(() => {\n    if (selectedTab != null && tabsRef.current) {\n      const el = tabsRef.current[selectedTab];\n      setStyle(prevState => {\n        return {\n          width: `${el.offsetWidth}px`,\n          transform: `translateX(${el.offsetLeft}px)`,\n          // disable initial transition for tabline\n          className: prevState.width === undefined ? '' : 'transition-all',\n        };\n      });\n    }\n  }, [setStyle, selectedTab, tabsRef]);\n\n  return (\n    <div\n      className={clsx(\n        'absolute bottom-0 left-0 h-2 bg-primary',\n        style.className\n      )}\n      role=\"presentation\"\n      style={{width: style.width, transform: style.transform}}\n    />\n  );\n}\n","import React, {Children, cloneElement, isValidElement, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {FocusScope} from '@react-aria/focus';\nimport {TabProps} from './tab';\nimport {TabLine} from './tab-line';\n\nexport interface TabListProps {\n  children: ReactNode;\n  // center tabs within tablist\n  center?: boolean;\n  // expand tabs to fill in tablist space fully. By default, tabs are only as wide as their content.\n  expand?: boolean;\n  className?: string;\n}\nexport function TabList({children, center, expand, className}: TabListProps) {\n  const childrenArray = Children.toArray(children);\n\n  return (\n    <FocusScope>\n      <div\n        className={clsx(\n          'flex relative max-w-full overflow-auto border-b',\n          className\n        )}\n        role=\"tablist\"\n        aria-orientation=\"horizontal\"\n      >\n        {childrenArray.map((child, index) => {\n          if (isValidElement<TabProps>(child)) {\n            return cloneElement<TabProps>(child, {\n              index,\n              className: clsx(\n                child.props.className,\n                expand && 'flex-auto',\n                center && index === 0 && 'ml-auto',\n                center && index === childrenArray.length - 1 && 'mr-auto'\n              ),\n            });\n          }\n          return null;\n        })}\n        <TabLine />\n      </div>\n    </FocusScope>\n  );\n}\n","import React, {JSXElementConstructor, ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {useFocusManager} from '@react-aria/focus';\nimport {TabContext} from './tabs-context';\nimport {LinkProps} from 'react-router-dom';\n\nexport interface TabProps {\n  className?: string;\n  index?: number;\n  children: ReactNode;\n  isDisabled?: boolean;\n  padding?: string;\n  elementType?: 'button' | 'a' | JSXElementConstructor<any>;\n  to?: LinkProps['to'];\n  relative?: LinkProps['relative'];\n}\nexport function Tab({\n  index,\n  className,\n  isDisabled,\n  children,\n  padding: paddingProp,\n  elementType = 'button',\n  to,\n  relative,\n}: TabProps) {\n  const {\n    selectedTab,\n    setSelectedTab,\n    tabsRef,\n    size = 'md',\n    id,\n  } = useContext(TabContext);\n  const isSelected = index === selectedTab;\n  const focusManager = useFocusManager();\n  const padding = paddingProp || (size === 'sm' ? 'px-12' : 'px-18');\n\n  const mergedClassname = clsx(\n    'tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors',\n    'focus-visible:ring focus-visible:ring-2 ring-inset rounded',\n    textColor({isDisabled, isSelected}),\n    className,\n    size === 'md' && `${padding} h-48`,\n    size === 'sm' && `${padding} h-32`,\n    !isDisabled && 'cursor-pointer'\n  );\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusManager.focusPrevious();\n        break;\n      case 'ArrowRight':\n        focusManager.focusNext();\n        break;\n      case 'Home':\n        focusManager.focusFirst();\n        break;\n      case 'End':\n        focusManager.focusLast();\n        break;\n    }\n  };\n\n  const tabIndex = isSelected ? 0 : -1;\n  const Element = elementType;\n\n  return (\n    <Element\n      disabled={isDisabled}\n      id={`${id}-${index}-tab`}\n      aria-controls={`${id}-${index}-tabpanel`}\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={isSelected}\n      tabIndex={isDisabled ? undefined : tabIndex}\n      onKeyDown={onKeyDown}\n      onClick={() => {\n        setSelectedTab(index!);\n      }}\n      to={to}\n      relative={relative}\n      className={mergedClassname}\n      ref={(el: HTMLElement) => {\n        if (tabsRef.current && el) {\n          tabsRef.current[index!] = el;\n        }\n      }}\n    >\n      {children}\n    </Element>\n  );\n}\n\ninterface TextColorProps {\n  isDisabled?: boolean;\n  isSelected: boolean;\n}\nfunction textColor({isDisabled, isSelected}: TextColorProps): string {\n  if (isDisabled) {\n    return 'text-disabled cursor-default';\n  }\n  if (isSelected) {\n    return 'text-primary';\n  }\n  return 'text-muted hover:text-main';\n}\n","import React, {\n  Children,\n  cloneElement,\n  ComponentPropsWithoutRef,\n  isValidElement,\n  ReactElement,\n  ReactNode,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {TabContext} from './tabs-context';\n\nexport interface TabPanelsProps {\n  children: ReactNode;\n  className?: string;\n}\nexport function TabPanels({children, className}: TabPanelsProps) {\n  const {selectedTab, isLazy} = useContext(TabContext);\n\n  const panelArray = Children.toArray(children);\n\n  let rendered: ReactNode;\n  if (isLazy) {\n    rendered = cloneElement<TabPanelProps>(\n      panelArray[selectedTab] as ReactElement,\n      {index: selectedTab}\n    );\n  } else {\n    rendered = panelArray.map((panel, index) => {\n      if (isValidElement<TabPanelsProps>(panel)) {\n        const isSelected = index === selectedTab;\n        return cloneElement<TabPanelProps>(panel, {\n          index,\n          'aria-hidden': !isSelected,\n          className: !isSelected\n            ? clsx(panel.props.className, 'hidden')\n            : panel.props.className,\n        });\n      }\n      return null;\n    });\n  }\n\n  return <div className={className}>{rendered}</div>;\n}\n\ninterface TabPanelProps extends ComponentPropsWithoutRef<'div'> {\n  className?: string;\n  children: ReactNode;\n  index?: number;\n}\nexport function TabPanel({\n  className,\n  children,\n  index,\n  ...domProps\n}: TabPanelProps) {\n  const {id} = useContext(TabContext);\n\n  const [tabIndex, setTabIndex] = useState<number | undefined>(0);\n  const ref = useRef<HTMLDivElement>(null);\n\n  // The tabpanel should have tabIndex=0 when there are no tabbable elements within it.\n  // Otherwise, tabbing from the focused tab should go directly to the first tabbable element\n  // within the tabpanel.\n  useLayoutEffect(() => {\n    if (ref?.current) {\n      const update = () => {\n        // Detect if there are any tabbable elements and update the tabIndex accordingly.\n        const walker = getFocusableTreeWalker(ref.current!, {tabbable: true});\n        setTabIndex(walker.nextNode() ? undefined : 0);\n      };\n\n      update();\n\n      // Update when new elements are inserted, or the tabIndex/disabled attribute updates.\n      const observer = new MutationObserver(update);\n      observer.observe(ref.current, {\n        subtree: true,\n        childList: true,\n        attributes: true,\n        attributeFilter: ['tabIndex', 'disabled'],\n      });\n\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [ref]);\n\n  return (\n    <div\n      tabIndex={tabIndex}\n      ref={ref}\n      id={`${id}-${index}-tabpanel`}\n      aria-labelledby={`${id}-${index}-tab`}\n      className={clsx(className, 'focus-visible:outline-primary-light')}\n      role=\"tabpanel\"\n      {...domProps}\n    >\n      {children}\n    </div>\n  );\n}\n","export function OverlayWebsiteBackground() {\n  return (\n    <div className=\"bg-card h-full overflow-hidden\">\n      <div className=\"navbar flex items-center bg-alt h-40 w-full\">\n        <div\n          className=\"os-button w-20 h-20 rounded-full ml-14\"\n          style={{background: '#d7665d'}}\n        />\n        <div\n          className=\"os-button w-20 h-20 rounded-full ml-14\"\n          style={{background: '#deab54'}}\n        />\n        <div\n          className=\"os-button w-20 h-20 rounded-full ml-14\"\n          style={{background: '#6fb54c'}}\n        />\n      </div>\n\n      <div className=\"page-body p-24\">\n        <div className=\"top-row flex items-center h-60 bg-alt p-10 mb-24\">\n          <div className=\"circle w-40 h-40 rounded-full mr-auto bg-disabled-bg\"></div>\n          <div className=\"line w-1/6 h-20 rounded bg-disabled-bg ml-14\" />\n          <div className=\"line w-1/6 h-20 rounded bg-disabled-bg ml-14\" />\n          <div className=\"line w-1/6 h-20 rounded bg-disabled-bg ml-14\" />\n        </div>\n\n        <div className=\"middle-row flex items-center justify-center flex-col h-[260px] bg-alt my-24\">\n          <div className=\"line rounded h-36 mb-20 w-3/5 bg-disabled-bg\" />\n          <div className=\"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5\" />\n          <div className=\"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5\" />\n          <div className=\"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5\" />\n        </div>\n\n        <div className=\"flex-container flex\">\n          <div className=\"left w-1/3\">\n            <div className=\"rect h-144 bg-disabled-bg/5 mb-6\" />\n            <div className=\"line fat-line h-36 mb-10 rounded bg-disabled-bg/5\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"separator h-1 bg-divider my-24\"></div>\n            <div className=\"rect h-144 bg-disabled-bg/5 mb-10\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"rect h-144 bg-disabled-bg/5 mb-6\" />\n          </div>\n\n          <div className=\"right w-2/3 pl-24\">\n            <div className=\"rect h-288 mb-32 bg-disabled-bg/5\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"line fat-line h-36 mb-10 rounded bg-disabled-bg/5\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"separator h-1 bg-divider my-24\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"rect h-288 mb-32 bg-disabled-bg/5\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import e,{useRef as r,useMemo as t,useEffect as n,useState as o,useCallback as a,useLayoutEffect as l}from\"react\";function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(o[t]=e[t]);return o}function i(e){var t=r(e),n=r(function(e){t.current&&t.current(e)});return t.current=e,n.current}var s=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=1),e>t?t:e<r?r:e},f=function(e){return\"touches\"in e},v=function(e){return e&&e.ownerDocument.defaultView||self},d=function(e,r,t){var n=e.getBoundingClientRect(),o=f(r)?function(e,r){for(var t=0;t<e.length;t++)if(e[t].identifier===r)return e[t];return e[0]}(r.touches,t):r;return{left:s((o.pageX-(n.left+v(e).pageXOffset))/n.width),top:s((o.pageY-(n.top+v(e).pageYOffset))/n.height)}},h=function(e){!f(e)&&e.preventDefault()},m=e.memo(function(o){var a=o.onMove,l=o.onKey,s=c(o,[\"onMove\",\"onKey\"]),m=r(null),g=i(a),p=i(l),b=r(null),_=r(!1),x=t(function(){var e=function(e){h(e),(f(e)?e.touches.length>0:e.buttons>0)&&m.current?g(d(m.current,e,b.current)):t(!1)},r=function(){return t(!1)};function t(t){var n=_.current,o=v(m.current),a=t?o.addEventListener:o.removeEventListener;a(n?\"touchmove\":\"mousemove\",e),a(n?\"touchend\":\"mouseup\",r)}return[function(e){var r=e.nativeEvent,n=m.current;if(n&&(h(r),!function(e,r){return r&&!f(e)}(r,_.current)&&n)){if(f(r)){_.current=!0;var o=r.changedTouches||[];o.length&&(b.current=o[0].identifier)}n.focus(),g(d(n,r,b.current)),t(!0)}},function(e){var r=e.which||e.keyCode;r<37||r>40||(e.preventDefault(),p({left:39===r?.05:37===r?-.05:0,top:40===r?.05:38===r?-.05:0}))},t]},[p,g]),C=x[0],E=x[1],H=x[2];return n(function(){return H},[H]),e.createElement(\"div\",u({},s,{onTouchStart:C,onMouseDown:C,className:\"react-colorful__interactive\",ref:m,onKeyDown:E,tabIndex:0,role:\"slider\"}))}),g=function(e){return e.filter(Boolean).join(\" \")},p=function(r){var t=r.color,n=r.left,o=r.top,a=void 0===o?.5:o,l=g([\"react-colorful__pointer\",r.className]);return e.createElement(\"div\",{className:l,style:{top:100*a+\"%\",left:100*n+\"%\"}},e.createElement(\"div\",{className:\"react-colorful__pointer-fill\",style:{backgroundColor:t}}))},b=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=Math.pow(10,r)),Math.round(t*e)/t},_={grad:.9,turn:360,rad:360/(2*Math.PI)},x=function(e){return L(C(e))},C=function(e){return\"#\"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?b(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?b(parseInt(e.substring(6,8),16)/255,2):1}},E=function(e,r){return void 0===r&&(r=\"deg\"),Number(e)*(_[r]||1)},H=function(e){var r=/hsla?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?N({h:E(r[1],r[2]),s:Number(r[3]),l:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},M=H,N=function(e){var r=e.s,t=e.l;return{h:e.h,s:(r*=(t<50?t:100-t)/100)>0?2*r/(t+r)*100:0,v:t+r,a:e.a}},w=function(e){return K(I(e))},y=function(e){var r=e.s,t=e.v,n=e.a,o=(200-r)*t/100;return{h:b(e.h),s:b(o>0&&o<200?r*t/100/(o<=100?o:200-o)*100:0),l:b(o/2),a:b(n,2)}},q=function(e){var r=y(e);return\"hsl(\"+r.h+\", \"+r.s+\"%, \"+r.l+\"%)\"},k=function(e){var r=y(e);return\"hsla(\"+r.h+\", \"+r.s+\"%, \"+r.l+\"%, \"+r.a+\")\"},I=function(e){var r=e.h,t=e.s,n=e.v,o=e.a;r=r/360*6,t/=100,n/=100;var a=Math.floor(r),l=n*(1-t),u=n*(1-(r-a)*t),c=n*(1-(1-r+a)*t),i=a%6;return{r:b(255*[n,u,l,l,c,n][i]),g:b(255*[c,n,n,u,l,l][i]),b:b(255*[l,l,c,n,n,u][i]),a:b(o,2)}},O=function(e){var r=/hsva?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?A({h:E(r[1],r[2]),s:Number(r[3]),v:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},j=O,z=function(e){var r=/rgba?\\(?\\s*(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?L({r:Number(r[1])/(r[2]?100/255:1),g:Number(r[3])/(r[4]?100/255:1),b:Number(r[5])/(r[6]?100/255:1),a:void 0===r[7]?1:Number(r[7])/(r[8]?100:1)}):{h:0,s:0,v:0,a:1}},B=z,D=function(e){var r=e.toString(16);return r.length<2?\"0\"+r:r},K=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=o<1?D(b(255*o)):\"\";return\"#\"+D(r)+D(t)+D(n)+a},L=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=Math.max(r,t,n),l=a-Math.min(r,t,n),u=l?a===r?(t-n)/l:a===t?2+(n-r)/l:4+(r-t)/l:0;return{h:b(60*(u<0?u+6:u)),s:b(a?l/a*100:0),v:b(a/255*100),a:o}},A=function(e){return{h:b(e.h),s:b(e.s),v:b(e.v),a:b(e.a,2)}},S=e.memo(function(r){var t=r.hue,n=r.onChange,o=g([\"react-colorful__hue\",r.className]);return e.createElement(\"div\",{className:o},e.createElement(m,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:s(t+360*e.left,0,360)})},\"aria-label\":\"Hue\",\"aria-valuenow\":b(t),\"aria-valuemax\":\"360\",\"aria-valuemin\":\"0\"},e.createElement(p,{className:\"react-colorful__hue-pointer\",left:t/360,color:q({h:t,s:100,v:100,a:1})})))}),T=e.memo(function(r){var t=r.hsva,n=r.onChange,o={backgroundColor:q({h:t.h,s:100,v:100,a:1})};return e.createElement(\"div\",{className:\"react-colorful__saturation\",style:o},e.createElement(m,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:s(t.s+100*e.left,0,100),v:s(t.v-100*e.top,0,100)})},\"aria-label\":\"Color\",\"aria-valuetext\":\"Saturation \"+b(t.s)+\"%, Brightness \"+b(t.v)+\"%\"},e.createElement(p,{className:\"react-colorful__saturation-pointer\",top:1-t.v/100,left:t.s/100,color:q(t)})))}),F=function(e,r){if(e===r)return!0;for(var t in e)if(e[t]!==r[t])return!1;return!0},P=function(e,r){return e.replace(/\\s/g,\"\")===r.replace(/\\s/g,\"\")},X=function(e,r){return e.toLowerCase()===r.toLowerCase()||F(C(e),C(r))};function Y(e,t,l){var u=i(l),c=o(function(){return e.toHsva(t)}),s=c[0],f=c[1],v=r({color:t,hsva:s});n(function(){if(!e.equal(t,v.current.color)){var r=e.toHsva(t);v.current={hsva:r,color:t},f(r)}},[t,e]),n(function(){var r;F(s,v.current.hsva)||e.equal(r=e.fromHsva(s),v.current.color)||(v.current={hsva:s,color:r},u(r))},[s,e,u]);var d=a(function(e){f(function(r){return Object.assign({},r,e)})},[]);return[s,d]}var R,V=\"undefined\"!=typeof window?l:n,$=function(){return R||(\"undefined\"!=typeof __webpack_nonce__?__webpack_nonce__:void 0)},G=function(e){R=e},J=new Map,Q=function(e){V(function(){var r=e.current?e.current.ownerDocument:document;if(void 0!==r&&!J.has(r)){var t=r.createElement(\"style\");t.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:\"\";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\\'data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>\\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',J.set(r,t);var n=$();n&&t.setAttribute(\"nonce\",n),r.head.appendChild(t)}},[])},U=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,[\"className\",\"colorModel\",\"color\",\"onChange\"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g([\"react-colorful\",n]);return e.createElement(\"div\",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h,className:\"react-colorful__last-control\"}))},W={defaultColor:\"000\",toHsva:x,fromHsva:function(e){return w({h:e.h,s:e.s,v:e.v,a:1})},equal:X},Z=function(r){return e.createElement(U,u({},r,{colorModel:W}))},ee=function(r){var t=r.className,n=r.hsva,o=r.onChange,a={backgroundImage:\"linear-gradient(90deg, \"+k(Object.assign({},n,{a:0}))+\", \"+k(Object.assign({},n,{a:1}))+\")\"},l=g([\"react-colorful__alpha\",t]),u=b(100*n.a);return e.createElement(\"div\",{className:l},e.createElement(\"div\",{className:\"react-colorful__alpha-gradient\",style:a}),e.createElement(m,{onMove:function(e){o({a:e.left})},onKey:function(e){o({a:s(n.a+e.left)})},\"aria-label\":\"Alpha\",\"aria-valuetext\":u+\"%\",\"aria-valuenow\":u,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"},e.createElement(p,{className:\"react-colorful__alpha-pointer\",left:n.a,color:k(n)})))},re=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,[\"className\",\"colorModel\",\"color\",\"onChange\"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g([\"react-colorful\",n]);return e.createElement(\"div\",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h}),e.createElement(ee,{hsva:d,onChange:h,className:\"react-colorful__last-control\"}))},te={defaultColor:\"0001\",toHsva:x,fromHsva:w,equal:X},ne=function(r){return e.createElement(re,u({},r,{colorModel:te}))},oe={defaultColor:{h:0,s:0,l:0,a:1},toHsva:N,fromHsva:y,equal:F},ae=function(r){return e.createElement(re,u({},r,{colorModel:oe}))},le={defaultColor:\"hsla(0, 0%, 0%, 1)\",toHsva:H,fromHsva:k,equal:P},ue=function(r){return e.createElement(re,u({},r,{colorModel:le}))},ce={defaultColor:{h:0,s:0,l:0},toHsva:function(e){return N({h:e.h,s:e.s,l:e.l,a:1})},fromHsva:function(e){return{h:(r=y(e)).h,s:r.s,l:r.l};var r},equal:F},ie=function(r){return e.createElement(U,u({},r,{colorModel:ce}))},se={defaultColor:\"hsl(0, 0%, 0%)\",toHsva:M,fromHsva:q,equal:P},fe=function(r){return e.createElement(U,u({},r,{colorModel:se}))},ve={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(e){return e},fromHsva:A,equal:F},de=function(r){return e.createElement(re,u({},r,{colorModel:ve}))},he={defaultColor:\"hsva(0, 0%, 0%, 1)\",toHsva:O,fromHsva:function(e){var r=A(e);return\"hsva(\"+r.h+\", \"+r.s+\"%, \"+r.v+\"%, \"+r.a+\")\"},equal:P},me=function(r){return e.createElement(re,u({},r,{colorModel:he}))},ge={defaultColor:{h:0,s:0,v:0},toHsva:function(e){return{h:e.h,s:e.s,v:e.v,a:1}},fromHsva:function(e){var r=A(e);return{h:r.h,s:r.s,v:r.v}},equal:F},pe=function(r){return e.createElement(U,u({},r,{colorModel:ge}))},be={defaultColor:\"hsv(0, 0%, 0%)\",toHsva:j,fromHsva:function(e){var r=A(e);return\"hsv(\"+r.h+\", \"+r.s+\"%, \"+r.v+\"%)\"},equal:P},_e=function(r){return e.createElement(U,u({},r,{colorModel:be}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(r){return e.createElement(re,u({},r,{colorModel:xe}))},Ee={defaultColor:\"rgba(0, 0, 0, 1)\",toHsva:z,fromHsva:function(e){var r=I(e);return\"rgba(\"+r.r+\", \"+r.g+\", \"+r.b+\", \"+r.a+\")\"},equal:P},He=function(r){return e.createElement(re,u({},r,{colorModel:Ee}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return L({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(r=I(e)).r,g:r.g,b:r.b};var r},equal:F},Ne=function(r){return e.createElement(U,u({},r,{colorModel:Me}))},we={defaultColor:\"rgb(0, 0, 0)\",toHsva:B,fromHsva:function(e){var r=I(e);return\"rgb(\"+r.r+\", \"+r.g+\", \"+r.b+\")\"},equal:P},ye=function(r){return e.createElement(U,u({},r,{colorModel:we}))},qe=/^#?([0-9A-F]{3,8})$/i,ke=function(r){var t=r.color,l=void 0===t?\"\":t,s=r.onChange,f=r.onBlur,v=r.escape,d=r.validate,h=r.format,m=r.process,g=c(r,[\"color\",\"onChange\",\"onBlur\",\"escape\",\"validate\",\"format\",\"process\"]),p=o(function(){return v(l)}),b=p[0],_=p[1],x=i(s),C=i(f),E=a(function(e){var r=v(e.target.value);_(r),d(r)&&x(m?m(r):r)},[v,m,d,x]),H=a(function(e){d(e.target.value)||_(v(l)),C(e)},[l,v,d,C]);return n(function(){_(v(l))},[l,v]),e.createElement(\"input\",u({},g,{value:h?h(b):b,spellCheck:\"false\",onChange:E,onBlur:H}))},Ie=function(e){return\"#\"+e},Oe=function(r){var t=r.prefixed,n=r.alpha,o=c(r,[\"prefixed\",\"alpha\"]),l=a(function(e){return e.replace(/([^0-9A-F]+)/gi,\"\").substring(0,n?8:6)},[n]),i=a(function(e){return function(e,r){var t=qe.exec(e),n=t?t[1].length:0;return 3===n||6===n||!!r&&4===n||!!r&&8===n}(e,n)},[n]);return e.createElement(ke,u({},o,{escape:l,format:t?Ie:void 0,process:Ie,validate:i}))};export{ne as HexAlphaColorPicker,Oe as HexColorInput,Z as HexColorPicker,ie as HslColorPicker,fe as HslStringColorPicker,ae as HslaColorPicker,ue as HslaStringColorPicker,pe as HsvColorPicker,_e as HsvStringColorPicker,de as HsvaColorPicker,me as HsvaStringColorPicker,Ne as RgbColorPicker,ye as RgbStringColorPicker,Ce as RgbaColorPicker,He as RgbaStringColorPicker,G as setNonce};\n//# sourceMappingURL=index.module.js.map\n","import React from 'react';\nimport clsx from 'clsx';\nimport {ButtonBase} from '../buttons/button-base';\n\ntype Props = {\n  onChange?: (e: string) => void;\n  value?: string;\n  colors: string[];\n};\nexport function ColorSwatch({onChange, value, colors}: Props) {\n  const presetButtons = colors.map(color => {\n    const isSelected = value === color;\n    return (\n      <ButtonBase\n        key={color}\n        onClick={() => {\n          onChange?.(color);\n        }}\n        className={clsx(\n          'relative block flex-shrink-0 w-26 h-26 border rounded',\n          isSelected && 'shadow-md'\n        )}\n        style={{backgroundColor: color}}\n      >\n        {isSelected && (\n          <span className=\"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white\" />\n        )}\n      </ButtonBase>\n    );\n  });\n\n  return <div className=\"flex flex-wrap gap-6\">{presetButtons}</div>;\n}\n","import {message} from '@common/i18n/message';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport const ColorPresets: {\n  color: string;\n  name: MessageDescriptor;\n  foreground?: string;\n}[] = [\n  {\n    color: 'rgb(255, 255, 255)',\n    name: message('White'),\n  },\n  {\n    color: 'rgb(239,245,245)',\n    name: message('Solitude'),\n  },\n  {\n    color: 'rgb(245,213,174)',\n    name: message('Wheat'),\n  },\n  {\n    color: 'rgb(253,227,167)',\n    name: message('Cape Honey'),\n  },\n  {\n    color: 'rgb(242,222,186)',\n    name: message('Milk punch'),\n  },\n  {\n    color: 'rgb(97,118,75)',\n    name: message('Dingy'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(4, 147, 114)',\n    name: message('Aquamarine'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(222,245,229)',\n    name: message('Cosmic Latte'),\n  },\n  {\n    color: 'rgb(233,119,119)',\n    name: message('Geraldine'),\n    foreground: 'rgb(90,14,14)',\n  },\n  {\n    color: 'rgb(247,164,164)',\n    name: message('Sundown'),\n  },\n  {\n    color: 'rgb(30,139,195)',\n    name: message('Pelorous'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(142,68,173)',\n    name: message('Deep Lilac'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(108,74,182)',\n    name: message('Blue marguerite'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(139,126,116)',\n    name: message('Americano'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(0,0,0)',\n    name: message('Black'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(64,66,88)',\n    name: message('Blue zodiac'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(101,100,124)',\n    name: message('Comet'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n];\n","import {HexColorInput, HexColorPicker} from 'react-colorful';\nimport React, {useState} from 'react';\nimport {parseColor} from '@react-stately/color';\nimport {ColorSwatch} from './color-swatch';\nimport {getInputFieldClassNames} from '../forms/input-field/get-input-field-class-names';\nimport {ColorPresets} from '@common/ui/color-picker/color-presets';\n\nconst DefaultPresets = ColorPresets.map(({color}) => color).slice(0, 14);\n\ntype Props = {\n  defaultValue?: string;\n  onChange?: (e: string) => void;\n  colorPresets?: string[];\n  showInput?: boolean;\n};\nexport function ColorPicker({\n  defaultValue,\n  onChange,\n  colorPresets,\n  showInput,\n}: Props) {\n  const [color, setColor] = useState<string | undefined>(defaultValue);\n\n  const presets: string[] = colorPresets || DefaultPresets;\n\n  const style = getInputFieldClassNames({size: 'sm'});\n\n  return (\n    <div>\n      <HexColorPicker\n        className=\"!w-auto\"\n        color={color}\n        onChange={newColor => {\n          onChange?.(newColor);\n          setColor(newColor);\n        }}\n      />\n      <div className=\"py-20 px-12\">\n        {presets && (\n          <ColorSwatch\n            colors={presets}\n            onChange={newColor => {\n              if (newColor) {\n                const hex = parseColor(newColor).toString('hex');\n                onChange?.(hex);\n                setColor(hex);\n              }\n            }}\n            value={color}\n          />\n        )}\n        {showInput && (\n          <div className=\"pt-20\">\n            <HexColorInput\n              autoComplete=\"off\"\n              role=\"textbox\"\n              autoCorrect=\"off\"\n              spellCheck=\"false\"\n              required\n              aria-label=\"Hex color\"\n              prefixed\n              className={style.input}\n              color={color}\n              onChange={newColor => {\n                onChange?.(newColor);\n                setColor(newColor);\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import {useState} from 'react';\nimport {ColorPicker} from './color-picker';\nimport {DialogFooter} from '../overlays/dialog/dialog-footer';\nimport {Button} from '../buttons/button';\nimport {useDialogContext} from '../overlays/dialog/dialog-context';\nimport {Dialog} from '../overlays/dialog/dialog';\nimport {Trans} from '../../i18n/trans';\n\ninterface ColorPickerDialogProps {\n  defaultValue?: string;\n  onChange?: (color: string) => void;\n  hideFooter?: boolean;\n  showInput?: boolean;\n}\nexport function ColorPickerDialog({\n  defaultValue,\n  onChange,\n  hideFooter = false,\n  showInput = true,\n}: ColorPickerDialogProps) {\n  const {close} = useDialogContext();\n  const [value, setValue] = useState(defaultValue || '');\n  // todo: remove this once all once pixie and bedrive are refactored to use dialogTrigger currentValue (use \"currentValue\" for defaultValue as well)\n  //const initialValue = useRef(defaultValue);\n\n  return (\n    <Dialog size=\"2xs\">\n      <ColorPicker\n        showInput={showInput}\n        defaultValue={value}\n        onChange={newValue => {\n          setValue(newValue);\n          onChange?.(newValue);\n        }}\n      />\n      {!hideFooter && (\n        <DialogFooter dividerTop>\n          <Button\n            variant=\"text\"\n            size=\"xs\"\n            onClick={() => {\n              close();\n            }}\n          >\n            <Trans message=\"Cancel\" />\n          </Button>\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            size=\"xs\"\n            onClick={() => {\n              close(value);\n            }}\n          >\n            <Trans message=\"Apply\" />\n          </Button>\n        </DialogFooter>\n      )}\n    </Dialog>\n  );\n}\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env && import.meta.env.MODE) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env && import.meta.env.MODE) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const extension = extensionConnector.connect(options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording)\n      return r;\n    extension.send(\n      nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction,\n      get()\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  extension.init(initialState);\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env && import.meta.env.MODE) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  extension.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              setStateFromDevtools(action.state);\n              return;\n            }\n            if (!api.dispatchFromDevtools)\n              return;\n            if (typeof api.dispatch !== \"function\")\n              return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            return extension.init(api.getState());\n          case \"COMMIT\":\n            return extension.init(api.getState());\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              setStateFromDevtools(state);\n              extension.init(api.getState());\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              setStateFromDevtools(state);\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState)\n              return;\n            setStateFromDevtools(lastComputedState);\n            extension.send(\n              null,\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0)\n    f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage)\n      return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nexport { combine, devtools, persist, redux, subscribeWithSelector };\n","export function chunkArray<T>(array: T[], chunkSize: number): T[][] {\n  return array.reduce<any>((resultArray, item, index) => {\n    const chunkIndex = Math.floor(index / chunkSize);\n\n    if (!resultArray[chunkIndex]) {\n      resultArray[chunkIndex] = [];\n    }\n\n    resultArray[chunkIndex].push(item);\n\n    return resultArray;\n  }, []);\n}\n","import {\n  IAppearanceConfig,\n  MenuSectionConfig,\n} from '../types/appearance-editor-config';\nimport {message} from '../../../i18n/message';\nimport {chunkArray} from '../../../utils/array/chunk-array';\nimport {AppearanceEditorBreadcrumbItem} from '../types/appearance-editor-section';\n\nexport const DefaultAppearanceConfig: IAppearanceConfig = {\n  preview: {\n    defaultRoute: '/',\n    navigationRoutes: [],\n  },\n  sections: {\n    general: {\n      label: message('General'),\n      position: 1,\n      buildBreadcrumb: () => [\n        {\n          label: message('General'),\n          location: `general`,\n        },\n      ],\n    },\n    themes: {\n      label: message('Themes'),\n      position: 2,\n      buildBreadcrumb: (pathname, formValue) => {\n        const parts = pathname.split('/').filter(p => !!p);\n        const [, , , themeIndex] = parts;\n        const breadcrumb: AppearanceEditorBreadcrumbItem[] = [\n          {\n            label: message('Themes'),\n            location: `themes`,\n          },\n        ];\n        if (themeIndex != null) {\n          breadcrumb.push({\n            label: formValue.appearance.themes.all[+themeIndex]?.name,\n            location: `themes/${themeIndex}`,\n          });\n        }\n        return breadcrumb;\n      },\n    },\n    menus: {\n      label: message('Menus'),\n      position: 3,\n      buildBreadcrumb: (pathname, formValue) => {\n        // /admin/appearance/menus/0/items/1\n        const parts = pathname.split('/').filter(p => !!p);\n        const [, , ...rest] = parts;\n        // admin/appearance\n        const breadcrumb: AppearanceEditorBreadcrumbItem[] = [\n          {\n            label: message('Menus'),\n            location: 'menus',\n          },\n        ];\n        // chunk every two items: [form group, item index]\n        const chunked = chunkArray(rest, 2);\n        chunked.forEach(([sectionName, sectionIndex], chunkIndex) => {\n          // menu\n          if (sectionName === 'menus' && sectionIndex != null) {\n            breadcrumb.push({\n              label: formValue.settings.menus[+sectionIndex]?.name,\n              location: `menus/${sectionIndex}`,\n            });\n            // menu item\n          } else if (sectionName === 'items' && sectionIndex != null) {\n            const [, menuIndex] = chunked[chunkIndex - 1];\n            breadcrumb.push({\n              label:\n                formValue.settings.menus[+menuIndex].items[+sectionIndex]\n                  ?.label,\n              location: `menus/${menuIndex}/${sectionIndex}`,\n            });\n          }\n        });\n        return breadcrumb;\n      },\n      config: {\n        availableRoutes: [\n          '/login',\n          '/register',\n          '/contact',\n          '/billing/pricing',\n          '/account-settings',\n          '/admin',\n          '/admin/appearance',\n          '/admin/settings',\n          '/admin/plans',\n          '/admin/subscriptions',\n          '/admin/users',\n          '/admin/roles',\n          '/admin/pages',\n          '/admin/tags',\n          '/admin/files',\n          '/admin/localizations',\n          '/admin/ads',\n          '/admin/settings/authentication',\n          '/admin/settings/branding',\n          '/admin/settings/cache',\n          '/admin/settings/providers',\n          '/api-routes',\n        ],\n        positions: [\n          'admin-navbar',\n          'admin-sidebar',\n          'custom-page-navbar',\n          'auth-page-footer',\n          'auth-dropdown',\n          'account-settings-page',\n          'billing-page',\n          'checkout-page-navbar',\n          'checkout-page-footer',\n          'pricing-table-page',\n          'contact-us-page',\n          'notifications-page',\n        ],\n      } as MenuSectionConfig,\n    },\n    'custom-code': {\n      label: message('Custom Code'),\n      position: 4,\n      buildBreadcrumb: () => [\n        {\n          label: message('Custom code'),\n          location: `custom-code`,\n        },\n      ],\n    },\n    'seo-settings': {\n      label: message('Seo Settings'),\n      position: 5,\n      buildBreadcrumb: () => [\n        {\n          label: message('Seo'),\n          location: `seo`,\n        },\n      ],\n    },\n  },\n};\n","import {\n  Accordion,\n  AccordionItem,\n} from '../../../../common/ui/accordion/accordion';\nimport {Trans} from '../../../../common/i18n/trans';\nimport {\n  appearanceState,\n  useAppearanceStore,\n} from '../../../../common/admin/appearance/appearance-store';\nimport {useFieldArray} from 'react-hook-form';\nimport {FormTextField} from '../../../../common/ui/forms/input-field/text-field/text-field';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {LandingPageContent} from '../../../../landing/landing-page-content';\nimport {Button} from '../../../../common/ui/buttons/button';\nimport {AddIcon} from '../../../../common/icons/material/Add';\nimport {useState} from 'react';\n\nexport function LandingPageSectionPrimaryFeatures() {\n  const {fields, remove, append} = useFieldArray({\n    name: 'settings.homepage.appearance.primaryFeatures',\n  });\n  const [expandedValues, setExpandedValues] = useState([0]);\n  return (\n    <div>\n      <Accordion\n        variant=\"outline\"\n        expandedValues={expandedValues}\n        onExpandedChange={values => {\n          setExpandedValues(values as number[]);\n          if (values.length) {\n            appearanceState().preview.setHighlight(\n              `[data-testid=\"primary-root-${values[0]}\"]`\n            );\n          }\n        }}\n      >\n        {fields.map((field, index) => {\n          return (\n            <AccordionItem\n              key={field.id}\n              value={index}\n              label={<Trans message={`Primary feature ${index + 1}`} />}\n            >\n              <FeatureForm index={index} />\n              <div className=\"text-right\">\n                <Button\n                  size=\"xs\"\n                  variant=\"outline\"\n                  color=\"danger\"\n                  onClick={() => {\n                    remove(index);\n                  }}\n                >\n                  <Trans message=\"Remove\" />\n                </Button>\n              </div>\n            </AccordionItem>\n          );\n        })}\n      </Accordion>\n      <div className=\"mt-20 text-right\">\n        <Button\n          size=\"xs\"\n          variant=\"outline\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={() => {\n            append({});\n            setExpandedValues([fields.length]);\n          }}\n        >\n          <Trans message=\"Add feature\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n\ninterface FeatureFormProps {\n  index: number;\n}\nfunction FeatureForm({index}: FeatureFormProps) {\n  const defaultImage = useAppearanceStore(\n    s =>\n      (s.defaults?.settings.homepage.appearance as LandingPageContent)\n        ?.primaryFeatures[index]?.image\n  );\n\n  return (\n    <>\n      <FormImageSelector\n        name={`settings.homepage.appearance.primaryFeatures.${index}.image`}\n        className=\"mb-30\"\n        label={<Trans message=\"Image\" />}\n        highlightSelector={`[data-testid=\"primary-image-${index}\"]`}\n        defaultValue={defaultImage}\n        diskPrefix=\"homepage\"\n      />\n      <FormTextField\n        name={`settings.homepage.appearance.primaryFeatures.${index}.title`}\n        label={<Trans message=\"Title\" />}\n        className=\"mb-20\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            `[data-testid=\"primary-title-${index}\"]`\n          );\n        }}\n      />\n      <FormTextField\n        name={`settings.homepage.appearance.primaryFeatures.${index}.subtitle`}\n        label={<Trans message=\"Subtitle\" />}\n        className=\"mb-20\"\n        inputElementType=\"textarea\"\n        rows={4}\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            `[data-testid=\"primary-subtitle-${index}\"]`\n          );\n        }}\n      />\n    </>\n  );\n}\n","export function ucFirst<T extends string>(string: T): T {\n  if (!string) return string;\n  return (string.charAt(0).toUpperCase() + string.slice(1)) as T;\n}\n","import {useControlledState} from '@react-stately/utils';\nimport React, {Fragment, useState} from 'react';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport clsx from 'clsx';\nimport {produce} from 'immer';\nimport {Permission, PermissionRestriction} from '../permission';\nimport {useValueLists} from '../../http/value-lists';\nimport {ucFirst} from '../../utils/string/uc-first';\nimport {Accordion, AccordionItem} from '../../ui/accordion/accordion';\nimport {List, ListItem} from '../../ui/list/list';\nimport {Switch} from '../../ui/forms/toggle/switch';\nimport {TextField} from '../../ui/forms/input-field/text-field/text-field';\nimport {DoneAllIcon} from '../../icons/material/DoneAll';\nimport {Trans} from '../../i18n/trans';\n\ninterface PermissionSelectorProps {\n  value?: Permission[];\n  onChange?: (value: Permission[]) => void;\n  valueListKey?: 'permissions' | 'workspacePermissions';\n}\nexport const PermissionSelector = React.forwardRef<\n  HTMLDivElement,\n  PermissionSelectorProps\n>(({valueListKey = 'permissions', ...props}, ref) => {\n  const {data} = useValueLists([valueListKey]);\n  const permissions = data?.permissions || data?.workspacePermissions;\n\n  const [value, setValue] = useControlledState(props.value, [], props.onChange);\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  if (!permissions) return null;\n\n  const groupedPermissions = buildPermissionList(\n    permissions,\n    value,\n    showAdvanced\n  );\n\n  const onRestrictionChange = (newPermission: Permission) => {\n    const newValue = [...value];\n    const index = newValue.findIndex(p => p.id === newPermission.id);\n    if (index > -1) {\n      newValue.splice(index, 1, newPermission);\n    }\n    setValue(newValue);\n  };\n\n  return (\n    <Fragment>\n      <Accordion variant=\"outline\" ref={ref}>\n        {groupedPermissions.map(({groupName, items, anyChecked}) => (\n          <AccordionItem\n            label={prettyName(groupName)}\n            key={groupName}\n            startIcon={anyChecked ? <DoneAllIcon size=\"sm\" /> : undefined}\n          >\n            <List>\n              {items.map(permission => {\n                const index = value.findIndex(v => v.id === permission.id);\n                const isChecked = index > -1;\n\n                return (\n                  <div key={permission.id}>\n                    <ListItem\n                      onSelected={() => {\n                        if (isChecked) {\n                          const newValue = [...value];\n                          newValue.splice(index, 1);\n                          setValue(newValue);\n                        } else {\n                          setValue([...value, permission]);\n                        }\n                      }}\n                      endSection={\n                        <Switch\n                          tabIndex={-1}\n                          checked={isChecked}\n                          onChange={() => {}}\n                        />\n                      }\n                      description={permission.description}\n                    >\n                      {permission.display_name || permission.name}\n                    </ListItem>\n                    {isChecked && (\n                      <Restrictions\n                        permission={permission}\n                        onChange={onRestrictionChange}\n                      />\n                    )}\n                  </div>\n                );\n              })}\n            </List>\n          </AccordionItem>\n        ))}\n      </Accordion>\n      <Switch\n        className=\"mt-30\"\n        checked={showAdvanced}\n        onChange={e => {\n          setShowAdvanced(e.target.checked);\n        }}\n      >\n        <Trans message=\"Show advanced permissions\" />\n      </Switch>\n    </Fragment>\n  );\n});\n\ninterface RestrictionsProps {\n  permission: Permission;\n  onChange?: (newPermission: Permission) => void;\n}\nfunction Restrictions({permission, onChange}: RestrictionsProps) {\n  if (!permission?.restrictions?.length) return null;\n\n  const setRestrictionValue = (\n    name: string,\n    value: PermissionRestriction['value']\n  ) => {\n    const nextState = produce(permission, draftState => {\n      const restriction = draftState.restrictions.find(r => r.name === name);\n      if (restriction) {\n        restriction.value = value;\n      }\n    });\n    onChange?.(nextState);\n  };\n\n  return (\n    <div className=\"px-40 py-20\">\n      {permission.restrictions.map((restriction, index) => {\n        const isLast = index === permission.restrictions.length - 1;\n\n        if (restriction.type === 'bool') {\n          return (\n            <Switch\n              description={restriction.description}\n              key={restriction.name}\n              className={clsx(!isLast && 'mb-30')}\n              checked={Boolean(restriction.value)}\n              onChange={e => {\n                setRestrictionValue(restriction.name, e.target.checked);\n              }}\n            >\n              {prettyName(restriction.name)}\n            </Switch>\n          );\n        }\n\n        return (\n          <TextField\n            size=\"sm\"\n            label={prettyName(restriction.name)}\n            description={restriction.description}\n            type=\"number\"\n            key={restriction.name}\n            className={clsx(!isLast && 'mb-30')}\n            value={(restriction.value as string) || ''}\n            onChange={e => {\n              setRestrictionValue(\n                restriction.name,\n                e.target.value === '' ? undefined : parseInt(e.target.value)\n              );\n            }}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nexport type FormChipFieldProps = PermissionSelectorProps & {\n  name: string;\n};\nexport function FormPermissionSelector(props: FormChipFieldProps) {\n  const {\n    field: {onChange, value = [], ref},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<PermissionSelectorProps> = {\n    onChange,\n    value,\n  };\n\n  return <PermissionSelector ref={ref} {...mergeProps(formProps, props)} />;\n}\n\nexport const prettyName = (name: string) => {\n  return ucFirst(name.replace('_', ' '));\n};\n\ninterface PermissionGroup {\n  groupName: string;\n  anyChecked: boolean;\n  items: Permission[];\n}\n\n// merge \"restrictions\" from selected value into all permissions to make\n// it easier to bind restriction values to form inputs\nexport function buildPermissionList(\n  allPermissions: Permission[],\n  selectedPermissions: Permission[],\n  showAdvanced: boolean\n) {\n  const groupedPermissions: PermissionGroup[] = [];\n\n  allPermissions.forEach(permission => {\n    const index = selectedPermissions.findIndex(p => p.id === permission.id);\n    if (!showAdvanced && permission.advanced) return;\n\n    let group: PermissionGroup | undefined = groupedPermissions.find(\n      g => g.groupName === permission.group\n    );\n    if (!group) {\n      group = {groupName: permission.group, anyChecked: false, items: []};\n      groupedPermissions.push(group);\n    }\n\n    if (index > -1) {\n      const mergedPermission = {\n        ...permission,\n        restrictions: mergeRestrictions(\n          permission.restrictions,\n          selectedPermissions[index].restrictions\n        ),\n      };\n      group.anyChecked = true;\n      group.items.push(mergedPermission);\n    } else {\n      group.items.push(permission);\n    }\n  });\n\n  return groupedPermissions;\n}\n\nfunction mergeRestrictions(\n  allRestrictions: PermissionRestriction[],\n  selectedRestrictions: PermissionRestriction[]\n): PermissionRestriction[] {\n  return allRestrictions?.map(restriction => {\n    const selected = selectedRestrictions.find(\n      r => r.name === restriction.name\n    );\n    if (selected) {\n      return {...restriction, value: selected.value};\n    } else {\n      return restriction;\n    }\n  });\n}\n","import {MenuSectionConfig} from '../../../types/appearance-editor-config';\nimport {MenuItemConfig} from '../../../../../core/settings/settings';\nimport mergedAppearanceConfig from '../../../config/merged-appearance-config';\n\nexport function useAvailableRoutes(): Partial<MenuItemConfig>[] {\n  const menuConfig = mergedAppearanceConfig.sections.menus.config;\n\n  if (!menuConfig) return [];\n\n  return (menuConfig as MenuSectionConfig).availableRoutes.map(route => {\n    return {\n      id: route,\n      label: route,\n      action: route,\n      type: 'route',\n      target: '_self',\n    };\n  });\n}\n","export const iconGridStyle = {\n  grid: 'flex flex-wrap gap-24',\n  button:\n    'flex flex-col items-center rounded hover:bg-hover h-90 aspect-square',\n};\n","import React, {Suspense} from 'react';\nimport {IconTree} from '../../icons/create-svg-icon';\nimport {iconGridStyle} from './icon-grid-style';\nimport {TextField} from '../forms/input-field/text-field/text-field';\nimport {Skeleton} from '../skeleton/skeleton';\nimport {useTrans} from '../../i18n/use-trans';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '../animation/opacity-animation';\n\nconst skeletons = [...Array(60).keys()];\n\nconst IconList = React.lazy(() => import('./icon-list'));\n\ninterface IconListProps {\n  onIconSelected: (icon: IconTree[] | null) => void;\n}\nexport default function IconPicker({onIconSelected}: IconListProps) {\n  const {trans} = useTrans();\n  const [value, setValue] = React.useState('');\n\n  return (\n    <div className=\"py-4\">\n      <TextField\n        className=\"mb-20\"\n        value={value}\n        onChange={e => {\n          setValue(e.target.value);\n        }}\n        placeholder={trans({message: 'Search icons...'})}\n      />\n      <AnimatePresence mode=\"wait\">\n        <Suspense\n          fallback={\n            <m.div {...opacityAnimation} className={iconGridStyle.grid}>\n              {skeletons.map((_, index) => (\n                <div className={iconGridStyle.button} key={index}>\n                  <Skeleton variant=\"rect\" />\n                </div>\n              ))}\n            </m.div>\n          }\n        >\n          <m.div {...opacityAnimation} className={iconGridStyle.grid}>\n            <IconList searchQuery={value} onIconSelected={onIconSelected} />\n          </m.div>\n        </Suspense>\n      </AnimatePresence>\n    </div>\n  );\n}\n","import React from 'react';\nimport IconPicker from './icon-picker';\nimport {useDialogContext} from '../overlays/dialog/dialog-context';\nimport {Dialog} from '../overlays/dialog/dialog';\nimport {DialogHeader} from '../overlays/dialog/dialog-header';\nimport {DialogBody} from '../overlays/dialog/dialog-body';\nimport {Trans} from '../../i18n/trans';\n\nexport function IconPickerDialog() {\n  return (\n    <Dialog size=\"w-850\" className=\"min-h-dialog\">\n      <DialogHeader>\n        <Trans message=\"Select icon\" />\n      </DialogHeader>\n      <DialogBody>\n        <IconPickerWrapper />\n      </DialogBody>\n    </Dialog>\n  );\n}\n\nfunction IconPickerWrapper() {\n  const {close} = useDialogContext();\n  return (\n    <IconPicker\n      onIconSelected={value => {\n        close(value);\n      }}\n    />\n  );\n}\n","import {useEffect, useRef} from 'react';\n\nexport function usePrevious(value: any) {\n  const ref = useRef();\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n","import {FormTextField} from '../../ui/forms/input-field/text-field/text-field';\nimport {Trans} from '../../i18n/trans';\nimport {useValueLists} from '../../http/value-lists';\nimport {useTrans} from '../../i18n/use-trans';\nimport {FormChipField} from '../../ui/forms/input-field/chip-field/form-chip-field';\nimport {Item} from '../../ui/forms/listbox/item';\nimport {Fragment, useEffect, useMemo} from 'react';\nimport {\n  buildPermissionList,\n  prettyName,\n} from '../../auth/ui/permission-selector';\nimport {Section} from '../../ui/forms/listbox/section';\nimport {useFormContext} from 'react-hook-form';\nimport {MenuItemConfig} from '../../core/settings/settings';\nimport {FormSelect, Option} from '../../ui/forms/select/select';\nimport {useAvailableRoutes} from '../appearance/sections/menus/hooks/available-routes';\nimport {FormComboBox} from '../../ui/forms/combobox/form-combobox';\nimport {ButtonBaseProps} from '../../ui/buttons/button-base';\nimport {createSvgIconFromTree, IconTree} from '../../icons/create-svg-icon';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {EditIcon} from '../../icons/material/Edit';\nimport {IconPickerDialog} from '../../ui/icon-picker/icon-picker-dialog';\nimport {message} from '../../i18n/message';\nimport {usePrevious} from '../../utils/hooks/use-previous';\n\ninterface NameProps {\n  prefixName: (name: string) => string;\n}\n\ninterface MenuItemFormProps {\n  formPathPrefix?: string;\n  hideRoleAndPermissionFields?: boolean;\n}\nexport function MenuItemForm({\n  formPathPrefix,\n  hideRoleAndPermissionFields,\n}: MenuItemFormProps) {\n  const {trans} = useTrans();\n  const prefixName = (name: string): string => {\n    return formPathPrefix ? `${formPathPrefix}.${name}` : name;\n  };\n\n  return (\n    <Fragment>\n      <FormTextField\n        className=\"mb-20\"\n        name={prefixName('label')}\n        label={<Trans message=\"Label\" />}\n        placeholder={trans(message('No label...'))}\n        startAppend={<IconDialogTrigger prefixName={prefixName} />}\n      />\n      <DestinationSelector prefixName={prefixName} />\n      {!hideRoleAndPermissionFields && (\n        <Fragment>\n          <RoleSelector prefixName={prefixName} />\n          <PermissionSelector prefixName={prefixName} />\n        </Fragment>\n      )}\n      <TargetSelect prefixName={prefixName} />\n    </Fragment>\n  );\n}\n\ninterface IconDialogTriggerProps extends ButtonBaseProps, NameProps {}\nfunction IconDialogTrigger({\n  prefixName,\n  ...buttonProps\n}: IconDialogTriggerProps) {\n  const {watch, setValue} = useFormContext<MenuItemConfig>();\n  const fieldName = prefixName('icon') as 'icon';\n  const watchedItemIcon = watch(fieldName);\n  const Icon = watchedItemIcon && createSvgIconFromTree(watchedItemIcon);\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={(iconTree?: IconTree[] | null) => {\n        // null will be set explicitly if icon is cleared via icon picker\n        if (iconTree || iconTree === null) {\n          setValue(fieldName, iconTree, {\n            shouldDirty: true,\n          });\n        }\n      }}\n    >\n      <IconButton\n        className=\"text-muted icon-sm\"\n        variant=\"outline\"\n        size=\"md\"\n        {...buttonProps}\n      >\n        {Icon ? <Icon /> : <EditIcon />}\n      </IconButton>\n      <IconPickerDialog />\n    </DialogTrigger>\n  );\n}\n\nfunction DestinationSelector({prefixName}: NameProps) {\n  const form = useFormContext<MenuItemConfig>();\n  const currentType = form.watch(prefixName('type') as 'type');\n  const previousType = usePrevious(currentType);\n  const {data} = useValueLists(['menuItemCategories']);\n  const categories = data?.menuItemCategories || [];\n  const selectedCategory = categories.find(c => c.type === currentType);\n  const {trans} = useTrans();\n  const routeItems = useAvailableRoutes();\n\n  // clear \"action\" field when \"type\" field changes\n  useEffect(() => {\n    if (previousType && previousType !== currentType) {\n      form.setValue(prefixName('action') as 'action', '');\n    }\n  }, [currentType, previousType, form, prefixName]);\n\n  return (\n    <Fragment>\n      <FormSelect\n        className=\"mb-20\"\n        name={prefixName('type')}\n        selectionMode=\"single\"\n        label={<Trans message=\"Type\" />}\n      >\n        <Option value=\"link\">\n          <Trans message=\"Custom link\" />\n        </Option>\n        <Option value=\"route\">\n          <Trans message=\"Site page\" />\n        </Option>\n        {categories.map(category => (\n          <Option key={category.type} value={category.type}>\n            {category.name}\n          </Option>\n        ))}\n      </FormSelect>\n      {currentType === 'link' && (\n        <FormTextField\n          className=\"mb-20\"\n          required\n          type=\"url\"\n          name={prefixName('action')}\n          placeholder={trans({message: 'Enter a url...'})}\n          label={<Trans message=\"Url\" />}\n        />\n      )}\n      {currentType === 'route' && (\n        <FormComboBox\n          className=\"mb-20\"\n          required\n          items={routeItems}\n          name={prefixName('action')}\n          openMenuOnFocus\n          label={<Trans message=\"Page\" />}\n        >\n          {item => (\n            <Item value={item.id!} key={item.id}>\n              {item.label}\n            </Item>\n          )}\n        </FormComboBox>\n      )}\n      {selectedCategory && (\n        <FormComboBox\n          className=\"mb-20\"\n          required\n          items={selectedCategory.items}\n          name={prefixName('action')}\n          openMenuOnFocus\n          label={selectedCategory.name}\n        >\n          {item => <Item value={item.action!}>{item.label}</Item>}\n        </FormComboBox>\n      )}\n    </Fragment>\n  );\n}\n\nfunction RoleSelector({prefixName}: NameProps) {\n  const {data} = useValueLists(['roles', 'permissions']);\n  const roles = data?.roles || [];\n  const {trans} = useTrans();\n\n  return (\n    <FormChipField\n      className=\"mb-20\"\n      placeholder={trans({message: 'Add role...'})}\n      label={<Trans message=\"Only show if user has role\" />}\n      name={prefixName('roles')}\n      chipSize=\"sm\"\n      suggestions={roles}\n      valueKey=\"id\"\n      displayWith={c => roles.find(r => r.id === c.id)?.name}\n    >\n      {role => (\n        <Item value={role.id} key={role.id} capitalizeFirst>\n          {role.name}\n        </Item>\n      )}\n    </FormChipField>\n  );\n}\n\nfunction PermissionSelector({prefixName}: NameProps) {\n  const {data} = useValueLists(['roles', 'permissions']);\n  const {trans} = useTrans();\n\n  const groupedPermissions = useMemo(() => {\n    return buildPermissionList(data?.permissions || [], [], false);\n  }, [data?.permissions]);\n\n  return (\n    <FormChipField\n      label={<Trans message=\"Only show if user has permissions\" />}\n      placeholder={trans({message: 'Add permission...'})}\n      chipSize=\"sm\"\n      suggestions={groupedPermissions}\n      name={prefixName('permissions')}\n      valueKey=\"name\"\n    >\n      {({groupName, items}) => (\n        <Section label={prettyName(groupName)} key={groupName}>\n          {items.map(permission => (\n            <Item\n              key={permission.name}\n              value={permission.name}\n              description={permission.description}\n            >\n              {permission.display_name || permission.name}\n            </Item>\n          ))}\n        </Section>\n      )}\n    </FormChipField>\n  );\n}\n\nfunction TargetSelect({prefixName}: NameProps) {\n  const form = useFormContext<MenuItemConfig>();\n  const watchedType = form.watch(prefixName('type') as 'type');\n\n  // routes and pages can only be \"_self\"\n  if (watchedType !== 'link') {\n    return null;\n  }\n\n  return (\n    <FormSelect\n      className=\"mt-20\"\n      selectionMode=\"single\"\n      name={prefixName('target')}\n      label={<Trans message=\"Open link in\" />}\n    >\n      <Option value=\"_self\">\n        <Trans message=\"Same window\" />\n      </Option>\n      <Option value=\"_blank\">\n        <Trans message=\"New window\" />\n      </Option>\n    </FormSelect>\n  );\n}\n","import {MenuItemForm} from '@common/admin/menus/menu-item-form';\nimport {Accordion, AccordionItem} from '@common/ui/accordion/accordion';\nimport {Trans} from '@common/i18n/trans';\nimport {appearanceState} from '@common/admin/appearance/appearance-store';\nimport {useState} from 'react';\n\nexport function LandingPageSectionActionButtons() {\n  const [expandedValues, setExpandedValues] = useState(['cta1']);\n  return (\n    <Accordion\n      variant=\"outline\"\n      expandedValues={expandedValues}\n      onExpandedChange={values => {\n        setExpandedValues(values as string[]);\n        if (values.length) {\n          appearanceState().preview.setHighlight(\n            `[data-testid=\"${values[0]}\"]`\n          );\n        }\n      }}\n    >\n      <AccordionItem value=\"cta1\" label={<Trans message=\"Header button 1\" />}>\n        <MenuItemForm formPathPrefix=\"settings.homepage.appearance.actions.cta1\" />\n      </AccordionItem>\n      <AccordionItem value=\"ct2\" label={<Trans message=\"Header button 2\" />}>\n        <MenuItemForm formPathPrefix=\"settings.homepage.appearance.actions.cta2\" />\n      </AccordionItem>\n      <AccordionItem value=\"cta3\" label={<Trans message=\"Footer button\" />}>\n        <MenuItemForm formPathPrefix=\"settings.homepage.appearance.actions.cta3\" />\n      </AccordionItem>\n    </Accordion>\n  );\n}\n","import React, {ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {UseSliderProps, UseSliderReturn} from './use-slider';\n\nexport interface BaseSliderProps extends UseSliderProps {\n  slider: UseSliderReturn;\n  children: ReactNode;\n}\nexport function BaseSlider(props: BaseSliderProps) {\n  const {\n    size = 'md',\n    inline,\n    label,\n    showValueLabel = !!label,\n    className,\n    slider,\n    children,\n  } = props;\n\n  const {\n    domProps,\n    trackRef,\n    getThumbPercent,\n    getThumbValueLabel,\n    labelId,\n    groupId,\n    thumbIds,\n    isDisabled,\n    numberFormatter,\n    minValue,\n    maxValue,\n    step,\n    values,\n    getValueLabel,\n  } = slider;\n\n  let outputValue = '';\n  let maxLabelLength = Math.max(\n    [...numberFormatter.format(minValue)].length,\n    [...numberFormatter.format(maxValue)].length,\n    [...numberFormatter.format(step)].length\n  );\n\n  if (getValueLabel) {\n    outputValue = getValueLabel(values[0]);\n  } else if (values.length === 1) {\n    outputValue = getThumbValueLabel(0);\n  } else if (values.length === 2) {\n    // This should really use the NumberFormat#formatRange proposal...\n    // https://github.com/tc39/ecma402/issues/393\n    // https://github.com/tc39/proposal-intl-numberformat-v3#formatrange-ecma-402-393\n    outputValue = `${getThumbValueLabel(0)} – ${getThumbValueLabel(1)}`;\n    maxLabelLength =\n      3 +\n      2 *\n        Math.max(\n          maxLabelLength,\n          [...numberFormatter.format(minValue)].length,\n          [...numberFormatter.format(maxValue)].length\n        );\n  }\n  const style = getInputFieldClassNames({\n    size,\n    disabled: isDisabled,\n    labelDisplay: 'flex',\n  });\n\n  const wrapperClassname = clsx('w-full flex-shrink-0 touch-none', className, {\n    'flex items-center': inline,\n  });\n\n  return (\n    <div className={wrapperClassname} role=\"group\" id={groupId}>\n      <div className={clsx(style.label, 'select-none')}>\n        {label && (\n          <label\n            onClick={() => {\n              // Safari does not focus <input type=\"range\"> elements when clicking on an associated <label>,\n              // so do it manually. In addition, make sure we show the focus ring.\n              document.getElementById(thumbIds[0])?.focus();\n            }}\n            id={labelId}\n            htmlFor={groupId}\n          >\n            {label}\n          </label>\n        )}\n        {showValueLabel && (\n          <output\n            htmlFor={thumbIds[0]}\n            className=\"ml-auto text-right\"\n            aria-live=\"off\"\n            style={\n              !maxLabelLength\n                ? undefined\n                : {\n                    width: `${maxLabelLength}ch`,\n                    minWidth: `${maxLabelLength}ch`,\n                  }\n            }\n          >\n            {outputValue}\n          </output>\n        )}\n      </div>\n      <div\n        ref={trackRef}\n        className=\"h-30 relative\"\n        {...domProps}\n        role=\"presentation\"\n      >\n        <div\n          className={`absolute inset-0 m-auto h-4 rounded ${\n            isDisabled ? 'bg-disabled' : 'bg-primary-light'\n          }`}\n        />\n        <div\n          className={`absolute inset-0 my-auto h-4 rounded ${\n            isDisabled ? 'bg-disabled-fg' : 'bg-primary'\n          }`}\n          style={{width: `${getThumbPercent(0) * 100}%`}}\n        />\n        {children}\n      </div>\n    </div>\n  );\n}\n","import {snapValueToStep, useGlobalListeners} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport React, {\n  HTMLAttributes,\n  ReactNode,\n  RefObject,\n  useId,\n  useRef,\n  useState,\n} from 'react';\nimport {clamp} from '../../../utils/number/clamp';\nimport {usePointerEvents} from '../../interactions/use-pointer-events';\nimport {useNumberFormatter} from '../../../i18n/use-number-formatter';\nimport type {NumberFormatOptions} from '@internationalized/number';\nimport {InputSize} from '../input-field/input-size';\n\nexport interface UseSliderProps<T = number[]> {\n  formatOptions?: NumberFormatOptions;\n  onChange?: (value: T) => void;\n  onChangeEnd?: (value: T) => void;\n  value?: T;\n  defaultValue?: T;\n  getValueLabel?: (value: number) => string;\n  minValue?: number;\n  maxValue?: number;\n  step?: number;\n  isDisabled?: boolean;\n  size?: InputSize;\n  label?: ReactNode;\n  inline?: boolean;\n  className?: string;\n  showValueLabel?: boolean;\n}\n\nexport interface UseSliderReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n  trackRef: RefObject<HTMLDivElement>;\n  step: number;\n  isDisabled: boolean;\n  values: number[];\n  minValue: number;\n  maxValue: number;\n  focusedThumb: number | undefined;\n  labelId: string | undefined;\n  groupId: string;\n  thumbIds: string[];\n  numberFormatter: Intl.NumberFormat;\n  getThumbPercent: (index: number) => number;\n  getThumbMinValue: (index: number) => number;\n  getThumbMaxValue: (index: number) => number;\n  getThumbValueLabel: (index: number) => string;\n  setThumbValue: (index: number, value: number) => void;\n  updateDraggedThumbs: (index: number, dragging: boolean) => void;\n  isThumbDragging: (index: number) => boolean;\n  setThumbEditable: (index: number, editable: boolean) => void;\n  setFocusedThumb: (index: number | undefined) => void;\n  getValueLabel?: (value: number) => string;\n}\n\nexport function useSlider({\n  minValue = 0,\n  maxValue = 100,\n  isDisabled = false,\n  step = 1,\n  formatOptions,\n  onChangeEnd,\n  label,\n  getValueLabel,\n  ...props\n}: UseSliderProps): UseSliderReturn {\n  const numberFormatter = useNumberFormatter(formatOptions);\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n  const trackRef = useRef<HTMLDivElement>(null);\n\n  // values will be stored in internal state as an array for both slider and range slider\n  const [values, setValues] = useControlledState<number[]>(\n    props.value ? props.value : undefined,\n    props.defaultValue ?? ([minValue] as any),\n    props.onChange as any\n  );\n  // need to also store values in ref, because state value would\n  // lag behind by one between pointer down and move callbacks\n  const valuesRef = useRef<number[] | null>(null);\n  valuesRef.current = values;\n\n  // indices of thumbs that are being dragged currently (state and ref for same reasons as above)\n  const [draggedThumbs, setDraggedThumbs] = useState<boolean[]>(\n    new Array(values.length).fill(false)\n  );\n  const draggedThumbsRef = useRef<boolean[] | null>(null);\n  draggedThumbsRef.current = draggedThumbs;\n\n  // formatted value for <output> and thumb aria labels\n  function getFormattedValue(value: number) {\n    return numberFormatter.format(value);\n  }\n\n  const isThumbDragging = (index: number) => {\n    return draggedThumbsRef.current?.[index] || false;\n  };\n\n  const getThumbValueLabel = (index: number) =>\n    getFormattedValue(values[index]);\n\n  const getThumbMinValue = (index: number) =>\n    index === 0 ? minValue : values[index - 1];\n  const getThumbMaxValue = (index: number) =>\n    index === values.length - 1 ? maxValue : values[index + 1];\n\n  const setThumbValue = (index: number, value: number) => {\n    if (isDisabled || !isThumbEditable(index) || !valuesRef.current) {\n      return;\n    }\n    const thisMin = getThumbMinValue(index);\n    const thisMax = getThumbMaxValue(index);\n\n    // Round value to multiple of step, clamp value between min and max\n    value = snapValueToStep(value, thisMin, thisMax, step);\n    valuesRef.current = replaceIndex(valuesRef.current, index, value);\n    setValues(valuesRef.current);\n  };\n\n  // update \"dragging\" status of specified thumb\n  const updateDraggedThumbs = (index: number, dragging: boolean) => {\n    if (isDisabled || !isThumbEditable(index)) {\n      return;\n    }\n\n    const wasDragging = draggedThumbsRef.current?.[index];\n    draggedThumbsRef.current = replaceIndex(\n      draggedThumbsRef.current || [],\n      index,\n      dragging\n    );\n    setDraggedThumbs(draggedThumbsRef.current);\n\n    // Call onChangeEnd if no handles are dragging.\n    if (onChangeEnd && wasDragging && !draggedThumbsRef.current.some(Boolean)) {\n      onChangeEnd(valuesRef.current || []);\n    }\n  };\n\n  const [focusedThumb, setFocusedThumb] = useState<number | undefined>(\n    undefined\n  );\n\n  const getValuePercent = (value: number) =>\n    (value - minValue) / (maxValue - minValue);\n\n  const getThumbPercent = (index: number) =>\n    getValuePercent(valuesRef.current![index]);\n\n  const setThumbPercent = (index: number, percent: number) => {\n    setThumbValue(index, getPercentValue(percent));\n  };\n\n  const getRoundedValue = (value: number) =>\n    Math.round((value - minValue) / step) * step + minValue;\n\n  const getPercentValue = (percent: number) => {\n    const val = percent * (maxValue - minValue) + minValue;\n    return clamp(getRoundedValue(val), minValue, maxValue);\n  };\n\n  // allows disabling individual thumbs in range slider, instead of disable the whole slider\n  const editableThumbsRef = useRef<boolean[]>(\n    new Array(values.length).fill(true)\n  );\n  const isThumbEditable = (index: number) => editableThumbsRef.current[index];\n  const setThumbEditable = (index: number, editable: boolean) => {\n    editableThumbsRef.current[index] = editable;\n  };\n\n  // When the user clicks or drags the track, we want the motion to set and drag the\n  // closest thumb. Hence, we also need to install useMove() on the track element.\n  // Here, we keep track of which index is the \"closest\" to the drag start point.\n  // It is set onMouseDown/onTouchDown; see trackProps below.\n  const realTimeTrackDraggingIndex = useRef<number | null>(null);\n\n  const currentPointer = useRef<number | null | undefined>(undefined);\n  const handlePointerDown = (e: React.PointerEvent) => {\n    if (\n      e.pointerType === 'mouse' &&\n      (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey)\n    ) {\n      return;\n    }\n    // We only trigger track-dragging if the user clicks on the track itself and nothing is currently being dragged.\n    if (\n      trackRef.current &&\n      !isDisabled &&\n      values.every((_, i) => !draggedThumbs[i])\n    ) {\n      const size = trackRef.current.offsetWidth;\n      // Find the closest thumb\n      const trackPosition = trackRef.current.getBoundingClientRect().left;\n      const offset = e.clientX - trackPosition;\n      const percent = offset / size;\n      const value = getPercentValue(percent);\n\n      // to find the closet thumb we split the array based on the first thumb position to the \"right/end\" of the click.\n      let closestThumb;\n      const split = values.findIndex(v => value - v < 0);\n      if (split === 0) {\n        // If the index is zero then the closest thumb is the first one\n        closestThumb = split;\n      } else if (split === -1) {\n        // If no index is found they've clicked past all the thumbs\n        closestThumb = values.length - 1;\n      } else {\n        const lastLeft = values[split - 1];\n        const firstRight = values[split];\n        // Pick the last left/start thumb, unless they are stacked on top of each other, then pick the right/end one\n        if (Math.abs(lastLeft - value) < Math.abs(firstRight - value)) {\n          closestThumb = split - 1;\n        } else {\n          closestThumb = split;\n        }\n      }\n\n      // Confirm that the found closest thumb is editable, not disabled, and move it\n      if (closestThumb >= 0 && isThumbEditable(closestThumb)) {\n        // Don't un-focus anything\n        e.preventDefault();\n\n        realTimeTrackDraggingIndex.current = closestThumb;\n        setFocusedThumb(closestThumb);\n        currentPointer.current = e.pointerId;\n\n        updateDraggedThumbs(realTimeTrackDraggingIndex.current, true);\n        setThumbValue(closestThumb, value);\n\n        addGlobalListener(window, 'pointerup', onUpTrack, false);\n      } else {\n        realTimeTrackDraggingIndex.current = null;\n      }\n    }\n  };\n\n  const currentPosition = useRef<number | null>(null);\n  const {domProps} = usePointerEvents({\n    onPointerDown: handlePointerDown,\n    onMoveStart() {\n      currentPosition.current = null;\n    },\n    onMove(e, deltaX) {\n      const size = trackRef.current?.offsetWidth || 0;\n\n      if (currentPosition.current == null) {\n        currentPosition.current =\n          getThumbPercent(realTimeTrackDraggingIndex.current || 0) * size;\n      }\n\n      currentPosition.current += deltaX;\n\n      if (realTimeTrackDraggingIndex.current != null && trackRef.current) {\n        const percent = clamp(currentPosition.current / size, 0, 1);\n        setThumbPercent(realTimeTrackDraggingIndex.current, percent);\n      }\n    },\n    onMoveEnd() {\n      if (realTimeTrackDraggingIndex.current != null) {\n        updateDraggedThumbs(realTimeTrackDraggingIndex.current, false);\n        realTimeTrackDraggingIndex.current = null;\n      }\n    },\n  });\n\n  const onUpTrack = (e: PointerEvent) => {\n    const id = e.pointerId;\n    if (id === currentPointer.current) {\n      if (realTimeTrackDraggingIndex.current != null) {\n        updateDraggedThumbs(realTimeTrackDraggingIndex.current, false);\n        realTimeTrackDraggingIndex.current = null;\n      }\n\n      removeGlobalListener(window, 'pointerup', onUpTrack, false);\n    }\n  };\n\n  const id = useId();\n  const labelId = label ? `${id}-label` : undefined;\n  const groupId = `${id}-group`;\n  const thumbIds = [...Array(values.length)].map((v, i) => {\n    return `${id}-thumb-${i}`;\n  });\n\n  return {\n    domProps,\n    trackRef,\n    isDisabled,\n    step,\n    values,\n    minValue,\n    maxValue,\n    focusedThumb,\n    labelId,\n    groupId,\n    thumbIds,\n    numberFormatter,\n    getThumbPercent,\n    getThumbMinValue,\n    getThumbMaxValue,\n    getThumbValueLabel,\n    isThumbDragging,\n    setThumbValue,\n    updateDraggedThumbs,\n    setThumbEditable,\n    setFocusedThumb,\n    getValueLabel,\n  };\n}\n\nfunction replaceIndex<T>(array: T[], index: number, value: T) {\n  if (array[index] === value) {\n    return array;\n  }\n\n  return [...array.slice(0, index), value, ...array.slice(index + 1)];\n}\n","import React, {Ref, useCallback, useEffect, useRef} from 'react';\nimport clsx from 'clsx';\nimport {UseSliderReturn} from './use-slider';\nimport {useGlobalListeners, useObjectRef} from '@react-aria/utils';\nimport {createEventHandler} from '../../../utils/dom/create-event-handler';\n\ninterface SliderThumb {\n  index: number;\n  slider: UseSliderReturn;\n  isDisabled?: boolean;\n  ariaLabel?: string;\n  inputRef?: Ref<HTMLInputElement>;\n  onBlur?: React.FocusEventHandler;\n}\nexport function SliderThumb({\n  index,\n  slider,\n  isDisabled: isThumbDisabled,\n  ariaLabel,\n  inputRef,\n  onBlur,\n}: SliderThumb) {\n  const inputObjRef = useObjectRef(inputRef);\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const {\n    step,\n    values,\n    focusedThumb,\n    labelId,\n    thumbIds,\n    isDisabled: isSliderDisabled,\n    getThumbPercent,\n    getThumbMinValue,\n    getThumbMaxValue,\n    getThumbValueLabel,\n    setThumbValue,\n    updateDraggedThumbs,\n    isThumbDragging,\n    setThumbEditable,\n    setFocusedThumb,\n  } = slider;\n  const value = values[index];\n\n  // Immediately register editability with the state\n  setThumbEditable(index, !isThumbDisabled);\n  const isDisabled = isThumbDisabled || isSliderDisabled;\n\n  const focusInput = useCallback(() => {\n    if (inputObjRef.current) {\n      inputObjRef.current.focus({preventScroll: true});\n    }\n  }, [inputObjRef]);\n\n  // we will focus the native range input when slider is clicked or thumb is\n  // focused in some other way, and let browser handle keyboard interactions\n  const isFocused = focusedThumb === index;\n  useEffect(() => {\n    if (isFocused) {\n      focusInput();\n    }\n  }, [isFocused, focusInput]);\n\n  const currentPointer = useRef<number | undefined>(undefined);\n  const handlePointerUp = (e: PointerEvent) => {\n    if (e.pointerId === currentPointer.current) {\n      focusInput();\n      updateDraggedThumbs(index, false);\n      removeGlobalListener(window, 'pointerup', handlePointerUp, false);\n    }\n  };\n\n  const className = clsx(\n    'outline-none rounded-full w-18 h-18 top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200',\n    !isDisabled &&\n      'focus-within:ring focus-within:ring-primary-light shadow-md',\n    thumbColor({isDisabled, isDragging: isThumbDragging(index)})\n  );\n\n  return (\n    <div\n      role=\"presentation\"\n      className={className}\n      style={{\n        left: `${Math.max(getThumbPercent(index) * 100, 0)}%`,\n      }}\n      onPointerDown={e => {\n        if (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey) {\n          return;\n        }\n        focusInput();\n        currentPointer.current = e.pointerId;\n        updateDraggedThumbs(index, true);\n\n        addGlobalListener(window, 'pointerup', handlePointerUp, false);\n      }}\n    >\n      <input\n        id={thumbIds[index]}\n        onKeyDown={createEventHandler(() => {\n          updateDraggedThumbs(index, true);\n        })}\n        onKeyUp={createEventHandler(() => {\n          // make sure \"onChangeEnd\" is fired on keyboard navigation\n          updateDraggedThumbs(index, false);\n        })}\n        ref={inputObjRef}\n        tabIndex={!isDisabled ? 0 : undefined}\n        min={getThumbMinValue(index)}\n        max={getThumbMaxValue(index)}\n        step={step}\n        value={value}\n        disabled={isDisabled}\n        aria-label={ariaLabel}\n        aria-labelledby={labelId}\n        aria-orientation=\"horizontal\"\n        aria-valuetext={getThumbValueLabel(index)}\n        onFocus={() => {\n          setFocusedThumb(index);\n        }}\n        onBlur={e => {\n          setFocusedThumb(undefined);\n          updateDraggedThumbs(index, false);\n          onBlur?.(e);\n        }}\n        onChange={e => {\n          setThumbValue(index, parseFloat(e.target.value));\n        }}\n        type=\"range\"\n        className=\"sr-only\"\n      />\n    </div>\n  );\n}\n\ninterface SliderThumbColorProps {\n  isDisabled?: boolean;\n  isDragging: boolean;\n}\nfunction thumbColor({isDisabled, isDragging}: SliderThumbColorProps): string {\n  if (isDisabled) {\n    return 'bg-slider-disabled cursor-default';\n  }\n  return clsx(\n    'hover:bg-primary-dark',\n    isDragging ? 'bg-primary-dark' : 'bg-primary'\n  );\n}\n","import {BaseSlider} from './base-slider';\nimport {useSlider, UseSliderProps} from './use-slider';\nimport React, {Ref} from 'react';\nimport {SliderThumb} from './slider-thumb';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\n\ninterface SliderProps extends UseSliderProps<number> {\n  inputRef?: Ref<HTMLInputElement>;\n  onBlur?: React.FocusEventHandler;\n}\nexport function Slider({inputRef, onBlur, ...props}: SliderProps) {\n  const {onChange, onChangeEnd, value, defaultValue, ...otherProps} = props;\n\n  const baseProps: UseSliderProps = {\n    ...otherProps,\n    // Normalize `value: number[]` to `value: number`\n    value: value != null ? [value] : undefined,\n    defaultValue: defaultValue != null ? [defaultValue] : undefined,\n    onChange: (v: number[]): void => {\n      onChange?.(v[0]);\n    },\n    onChangeEnd: (v: number[]): void => {\n      onChangeEnd?.(v[0]);\n    },\n  };\n\n  const slider = useSlider(baseProps);\n\n  return (\n    <BaseSlider {...baseProps} slider={slider}>\n      <SliderThumb\n        index={0}\n        slider={slider}\n        inputRef={inputRef}\n        onBlur={onBlur}\n      />\n    </BaseSlider>\n  );\n}\n\nexport interface FormSliderProps extends SliderProps {\n  name: string;\n}\nexport function FormSlider({name, ...props}: FormSliderProps) {\n  const {\n    field: {onChange, onBlur, value = '', ref},\n  } = useController({\n    name,\n  });\n\n  const formProps: SliderProps = {\n    onChange,\n    onBlur,\n    value: value || '', // avoid issues with \"null\" value when setting form defaults from backend model\n  };\n\n  return <Slider inputRef={ref} {...mergeProps(formProps, props)} />;\n}\n","import clsx from 'clsx';\nimport {forwardRef, ReactNode} from 'react';\nimport {KeyboardArrowRightIcon} from '../../icons/material/KeyboardArrowRight';\nimport {ButtonBase, ButtonBaseProps} from '../../ui/buttons/button-base';\n\ninterface Props extends ButtonBaseProps {\n  startIcon?: ReactNode;\n}\nexport const AppearanceButton = forwardRef<HTMLButtonElement, Props>(\n  ({startIcon, children, className, ...other}, ref) => {\n    return (\n      <ButtonBase\n        ref={ref}\n        className={clsx(\n          'flex items-center gap-10 w-full rounded border text-sm h-54 px-14 mb-10 bg relative hover:bg-hover',\n          className\n        )}\n        variant={null}\n        {...other}\n      >\n        {startIcon}\n        <div>{children}</div>\n        <KeyboardArrowRightIcon className=\"icon-sm text-muted ml-auto\" />\n      </ButtonBase>\n    );\n  }\n);\n","import {LandingPageContent} from '@app/landing/landing-page-content';\nimport {useFormContext} from 'react-hook-form';\nimport {\n  appearanceState,\n  AppearanceValues,\n  useAppearanceStore,\n} from '@common/admin/appearance/appearance-store';\nimport {Fragment, ReactNode} from 'react';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {FormSlider} from '@common/ui/forms/slider/slider';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {AppearanceButton} from '@common/admin/appearance/appearance-button';\nimport {ColorIcon} from '@common/admin/appearance/sections/themes/color-icon';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {Link} from 'react-router-dom';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\n\nexport function LandingPageSectionGeneral() {\n  return (\n    <Fragment>\n      <HeaderSection />\n      <div className=\"my-24 py-24 border-y\">\n        <AppearanceButton\n          to=\"action-buttons\"\n          elementType={Link}\n          className=\"mb-20\"\n        >\n          <Trans message=\"Action buttons\" />\n        </AppearanceButton>\n        <AppearanceButton to=\"primary-features\" elementType={Link}>\n          <Trans message=\"Primary features\" />\n        </AppearanceButton>\n        <AppearanceButton to=\"secondary-features\" elementType={Link}>\n          <Trans message=\"Secondary features\" />\n        </AppearanceButton>\n      </div>\n      <FooterSection />\n      <PricingSection />\n    </Fragment>\n  );\n}\n\nfunction HeaderSection() {\n  const defaultImage = useAppearanceStore(\n    s =>\n      (s.defaults?.settings.homepage.appearance as LandingPageContent)\n        ?.headerImage\n  );\n\n  return (\n    <Fragment>\n      <FormTextField\n        label={<Trans message=\"Header title\" />}\n        className=\"mb-20\"\n        name=\"settings.homepage.appearance.headerTitle\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight('[data-testid=\"headerTitle\"]');\n        }}\n      />\n      <FormTextField\n        label={<Trans message=\"Header subtitle\" />}\n        className=\"mb-30\"\n        inputElementType=\"textarea\"\n        rows={4}\n        name=\"settings.homepage.appearance.headerSubtitle\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            '[data-testid=\"headerSubtitle\"]'\n          );\n        }}\n      />\n      <FormSwitch className=\"mb-24\" name=\"settings.links.homepage_creation\">\n        <Trans message=\"Link shortening\" />\n      </FormSwitch>\n      <FormImageSelector\n        name=\"settings.homepage.appearance.headerImage\"\n        className=\"mb-30\"\n        label={<Trans message=\"Header image\" />}\n        highlightSelector={'[data-testid=\"headerImage\"]'}\n        defaultValue={defaultImage}\n        diskPrefix=\"homepage\"\n      />\n      <FormSlider\n        name=\"settings.homepage.appearance.headerImageOpacity\"\n        label={<Trans message=\"Header image opacity\" />}\n        minValue={0}\n        step={0.1}\n        maxValue={1}\n        formatOptions={{style: 'percent'}}\n      />\n      <div className=\"text-muted text-xs mb-20\">\n        <Trans message=\"In order for overlay colors to appear, header image opacity will need to be less then 100%\" />\n      </div>\n      <ColorPickerTrigger\n        formKey=\"settings.homepage.appearance.headerOverlayColor1\"\n        label={<Trans message=\"Header overlay color 1\" />}\n      />\n      <ColorPickerTrigger\n        formKey=\"settings.homepage.appearance.headerOverlayColor2\"\n        label={<Trans message=\"Header overlay color 2\" />}\n      />\n    </Fragment>\n  );\n}\n\nfunction FooterSection() {\n  const defaultImage = useAppearanceStore(\n    s =>\n      (s.defaults?.settings.homepage.appearance as LandingPageContent)\n        ?.footerImage\n  );\n  return (\n    <Fragment>\n      <FormSwitch className=\"mb-24\" name=\"settings.links.homepage_stats\">\n        <Trans message=\"Show link statistics\" />\n      </FormSwitch>\n      <FormTextField\n        label={<Trans message=\"Footer title\" />}\n        className=\"mb-20\"\n        name=\"settings.homepage.appearance.footerTitle\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight('[data-testid=\"footerTitle\"]');\n        }}\n      />\n      <FormTextField\n        label={<Trans message=\"Footer subtitle\" />}\n        className=\"mb-20\"\n        name=\"settings.homepage.appearance.footerSubtitle\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            '[data-testid=\"footerSubtitle\"]'\n          );\n        }}\n      />\n      <FormImageSelector\n        name=\"settings.homepage.appearance.footerImage\"\n        className=\"mb-30\"\n        label={<Trans message=\"Footer background image\" />}\n        highlightSelector={'[data-testid=\"footerImage\"]'}\n        defaultValue={defaultImage}\n        diskPrefix=\"homepage\"\n      />\n    </Fragment>\n  );\n}\n\nfunction PricingSection() {\n  return (\n    <div className=\"mt-24 pt-24 border-t\">\n      <FormTextField\n        label={<Trans message=\"Pricing title\" />}\n        className=\"mb-20\"\n        name=\"settings.homepage.appearance.pricingTitle\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            '[data-testid=\"pricingTitle\"]'\n          );\n        }}\n      />\n      <FormTextField\n        label={<Trans message=\"Pricing subtitle\" />}\n        className=\"mb-20\"\n        name=\"settings.homepage.appearance.pricingSubtitle\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            '[data-testid=\"pricingSubtitle\"]'\n          );\n        }}\n      />\n      <FormSwitch className=\"mb-24\" name=\"settings.links.homepage_pricing\">\n        <Trans message=\"Show pricing table\" />\n      </FormSwitch>\n    </div>\n  );\n}\n\ninterface ColorPickerTriggerProps {\n  formKey: string;\n  label: ReactNode;\n}\nfunction ColorPickerTrigger({label, formKey}: ColorPickerTriggerProps) {\n  const key = formKey as 'settings.homepage.appearance.headerOverlayColor1';\n  const {watch, setValue} = useFormContext<AppearanceValues>();\n\n  const formValue = watch(key);\n\n  const setColor = (value: string | null) => {\n    setValue(formKey as any, value, {\n      shouldDirty: true,\n    });\n  };\n\n  return (\n    <DialogTrigger\n      currentValue={formValue}\n      type=\"popover\"\n      onClose={value => {\n        setColor(value);\n      }}\n    >\n      <AppearanceButton\n        className=\"capitalize\"\n        startIcon={\n          <ColorIcon\n            viewBox=\"0 0 48 48\"\n            className=\"icon-lg\"\n            style={{fill: formValue}}\n          />\n        }\n      >\n        {label}\n      </AppearanceButton>\n      <ColorPickerDialog\n        defaultValue={formValue}\n        onChange={newValue => {\n          setColor(newValue);\n        }}\n      />\n    </DialogTrigger>\n  );\n}\n","import {\n  Accordion,\n  AccordionItem,\n} from '../../../../common/ui/accordion/accordion';\nimport {Trans} from '../../../../common/i18n/trans';\nimport {appearanceState} from '../../../../common/admin/appearance/appearance-store';\nimport {useFieldArray} from 'react-hook-form';\nimport {FormTextField} from '../../../../common/ui/forms/input-field/text-field/text-field';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {LandingPageContent} from '../../../../landing/landing-page-content';\nimport {Button} from '../../../../common/ui/buttons/button';\nimport {AddIcon} from '../../../../common/icons/material/Add';\nimport {useState} from 'react';\n\nexport function LandingPageSecondaryFeatures() {\n  const {fields, remove, append} = useFieldArray({\n    name: 'settings.homepage.appearance.secondaryFeatures',\n  });\n  const [expandedValues, setExpandedValues] = useState([0]);\n  return (\n    <div>\n      <Accordion\n        variant=\"outline\"\n        expandedValues={expandedValues}\n        onExpandedChange={values => {\n          setExpandedValues(values as number[]);\n          if (values.length) {\n            appearanceState().preview.setHighlight(\n              `[data-testid=\"secondary-root-${values[0]}\"]`\n            );\n          }\n        }}\n      >\n        {fields.map((field, index) => {\n          return (\n            <AccordionItem\n              key={field.id}\n              value={index}\n              label={<Trans message={`Secondary feature ${index + 1}`} />}\n            >\n              <FeatureForm index={index} />\n              <div className=\"text-right\">\n                <Button\n                  size=\"xs\"\n                  variant=\"outline\"\n                  color=\"danger\"\n                  onClick={() => {\n                    remove(index);\n                  }}\n                >\n                  <Trans message=\"Remove\" />\n                </Button>\n              </div>\n            </AccordionItem>\n          );\n        })}\n      </Accordion>\n      <div className=\"mt-20 text-right\">\n        <Button\n          size=\"xs\"\n          variant=\"outline\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={() => {\n            append({});\n            setExpandedValues([fields.length]);\n          }}\n        >\n          <Trans message=\"Add feature\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n\ninterface FeatureFormProps {\n  index: number;\n}\nfunction FeatureForm({index}: FeatureFormProps) {\n  return (\n    <>\n      <FormImageSelector\n        name={`settings.homepage.appearance.secondaryFeatures.${index}.image`}\n        className=\"mb-30\"\n        label={<Trans message=\"Image\" />}\n        highlightSelector={`[data-testid=\"secondary-image-${index}\"]`}\n        defaultValue={getDefaultImage(index)}\n        diskPrefix=\"homepage\"\n      />\n      <FormTextField\n        name={`settings.homepage.appearance.secondaryFeatures.${index}.title`}\n        label={<Trans message=\"Title\" />}\n        className=\"mb-20\"\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            `[data-testid=\"secondary-title-${index}\"]`\n          );\n        }}\n      />\n      <FormTextField\n        name={`settings.homepage.appearance.secondaryFeatures.${index}.subtitle`}\n        label={<Trans message=\"Subtitle\" />}\n        className=\"mb-20\"\n        inputElementType=\"textarea\"\n        rows={4}\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            `[data-testid=\"secondary-subtitle-${index}\"]`\n          );\n        }}\n      />\n      <FormTextField\n        name={`settings.homepage.appearance.secondaryFeatures.${index}.description`}\n        label={<Trans message=\"Description\" />}\n        className=\"mb-20\"\n        inputElementType=\"textarea\"\n        rows={4}\n        onFocus={() => {\n          appearanceState().preview.setHighlight(\n            `[data-testid=\"secondary-description-${index}\"]`\n          );\n        }}\n      />\n    </>\n  );\n}\n\nfunction getDefaultImage(index: number): string | undefined {\n  return (\n    appearanceState().defaults?.settings.homepage\n      .appearance as LandingPageContent\n  ).secondaryFeatures[index]?.image;\n}\n","import {\n  IAppearanceConfig,\n  MenuSectionConfig,\n} from '@common/admin/appearance/types/appearance-editor-config';\nimport {LandingPageSectionPrimaryFeatures} from '@app/admin/appearance/sections/landing-page-section/landing-page-section-primary-features';\nimport {LandingPageSectionActionButtons} from '@app/admin/appearance/sections/landing-page-section/landing-page-section-action-buttons';\nimport {AppearanceEditorBreadcrumbItem} from '@common/admin/appearance/types/appearance-editor-section';\nimport {LandingPageSectionGeneral} from '@app/admin/appearance/sections/landing-page-section/landing-page-section-general';\nimport {LandingPageSecondaryFeatures} from '@app/admin/appearance/sections/landing-page-section/landing-page-section-secondary-features';\nimport {message} from '@common/i18n/message';\n\nexport const AppAppearanceConfig: IAppearanceConfig = {\n  preview: {\n    defaultRoute: 'dashboard',\n    navigationRoutes: ['dashboard'],\n  },\n  sections: {\n    'landing-page': {\n      label: message('Landing Page'),\n      position: 1,\n      previewRoute: '/',\n      routes: [\n        {path: 'landing-page', element: <LandingPageSectionGeneral />},\n        {\n          path: 'landing-page/action-buttons',\n          element: <LandingPageSectionActionButtons />,\n        },\n        {\n          path: 'landing-page/primary-features',\n          element: <LandingPageSectionPrimaryFeatures />,\n        },\n        {\n          path: 'landing-page/secondary-features',\n          element: <LandingPageSecondaryFeatures />,\n        },\n      ],\n      buildBreadcrumb: pathname => {\n        const parts = pathname.split('/').filter(p => !!p);\n        const sectionName = parts.pop();\n        // admin/appearance\n        const breadcrumb: AppearanceEditorBreadcrumbItem[] = [\n          {\n            label: message('Landing page'),\n            location: 'landing-page',\n          },\n        ];\n        if (sectionName === 'action-buttons') {\n          breadcrumb.push({\n            label: message('Action buttons'),\n            location: 'landing-page/action-buttons',\n          });\n        }\n\n        if (sectionName === 'primary-features') {\n          breadcrumb.push({\n            label: message('Primary features'),\n            location: 'landing-page/primary-features',\n          });\n        }\n\n        if (sectionName === 'secondary-features') {\n          breadcrumb.push({\n            label: message('Secondary features'),\n            location: 'landing-page/secondary-features',\n          });\n        }\n\n        return breadcrumb;\n      },\n    },\n    // missing label will get added by deepMerge from default config\n    // @ts-ignore\n    menus: {\n      config: {\n        positions: [\n          'link-page-navbar',\n          'dashboard-navbar',\n          'dashboard-sidebar',\n          'homepage-navbar',\n          'footer',\n          'footer-secondary',\n        ],\n        availableRoutes: [\n          '/dashboard',\n          '/dashboard/biolinks',\n          '/dashboard/links',\n          '/dashboard/link-groups',\n          '/dashboard/custom-domains',\n          '/dashboard/link-overlays',\n          '/dashboard/link-pages',\n          '/dashboard/tracking-pixels',\n        ],\n      } as MenuSectionConfig,\n    },\n  },\n};\n","import deepMerge from 'deepmerge';\nimport {DefaultAppearanceConfig} from '@common/admin/appearance/config/default-appearance-config';\nimport {AppAppearanceConfig} from '@app/admin/appearance/app-appearance-config';\nimport {IAppearanceConfig} from '@common/admin/appearance/types/appearance-editor-config';\n\nconst mergedAppearanceConfig = deepMerge.all([\n  DefaultAppearanceConfig,\n  AppAppearanceConfig,\n]);\n\nexport default mergedAppearanceConfig as IAppearanceConfig;\n","import create from 'zustand';\nimport {subscribeWithSelector} from 'zustand/middleware';\nimport {immer} from 'zustand/middleware/immer';\nimport {Settings} from '../../core/settings/settings';\nimport type {IAppearanceConfig} from './types/appearance-editor-config';\nimport {AllCommands} from './commands/commands';\nimport mergedAppearanceConfig from './config/merged-appearance-config';\nimport {BootstrapData} from '../../core/bootstrap-data/bootstrap-data';\n\nexport interface AppearanceValues {\n  appearance: {\n    env: {app_name: string; app_url: string};\n    seo: {\n      key: string;\n      name: string;\n      value: string;\n      defaultValue: string;\n    }[];\n    themes: BootstrapData['themes'];\n    custom_code: {\n      css?: string;\n      html?: string;\n    };\n  };\n  settings: Settings;\n}\n\nexport interface AppearanceDefaults {\n  appearance: {\n    themes: {\n      light: Record<string, string>;\n      dark: Record<string, string>;\n    };\n  };\n  settings: Settings;\n}\n\ninterface AppearanceStore {\n  defaults: AppearanceDefaults | null;\n  iframeWindow: Window | null;\n  config: IAppearanceConfig | null;\n  setDefaults: (value: AppearanceDefaults) => void;\n  setIframeWindow: (value: Window) => void;\n  preview: {\n    navigate: (sectionName: string) => void;\n    setValues: (settings: AppearanceValues) => void;\n    setThemeColor: (name: string, value: string) => void;\n    setActiveTheme: (themeId: number | string) => void;\n    setHighlight: (selector: string | null | undefined) => void;\n    setCustomCode: (mode: 'css' | 'html', value?: string) => void;\n  };\n}\n\nexport const useAppearanceStore = create<AppearanceStore>()(\n  subscribeWithSelector(\n    immer((set, get) => ({\n      defaults: null,\n      iframeWindow: null,\n      config: mergedAppearanceConfig,\n      setDefaults: value => {\n        set(state => {\n          state.defaults = {...value};\n        });\n      },\n      setIframeWindow: value => {\n        set(() => {\n          return {iframeWindow: value};\n        });\n      },\n\n      preview: {\n        navigate: sectionName => {\n          const section = get().config?.sections[sectionName];\n          const route = section?.previewRoute || '/';\n          const preview = get().iframeWindow;\n          if (route) {\n            postMessage(preview, {type: 'navigate', to: route});\n          }\n        },\n        setValues: values => {\n          const preview = get().iframeWindow;\n          postMessage(preview, {type: 'setValues', values});\n        },\n        setThemeColor: (name, value) => {\n          const preview = get().iframeWindow;\n          postMessage(preview, {type: 'setThemeColor', name, value});\n        },\n        setActiveTheme: themeId => {\n          const preview = get().iframeWindow;\n          postMessage(preview, {type: 'setActiveTheme', themeId});\n        },\n        setCustomCode: (mode, value) => {\n          const preview = get().iframeWindow;\n          postMessage(preview, {type: 'setCustomCode', mode, value});\n        },\n        setHighlight: selector => {\n          set(() => {\n            let node: HTMLElement | null = null;\n            const document = get().iframeWindow?.document;\n            if (document && selector) {\n              node = document.querySelector(selector);\n            }\n            if (node) {\n              requestAnimationFrame(() => {\n                if (!node) return;\n                node.scrollIntoView({\n                  behavior: 'smooth',\n                  block: 'center',\n                  inline: 'center',\n                });\n              });\n            }\n          });\n        },\n      },\n    }))\n  )\n);\n\nfunction postMessage(window: Window | null, command: AllCommands) {\n  if (window) {\n    window.postMessage({source: 'be-appearance-editor', ...command}, '*');\n  }\n}\n\nexport function appearanceState() {\n  return useAppearanceStore.getState();\n}\n","import React, {ReactNode, useId, useRef} from 'react';\nimport clsx from 'clsx';\nimport {Button} from '../buttons/button';\nimport {appearanceState} from '../../admin/appearance/appearance-store';\nimport {Trans} from '../../i18n/trans';\nimport {useActiveUpload} from '../../uploads/uploader/use-active-upload';\nimport {UploadInputType} from '../../uploads/types/upload-input-config';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {ProgressBar} from '../progress/progress-bar';\nimport {Disk} from '../../uploads/types/backend-metadata';\nimport {toast} from '@common/ui/toast/toast';\nimport {Field} from '@common/ui/forms/input-field/field';\nimport {getInputFieldClassNames} from '@common/ui/forms/input-field/get-input-field-class-names';\nimport {FileEntry} from '@common/uploads/file-entry';\nimport {useAutoFocus} from '@common/ui/focus/use-auto-focus';\nimport {UploadStrategyConfig} from '@common/uploads/uploader/strategy/upload-strategy';\n\nconst TwoMB = 2 * 1024 * 1024;\n\ninterface ImageSelectorProps {\n  className?: string;\n  label?: ReactNode;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: ReactNode;\n  required?: boolean;\n  value?: string;\n  onChange?: (newValue: string) => void;\n  highlightSelector?: string;\n  defaultValue?: string;\n  diskPrefix: string;\n  showRemoveButton?: boolean;\n  autoFocus?: boolean;\n}\nexport function ImageSelector({\n  className,\n  label,\n  description,\n  value,\n  onChange,\n  highlightSelector,\n  defaultValue,\n  diskPrefix,\n  showRemoveButton,\n  invalid,\n  errorMessage,\n  required,\n  autoFocus,\n}: ImageSelectorProps) {\n  const {\n    uploadFile,\n    selectAndUploadFile,\n    entry,\n    percentage,\n    uploadStatus,\n    deleteEntry,\n    isDeletingEntry,\n  } = useActiveUpload();\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useAutoFocus({autoFocus}, inputRef);\n\n  const fieldId = useId();\n  const labelId = label ? `${fieldId}-label` : undefined;\n  const descriptionId = description ? `${fieldId}-description` : undefined;\n\n  const imageUrl = value || entry?.url;\n\n  const uploadOptions: UploadStrategyConfig = {\n    showToastOnRestrictionFail: true,\n    restrictions: {\n      allowedFileTypes: [UploadInputType.image],\n      maxFileSize: TwoMB,\n    },\n    metadata: {\n      diskPrefix,\n      disk: Disk.public,\n    },\n    onSuccess: (entry: FileEntry) => {\n      onChange?.(entry.url);\n    },\n    onError: (message?: string) => {\n      if (message) {\n        toast.danger(message);\n      }\n    },\n  };\n\n  const inputFieldClassNames = getInputFieldClassNames({\n    description,\n    descriptionPosition: 'top',\n    invalid,\n  });\n  const uploadButton = (\n    <Field\n      fieldClassNames={inputFieldClassNames}\n      errorMessage={errorMessage}\n      invalid={invalid}\n    >\n      <input\n        ref={inputRef}\n        aria-labelledby={labelId}\n        aria-describedby={descriptionId}\n        required={required}\n        accept={UploadInputType.image}\n        type=\"file\"\n        disabled={uploadStatus === 'inProgress'}\n        onChange={e => {\n          if (e.target.files?.length) {\n            uploadFile(e.target.files[0], uploadOptions);\n          }\n        }}\n        className={clsx(\n          inputFieldClassNames.input,\n          'py-8',\n          'file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10'\n        )}\n      />\n      {uploadStatus === 'inProgress' && (\n        <ProgressBar\n          className=\"absolute bottom-0 left-0 right-0\"\n          size=\"xs\"\n          isIndeterminate\n        />\n      )}\n    </Field>\n  );\n\n  const replaceButton = (\n    <Button\n      onClick={() => {\n        selectAndUploadFile(uploadOptions);\n      }}\n      disabled={uploadStatus === 'inProgress'}\n      className=\"mr-10\"\n      variant=\"outline\"\n      color=\"primary\"\n      size=\"xs\"\n    >\n      <Trans message=\"Replace\" />\n    </Button>\n  );\n\n  const removeButton = (\n    <Button\n      variant=\"outline\"\n      color=\"danger\"\n      size=\"xs\"\n      disabled={isDeletingEntry}\n      onClick={() => {\n        deleteEntry({\n          onSuccess: () => onChange?.(''),\n        });\n      }}\n    >\n      <Trans message=\"Remove\" />\n    </Button>\n  );\n\n  return (\n    <div\n      className={clsx('text-sm', className)}\n      onClick={() => {\n        appearanceState().preview.setHighlight(highlightSelector);\n      }}\n    >\n      {label && (\n        <div id={labelId} className={inputFieldClassNames.label}>\n          {label}\n        </div>\n      )}\n      {description && (\n        <div className={inputFieldClassNames.description}>{description}</div>\n      )}\n      <div>\n        {!imageUrl ? (\n          uploadButton\n        ) : (\n          <div aria-labelledby={labelId} aria-describedby={descriptionId}>\n            <div className=\"h-80 border rounded bg-chip p-6 relative overflow-hidden\">\n              <img\n                className=\"h-full mx-auto rounded object-contain\"\n                src={imageUrl}\n                alt=\"\"\n              />\n              {uploadStatus === 'inProgress' && (\n                <ProgressBar\n                  value={percentage}\n                  size=\"xs\"\n                  className=\"absolute left-0 bottom-0 w-full\"\n                  aria-label=\"upload progress\"\n                />\n              )}\n            </div>\n            <div className=\"mt-10\">\n              {replaceButton}\n              {showRemoveButton && removeButton}\n              {defaultValue && value !== defaultValue && (\n                <Button\n                  variant=\"outline\"\n                  color=\"primary\"\n                  size=\"xs\"\n                  onClick={() => {\n                    onChange?.(defaultValue);\n                  }}\n                >\n                  <Trans message=\"Use default\" />\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\ninterface FormImageSelectorProps extends ImageSelectorProps {\n  name: string;\n}\nexport function FormImageSelector(props: FormImageSelectorProps) {\n  const {\n    field: {onChange, value = null},\n    fieldState: {error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<ImageSelectorProps> = {\n    onChange,\n    value,\n    invalid: error != null,\n    errorMessage: error ? <Trans message=\"Please select an image.\" /> : null,\n  };\n\n  return <ImageSelector {...mergeProps(formProps, props)} />;\n}\n","import {useFormContext, UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {Tabs} from '@common/ui/tabs/tabs';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {Trans} from '@app/common/i18n/trans';\nimport {TabPanel, TabPanels} from '@common/ui/tabs/tab-panels';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {\n  LinkOverlayColors,\n  LinkOverlayPositions,\n  LinkOverlayThemes,\n} from '@app/dashboard/link-overlays/crupdate/link-overlay-constants';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {OverlayWebsiteBackground} from './overlay-website-background';\nimport {Fragment, ReactElement} from 'react';\nimport {FloatingLinkOverlay} from '@app/short-links/floating-link-overlay';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ColorIcon} from '@common/admin/appearance/sections/themes/color-icon';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\n\ninterface CrupdateLinkOverlayFormProps {\n  isLoading: boolean;\n  form: UseFormReturn<CrupdateLinkOverlayPayload>;\n  onSubmit: (values: CrupdateLinkOverlayPayload) => void;\n}\nexport function CrupdateLinkOverlayForm({\n  form,\n  isLoading,\n  onSubmit,\n}: CrupdateLinkOverlayFormProps) {\n  return (\n    <Form form={form} onSubmit={onSubmit} className=\"flex h-full\">\n      <div className=\"flex-shrink-0 w-full md:w-288 px-16 md:border-r md:shadow-lg h-full overflow-y-auto\">\n        <Tabs>\n          <TabList expand>\n            <Tab>\n              <Trans message=\"General\" />\n            </Tab>\n            <Tab>\n              <Trans message=\"Style\" />\n            </Tab>\n          </TabList>\n          <TabPanels className=\"my-24\">\n            <TabPanel>\n              <GeneralFields />\n              <SaveButton disabled={isLoading} />\n            </TabPanel>\n            <TabPanel>\n              <StyleFields />\n              <SaveButton disabled={isLoading} className=\"mt-14\" />\n            </TabPanel>\n          </TabPanels>\n        </Tabs>\n      </div>\n      <div className=\"flex-auto relative hidden md:block\">\n        <OverlayWebsiteBackground />\n        <OverlayPreview />\n      </div>\n    </Form>\n  );\n}\n\nfunction SaveButton(props: ButtonProps) {\n  return (\n    <Button type=\"submit\" variant=\"flat\" color=\"primary\" {...props}>\n      <Trans message=\"Save\" />\n    </Button>\n  );\n}\n\nfunction BackgroundField() {\n  return (\n    <FormImageSelector\n      className=\"mb-20\"\n      name=\"colors.bg-image\"\n      label={<Trans message=\"Background image\" />}\n      diskPrefix=\"overlays\"\n      showRemoveButton\n    />\n  );\n}\n\ninterface ColorFieldProps {\n  name: keyof LinkOverlay['colors'];\n  children: ReactElement;\n}\nfunction ColorField({name, children}: ColorFieldProps) {\n  const {watch, setValue} = useFormContext<CrupdateLinkOverlayPayload>();\n  const color = watch(`colors.${name}`);\n\n  return (\n    <DialogTrigger\n      currentValue={color}\n      type=\"popover\"\n      placement=\"right\"\n      offset={10}\n      onClose={newColor => {\n        setValue(`colors.${name}`, newColor);\n      }}\n    >\n      <ButtonBase className=\"flex items-center gap-10 w-full rounded border text-sm h-54 px-14 mb-10 bg relative hover:bg-hover\">\n        <ColorIcon\n          viewBox=\"0 0 48 48\"\n          className=\"icon-lg\"\n          style={{fill: color}}\n        />\n        <div>{children}</div>\n        <KeyboardArrowRightIcon className=\"icon-sm text-muted ml-auto\" />\n      </ButtonBase>\n      <ColorPickerDialog\n        defaultValue={color}\n        onChange={newColor => {\n          setValue(`colors.${name}`, newColor);\n        }}\n      />\n    </DialogTrigger>\n  );\n}\n\nfunction StyleFields() {\n  return (\n    <Fragment>\n      <FileUploadProvider>\n        <BackgroundField />\n      </FileUploadProvider>\n      {LinkOverlayColors.map(({key, label}) => (\n        <ColorField name={key} key={key}>\n          <Trans {...label} />\n        </ColorField>\n      ))}\n    </Fragment>\n  );\n}\n\nfunction GeneralFields() {\n  return (\n    <Fragment>\n      <FormTextField\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        className=\"mb-24\"\n        required\n      />\n      <FormSelect\n        name=\"position\"\n        selectionMode=\"single\"\n        label={<Trans message=\"Position\" />}\n        className=\"mb-24\"\n      >\n        {LinkOverlayPositions.map(position => (\n          <Item key={position.key} value={position.key}>\n            <Trans {...position.label} />\n          </Item>\n        ))}\n      </FormSelect>\n      <FormSelect\n        name=\"theme\"\n        selectionMode=\"single\"\n        label={<Trans message=\"Theme\" />}\n        className=\"mb-24\"\n      >\n        {LinkOverlayThemes.map(theme => (\n          <Item key={theme.key} value={theme.key}>\n            <Trans {...theme.label} />\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        name=\"message\"\n        label={<Trans message=\"Message\" />}\n        inputElementType=\"textarea\"\n        maxLength={200}\n        rows={2}\n        className=\"mb-24\"\n      />\n      <FormTextField\n        name=\"label\"\n        label={<Trans message=\"Label\" />}\n        maxLength={8}\n        className=\"mb-24\"\n      />\n      <FormTextField\n        type=\"url\"\n        name=\"btn_link\"\n        label={<Trans message=\"Button link\" />}\n        className=\"mb-24\"\n      />\n      <FormTextField\n        name=\"btn_text\"\n        label={<Trans message=\"Button text\" />}\n        maxLength={30}\n        className=\"mb-24\"\n      />\n    </Fragment>\n  );\n}\n\nfunction OverlayPreview() {\n  const {watch} = useFormContext<CrupdateLinkOverlayPayload>();\n  const values = watch();\n  return <FloatingLinkOverlay overlay={values} />;\n}\n","import {useForm} from 'react-hook-form';\nimport {useCreateLinkOverlay} from '@app/dashboard/link-overlays/requests/use-create-link-overlay';\nimport {CrupdateLinkOverlayForm} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\n\nexport function CreateLinkOverlayPage() {\n  const {trans} = useTrans();\n  const navigate = useNavigate();\n  const form = useForm<CrupdateLinkOverlayPayload>({\n    defaultValues: {\n      position: 'bottom-left',\n      theme: 'default',\n      label: trans(message('Label')),\n      message: trans(message('Your message here')),\n      btn_text: trans(message('Button text')),\n      btn_link: 'https://google.com',\n      colors: {\n        'bg-color': 'rgb(61, 75, 101)',\n        'text-color': 'rgb(255, 255, 255)',\n        'label-bg-color': 'rgb(255, 255, 255)',\n        'label-color': 'rgb(0, 0, 0)',\n      },\n    },\n  });\n  const createOverlay = useCreateLinkOverlay(form);\n  return (\n    <CrupdateLinkOverlayForm\n      form={form}\n      isLoading={createOverlay.isLoading}\n      onSubmit={values => {\n        createOverlay.mutate(values, {\n          onSuccess: () => navigate('..', {relative: 'path'}),\n        });\n      }}\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\n\nexport const linkOverlayEndpoint = (overlayId: number | string) =>\n  `link-overlay/${overlayId}`;\n\nexport interface GetLinkOverlayResponse extends BackendResponse {\n  linkOverlay: LinkOverlay;\n}\n\nexport function useLinkOverlay(overlayId: number | string) {\n  return useQuery([linkOverlayEndpoint(overlayId)], () =>\n    getLinkOverlay(overlayId)\n  );\n}\n\nfunction getLinkOverlay(\n  overlayId: number | string\n): Promise<GetLinkOverlayResponse> {\n  return apiClient\n    .get(linkOverlayEndpoint(overlayId))\n    .then(response => response.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {linkOverlayEndpoint} from '@app/dashboard/link-overlays/requests/use-link-overlay';\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdateLinkOverlay(\n  overlayId: number | string,\n  form: UseFormReturn<CrupdateLinkOverlayPayload>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: CrupdateLinkOverlayPayload) => createOverlay(overlayId, payload),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Overlay updated')));\n        queryClient.invalidateQueries(\n          PaginatedResourcesQueryKey('link-overlay')\n        );\n        queryClient.invalidateQueries([linkOverlayEndpoint(overlayId)]);\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createOverlay(\n  overlayId: number | string,\n  payload: CrupdateLinkOverlayPayload\n): Promise<Response> {\n  return apiClient.put(`link-overlay/${overlayId}`, payload).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {CrupdateLinkOverlayForm} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-form';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {useParams} from 'react-router-dom';\nimport {useLinkOverlay} from '@app/dashboard/link-overlays/requests/use-link-overlay';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {useUpdateLinkOverlay} from '@app/dashboard/link-overlays/requests/use-update-link-overlay';\n\nexport function UpdateLinkOverlayPage() {\n  const {overlayId} = useParams();\n  const {data, isLoading, isError} = useLinkOverlay(overlayId!);\n\n  if (isLoading) {\n    return <FullPageLoader />;\n  }\n\n  if (isError) {\n    return null;\n  }\n\n  return <PageContent overlay={data.linkOverlay} />;\n}\n\ninterface PageContentProps {\n  overlay: LinkOverlay;\n}\nfunction PageContent({overlay}: PageContentProps) {\n  const navigate = useNavigate();\n  const form = useForm<CrupdateLinkOverlayPayload>({\n    defaultValues: {\n      name: overlay.name,\n      position: overlay.position,\n      theme: overlay.theme,\n      label: overlay.label,\n      message: overlay.message,\n      btn_text: overlay.btn_text,\n      btn_link: overlay.btn_link,\n      colors: overlay.colors,\n    },\n  });\n  const updateOverlay = useUpdateLinkOverlay(overlay.id, form);\n  return (\n    <CrupdateLinkOverlayForm\n      form={form}\n      isLoading={updateOverlay.isLoading}\n      onSubmit={values => {\n        updateOverlay.mutate(values, {\n          onSuccess: () => navigate('../..', {relative: 'path'}),\n        });\n      }}\n    />\n  );\n}\n","export default \"__VITE_ASSET__2040a197__\"","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Link, Link as RouterLink} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport React, {Fragment} from 'react';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {useDefaultCustomDomainHost} from '@common/custom-domains/use-default-custom-domain-host';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\n\nexport const BiolinksDatatableColumns: ColumnConfig<Biolink>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    // prevent long names from overflowing the table\n    width: 'w-5/6 max-w-200',\n    body: biolink => (\n      <a\n        className={LinkStyle}\n        href={biolink.short_url}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        {biolink.name}\n      </a>\n    ),\n  },\n  {\n    key: 'clicks_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Clicks\" />,\n    body: biolink =>\n      biolink.clicks_count ? (\n        <FormattedNumber value={biolink.clicks_count} />\n      ) : (\n        '-'\n      ),\n  },\n  {\n    key: 'domain_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Domain\" />,\n    body: biolink => <DomainColumn model={biolink} />,\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    body: biolink => {\n      if (!biolink.user) return '';\n      return (\n        <NameWithAvatar\n          image={biolink.user.avatar}\n          label={biolink.user.display_name}\n          description={biolink.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'links_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Links\" />,\n    body: biolink =>\n      biolink.links_count ? (\n        <FormattedNumber value={biolink.links_count} />\n      ) : (\n        '-'\n      ),\n  },\n  {\n    key: 'active',\n    allowsSorting: true,\n    header: () => <Trans message=\"Active\" />,\n    body: biolink =>\n      biolink.active ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: link =>\n      link.updated_at ? <FormattedDate date={link.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    body: biolink => (\n      <div className=\"text-muted\">\n        <Tooltip label={<Trans message=\"Clicks report\" />}>\n          <RouterLink to={`${biolink.id}`}>\n            <IconButton size=\"md\">\n              <BarChartIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <ShareLinkButton link={biolink} />\n        <PermissionAwareButton resource={biolink} action=\"update\">\n          <Link to={`${biolink.id}/edit/content`}>\n            <IconButton size=\"md\">\n              <EditIcon />\n            </IconButton>\n          </Link>\n        </PermissionAwareButton>\n      </div>\n    ),\n  },\n];\n\ninterface DomainColumnProps {\n  model: {\n    domain_id?: number;\n    domain?: CustomDomain;\n  };\n}\nexport function DomainColumn({model}: DomainColumnProps) {\n  const {data} = useLinkFormValueLists();\n  const defaultHost = useDefaultCustomDomainHost(data?.domains);\n  if (model.domain_id === 0 && defaultHost) {\n    return <Fragment>{defaultHost}</Fragment>;\n  }\n  if (model.domain_id && model.domain) {\n    return <Fragment>{removeProtocol(model.domain.host)}</Fragment>;\n  }\n  return <Trans message=\"All domains\" />;\n}\n","import {\n  ALL_PRIMITIVE_OPERATORS,\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\n\nexport const BiolinksDatatableFilters: BackendFilter[] = [\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'active',\n    label: message('Status'),\n    description: message('Whether biolink is disabled or not'),\n    defaultValue: '01',\n    defaultOperator: FilterOperator.eq,\n    options: [\n      {\n        key: '01',\n        label: message('Enabled'),\n        value: true,\n      },\n      {\n        key: '02',\n        label: message('Disabled'),\n        value: false,\n      },\n    ],\n  }),\n  new BackendFilter({\n    type: FilterControlType.Input,\n    inputType: 'number',\n    key: 'clicks_count',\n    label: message('Clicks count'),\n    description: message('Number of times this biolink was visited'),\n    defaultValue: 1,\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n  }),\n  new BackendFilter({\n    type: FilterControlType.Input,\n    inputType: 'number',\n    key: 'links_count',\n    label: message('Link count'),\n    description: message('Number of links in the biolink'),\n    defaultValue: 1,\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n  }),\n  new CreatedAtFilter({\n    description: message('Date biolink was created'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date biolink was last updated'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'user_id',\n    label: message('User'),\n    description: message('User biolink was created by'),\n  }),\n];\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CrupdateBiolinkFormValues} from '../crupdate/crupdate-biolink-form-values';\nimport {buildLinkeablePayload} from '@app/dashboard/links/utils/build-linkeable-payload';\nimport {CrupdateBiolinkPayload} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\nexport function useCreateBiolink(\n  form: UseFormReturn<CrupdateBiolinkFormValues>\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (props: CrupdateBiolinkFormValues) => createLinkGroup(props),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Biolink created')));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('biolink'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction createLinkGroup(\n  payload: CrupdateBiolinkFormValues\n): Promise<Response> {\n  return apiClient\n    .post('biolink', buildLinkeablePayload<CrupdateBiolinkPayload>(payload))\n    .then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {CrupdateBiolinkFormValues} from './crupdate-biolink-form-values';\nimport {useForm} from 'react-hook-form';\nimport {useCreateBiolink} from '../requests/use-create-biolink';\nimport {nanoid} from 'nanoid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\nimport {LinkDomainSelect} from '@app/dashboard/links/forms/link-domain-select';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\n\nexport function CreateBiolinkDialog() {\n  const navigate = useNavigate();\n  const {formId, close} = useDialogContext();\n  const {custom_domains} = useSettings();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const form = useForm<CrupdateBiolinkFormValues>({\n    defaultValues: {\n      active: true,\n      hash: nanoid(6),\n      domain_id: custom_domains?.allow_all_option ? undefined : 0,\n    },\n  });\n  const createBiolink = useCreateBiolink(form);\n\n  const handleSubmit = async (values: CrupdateBiolinkFormValues) => {\n    const isValid = await verify();\n    if (isValid) {\n      createBiolink.mutate(values, {\n        onSuccess: response => {\n          close();\n          navigate(`${response.biolink.id}/edit`);\n        },\n      });\n    }\n  };\n\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Create biolink\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onBeforeSubmit={() => {\n            // hook form won't clear errors for fields that are not bound to input\n            form.clearErrors('hash');\n          }}\n          onSubmit={handleSubmit}\n        >\n          <div className=\"mb-24\">\n            <FormTextField\n              name=\"name\"\n              label={<Trans message=\"Name\" />}\n              minLength={3}\n              className=\"mb-8\"\n              autoFocus\n            />\n            <AliasField form={form} name=\"hash\" />\n          </div>\n          <LinkDomainSelect name=\"domain_id\" className=\"mb-24\" />\n          <FormTextField\n            name=\"description\"\n            className=\"mb-24\"\n            label={<Trans message=\"Description\" />}\n            inputElementType=\"textarea\"\n            rows={2}\n          />\n          <FormSwitch\n            name=\"active\"\n            description={\n              <Trans message=\"Whether this biolink is viewable publicly.\" />\n            }\n            className=\"mb-24\"\n          >\n            <Trans message=\"Active\" />\n          </FormSwitch>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createBiolink.isLoading || isVerifying}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport React, {useEffect, useMemo} from 'react';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport marketing from './marketing.svg';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {BiolinksDatatableColumns} from './biolinks-datatable-columns';\nimport {BiolinksDatatableFilters} from './biolinks-datatable-filters';\nimport {CreateBiolinkDialog} from './crupdate/create-biolink-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface LinkGroupsDatatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function BioLinksDatatablePage({\n  forCurrentUser,\n}: LinkGroupsDatatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? BiolinksDatatableColumns\n      : BiolinksDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? BiolinksDatatableFilters\n      : BiolinksDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, []);\n\n  const userId = forCurrentUser ? user?.id : '';\n  return (\n    <DataTablePage\n      endpoint=\"biolink\"\n      queryParams={{\n        userId,\n        withCount: 'links',\n        with: 'user,domain',\n        workspaceId,\n      }}\n      title={<Trans message=\"Biolinks\" />}\n      headerContent={<InfoTrigger />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"biolink\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={marketing}\n          title={<Trans message=\"No biolinks have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching biolinks\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      title={<Trans message=\"Link in bio\" />}\n      body={\n        <Trans message=\"Offer multiple choices to your followers when they click on your Biolink. Share all your Social Media profiles, videos, songs, articles and other important links with just one url.\" />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"biolink\" action=\"create\">\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"New biolink\" />\n        </DataTableAddItemButton>\n        <CreateBiolinkDialog />\n      </DialogTrigger>\n    </PermissionAwareButton>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {useParams} from 'react-router-dom';\n\nexport interface FetchBiolinkResponse extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface FetchBiolinkParams {\n  loadContent?: boolean;\n}\n\nexport const biolinkQueryKey = (\n  biolinkId: string | number,\n  params?: FetchBiolinkParams\n) => {\n  return PaginatedResourcesQueryKey(\n    `biolink/${biolinkId}`,\n    params as Record<string, string | boolean> | undefined\n  );\n};\n\nexport function useBiolink() {\n  const {biolinkId} = useParams();\n  return useQuery(biolinkQueryKey(biolinkId!), () => fetchBiolink(biolinkId!), {\n    initialData: seedInitialDataFromPaginatedList(biolinkId!),\n  });\n}\n\nexport function fetchBiolink(\n  biolinkId: number | string,\n  params?: FetchBiolinkParams\n): Promise<FetchBiolinkResponse> {\n  return apiClient\n    .get(`biolink/${biolinkId}`, {params})\n    .then(response => response.data);\n}\n\nfunction seedInitialDataFromPaginatedList(biolinkId: number | string) {\n  const biolink = queryClient\n    .getQueryData<PaginatedBackendResponse<Biolink>>(\n      PaginatedResourcesQueryKey('biolink'),\n      {exact: false}\n    )\n    ?.pagination?.data.find(link => link.id === +biolinkId);\n  return biolink ? {biolink} : undefined;\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport clsx from 'clsx';\nimport {useBiolink} from '@app/dashboard/biolink/biolinks-datatable-page/requests/use-biolink';\n\nexport function BiolinkClicksReportPage() {\n  const navigate = useNavigate();\n  const {biolinkId} = useParams();\n  const query = useBiolink();\n  const biolink = query.data?.biolink;\n\n  return (\n    <ClicksReportPageLayout\n      model={`biolink=${biolinkId}`}\n      title={\n        <Breadcrumb size=\"xl\" className={clsx(query.isLoading && 'invisible')}>\n          <BreadcrumbItem\n            onSelected={() => {\n              navigate('..', {relative: 'path'});\n            }}\n          >\n            <Trans message=\"Biolinks\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem className=\"first-letter:capitalize\">\n            <Trans message=\"“:name“ clicks\" values={{name: biolink?.name}} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n      }\n      actions={\n        biolink && (\n          <ShareLinkButton\n            className=\"flex-shrink-0 text-muted\"\n            link={biolink}\n          />\n        )\n      }\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const WidgetsIcon = createSvgIcon(\n  <path d=\"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z\" />\n, 'WidgetsOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AnimationIcon = createSvgIcon(\n  <path d=\"M15 2c-2.71 0-5.05 1.54-6.22 3.78-1.28.67-2.34 1.72-3 3C3.54 9.95 2 12.29 2 15c0 3.87 3.13 7 7 7 2.71 0 5.05-1.54 6.22-3.78 1.28-.67 2.34-1.72 3-3C20.46 14.05 22 11.71 22 9c0-3.87-3.13-7-7-7zM9 20c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.87 3.13 7 7 7-.84.63-1.88 1-3 1zm3-3c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.86 3.13 6.99 7 7-.84.63-1.88 1-3 1zm4.7-3.3c-.53.19-1.1.3-1.7.3-2.76 0-5-2.24-5-5 0-.6.11-1.17.3-1.7.53-.19 1.1-.3 1.7-.3 2.76 0 5 2.24 5 5 0 .6-.11 1.17-.3 1.7zM19 12c0-3.86-3.13-6.99-7-7 .84-.63 1.87-1 3-1 2.76 0 5 2.24 5 5 0 1.12-.37 2.16-1 3z\" />\n, 'AnimationOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ShortcutIcon = createSvgIcon(\n  <path d=\"m15 5-1.41 1.41L15 7.83 17.17 10H8c-2.76 0-5 2.24-5 5v4h2v-4c0-1.65 1.35-3 3-3h9.17L15 14.17l-1.41 1.41L15 17l6-6-6-6z\" />\n, 'ShortcutOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreTimeIcon = createSvgIcon(\n  [<path d=\"M10 8v6l4.7 2.9.8-1.2-4-2.4V8z\" key=\"0\" />,<path d=\"M17.92 12c.05.33.08.66.08 1 0 3.9-3.1 7-7 7s-7-3.1-7-7 3.1-7 7-7c.7 0 1.37.1 2 .29V4.23c-.64-.15-1.31-.23-2-.23-5 0-9 4-9 9s4 9 9 9 9-4 9-9c0-.34-.02-.67-.06-1h-2.02z\" key=\"1\" />,<path d=\"M20 5V2h-2v3h-3v2h3v3h2V7h3V5z\" key=\"2\" />,]\n, 'MoreTimeOutlined');\n","import {ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface SectionHelperProps {\n  title?: ReactNode;\n  description?: ReactNode;\n  actions?: ReactNode;\n  color?: 'positive' | 'danger' | 'warning' | 'primary';\n  className?: string;\n}\nexport function SectionHelper({\n  title,\n  description,\n  actions,\n  color = 'primary',\n  className,\n}: SectionHelperProps) {\n  return (\n    <div\n      className={clsx(\n        className,\n        'p-10 rounded border-l-4',\n        color === 'positive' && 'bg-positive/focus border-l-positive',\n        color === 'warning' && 'bg-warning/focus border-l-warning',\n        color === 'danger' && 'bg-danger/focus border-l-danger',\n        color === 'primary' && 'bg-primary/focus border-l-primary'\n      )}\n    >\n      {title && <div className=\"text-sm mb-4 font-medium\">{title}</div>}\n      {description && <div className=\"text-sm\">{description}</div>}\n      {actions && <div className=\"mt-14\">{actions}</div>}\n    </div>\n  );\n}\n","import create from 'zustand';\nimport {immer} from 'zustand/middleware/immer';\nimport {Biolink, BiolinkAppearance} from '@app/dashboard/biolink/biolink';\n\ninterface BiolinkEditorState {\n  appearance: BiolinkAppearance | null;\n  appearanceIsDirty: boolean;\n  setAppearanceIsDirty: (isDirty: boolean) => void;\n  biolink: Omit<Biolink, 'appearance'> | null;\n  updateAppearance: (payload: BiolinkAppearance) => void;\n  setBiolink: (biolink: Biolink) => void;\n}\n\nexport const useBiolinkEditorStore = create<BiolinkEditorState>()(\n  immer((set, get) => ({\n    appearance: null,\n    appearanceIsDirty: false,\n    setAppearanceIsDirty: (isDirty: boolean) => {\n      set(state => {\n        state.appearanceIsDirty = isDirty;\n      });\n    },\n    biolink: null,\n    setBiolink: biolink => {\n      set(state => {\n        state.biolink = biolink;\n        // don't override user appearance changes in the editor when biolink reloads from backend\n        if (!state.appearanceIsDirty) {\n          state.appearance = biolink.appearance?.config || null;\n        }\n      });\n    },\n    updateAppearance(payload: BiolinkAppearance) {\n      set(state => {\n        state.appearanceIsDirty = true;\n        state.appearance = {\n          ...state.appearance,\n          ...payload,\n        };\n      });\n    },\n  }))\n);\n\nexport function biolinkEditorState() {\n  return useBiolinkEditorStore.getState();\n}\n","import {useParams} from 'react-router-dom';\nimport {useQuery} from '@tanstack/react-query';\nimport {\n  biolinkQueryKey,\n  fetchBiolink,\n  FetchBiolinkResponse,\n} from '@app/dashboard/biolink/biolinks-datatable-page/requests/use-biolink';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {queryClient} from '@common/http/query-client';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\nconst params = {\n  loadContent: true,\n};\n\nexport function useEditorBiolink() {\n  const biolinkId = useEditorBiolinkId();\n  const biolink = useBiolinkEditorStore(s => s.biolink);\n  const query = useQuery(\n    biolinkQueryKey(biolinkId, params),\n    () => fetchBiolink(biolinkId, params),\n    {\n      onSuccess: response => {\n        biolinkEditorState().setBiolink(response.biolink);\n      },\n    }\n  );\n\n  return {isLoading: query.isLoading, biolink, status: query.status, biolinkId};\n}\n\nexport function useEditorBiolinkId(): number {\n  const {biolinkId} = useParams();\n  return +biolinkId!;\n}\n\nexport function setEditorBiolink(biolink: Biolink) {\n  // \"onSuccess\" is not called for some reason when using \"setQueryData\"\n  biolinkEditorState().setBiolink(biolink);\n  queryClient.setQueryData<FetchBiolinkResponse>(\n    biolinkQueryKey(biolink.id, params),\n    {biolink}\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {\n  Biolink,\n  BiolinkLink,\n  BiolinkWidget,\n} from '@app/dashboard/biolink/biolink';\nimport {\n  setEditorBiolink,\n  useEditorBiolinkId,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  item: BiolinkLink | BiolinkWidget;\n  values: BiolinkItemPayload;\n}\n\nexport function useUpdateBiolinkContentItem() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation(\n    ({item, values}: Payload) => updateItem(biolinkId, item, values),\n    {\n      onSuccess: response => {\n        setEditorBiolink(response.biolink);\n      },\n      onError: err =>\n        showHttpErrorToast(err, message('Could not update content item')),\n    }\n  );\n}\n\nfunction updateItem(\n  biolinkId: number,\n  item: BiolinkLink | BiolinkWidget,\n  editorPayload: BiolinkItemPayload\n): Promise<Response> {\n  const backendPayload: BiolinkItemPayload & {\n    item_id: number;\n    item_model_type: string;\n  } = {\n    ...editorPayload,\n    item_id: item.id,\n    item_model_type: item.model_type,\n  };\n  return apiClient\n    .put(`biolink/${biolinkId}/content-item`, backendPayload)\n    .then(r => r.data);\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {FormDatePicker} from '@common/ui/forms/input-field/date/date-picker/date-picker';\nimport {SectionHelper} from '@common/ui/section-helper';\nimport {Fragment, ReactNode, useMemo} from 'react';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\nimport {parseAbsolute} from '@internationalized/date';\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkScheduleDialogProps {\n  link: BiolinkLink;\n}\nexport function LinkScheduleDialog({link}: LinkScheduleDialogProps) {\n  const now = useCurrentDateTime();\n  const timezone = useUserTimezone();\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      activates_at: link.activates_at,\n      expires_at: link.expires_at,\n    },\n  });\n  const updateItem = useUpdateBiolinkContentItem();\n  const activationDate = form.watch('activates_at');\n\n  const expirationMinDate = useMemo(() => {\n    if (activationDate) {\n      return parseAbsolute(activationDate, timezone);\n    }\n    return now;\n  }, [activationDate, now, timezone]);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Schedule\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Schedule updated'));\n                  close();\n                },\n              }\n            );\n          }}\n        >\n          <FormDatePicker\n            name=\"activates_at\"\n            min={now}\n            className=\"mb-24\"\n            label={<Trans message=\"Start date\" />}\n            showCalendarFooter\n          />\n          <FormDatePicker\n            name=\"expires_at\"\n            min={expirationMinDate}\n            className=\"mb-24\"\n            label={<Trans message=\"End date\" />}\n            showCalendarFooter\n          />\n        </Form>\n        <InfoSection />\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateItem.isLoading || !form.formState.isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction InfoSection() {\n  const values = {\n    b: (parts: ReactNode) => <span className=\"font-bold\">{parts}</span>,\n  };\n\n  return (\n    <SectionHelper\n      description={\n        <Fragment>\n          <div>\n            <Trans\n              message=\"Leave <b>start date</b> blank to display this link immediately.\"\n              values={values}\n            />\n          </div>\n          <div>\n            <Trans\n              message=\"Leave <b>end date</b> blank to display this link forever.\"\n              values={values}\n            />\n          </div>\n        </Fragment>\n      }\n    />\n  );\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {FormDatePicker} from '@common/ui/forms/input-field/date/date-picker/date-picker';\nimport {SectionHelper} from '@common/ui/section-helper';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkScheduleDialogProps {\n  link: BiolinkLink;\n}\nexport function LeapLinkDialog({link}: LinkScheduleDialogProps) {\n  const now = useCurrentDateTime();\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      leap_until: link.leap_until,\n    },\n  });\n  const isDirty = form.formState.isDirty;\n  const updateItem = useUpdateBiolinkContentItem();\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Redirect link\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Redirect link updated'));\n                  close();\n                },\n              }\n            );\n          }}\n        >\n          <FormDatePicker\n            required\n            name=\"leap_until\"\n            min={now}\n            className=\"mb-24\"\n            label={<Trans message=\"Redirect until\" />}\n            showCalendarFooter\n          />\n        </Form>\n        <InfoSection />\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={!isDirty || updateItem.isLoading}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction InfoSection() {\n  return (\n    <SectionHelper\n      description={\n        <Trans message=\"Send all visitors straight to this link, instead of your Biolink, until the specified date. After that date, Biolink will resume to showing normally.\" />\n      }\n    />\n  );\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkThumbnailDialogProps {\n  link: BiolinkLink;\n}\nexport function LinkThumbnailDialog({link}: LinkThumbnailDialogProps) {\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      image: link.image,\n    },\n  });\n  const updateItem = useUpdateBiolinkContentItem();\n  const isDirty = form.formState.isDirty;\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Link thumbnail\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Thumbnail updated'));\n                  close();\n                },\n              }\n            );\n          }}\n        >\n          <FileUploadProvider>\n            <FormImageSelector\n              showRemoveButton\n              name=\"image\"\n              diskPrefix=\"links\"\n            />\n          </FileUploadProvider>\n        </Form>\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateItem.isLoading || !isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","export const LinkAnimationList = [\n  'none',\n  'bounce',\n  'flash',\n  'pulse',\n  'rubberBand',\n  'shakeX',\n  'shakeY',\n  'headShake',\n  'swing',\n  'tada',\n  'wobble',\n  'jello',\n  'heartBeat',\n];\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm, useFormContext} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {LinkAnimationList} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-list';\nimport {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {SectionHelper} from '@common/ui/section-helper';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkAnimationDialogProps {\n  link: BiolinkLink;\n}\nexport function LinkAnimationDialog({link}: LinkAnimationDialogProps) {\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      animation: link.animation,\n    },\n  });\n  const isDirty = form.formState.isDirty;\n  const updateItem = useUpdateBiolinkContentItem();\n\n  useEffect(() => {\n    import('./animate.min.css');\n  }, []);\n\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Link animation\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Animation updated'));\n                  close();\n                },\n              }\n            );\n          }}\n        >\n          <SectionHelper\n            className=\"mb-24\"\n            description={\n              <Trans\n                message=\"Add animation to draw attention to this link. :br Selected animation will repeat five times by default.\"\n                values={{br: <br />}}\n              />\n            }\n          />\n          <div className=\"grid gap-14 grid-cols-[repeat(auto-fill,minmax(95px,1fr))]\">\n            {LinkAnimationList.map((animation, index) => (\n              <AnimationItem key={index} animationName={animation} />\n            ))}\n          </div>\n        </Form>\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateItem.isLoading || !isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface AnimationItemProps {\n  animationName: string;\n}\nfunction AnimationItem({animationName}: AnimationItemProps) {\n  const [isAnimating, setIsAnimating] = useState(false);\n  const {watch, setValue} = useFormContext<BiolinkItemPayload>();\n  const animation: string | null =\n    animationName === 'none' ? null : animationName;\n  const selectedAnimation = watch('animation');\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => {\n        setValue('animation', animation, {shouldDirty: true});\n      }}\n      onPointerEnter={() => {\n        setIsAnimating(true);\n      }}\n      onPointerLeave={() => {\n        setIsAnimating(false);\n      }}\n      className={clsx(\n        'border border-2 px-10 h-64 uppercase font-medium rounded flex items-center justify-center animate__animated',\n        isAnimating && `animate__${animationName}`,\n        selectedAnimation === animation && 'border-primary'\n      )}\n    >\n      {animationName}\n    </button>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DragIndicatorIcon = createSvgIcon(\n  <path d=\"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'DragIndicatorOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {\n  Biolink,\n  BiolinkLink,\n  BiolinkWidget,\n} from '@app/dashboard/biolink/biolink';\nimport {\n  setEditorBiolink,\n  useEditorBiolinkId,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  item: BiolinkLink | BiolinkWidget;\n}\n\nexport function useDetachBiolinkContentItem() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation((payload: Payload) => detachItem(biolinkId, payload), {\n    onSuccess: response => {\n      setEditorBiolink(response.biolink);\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction detachItem(biolinkId: number, payload: Payload): Promise<Response> {\n  return apiClient\n    .post(`biolink/${biolinkId}/content-item/detach`, payload)\n    .then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {Trans} from '@common/i18n/trans';\nimport {BiolinkLink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {useDetachBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-detach-biolink-content-item';\n\ninterface DetachItemButtonProps {\n  item: BiolinkLink | BiolinkWidget;\n}\nexport function DetachContentItemButton({item}: DetachItemButtonProps) {\n  const detachItem = useDetachBiolinkContentItem();\n  return (\n    <DialogTrigger type=\"modal\">\n      <IconButton\n        className=\"text-muted flex-shrink-0\"\n        disabled={detachItem.isLoading}\n      >\n        <CloseIcon />\n      </IconButton>\n      <ConfirmationDialog\n        isDanger\n        onConfirm={() => {\n          detachItem.mutate({item});\n        }}\n        title={<Trans message=\"Remove item\" />}\n        body={\n          <Trans message=\"Are you sure you want to remove this item from the biolink?\" />\n        }\n        confirm={<Trans message=\"Remove\" />}\n      />\n    </DialogTrigger>\n  );\n}\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        // Compute the offset that the preview will appear under the mouse.\n        // If possible, this is based on the point the user clicked on the target.\n        // If the preview is much smaller, then just use the center point of the preview.\n        const size = node.getBoundingClientRect();\n        const rect = e.currentTarget.getBoundingClientRect();\n        let x = e.clientX - rect.x;\n        let y = e.clientY - rect.y;\n        if (x > size.width || y > size.height) {\n          x = size.width / 2;\n          y = size.height / 2;\n        }\n\n        // Rounding height to an even number prevents blurry preview seen on some screens\n        const height = 2 * Math.round(rect.height / 2);\n        node.style.height = `${height}px`;\n\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '../../../uploads/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      if (typeof item.webkitGetAsEntry === 'function') {\n        const entry: FileSystemEntry | null = item.webkitGetAsEntry();\n        if (!entry) continue;\n\n        if (entry.isFile) {\n          if (entry.name === '.DS_Store') continue;\n          yield new UploadedFile(item.getAsFile()!, entry.fullPath);\n        } else if (entry.isDirectory) {\n          yield* getEntries(entry as FileSystemDirectoryEntry);\n        }\n      } else {\n        const file = item.getAsFile();\n        if (!file || file.name === '.DS_Store') continue;\n        yield new UploadedFile(file, (item as any).fullPath);\n      }\n    }\n  }\n}\n\nasync function* getEntries(item: FileSystemDirectoryEntry): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntries(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '../../../utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<File[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepted drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    return !!(\n      draggable?.type &&\n      ref.current !== draggable.ref?.current &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {clamp} from '../number/clamp';\n\nexport function moveItemInArray<T = any>(\n  array: T[],\n  fromIndex: number,\n  toIndex: number\n): T[] {\n  const from = clamp(fromIndex, 0, array.length - 1);\n  const to = clamp(toIndex, 0, array.length - 1);\n\n  if (from === to) {\n    return array;\n  }\n\n  const target = array[from];\n  const delta = to < from ? -1 : 1;\n\n  for (let i = from; i !== to; i += delta) {\n    array[i] = array[i + delta];\n  }\n\n  array[to] = target;\n\n  return array;\n}\n","export function moveItemInNewArray<T>(\n  array: T[],\n  from: number,\n  to: number\n): T[] {\n  const newArray = array.slice();\n  newArray.splice(\n    to < 0 ? newArray.length + to : to,\n    0,\n    newArray.splice(from, 1)[0]\n  );\n\n  return newArray;\n}\n","import {DraggableId, DragPreviewRenderer, useDraggable} from './use-draggable';\nimport {useDroppable} from './use-droppable';\nimport {RefObject} from 'react';\nimport {mergeProps} from '@react-aria/utils';\nimport {moveItemInArray} from '@common/utils/array/move-item-in-array';\nimport {droppables} from './drag-state';\nimport {moveItemInNewArray} from '@common/utils/array/move-item-in-new-array';\n\nlet sortSession: null | {\n  // items in this list will be moved when user is sorting\n  sortables: DraggableId[];\n  // sortable user started dragging to start this session\n  activeSortable: DraggableId;\n  activeIndex: number;\n  finalIndex: number;\n} = null;\n\nexport interface UseSortableProps {\n  item: DraggableId;\n  items: DraggableId[];\n  onSortEnd?: (oldIndex: number, newIndex: number) => void;\n  ref: RefObject<HTMLElement>;\n  type: string;\n  preview?: RefObject<DragPreviewRenderer>;\n  disabled?: boolean;\n}\nexport function useSortable({\n  item,\n  items,\n  type,\n  ref,\n  onSortEnd,\n  preview,\n  disabled,\n}: UseSortableProps) {\n  const {draggableProps, dragHandleRef} = useDraggable({\n    id: item,\n    ref,\n    type,\n    preview,\n    disabled,\n    onDragStart: () => {\n      sortSession = {\n        sortables: [...items],\n        activeSortable: item,\n        activeIndex: items.indexOf(item),\n        finalIndex: items.indexOf(item),\n      };\n\n      addSortStyles();\n    },\n    onDragEnd: () => {\n      if (!sortSession) return;\n\n      removeSortStyles();\n      onSortEnd?.(sortSession.activeIndex, sortSession.finalIndex);\n      sortSession = null;\n    },\n    getData: () => {},\n  });\n\n  const {droppableProps} = useDroppable({\n    id: item,\n    ref,\n    types: [type],\n    disabled,\n    onDragEnter: () => {\n      if (!sortSession) return;\n\n      const overIndex = sortSession.sortables.indexOf(item);\n      const oldIndex = sortSession.sortables.indexOf(\n        sortSession.activeSortable\n      );\n\n      moveItemInArray(sortSession.sortables, oldIndex, overIndex);\n      const rects = sortSession.sortables.map(s => droppables.get(s)?.rect);\n\n      sortSession.sortables.forEach((sortable, index) => {\n        if (!sortSession) return;\n\n        const newRects = moveItemInNewArray(\n          rects,\n          overIndex,\n          sortSession.activeIndex\n        );\n        const oldRect = rects[index];\n        const newRect = newRects[index];\n        const sortableTarget = droppables.get(sortable);\n\n        if (sortableTarget?.ref.current && newRect && oldRect) {\n          const x = newRect.left - oldRect.left;\n          const y = newRect.top - oldRect.top;\n          sortableTarget.ref.current.style.transform = `translate3d(${x}px, ${y}px, 0)`;\n        }\n      });\n\n      sortSession.finalIndex = overIndex;\n    },\n  });\n\n  return {\n    sortableProps: {...mergeProps(draggableProps, droppableProps)},\n    dragHandleRef,\n  };\n}\n\nconst transition = 'transform 0.2s cubic-bezier(0.2, 0, 0, 1)';\n\nfunction addSortStyles() {\n  if (!sortSession) return;\n  sortSession.sortables.forEach((sortable, index) => {\n    const droppable = droppables.get(sortable);\n    if (!droppable?.ref.current) return;\n\n    droppable.ref.current.style.transition = transition;\n\n    if (sortSession?.activeIndex === index) {\n      droppable.ref.current.style.opacity = '0.4';\n    }\n  });\n}\n\n// clear any styles and transforms applied to sortables during sorting\nfunction removeSortStyles() {\n  if (!sortSession) return;\n  sortSession.sortables.forEach(sortable => {\n    const droppable = droppables.get(sortable);\n    if (droppable?.ref.current) {\n      droppable.ref.current.style.transform = '';\n      droppable.ref.current.style.transition = '';\n      droppable.ref.current.style.opacity = '';\n      droppable.ref.current.style.zIndex = '';\n    }\n  });\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {moveItemInNewArray} from '@common/utils/array/move-item-in-new-array';\nimport {biolinkEditorState} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {useEditorBiolinkId} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  oldIndex: number;\n  newIndex: number;\n  // id of widget that should be pinned to top\n  widgetToPin?: number;\n}\n\nexport function useSortBiolinkContent() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation((payload: Payload) => sortContent(biolinkId, payload));\n}\n\nfunction sortContent(\n  biolinkId: number,\n  {oldIndex, newIndex, widgetToPin}: Payload\n): Promise<Response> {\n  const biolink = biolinkEditorState().biolink!;\n  const content = moveItemInNewArray(biolink.content, oldIndex, newIndex);\n  if (widgetToPin) {\n    content[newIndex] = {...content[newIndex], pinned: 'top'};\n  }\n  biolinkEditorState().setBiolink({...biolink, content});\n\n  const order = content.map(item => ({\n    id: item.id,\n    model_type: item.model_type,\n  }));\n\n  return apiClient.post(`biolink/${biolinkId}/change-order`, {\n    order,\n    widgetToPin,\n  });\n}\n","import {DragIndicatorIcon} from '@common/icons/material/DragIndicator';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {Trans} from '@common/i18n/trans';\nimport {DetachContentItemButton} from '@app/dashboard/biolink/biolink-editor/content/detach-content-item-button';\nimport {ReactNode, useRef} from 'react';\nimport {\n  Biolink,\n  BiolinkLink,\n  BiolinkWidget,\n} from '@app/dashboard/biolink/biolink';\nimport {useSortable} from '@common/ui/interactions/dnd/use-sortable';\nimport {useSortBiolinkContent} from '@app/dashboard/biolink/biolink-editor/requests/use-sort-biolink-content';\nimport clsx from 'clsx';\n\ninterface BiolinkContentItemLayoutProps {\n  item?: BiolinkLink | BiolinkWidget;\n  biolink?: Biolink;\n  title?: ReactNode;\n  updateDialog?: ReactNode;\n  children: ReactNode;\n  actionRow?: ReactNode;\n}\nexport function BiolinkContentItemLayout({\n  item,\n  biolink,\n  title,\n  updateDialog,\n  children,\n  actionRow,\n}: BiolinkContentItemLayoutProps) {\n  const sortContent = useSortBiolinkContent();\n  const itemRef = useRef<HTMLDivElement>(null);\n  const sortDisabled = !item || item.pinned != null;\n\n  const {sortableProps, dragHandleRef} = useSortable({\n    item: item || 'noop',\n    items: biolink?.content || [],\n    type: 'biolinkEditorSortable',\n    ref: itemRef,\n    onSortEnd: (oldIndex, newIndex) => {\n      sortContent.mutate({oldIndex, newIndex});\n    },\n    disabled: sortDisabled,\n  });\n\n  return (\n    <div\n      className=\"rounded-lg shadow border flex items-stretch mb-20 bg-paper h-172\"\n      ref={itemRef}\n      {...sortableProps}\n    >\n      <button\n        type=\"button\"\n        className={clsx(\n          'text-muted border-r flex-shrink-0 px-10',\n          !sortDisabled && 'hover:text-primary'\n        )}\n        disabled={sortDisabled}\n        ref={dragHandleRef}\n      >\n        <DragIndicatorIcon />\n      </button>\n      <div className=\"p-24 flex-auto min-w-0\">\n        <div className=\"flex items-center\">\n          {title && (\n            <div className=\"font-medium mb-4 whitespace-nowrap overflow-hidden overflow-ellipsis flex-auto mr-auto\">\n              {title}\n            </div>\n          )}\n          {updateDialog && (\n            <DialogTrigger type=\"modal\">\n              <Button\n                className=\"flex-shrink-0 ml-20\"\n                variant=\"text\"\n                color=\"primary\"\n                startIcon={<EditIcon />}\n              >\n                <Trans message=\"Edit\" />\n              </Button>\n              {updateDialog}\n            </DialogTrigger>\n          )}\n          {biolink && item && <DetachContentItemButton item={item} />}\n        </div>\n        <div className=\"mb-20\">{children}</div>\n        {actionRow}\n      </div>\n    </div>\n  );\n}\n","import {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {Trans} from '@common/i18n/trans';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {Biolink, BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Button} from '@common/ui/buttons/button';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ImageIcon} from '@common/icons/material/Image';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {AnimationIcon} from '@common/icons/material/Animation';\nimport {ShortcutIcon} from '@common/icons/material/Shortcut';\nimport {MoreTimeIcon} from '@common/icons/material/MoreTime';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {LinkScheduleDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-schedule-dialog';\nimport {LeapLinkDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/leap-link-dialog';\nimport {UpdateLinkDialog} from '@app/dashboard/links/dialogs/update-link-dialog';\nimport {HidableLinkSettingsField} from '@app/dashboard/links/forms/link-settings-form';\nimport {LinkThumbnailDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-thumbnail-dialog';\nimport {LinkAnimationDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-dialog';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\nimport {BiolinkContentItemLayout} from '@app/dashboard/biolink/biolink-editor/content/biolink-content-item-layout';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {Link} from 'react-router-dom';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\nimport {\n  setEditorBiolink,\n  useEditorBiolinkId,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {useMediaQuery} from '@common/utils/hooks/use-media-query';\n\nexport const linkDialogHiddenFields: HidableLinkSettingsField[] = [\n  'groups',\n  'seo',\n  'enabled',\n  'alias',\n];\n\ninterface LinkContentItemProps {\n  item: BiolinkLink;\n  biolink: Biolink;\n}\nexport function LinkContentItem({item: link, biolink}: LinkContentItemProps) {\n  const biolinkId = useEditorBiolinkId();\n  const endpoint = `biolink/${biolinkId}/link/${link.id}`;\n\n  return (\n    <BiolinkContentItemLayout\n      item={link}\n      biolink={biolink}\n      title={link.name}\n      actionRow={<ActionRow link={link} biolink={biolink} />}\n      updateDialog={\n        <UpdateLinkDialog\n          endpoint={endpoint}\n          link={link}\n          showButtonLabelField\n          hiddenFields={linkDialogHiddenFields}\n          onSuccess={(response: {biolink: Biolink}) => {\n            setEditorBiolink(response.biolink);\n          }}\n        />\n      }\n    >\n      <div className=\"flex items-center gap-6\">\n        <RemoteFavicon url={link.long_url} />\n        <a\n          href={link.short_url}\n          target=\"_blank\"\n          className=\"hover:underline whitespace-nowrap text-muted text-sm \"\n          rel=\"noreferrer\"\n        >\n          {removeProtocol(link.long_url)}\n        </a>\n      </div>\n    </BiolinkContentItemLayout>\n  );\n}\n\ninterface ActionRowProps {\n  link: BiolinkLink;\n  biolink: Biolink;\n}\nfunction ActionRow({link, biolink}: ActionRowProps) {\n  const updateItem = useUpdateBiolinkContentItem();\n\n  return (\n    <div className=\"flex md:gap-24 md:justify-between h-42 items-center\">\n      <div className=\"flex items-center text-muted\">\n        <Switch\n          checked={link.active}\n          disabled={link.active_locked || updateItem.isLoading}\n          onChange={() => {\n            updateItem.mutate({\n              item: link,\n              values: {active: !link.active},\n            });\n          }}\n        />\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Change thumbnail\" />}>\n            <IconButton className=\"ml-10\" color={link.image ? 'primary' : null}>\n              <ImageIcon />\n            </IconButton>\n          </Tooltip>\n          <LinkThumbnailDialog link={link} />\n        </DialogTrigger>\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Animation\" />}>\n            <IconButton color={link.animation ? 'primary' : null}>\n              <AnimationIcon />\n            </IconButton>\n          </Tooltip>\n          <LinkAnimationDialog link={link} />\n        </DialogTrigger>\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Redirect\" />}>\n            <IconButton color={link.leap_until ? 'primary' : null}>\n              <ShortcutIcon />\n            </IconButton>\n          </Tooltip>\n          <LeapLinkDialog link={link} />\n        </DialogTrigger>\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Schedule\" />}>\n            <IconButton\n              color={link.expires_at || link.activates_at ? 'primary' : null}\n            >\n              <MoreTimeIcon />\n            </IconButton>\n          </Tooltip>\n          <LinkScheduleDialog link={link} />\n        </DialogTrigger>\n      </div>\n      <ClicksButton link={link} />\n    </div>\n  );\n}\n\ninterface ClicksButtonProps {\n  link: BiolinkLink;\n}\nfunction ClicksButton({link}: ClicksButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const isVerySmallScreen = useMediaQuery('(max-width: 380px)');\n  if (isVerySmallScreen) {\n    return null;\n  }\n\n  const clicksReportPath = `../../../../links/${link.id}`;\n\n  const button = isMobile ? (\n    <IconButton\n      className=\"text-muted flex-shrink-0\"\n      elementType={Link}\n      to={clicksReportPath}\n      relative=\"path\"\n    >\n      <BarChartIcon />\n    </IconButton>\n  ) : (\n    <Button\n      variant=\"text\"\n      className=\"text-muted\"\n      startIcon={<BarChartIcon />}\n      elementType={Link}\n      to={clicksReportPath}\n      relative=\"path\"\n    >\n      <Trans message=\":count clicks\" values={{count: link.clicks_count}} />\n    </Button>\n  );\n\n  return (\n    <Tooltip\n      label={\n        <Trans\n          message=\":count lifetime clicks\"\n          values={{count: link.clicks_count}}\n        />\n      }\n    >\n      {button}\n    </Tooltip>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {PaginatedResourcesQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CrupdateBiolinkFormValues} from '@app/dashboard/biolink/biolinks-datatable-page/crupdate/crupdate-biolink-form-values';\nimport {\n  buildLinkeablePayload,\n  CrupdateLinkeablePayload,\n} from '@app/dashboard/links/utils/build-linkeable-payload';\n\nexport interface CrupdateBiolinkPayload\n  extends Omit<CrupdateBiolinkFormValues, 'utm' | 'groups' | 'pixels' | 'tags'>,\n    CrupdateLinkeablePayload {}\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdateBiolink(\n  form: UseFormReturn<CrupdateBiolinkFormValues>,\n  biolinkId: number\n) {\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: CrupdateBiolinkFormValues) => updateBiolink(biolinkId, payload),\n    {\n      onSuccess: () => {\n        toast.positive(trans(message('Biolink updated')));\n        queryClient.invalidateQueries(PaginatedResourcesQueryKey('biolink'));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction updateBiolink(\n  biolinkId: number,\n  payload: CrupdateBiolinkFormValues\n): Promise<Response> {\n  return apiClient\n    .put(\n      `biolink/${biolinkId}`,\n      buildLinkeablePayload<CrupdateBiolinkPayload>(payload)\n    )\n    .then(r => r.data);\n}\n","import {\n  HidableLinkSettingsField,\n  LinkSettingsForm,\n} from '@app/dashboard/links/forms/link-settings-form';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {useForm} from 'react-hook-form';\nimport {CrupdateBiolinkFormValues} from '@app/dashboard/biolink/biolinks-datatable-page/crupdate/crupdate-biolink-form-values';\nimport {Form} from '@common/ui/forms/form';\nimport {Trans} from '@common/i18n/trans';\nimport {buildLinkeableDefaultFormValues} from '@app/dashboard/links/utils/build-linkeable-default-form-values';\nimport {useUpdateBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink';\nimport {Button} from '@common/ui/buttons/button';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {useEditorBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\n\nconst hiddenLinkSettingsFields: HidableLinkSettingsField[] = [\n  'type',\n  'groups',\n  'title',\n];\n\nexport function BiolinkSettingsForm() {\n  const {biolink} = useEditorBiolink();\n\n  if (!biolink) {\n    return (\n      <div className=\"py-24\">\n        <FullPageLoader />\n      </div>\n    );\n  }\n\n  return <SettingsForm biolink={biolink} />;\n}\n\ninterface SettingsFormProps {\n  biolink: Biolink;\n}\nfunction SettingsForm({biolink}: SettingsFormProps) {\n  const form = useForm<CrupdateBiolinkFormValues>({\n    defaultValues: buildLinkeableDefaultFormValues(biolink),\n  });\n  const updateSettings = useUpdateBiolink(form, biolink.id);\n\n  return (\n    <Form\n      form={form}\n      onSubmit={values => {\n        updateSettings.mutate(values);\n      }}\n    >\n      <div className=\"mb-24\">\n        <Button\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          disabled={updateSettings.isLoading || !form.formState.isDirty}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </div>\n      <div className=\"mb-24\">\n        <FormTextField\n          name=\"name\"\n          label={<Trans message=\"Name\" />}\n          minLength={3}\n          className=\"mb-8\"\n          autoFocus\n        />\n        <AliasField form={form} name=\"hash\" />\n      </div>\n      <LinkSettingsForm\n        hiddenFields={hiddenLinkSettingsFields}\n        linkName={<Trans message=\"biolink\" />}\n      />\n    </Form>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {setEditorBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  widgetId?: number;\n  type: WidgetType;\n  position?: number;\n  config: BiolinkWidget['config'] | null;\n}\n\nexport function useCrupdateBiolinkWidget(\n  biolinkId: number,\n  form: UseFormReturn<BiolinkWidget['config']>\n) {\n  const {trans} = useTrans();\n  return useMutation((payload: Payload) => createWidget(biolinkId, payload), {\n    onSuccess: (response, payload) => {\n      toast.positive(\n        trans(\n          !payload.widgetId\n            ? message('Widget updated')\n            : message('Widget added')\n        )\n      );\n      setEditorBiolink(response.biolink);\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createWidget(\n  biolinkId: number,\n  {widgetId, ...payload}: Payload\n): Promise<Response> {\n  const request = widgetId\n    ? apiClient.put(`biolink/${biolinkId}/widget/${widgetId}`, payload)\n    : apiClient.post(`biolink/${biolinkId}/widget`, payload);\n  return request.then(r => r.data);\n}\n","import {useForm, UseFormReturn} from 'react-hook-form';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Form} from '@common/ui/forms/form';\nimport {Trans} from '@common/i18n/trans';\nimport {useCrupdateBiolinkWidget} from '@app/dashboard/biolink/biolink-editor/requests/use-crupdate-biolink-widget';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {ReactNode, useMemo} from 'react';\nimport {\n  WidgetList,\n  WidgetType,\n} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\n\ninterface CrupdateWidgetDialogProps {\n  biolink: Biolink;\n  type: WidgetType;\n  widget?: BiolinkWidget;\n  children?: ReactNode;\n  defaultValues?: BiolinkWidget['config'];\n  // allow children to transform or validate values before submitting\n  onSubmit?: (\n    values: BiolinkWidget['config'],\n    form: UseFormReturn<BiolinkWidget['config']>\n  ) => Promise<BiolinkWidget['config'] | undefined> | void;\n}\nexport function CrupdateWidgetDialog({\n  biolink,\n  widget,\n  type,\n  defaultValues,\n  children,\n  onSubmit,\n}: CrupdateWidgetDialogProps) {\n  const widgetListItem = WidgetList[type];\n\n  // make sure we are not using empty array or string for defaultValues, it will cause errors\n  const cleanedValues = useMemo(() => {\n    const values = widget?.config || defaultValues;\n    const isEmpty = (Array.isArray(values) && values.length === 0) || !values;\n    return isEmpty ? undefined : values;\n  }, [widget?.config, defaultValues]);\n\n  const form = useForm<BiolinkWidget['config']>({\n    defaultValues: cleanedValues,\n  });\n  const {formId, close} = useDialogContext();\n  const addWidget = useCrupdateBiolinkWidget(biolink.id, form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans {...widgetListItem.name} />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={async values => {\n            const transformedValues = onSubmit\n              ? await onSubmit(values, form)\n              : values;\n            // \"null\" is needed to clear selected value for widget (socials for example)\n            if (transformedValues === undefined) {\n              return;\n            }\n            addWidget.mutate(\n              {\n                widgetId: widget?.id,\n                config: transformedValues,\n                type,\n                // put socials widget at the end (when creating a new widget), everything else at the start\n                position:\n                  !widget && type === WidgetType.Socials\n                    ? biolink.content.length + 1\n                    : undefined,\n              },\n              {onSuccess: () => close()}\n            );\n          }}\n        >\n          {children}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={addWidget.isLoading || !form.formState.isDirty}\n        >\n          {widget ? <Trans message=\"Update\" /> : <Trans message=\"Add\" />}\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {WidgetDialogProps} from '@app/dashboard/biolink/biolink-editor/content/widgets/types/widget-dialog-props';\n\nexport interface ImageWidget extends BiolinkWidget {\n  type: WidgetType.Image;\n  config: {\n    url: string;\n    destinationUrl?: string;\n    type: 'default' | 'avatar';\n  };\n}\n\nexport function ImageWidgetDialog({\n  biolink,\n  widget,\n}: WidgetDialogProps<ImageWidget>) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Image}\n      widget={widget}\n    >\n      <FileUploadProvider>\n        <FormImageSelector name=\"url\" diskPrefix=\"widgets\" required />\n      </FileUploadProvider>\n      <FormSelect\n        className=\"my-24\"\n        name=\"type\"\n        label={<Trans message=\"Style\" />}\n        selectionMode=\"single\"\n      >\n        <Item value=\"default\">\n          <Trans message=\"Default\" />\n        </Item>\n        <Item value=\"avatar\">\n          <Trans message=\"Avatar\" />\n        </Item>\n      </FormSelect>\n      <FormTextField\n        placeholder={trans(message('Optional'))}\n        name=\"destinationUrl\"\n        type=\"url\"\n        label={<Trans message=\"Destination url\" />}\n        description={\n          <Trans message=\"Redirect user to this url when clicking the image.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","export default \"__VITE_ASSET__d8dc8345__\"","export default \"__VITE_ASSET__e5f73930__\"","export default \"__VITE_ASSET__7d34b331__\"","export default \"__VITE_ASSET__8639db0d__\"","export default \"__VITE_ASSET__a6ae8fd9__\"","export default \"__VITE_ASSET__f698adf6__\"","export default \"__VITE_ASSET__45316d66__\"","export default \"__VITE_ASSET__7d18ac0c__\"","export default \"__VITE_ASSET__956e4d3e__\"","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport getVideoId from 'get-video-id';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface YoutubeWidget extends BiolinkWidget {\n  type: WidgetType.Youtube;\n  config: {\n    url: string;\n  };\n}\n\ninterface YoutubeWidgetDialogProps {\n  biolink: Biolink;\n  widget?: YoutubeWidget;\n}\nexport function YoutubeWidgetDialog({\n  biolink,\n  widget,\n}: YoutubeWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Youtube}\n      widget={widget}\n      onSubmit={(values, form) => {\n        const youtubeId = getVideoId(values.url).id;\n        if (!youtubeId) {\n          form.setError('url', {\n            message: trans(message('Invalid youtube url')),\n          });\n        } else {\n          return Promise.resolve(values);\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://www.youtube.com/watch?v=YE7VzlLtp-4\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Youtube video url\" />}\n        description={\n          <Trans message=\"Embed this youtube video within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\n\nexport interface TextWidget extends BiolinkWidget {\n  type: WidgetType.Text;\n  config: {\n    title: string;\n    description?: string;\n  };\n}\n\ninterface TextWidgetDialogProps {\n  biolink: Biolink;\n  widget?: TextWidget;\n}\nexport function TextWidgetDialog({biolink, widget}: TextWidgetDialogProps) {\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Text}\n      widget={widget}\n    >\n      <FormTextField\n        className=\"mb-24\"\n        required\n        autoFocus\n        name=\"title\"\n        label={<Trans message=\"Title\" />}\n      />\n      <FormTextField\n        name=\"description\"\n        label={<Trans message=\"Description\" />}\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {\n  SocialsList,\n  SocialsType,\n} from '@app/dashboard/biolink/biolink-editor/content/widgets/socials-widget/socials-list';\nimport {removeEmptyValuesFromObject} from '@common/utils/objects/remove-empty-values-from-object';\n\nexport interface SocialsWidget extends BiolinkWidget {\n  type: WidgetType.Text;\n  config: Record<SocialsType, string>;\n}\n\ninterface TextWidgetDialogProps {\n  biolink: Biolink;\n  widget?: SocialsWidget;\n}\nexport function SocialsWidgetDialog({biolink, widget}: TextWidgetDialogProps) {\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Socials}\n      widget={widget}\n      onSubmit={values => {\n        // remove key from object, if user empties social's input\n        return Promise.resolve(removeEmptyValuesFromObject(values));\n      }}\n    >\n      {Object.entries(SocialsList).map(([type, social], index) => {\n        const Icon = social.icon;\n        return (\n          <FormTextField\n            autoFocus={index === 0}\n            key={type}\n            className=\"mb-24\"\n            name={type}\n            placeholder={social.placeholder}\n            label={<Trans {...social.name} />}\n            pattern={social.pattern}\n            type={social.inputType}\n            autoComplete=\"off\"\n            startAdornment={Icon && <Icon />}\n          />\n        );\n      })}\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\n\nexport interface TwitchWidget extends BiolinkWidget {\n  type: WidgetType.Image;\n  config: {\n    url: string;\n  };\n}\n\ninterface YoutubeWidgetDialogProps {\n  biolink: Biolink;\n  widget?: TwitchWidget;\n}\nexport function TwitchWidgetDialog({\n  biolink,\n  widget,\n}: YoutubeWidgetDialogProps) {\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Twitch}\n      widget={widget}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://www.twitch.tv/kasparovchess\"\n        name=\"url\"\n        type=\"url\"\n        pattern=\"https://(www.)?twitch.tv/.*\"\n        label={<Trans message=\"Twitch channel or clip url\" />}\n        description={\n          <Trans message=\"Embed this twitch channel or clip within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface SoundcloudWidget extends BiolinkWidget {\n  type: WidgetType.Soundcloud;\n  config: {\n    url: string;\n    embedUrl: string;\n  };\n}\n\ninterface SoundcloudWidgetDialogProps {\n  biolink: Biolink;\n  widget?: SoundcloudWidget;\n}\nexport function SoundcloudWidgetDialog({\n  biolink,\n  widget,\n}: SoundcloudWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Soundcloud}\n      widget={widget}\n      onSubmit={async (values, form) => {\n        const encodedUrl = encodeURIComponent(values.url);\n        const response = await fetch(\n          `https://soundcloud.com/oembed?format=json&url=${encodedUrl}`\n        ).then(res => res.json());\n        const embedCode = response.html;\n\n        const div = document.createElement('div');\n        div.innerHTML = embedCode;\n        const embedUrl = div.querySelector('iframe')?.src;\n\n        if (embedUrl) {\n          return {\n            ...values,\n            embedUrl,\n          };\n        }\n\n        form.setError('url', {\n          message: trans(message('Invalid soundcloud url')),\n        });\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://soundcloud.com/artist/track\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Soundcloud track url\" />}\n        description={\n          <Trans message=\"Embed this soundcloud track within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport getVideoId from 'get-video-id';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface VimeoWidget extends BiolinkWidget {\n  type: WidgetType.Vimeo;\n  config: {\n    url: string;\n  };\n}\n\ninterface VimeoWidgetDialogProps {\n  biolink: Biolink;\n  widget?: VimeoWidget;\n}\nexport function VimeoWidgetDialog({biolink, widget}: VimeoWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Vimeo}\n      widget={widget}\n      onSubmit={(values, form) => {\n        const vimeoId = getVideoId(values.url).id;\n        if (!vimeoId) {\n          form.setError('url', {\n            message: trans(message('Invalid vimeo url')),\n          });\n        } else {\n          return Promise.resolve(values);\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://vimeo.com/1084537\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Vimeo video url\" />}\n        description={<Trans message=\"Embed this vimeo video within biolink.\" />}\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {parse} from '@app/dashboard/biolink/biolink-editor/content/widgets/spotify-widget/spotify-uri';\n\nexport interface SpotifyWidget extends BiolinkWidget {\n  type: WidgetType.Vimeo;\n  config: {\n    url: string;\n    type?: string;\n  };\n}\n\ninterface SpotifyWidgetDialogProps {\n  biolink: Biolink;\n  widget?: SpotifyWidget;\n}\nexport function SpotifyWidgetDialog({\n  biolink,\n  widget,\n}: SpotifyWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Spotify}\n      widget={widget}\n      onSubmit={(values, form) => {\n        const spotifyInfo = parse(values.url);\n        if (!('id' in spotifyInfo)) {\n          form.setError('url', {\n            message: trans(message('Invalid spotify url')),\n          });\n        } else {\n          return Promise.resolve({\n            ...values,\n            type: spotifyInfo.type,\n          });\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://open.spotify.com/track/2sqfLwGKXDw1nGjFhH3GGX?si=f329040f45804ec5\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Spotify share url\" />}\n        description={\n          <Trans message=\"Any share url from spotify can be used, including artist, album, track, playlist etc.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface TiktokWidget extends BiolinkWidget {\n  type: WidgetType.Vimeo;\n  config: {\n    url: string;\n  };\n}\n\ninterface TiktokWidgetDialogProps {\n  biolink: Biolink;\n  widget?: TiktokWidget;\n}\nexport function TiktokWidgetDialog({biolink, widget}: TiktokWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Tiktok}\n      widget={widget}\n      onSubmit={(values, form) => {\n        if (!values.url.includes('tiktok.com/')) {\n          form.setError('url', {\n            message: trans(message('Invalid tiktok url')),\n          });\n        } else {\n          return Promise.resolve(values);\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://www.tiktok.com/@bts_official_bighit/video/6964945720885464322\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Tiktok url\" />}\n        description={\n          <Trans message=\"Embed this tiktok video within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {ImageWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/image-widget/image-widget-dialog';\nimport {JSXElementConstructor} from 'react';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\nimport imageThumbnail from './widget-selector/widget-images/image.png';\nimport textImage from './widget-selector/widget-images/text.png';\nimport socialsImage from './widget-selector/widget-images/socials.png';\nimport youtubeImage from './widget-selector/widget-images/youtube.png';\nimport soundcloudImage from './widget-selector/widget-images/soundcloud.png';\nimport vimeoImage from './widget-selector/widget-images/vimeo.jpeg';\nimport spotifyImage from './widget-selector/widget-images/spotify.png';\nimport twitchImage from './widget-selector/widget-images/twitch.svg';\nimport tiktokImage from './widget-selector/widget-images/tiktok.png';\nimport {WidgetDialogProps} from '@app/dashboard/biolink/biolink-editor/content/widgets/types/widget-dialog-props';\nimport {YoutubeWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/youtube-widget/youtube-widget-dialog';\nimport {TextWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/text-widget/text-widget-dialog';\nimport {SocialsWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/socials-widget/socials-widget-dialog';\nimport {TwitchWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/twitch-widget/twitch-widget-dialog';\nimport {SoundcloudWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/soundcloud-widget/soundcloud-widget-dialog';\nimport {VimeoWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/vimeo-widget/vimeo-widget-dialog';\nimport {SpotifyWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/spotify-widget/spotify-widget-dialog';\nimport {TiktokWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/tiktok-widget/tiktok-widget-dialog';\n\nexport interface WidgetListItem {\n  name: MessageDescriptor;\n  description: MessageDescriptor;\n  image?: string;\n  dialog: JSXElementConstructor<WidgetDialogProps<any>>;\n}\n\nexport enum WidgetType {\n  Image = 'image',\n  Text = 'text',\n  Socials = 'socials',\n  Youtube = 'youtube',\n  Soundcloud = 'soundcloud',\n  Vimeo = 'video',\n  Spotify = 'spotify',\n  Twitch = 'twitch',\n  Tiktok = 'tiktok',\n}\n\nexport const WidgetList: Record<WidgetType, WidgetListItem> = {\n  [WidgetType.Image]: {\n    name: message('Image'),\n    image: imageThumbnail,\n    description: message(\n      'Upload an image and optionally add a link it will redirect to when clicked.'\n    ),\n    dialog: ImageWidgetDialog,\n  },\n  [WidgetType.Text]: {\n    name: message('Text'),\n    image: textImage,\n    description: message(\n      'Add title and optional description. Can be used as a header for the whole biolink or a group of multiple widgets.'\n    ),\n    dialog: TextWidgetDialog,\n  },\n  [WidgetType.Socials]: {\n    name: message('Social Links'),\n    image: socialsImage,\n    description: message(\n      'Add your socials links to display them as icon buttons.'\n    ),\n    dialog: SocialsWidgetDialog,\n  },\n  [WidgetType.Youtube]: {\n    name: message('Youtube Video'),\n    image: youtubeImage,\n    description: message(\n      'Paste a YouTube video URL to show it as a video embed in your profile.'\n    ),\n    dialog: YoutubeWidgetDialog,\n  },\n  [WidgetType.Soundcloud]: {\n    name: message('Soundcloud Audio'),\n    image: soundcloudImage,\n    description: message(\n      'Paste a SoundCloud URL to show it as a playable song in your profile.'\n    ),\n    dialog: SoundcloudWidgetDialog,\n  },\n  [WidgetType.Vimeo]: {\n    name: message('Vimeo Video'),\n    image: vimeoImage,\n    description: message(\n      'Paste a vimeo URL to show it as a video embed in your profile.'\n    ),\n    dialog: VimeoWidgetDialog,\n  },\n  [WidgetType.Spotify]: {\n    name: message('Spotify Embed'),\n    image: spotifyImage,\n    description: message(\n      'Paste a spotify song, album, artist, playlist, podcast or episode url to show it as an embed in your profile.'\n    ),\n    dialog: SpotifyWidgetDialog,\n  },\n  [WidgetType.Twitch]: {\n    name: message('Twitch Embed'),\n    image: twitchImage,\n    description: message(\n      'Paste twitch profile or clip url to show it as an embed in your profile.'\n    ),\n    dialog: TwitchWidgetDialog,\n  },\n  [WidgetType.Tiktok]: {\n    name: message('TikTok Embed'),\n    image: tiktokImage,\n    description: message(\n      'Paste TikTok video url to show it as an embed in your profile.'\n    ),\n    dialog: TiktokWidgetDialog,\n  },\n};\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {WidgetList} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\n\nexport function SelectWidgetDialog() {\n  const {close} = useDialogContext();\n  return (\n    <Dialog size=\"xl\">\n      <DialogHeader titleTextSize=\"text-md\" padding=\"px-24 pt-14 pb-4\">\n        <Trans message=\"Add widget\" />\n      </DialogHeader>\n      <DialogBody padding=\"p-24\">\n        <div className=\"grid gap-14 grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\n          {Object.entries(WidgetList).map(([widgetType, widget]) => (\n            <div\n              key={widgetType}\n              className=\"bg-paper border rounded p-14 shadow cursor-pointer hover:bg-primary/hover\"\n              role=\"button\"\n              tabIndex={0}\n              onClick={() => {\n                close(widgetType);\n              }}\n            >\n              <img\n                src={widget.image}\n                alt=\"\"\n                className=\"block w-54 h-54 mb-20 mr-auto\"\n              />\n              <div className=\"text-primary text-lg font-semibold whitespace-nowrap overflow-hidden overflow-ellipsis\">\n                <Trans {...widget.name} />\n              </div>\n              <div className=\"text-muted\">\n                <Trans {...widget.description} />\n              </div>\n            </div>\n          ))}\n        </div>\n      </DialogBody>\n    </Dialog>\n  );\n}\n","import {\n  WidgetList,\n  WidgetType,\n} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\ninterface WidgetDialogContainerProps {\n  biolink: Biolink;\n  activeWidget: WidgetType | null;\n  onOpenChange: (isOpen: boolean) => void;\n}\nexport function NewWidgetDialogContainer({\n  activeWidget,\n  biolink,\n  onOpenChange,\n}: WidgetDialogContainerProps) {\n  const Dialog = activeWidget ? WidgetList[activeWidget].dialog : null;\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      isOpen={activeWidget != null}\n      onOpenChange={onOpenChange}\n    >\n      {Dialog && <Dialog biolink={biolink} />}\n    </DialogTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowUpwardIcon = createSvgIcon(\n  <path d=\"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\" />\n, 'ArrowUpwardOutlined');\n","import {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {WidgetList} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {Trans} from '@common/i18n/trans';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {BiolinkContentItemLayout} from '@app/dashboard/biolink/biolink-editor/content/biolink-content-item-layout';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\nimport {Button} from '@common/ui/buttons/button';\nimport {ArrowUpwardIcon} from '@common/icons/material/ArrowUpward';\nimport {useSortBiolinkContent} from '@app/dashboard/biolink/biolink-editor/requests/use-sort-biolink-content';\nimport {biolinkEditorState} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {ArrowDownwardIcon} from '@common/icons/material/ArrowDownward';\nimport {WidgetRenderers} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-renderers';\n\ninterface WidgetContentItemProps {\n  item: BiolinkWidget;\n  biolink: Biolink;\n}\nexport function WidgetContentItem({\n  item: widget,\n  biolink,\n}: WidgetContentItemProps) {\n  const config = WidgetList[widget.type];\n  const WidgetRenderer = WidgetRenderers[widget.type];\n  const WidgetDialog = config.dialog;\n\n  return (\n    <BiolinkContentItemLayout\n      biolink={biolink}\n      item={widget}\n      title={<Trans {...config.name} />}\n      updateDialog={<WidgetDialog widget={widget} biolink={biolink} />}\n      actionRow={<ActionRow widget={widget} />}\n    >\n      <WidgetRenderer widget={widget} variant=\"editor\" />\n    </BiolinkContentItemLayout>\n  );\n}\n\ninterface ActionRowProps {\n  widget: BiolinkWidget;\n}\nfunction ActionRow({widget}: ActionRowProps) {\n  const updateItem = useUpdateBiolinkContentItem();\n  const sortContent = useSortBiolinkContent();\n\n  const handlePinToTop = () => {\n    const biolink = biolinkEditorState().biolink;\n    if (!biolink) return;\n\n    const pinnedCount = biolink.content.filter(x => x.pinned === 'top').length;\n\n    if (!widget.pinned) {\n      const oldIndex = biolink.content.findIndex(\n        x => x.model_type === widget.model_type && x.id === widget.id\n      );\n      sortContent.mutate({\n        oldIndex,\n        // pinned widget after any other widgets that are already pinned to top\n        newIndex: pinnedCount,\n        widgetToPin: widget.id,\n      });\n    } else {\n      updateItem.mutate({item: widget, values: {pinned: null}});\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-24 justify-between text-muted h-42\">\n      <Switch\n        checked={widget.active}\n        disabled={updateItem.isLoading}\n        onChange={() => {\n          updateItem.mutate({\n            item: widget,\n            values: {\n              active: !widget.active,\n            },\n          });\n        }}\n      />\n      <Button\n        variant=\"outline\"\n        size=\"2xs\"\n        radius=\"rounded-full\"\n        color={widget.pinned === 'top' ? 'primary' : undefined}\n        startIcon={\n          widget.pinned === 'top' ? <ArrowDownwardIcon /> : <ArrowUpwardIcon />\n        }\n        disabled={sortContent.isLoading}\n        onClick={handlePinToTop || updateItem.isLoading}\n      >\n        {widget.pinned === 'top' ? (\n          <Trans message=\"Unpin from top\" />\n        ) : (\n          <Trans message=\"Pin to top\" />\n        )}\n      </Button>\n    </div>\n  );\n}\n","import {ReactNode} from 'react';\nimport {BiolinkLayout} from '@app/short-links/renderers/biolink-renderer/biolink-layout';\nimport {Trans} from '@common/i18n/trans';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {useBiolinkEditorStore} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\nimport {useEditorBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\nexport function LivePreview() {\n  const {biolink} = useEditorBiolink();\n  const appearance = useBiolinkEditorStore(s => s.appearance);\n  const isTablet = useIsTabletMediaQuery();\n\n  if (isTablet) {\n    return null;\n  }\n\n  return (\n    <div className=\"flex-shrink-0 sticky top-24 h-max\">\n      <Chip\n        size=\"sm\"\n        color=\"positive\"\n        radius=\"rounded\"\n        className=\"w-max m-auto mb-24\"\n      >\n        <Trans message=\"Live preview\" />\n      </Chip>\n      <PhoneSkeleton>\n        {biolink ? (\n          <BiolinkLayout biolink={biolink} appearance={appearance} />\n        ) : null}\n      </PhoneSkeleton>\n      <div className=\"text-sm text-muted text-center mt-14\">\n        <Trans message=\"Scheduled and disabled content is not shown\" />\n      </div>\n    </div>\n  );\n}\n\ninterface PhoneSkeletonProps {\n  children: ReactNode;\n}\nfunction PhoneSkeleton({children}: PhoneSkeletonProps) {\n  return (\n    <div className=\"w-350 h-[724px] rounded-[64px] shadow-lg border border-[#444546] border-[12px] overflow-hidden\">\n      <div className=\"overflow-y-auto h-full compact-scrollbar\">{children}</div>\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatColorFillIcon = createSvgIcon(\n  <path d=\"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z\" />\n, 'FormatColorFillOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const GradientIcon = createSvgIcon(\n  <path d=\"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z\" />\n, 'GradientOutlined');\n","import clsx from 'clsx';\nimport {ComponentProps, forwardRef, ReactNode} from 'react';\n\ninterface BackgroundSelectorButtonProps extends ComponentProps<'button'> {\n  isActive?: boolean;\n  children?: ReactNode;\n  label: ReactNode;\n}\nexport const BackgroundSelectorButton = forwardRef<\n  HTMLButtonElement,\n  BackgroundSelectorButtonProps\n>(({isActive, children, className, style, label, ...buttonProps}, ref) => {\n  return (\n    <button type=\"button\" {...buttonProps} ref={ref}>\n      <span\n        className={clsx(\n          'flex items-center justify-center overflow-hidden border border-[#c3cbdc] rounded aspect-square outline-none focus-visible:ring',\n          isActive && 'ring-2 ring-primary ring-offset-2',\n          className\n        )}\n        style={style}\n      >\n        {children}\n      </span>\n      <span className=\"block mt-10 text-xs overflow-hidden overflow-ellipsis\">\n        {label}\n      </span>\n    </button>\n  );\n});\n","import {ColorPresets} from '@common/ui/color-picker/color-presets';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\n\nexport interface ColorBackground {\n  type: 'color';\n  id: string;\n  backgroundColor?: string;\n  color?: string;\n  label: MessageDescriptor;\n}\nexport const BaseColorBg: ColorBackground = {\n  type: 'color',\n  id: 'c-custom',\n  label: message('Custom color'),\n};\n\nexport const ColorBackgrounds: ColorBackground[] = ColorPresets.map(\n  (preset, index) => {\n    return {\n      ...BaseColorBg,\n      id: `c${index}`,\n      backgroundColor: preset.color,\n      label: preset.name,\n      color: preset.foreground,\n    };\n  }\n);\n","import {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {BackgroundSelectorButton} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector-button';\nimport {FormatColorFillIcon} from '@common/icons/material/FormatColorFill';\nimport {BgSelectorTabProps} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector';\nimport {\n  BaseColorBg,\n  ColorBackground,\n  ColorBackgrounds,\n} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/color-backgrounds';\n\nexport function ColorBackgroundTab({\n  value,\n  onChange,\n  className,\n}: BgSelectorTabProps<ColorBackground>) {\n  return (\n    <div className={className}>\n      <CustomColorButton value={value} onChange={onChange} />\n      {ColorBackgrounds.map(background => (\n        <BackgroundSelectorButton\n          key={background.id}\n          label={<Trans {...background.label} />}\n          isActive={value?.id === background.id}\n          style={{backgroundColor: background.backgroundColor}}\n          onClick={() => {\n            onChange?.({\n              ...BaseColorBg,\n              ...background,\n            });\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction CustomColorButton({\n  value,\n  onChange,\n}: BgSelectorTabProps<ColorBackground>) {\n  const isCustomColor = value?.id === BaseColorBg.id;\n  return (\n    <DialogTrigger\n      currentValue={value}\n      type=\"popover\"\n      onClose={(newValue: ColorBackground | string) => {\n        // apply color or revert to original\n        onChange?.(\n          typeof newValue === 'string'\n            ? {...BaseColorBg, backgroundColor: newValue}\n            : newValue\n        );\n      }}\n    >\n      <BackgroundSelectorButton\n        label={<Trans {...BaseColorBg.label} />}\n        className=\"border-dashed border-2\"\n        style={{\n          backgroundColor: isCustomColor ? value?.backgroundColor : undefined,\n        }}\n      >\n        <span className=\"inline-block text-white bg-black/20 rounded p-10\">\n          <FormatColorFillIcon size=\"lg\" />\n        </span>\n      </BackgroundSelectorButton>\n      <ColorPickerDialog\n        defaultValue={value?.backgroundColor}\n        onChange={newColor => {\n          // set color on color picker interaction\n          onChange?.({\n            ...BaseColorBg,\n            backgroundColor: newColor,\n          });\n        }}\n      />\n    </DialogTrigger>\n  );\n}\n","import {message} from '@common/i18n/message';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport interface GradientBackground {\n  type: 'gradient';\n  id: string;\n  backgroundImage?: string;\n  color?: string;\n  label: MessageDescriptor;\n}\nexport const BaseGradientBg: GradientBackground = {\n  type: 'gradient',\n  id: 'g-custom',\n  label: message('Custom gradient'),\n};\n\nexport const GradientBackgrounds: GradientBackground[] = [\n  {\n    ...BaseGradientBg,\n    ...BaseGradientBg,\n    id: 'g1',\n    backgroundImage: 'linear-gradient(45deg, #ff9a9e, #fad0c4)',\n    label: message('Worm flame'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g2',\n    backgroundImage: 'linear-gradient(0deg, #a18cd1, #fbc2eb)',\n    label: message('Night fade'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g3',\n    backgroundImage: 'linear-gradient(120deg, #a1c4fd, #c2e9fb)',\n    label: message('Winter nova'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g4',\n    backgroundImage: 'linear-gradient(0deg, #cfd9df, #e2ebf0)',\n    label: message('Heavy rain'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g5',\n    backgroundImage: 'linear-gradient(120deg, #fdfbfb, #ebedee)',\n    label: message('Cloudy knoxville'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g6',\n    backgroundImage: 'linear-gradient(0deg, #a8edea, #fed6e3)',\n    label: message('Rare wind'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g7',\n    backgroundImage: 'linear-gradient(135deg, #f5f7fa, #c3cfe2)',\n    label: message('Saint petersburg'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g8',\n    backgroundImage: 'linear-gradient(135deg, #fdfcfb, #e2d1c3)',\n    label: message('Everlasting sky'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g9',\n    backgroundImage: 'linear-gradient(0deg, #c1dfc4, #deecdd)',\n    label: message('Soft grass'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g10',\n    backgroundImage: 'linear-gradient(90deg, #E9E4F0, #D3CCE3)',\n    label: message('Delicate'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g11',\n    backgroundImage: 'linear-gradient(90deg, #fffcdc, #d9a7c7)',\n    label: message('Broken hearts'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g12',\n    backgroundImage: 'linear-gradient(90deg, #56ab2f, #a8e063)',\n    label: message('Lush'),\n    color: 'rgb(255, 255, 255)',\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g13',\n    backgroundImage: 'linear-gradient(90deg, #606c88, #3f4c6b)',\n    label: message('Ash'),\n    color: 'rgb(255, 255, 255)',\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g14',\n    backgroundImage: 'linear-gradient(90deg, #ece9e6, #ffffff)',\n    label: message('Clouds'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g15',\n    backgroundImage: 'linear-gradient(90deg, #f09819, #edde5d)',\n    label: message('Mango pulp'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g16',\n    backgroundImage: 'linear-gradient(90deg, #b79891, #94716b)',\n    label: message('Cooper'),\n    color: 'rgb(255, 255, 255)',\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g17',\n    backgroundImage: 'linear-gradient(60deg, #29323c, #485563)',\n    label: message('Vicious stance'),\n    color: 'rgb(255, 255, 255)',\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowForwardIcon = createSvgIcon(\n  <path d=\"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z\" />\n, 'ArrowForwardOutlined');\n","import {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {BackgroundSelectorButton} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector-button';\nimport {\n  BaseGradientBg,\n  GradientBackground,\n  GradientBackgrounds,\n} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/gradient-backgrounds';\nimport {GradientIcon} from '@common/icons/material/Gradient';\nimport {BgSelectorTabProps} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useCallback, useState} from 'react';\nimport clsx from 'clsx';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ArrowDownwardIcon} from '@common/icons/material/ArrowDownward';\nimport {ArrowForwardIcon} from '@common/icons/material/ArrowForward';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {ArrowUpwardIcon} from '@common/icons/material/ArrowUpward';\n\nexport function GradientBackgroundTab({\n  value,\n  onChange,\n  className,\n}: BgSelectorTabProps<GradientBackground>) {\n  return (\n    <div className={className}>\n      <CustomGradientButton value={value} onChange={onChange} />\n      {GradientBackgrounds.map(gradient => (\n        <BackgroundSelectorButton\n          key={gradient.backgroundImage}\n          label={gradient.label && <Trans {...gradient.label} />}\n          isActive={value?.id === gradient.id}\n          style={{backgroundImage: gradient.backgroundImage}}\n          onClick={() => {\n            onChange?.({\n              ...BaseGradientBg,\n              ...gradient,\n            });\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction CustomGradientButton({\n  value,\n  onChange,\n}: BgSelectorTabProps<GradientBackground>) {\n  const isCustomGradient = value?.id === BaseGradientBg.id;\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      currentValue={value}\n      onOpenChange={isOpen => {\n        // on dialog open set default gradient as active, if no other gradient is selected\n        if (isOpen && !value) {\n          onChange?.(GradientBackgrounds[0]);\n        }\n      }}\n      onClose={gradient => {\n        // apply gradient or revert to original\n        onChange?.(gradient);\n      }}\n    >\n      <BackgroundSelectorButton\n        label={<Trans {...BaseGradientBg.label} />}\n        className=\"border-dashed border-2\"\n        style={{\n          backgroundImage: isCustomGradient\n            ? value?.backgroundImage\n            : undefined,\n        }}\n      >\n        <span className=\"inline-block text-white bg-black/20 rounded p-10\">\n          <GradientIcon size=\"lg\" />\n        </span>\n      </BackgroundSelectorButton>\n      <CustomGradientDialog\n        defaultValue={value}\n        onChange={newValue => {\n          onChange?.(newValue);\n        }}\n      />\n    </DialogTrigger>\n  );\n}\n\ninterface CustomGradientState {\n  colorOne: string;\n  colorTwo: string;\n  angle: string;\n}\ninterface CustomGradientDialogProps {\n  defaultValue?: GradientBackground;\n  onChange: (value: GradientBackground) => void;\n}\nfunction CustomGradientDialog({\n  defaultValue = GradientBackgrounds[0],\n  onChange,\n}: CustomGradientDialogProps) {\n  const {close} = useDialogContext();\n  const [state, setLocalState] = useState<CustomGradientState>(() => {\n    const parts =\n      defaultValue?.backgroundImage?.match(/\\(([0-9]+deg),.?(.+?),.?(.+?)\\)/) ||\n      [];\n    return {\n      angle: parts[1] || '45deg',\n      colorOne: parts[2] || '#ff9a9e',\n      colorTwo: parts[3] || '#fad0c4',\n    };\n  });\n\n  const buildGradientBackground = (s: CustomGradientState) => {\n    return {\n      ...BaseGradientBg,\n      backgroundImage: `linear-gradient(${s.angle}, ${s.colorOne}, ${s.colorTwo})`,\n    };\n  };\n\n  const setState = useCallback(\n    (newValues: Partial<CustomGradientState>) => {\n      const newState = {\n        ...state,\n        ...newValues,\n      };\n      setLocalState(newState);\n      onChange(buildGradientBackground(newState));\n    },\n    [state, onChange]\n  );\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Custom gradient\" />\n      </DialogHeader>\n      <DialogBody>\n        <div className=\"mb-6\">\n          <Trans message=\"Colors\" />\n        </div>\n        <div className=\"flex items-stretch h-40 mb-20\">\n          <ColorPickerButton\n            className=\"rounded-l\"\n            value={state.colorOne}\n            onChange={value => setState({colorOne: value})}\n          />\n          <div\n            className=\"flex-auto border-y border-[#c3cbdc]\"\n            style={{\n              backgroundImage: buildGradientBackground(state).backgroundImage,\n            }}\n          />\n          <ColorPickerButton\n            className=\"rounded-r\"\n            value={state.colorTwo}\n            onChange={value => setState({colorTwo: value})}\n          />\n        </div>\n        <div className=\"mb-6\">\n          <Trans message=\"Direction\" />\n        </div>\n        <DirectionButtons\n          value={state.angle}\n          onChange={value => setState({angle: value})}\n        />\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          onClick={() => {\n            close(buildGradientBackground(state));\n          }}\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface ColorPickerButtonProps {\n  className: string;\n  value: string;\n  onChange: (value: string) => void;\n}\nfunction ColorPickerButton({\n  className,\n  value,\n  onChange,\n}: ColorPickerButtonProps) {\n  return (\n    <DialogTrigger type=\"popover\">\n      <Tooltip label={<Trans message=\"Click to change color\" />}>\n        <button\n          type=\"button\"\n          className={clsx(\n            'w-40 flex-shrink-0 border border-[#c3cbdc]',\n            className\n          )}\n          style={{backgroundColor: value}}\n        />\n      </Tooltip>\n      <ColorPickerDialog defaultValue={value} onChange={onChange} hideFooter />\n    </DialogTrigger>\n  );\n}\n\ninterface DirectionButtonsProps {\n  value: string;\n  onChange: (value: string) => void;\n}\nfunction DirectionButtons({value, onChange}: DirectionButtonsProps) {\n  const activeStyle = 'text-primary border-primary';\n  return (\n    <div className=\"text-muted flex items-center flex-wrap gap-10\">\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '0deg' ? activeStyle : undefined}\n        onClick={() => onChange('0deg')}\n      >\n        <ArrowUpwardIcon />\n      </IconButton>\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '180deg' ? activeStyle : undefined}\n        onClick={() => onChange('180deg')}\n      >\n        <ArrowDownwardIcon />\n      </IconButton>\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '90deg' ? activeStyle : undefined}\n        onClick={() => onChange('90deg')}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '135deg' ? activeStyle : undefined}\n        onClick={() => onChange('135deg')}\n      >\n        <ArrowDownwardIcon className=\"-rotate-45\" />\n      </IconButton>\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '225deg' ? activeStyle : undefined}\n        onClick={() => onChange('225deg')}\n      >\n        <ArrowDownwardIcon className=\"rotate-45\" />\n      </IconButton>\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '45deg' ? activeStyle : undefined}\n        onClick={() => onChange('45deg')}\n      >\n        <ArrowUpwardIcon className=\"rotate-45\" />\n      </IconButton>\n      <IconButton\n        radius=\"rounded-full\"\n        variant=\"outline\"\n        className={value === '325deg' ? activeStyle : undefined}\n        onClick={() => onChange('325deg')}\n      >\n        <ArrowUpwardIcon className=\"-rotate-45\" />\n      </IconButton>\n    </div>\n  );\n}\n","export default \"__VITE_ASSET__176ea4bb__\"","export default \"__VITE_ASSET__ca4d12f0__\"","export default \"__VITE_ASSET__aa4a0249__\"","export default \"__VITE_ASSET__b2e2eaf0__\"","export default \"__VITE_ASSET__6f56821b__\"","export default \"__VITE_ASSET__35c89ecf__\"","export default \"__VITE_ASSET__988bfd47__\"","export default \"__VITE_ASSET__b00abf9b__\"","export default \"__VITE_ASSET__d5e42a92__\"","export default \"__VITE_ASSET__69fc9117__\"","export default \"__VITE_ASSET__d1c20c3c__\"","export default \"__VITE_ASSET__28db1646__\"","export default \"__VITE_ASSET__f2926785__\"","export default \"__VITE_ASSET__d1a9b59f__\"","export default \"__VITE_ASSET__b3635293__\"","export default \"__VITE_ASSET__166680aa__\"","export default \"__VITE_ASSET__424582cb__\"","import angledFocus from './svg-bgs/Angled-Focus.svg';\nimport circularFocus from './svg-bgs/Circular-Focus.svg';\nimport farseeingEyeball from './svg-bgs/Farseeing-Eyeball.svg';\nimport canyonFunnel from './svg-bgs/Canyon-Funnel.svg';\nimport looneyLoops from './svg-bgs/Looney-Loops.svg';\nimport hurricaneAperture from './svg-bgs/Hurricane-Aperture.svg';\nimport icyExplosion from './svg-bgs/Icy-Explosion.svg';\nimport protrudingSquares from './svg-bgs/Protruding-Squares.svg';\nimport alternatingTriangles from './svg-bgs/Alternating-Triangles.svg';\nimport monsteraPatch from './svg-bgs/Monstera-Patch.svg';\nimport confettiDoodles from './svg-bgs/Confetti-Doodles.svg';\nimport threadsAhead from './svg-bgs/Threads-Ahead.svg';\nimport launchDay from './svg-bgs/Launch-Day.svg';\nimport sprinkle from './svg-bgs/Sprinkle.svg';\nimport circuitBoard from './svg-bgs/Circuit-Board.svg';\nimport nuclearFocalPoint from './svg-bgs/nuclear-focalpoint.svg';\nimport snow from './svg-bgs/Snow.svg';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\n\nexport interface ImageBackground {\n  type: 'image';\n  id: string;\n  backgroundColor?: string;\n  backgroundAttachment?: string;\n  backgroundSize?: string;\n  backgroundRepeat?: string;\n  backgroundPosition?: string;\n  backgroundImage?: string;\n  color?: string;\n  label: MessageDescriptor;\n}\nexport const BaseImageBg: ImageBackground = {\n  type: 'image',\n  id: 'i-custom',\n  label: message('Custom image'),\n};\n\nexport const ImageBackgrounds: ImageBackground[] = [\n  {\n    ...BaseImageBg,\n    id: 'img0',\n    backgroundColor: '#ee5522',\n    backgroundImage: `url(${protrudingSquares})`,\n    backgroundRepeat: 'repeat',\n    label: message('Protruding squares'),\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img1',\n    backgroundColor: '#00bbff',\n    backgroundImage: `url(${launchDay})`,\n    label: message('Launch day'),\n    backgroundSize: 'contain',\n    backgroundPosition: 'bottom',\n    backgroundRepeat: 'no-repeat',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img2',\n    backgroundColor: '#fff',\n    backgroundImage: `url(${alternatingTriangles})`,\n    label: message('Alternating triangles'),\n    color: '#000',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img3',\n    backgroundColor: '#002200',\n    backgroundImage: `url(${monsteraPatch})`,\n    label: message('Monstera patch'),\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img4',\n    backgroundColor: '#aa3333',\n    backgroundImage: `url(${confettiDoodles})`,\n    label: message('Confetti doodles'),\n    color: '#fff',\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n    backgroundSize: 'contain',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img5',\n    backgroundColor: '#070014',\n    backgroundImage: `url(${hurricaneAperture})`,\n    label: message('Hurricane aperture'),\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img6',\n    backgroundColor: '#11ddaa',\n    backgroundImage: `url(${looneyLoops})`,\n    label: message('Looney loops'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#000',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img7',\n    backgroundColor: '#ccffff',\n    backgroundImage: `url(${icyExplosion})`,\n    label: message('Icy explosion'),\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    color: '#000',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img8',\n    backgroundColor: '#442233',\n    backgroundImage: `url(${nuclearFocalPoint})`,\n    label: message('Nuclear point'),\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img9',\n    backgroundColor: '#ffdd55',\n    backgroundImage: `url(${angledFocus})`,\n    label: message('Angled focus'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img10',\n    backgroundColor: '#220044',\n    backgroundImage: `url(${circularFocus})`,\n    label: message('Circular focus'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img11',\n    backgroundColor: '#000000',\n    backgroundImage: `url(${farseeingEyeball})`,\n    label: message('Farseeing eyeball'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img12',\n    backgroundColor: '#ff0000',\n    backgroundImage: `url(${canyonFunnel})`,\n    label: message('Canyon funnel'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img13',\n    backgroundColor: '#ffdd99',\n    backgroundImage: `url(${threadsAhead})`,\n    label: message('Threads ahead'),\n    color: '#000',\n    backgroundRepeat: 'no-repeat',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img14',\n    backgroundImage: `url(${sprinkle})`,\n    label: message('Sprinkle'),\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img15',\n    backgroundImage: `url(${circuitBoard})`,\n    label: message('Circuit board'),\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img16',\n    backgroundImage: `url(${snow})`,\n    label: message('Snow'),\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const UploadIcon = createSvgIcon(\n  <path d=\"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z\" />\n, 'UploadOutlined');\n","import {BgSelectorTabProps} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector';\nimport {ImageBackground} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/image-backgrounds';\nimport {RadioGroup} from '@common/ui/forms/radio-group/radio-group';\nimport {Radio} from '@common/ui/forms/radio-group/radio';\nimport {Trans} from '@common/i18n/trans';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\n\nconst BackgroundPositions: Record<\n  'cover' | 'contain' | 'repeat',\n  {\n    label: MessageDescriptor;\n    bgConfig: Partial<ImageBackground>;\n  }\n> = {\n  cover: {\n    label: message('Stretch to fit'),\n    bgConfig: {\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n    },\n  },\n  contain: {\n    label: message('Fit image'),\n    bgConfig: {\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'contain',\n      backgroundPosition: 'center top',\n    },\n  },\n  repeat: {\n    label: message('Repeat image'),\n    bgConfig: {\n      backgroundRepeat: 'repeat',\n      backgroundSize: undefined,\n      backgroundPosition: 'left top',\n    },\n  },\n};\n\nexport function BackgroundPositionSelector({\n  value: imageBgValue,\n  onChange,\n}: Omit<BgSelectorTabProps<ImageBackground>, 'className'>) {\n  const selectedPosition = positionKeyFromValue(imageBgValue);\n  return (\n    <div className=\"border-t mt-20 pt-14\">\n      <RadioGroup size=\"sm\" disabled={!imageBgValue}>\n        {Object.entries(BackgroundPositions).map(([key, position]) => {\n          return (\n            <Radio\n              key={key}\n              name=\"background-position\"\n              value={key}\n              checked={key === selectedPosition}\n              onChange={e => {\n                if (imageBgValue) {\n                  onChange?.({\n                    ...imageBgValue,\n                    ...position.bgConfig,\n                  });\n                }\n              }}\n            >\n              <Trans {...position.label} />\n            </Radio>\n          );\n        })}\n      </RadioGroup>\n    </div>\n  );\n}\n\nfunction positionKeyFromValue(\n  value?: ImageBackground\n): keyof typeof BackgroundPositions {\n  if (value?.backgroundSize === 'cover') {\n    return 'cover';\n  } else if (value?.backgroundSize === 'contain') {\n    return 'contain';\n  } else {\n    return 'repeat';\n  }\n}\n","import {\n  BaseImageBg,\n  ImageBackground,\n  ImageBackgrounds,\n} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/image-backgrounds';\nimport {BackgroundSelectorButton} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector-button';\nimport {BgSelectorTabProps} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Trans} from '@common/i18n/trans';\nimport {UploadIcon} from '@common/icons/material/Upload';\nimport {useForm} from 'react-hook-form';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Form} from '@common/ui/forms/form';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {BackgroundPositionSelector} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/image-background-tab/background-position-selector';\nimport {cssPropsFromBgConfig} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/css-props-from-bg-config';\n\nexport function ImageBackgroundTab({\n  value,\n  onChange,\n  className,\n}: BgSelectorTabProps<ImageBackground>) {\n  return (\n    <div>\n      <div className={className}>\n        <CustomImageTrigger value={value} onChange={onChange} />\n        {ImageBackgrounds.map(background => (\n          <BackgroundSelectorButton\n            key={background.id}\n            onClick={() =>\n              onChange?.({\n                ...BaseImageBg,\n                ...background,\n              })\n            }\n            isActive={value?.id === background.id}\n            style={{\n              ...cssPropsFromBgConfig(background),\n              backgroundAttachment: 'initial',\n            }}\n            label={<Trans {...background.label} />}\n          />\n        ))}\n      </div>\n      <BackgroundPositionSelector value={value} onChange={onChange} />\n    </div>\n  );\n}\n\ninterface CustomImageTrigger {\n  value?: ImageBackground;\n  onChange?: (value: ImageBackground | null) => void;\n}\nfunction CustomImageTrigger({value, onChange}: CustomImageTrigger) {\n  // only seed form with custom uploaded image\n  value = value?.id === BaseImageBg.id ? value : undefined;\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      onClose={(imageUrl?: string) => {\n        onChange?.(\n          imageUrl\n            ? {\n                ...BaseImageBg,\n                backgroundImage: `url(${imageUrl})`,\n              }\n            : null\n        );\n      }}\n    >\n      <BackgroundSelectorButton\n        label={<Trans {...BaseImageBg.label} />}\n        isActive={value?.id === BaseImageBg.id}\n        className=\"border-dashed border-2\"\n        style={cssPropsFromBgConfig(value)}\n      >\n        <span className=\"inline-block text-white bg-black/20 rounded p-10\">\n          <UploadIcon size=\"lg\" />\n        </span>\n      </BackgroundSelectorButton>\n      <CustomImageDialog value={value} />\n    </DialogTrigger>\n  );\n}\n\ninterface CustomImageDialogProps {\n  value?: ImageBackground;\n}\nexport function CustomImageDialog({value}: CustomImageDialogProps) {\n  const defaultValue = value?.backgroundImage\n    ?.replace('url(', '')\n    .replace(')', '');\n  const form = useForm<{imageUrl: string}>({\n    defaultValues: {imageUrl: defaultValue},\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Upload image\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            close(values.imageUrl);\n          }}\n        >\n          <FileUploadProvider>\n            <FormImageSelector\n              autoFocus\n              name=\"imageUrl\"\n              diskPrefix=\"biolinks\"\n              showRemoveButton\n            />\n          </FileUploadProvider>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button variant=\"flat\" color=\"primary\" type=\"submit\" form={formId}>\n          <Trans message=\"Select\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","export const appearanceHeaderClassnames = {\n  h2: 'text-xl font-semibold mb-20',\n  h3: 'my-12 font-semibold',\n};\n","import clsx from 'clsx';\nimport {Trans} from '@common/i18n/trans';\nimport {ImageIcon} from '@common/icons/material/Image';\nimport {FormatColorFillIcon} from '@common/icons/material/FormatColorFill';\nimport {GradientIcon} from '@common/icons/material/Gradient';\nimport {ReactElement, ReactNode, useState} from 'react';\nimport {ColorBackgroundTab} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/color-background-tab';\nimport {GradientBackgroundTab} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/gradient-background-tab';\nimport {ImageBackgroundTab} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/image-background-tab/image-background-tab';\nimport {SelectedBackground} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/selected-background';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {appearanceHeaderClassnames} from '@app/dashboard/biolink/biolink-editor/appearance/header-classnames';\n\nexport interface BgSelectorTabProps<T extends SelectedBackground> {\n  value?: T;\n  onChange?: (value: T | null) => void;\n  className?: string;\n}\n\nconst TabMap: Record<\n  'color' | 'gradient' | 'image',\n  (value: BgSelectorTabProps<any>) => ReactElement\n> = {\n  color: ColorBackgroundTab,\n  gradient: GradientBackgroundTab,\n  image: ImageBackgroundTab,\n};\ntype TabName = keyof typeof TabMap;\n\ninterface BackgroundSelectorProps {\n  className?: string;\n}\nexport function BackgroundSelector({className}: BackgroundSelectorProps) {\n  const value = useBiolinkEditorStore(s => s.appearance?.bgConfig);\n\n  const [activeTab, setActiveTab] = useState<TabName>(() => {\n    if (value?.type === 'color') return 'color';\n    if (value?.type === 'gradient') return 'gradient';\n    return 'color';\n  });\n\n  const Tab = TabMap[activeTab];\n\n  return (\n    <div className={className}>\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Background\" />\n      </h2>\n      <TypeSelector activeTab={activeTab} onTabChange={setActiveTab} />\n      <Tab\n        value={activeTab === value?.type ? value : undefined}\n        onChange={newValue => {\n          biolinkEditorState().updateAppearance({bgConfig: newValue});\n        }}\n        className=\"grid gap-14 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start\"\n      />\n    </div>\n  );\n}\n\ninterface TypeSelectorProps {\n  activeTab: TabName;\n  onTabChange: (tab: TabName) => void;\n}\nfunction TypeSelector({activeTab, onTabChange}: TypeSelectorProps) {\n  return (\n    <div className=\"my-20 pb-20 flex items-center gap-20 border-b\">\n      <TypeButton\n        isActive={activeTab === 'color'}\n        icon={<FormatColorFillIcon />}\n        title={<Trans message=\"Flat color\" />}\n        onClick={() => {\n          onTabChange('color');\n        }}\n      />\n      <TypeButton\n        isActive={activeTab === 'gradient'}\n        icon={<GradientIcon />}\n        title={<Trans message=\"Gradient\" />}\n        onClick={() => {\n          onTabChange('gradient');\n        }}\n      />\n      <TypeButton\n        isActive={activeTab === 'image'}\n        icon={<ImageIcon />}\n        title={<Trans message=\"Image\" />}\n        onClick={() => {\n          onTabChange('image');\n        }}\n      />\n    </div>\n  );\n}\n\ninterface TypeButtonProps {\n  isActive: boolean;\n  icon: ReactNode;\n  title: ReactNode;\n  onClick?: () => void;\n}\nfunction TypeButton({isActive, icon, title, onClick}: TypeButtonProps) {\n  return (\n    <div role=\"button\" className=\"block\" onClick={onClick}>\n      <div\n        className={clsx(\n          'w-50 h-50 mx-auto border rounded flex items-center justify-center text-muted mb-8',\n          isActive && 'ring border-primary'\n        )}\n      >\n        {icon}\n      </div>\n      <div className=\"text-sm text-center text-primary\">{title}</div>\n    </div>\n  );\n}\n","import {Trans} from '@app/common/i18n/trans';\nimport {BiolinkBtnConfig} from '@app/dashboard/biolink/biolink';\nimport {Button} from '@common/ui/buttons/button';\nimport clsx from 'clsx';\nimport {message} from '@common/i18n/message';\nimport {ButtonVariant} from '@common/ui/buttons/get-shared-button-style';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport React, {useCallback} from 'react';\nimport {appearanceHeaderClassnames} from '@app/dashboard/biolink/biolink-editor/appearance/header-classnames';\n\nconst AvailableVariants: Record<\n  NonNullable<Exclude<ButtonVariant, 'text' | 'raised' | 'link'>>,\n  MessageDescriptor\n> = {\n  flat: message('Fill'),\n  outline: message('Outline'),\n} as const;\n\nconst AvailableRadius: Record<\n  NonNullable<BiolinkBtnConfig['radius']>,\n  MessageDescriptor\n> = {\n  'rounded-none': message('Square'),\n  rounded: message('Rounded'),\n  'rounded-full': message('Pill'),\n} as const;\n\ninterface ButtonStyleSelectorProps {\n  className?: string;\n}\nexport function ButtonStyleSelector({className}: ButtonStyleSelectorProps) {\n  const value = useBiolinkEditorStore(s => s.appearance?.btnConfig);\n\n  const setValue = useCallback(\n    (newValue: Partial<BiolinkBtnConfig>) => {\n      biolinkEditorState().updateAppearance({\n        btnConfig: {\n          ...value,\n          ...newValue,\n        },\n      });\n    },\n    [value]\n  );\n\n  return (\n    <div className={className}>\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Buttons\" />\n      </h2>\n      <StyleSelector value={value} onChange={setValue} />\n      <ShadowSelector value={value} onChange={setValue} />\n    </div>\n  );\n}\n\ninterface StyleSelectorProps {\n  value?: BiolinkBtnConfig;\n  onChange: (newValue: BiolinkBtnConfig) => void;\n}\nfunction StyleSelector({value, onChange}: StyleSelectorProps) {\n  const selectedVariant = value?.variant ?? 'flat';\n  const selectedRadius = value?.radius ?? 'rounded';\n\n  return (\n    <div>\n      {Object.entries(AvailableVariants).map(([variant, variantLabel]) => (\n        <div key={variant}>\n          <h3 className={appearanceHeaderClassnames.h3}>\n            <Trans {...variantLabel} />\n          </h3>\n          <div className=\"grid gap-24 grid-cols-2 md:grid-cols-3\">\n            {Object.entries(AvailableRadius).map(([radius, radiusLabel]) => (\n              <div\n                key={radius}\n                className={clsx(\n                  'rounded',\n                  variant === selectedVariant &&\n                    selectedRadius === radius &&\n                    'ring ring-primary-light ring-offset-4'\n                )}\n              >\n                <Button\n                  variant={variant as ButtonVariant}\n                  color=\"primary\"\n                  radius={radius}\n                  className=\"w-full\"\n                  onClick={() => {\n                    onChange({\n                      variant: variant as ButtonVariant,\n                      radius: radius as BiolinkBtnConfig['radius'],\n                    });\n                  }}\n                >\n                  <Trans {...radiusLabel} />\n                </Button>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nconst AvailableShadows: Record<string, MessageDescriptor> = {\n  'shadow-none': message('No shadow'),\n  'rgb(0 0 0 / 20%) 0.2rem 0.2rem 0.4rem 0px': message('Light shadow'),\n  'rgb(0 0 0 / 75%) 0.3rem 0.4rem 0px': message('Hard shadow'),\n} as const;\nfunction ShadowSelector({value, onChange}: StyleSelectorProps) {\n  const selectedShadow = value?.shadow ?? 'shadow-none';\n  return (\n    <div>\n      <h3 className=\"my-12 font-semibold\">\n        <Trans message=\"Shadow\" />\n      </h3>\n      <div className=\"flex gap-24\">\n        {Object.entries(AvailableShadows).map(([shadow, shadowLabel]) => (\n          <div key={shadow} style={{boxShadow: shadow}}>\n            <ButtonBase\n              className={clsx(\n                'w-70 h-40 border rounded',\n                selectedShadow === shadow && 'border-primary'\n              )}\n              onClick={() => {\n                onChange({\n                  shadow: shadow === 'shadow-none' ? undefined : shadow,\n                });\n              }}\n            >\n              <span className=\"sr-only\">\n                <Trans {...shadowLabel} />\n              </span>\n            </ButtonBase>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","export default \"__VITE_ASSET__a5a81d1a__\"","import {useTrans} from '@common/i18n/use-trans';\nimport {TextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {SearchIcon} from '@common/icons/material/Search';\nimport {message} from '@common/i18n/message';\nimport {Select} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {FontSelectorState} from '@common/ui/font-selector/font-selector-state';\n\nexport interface FontSelectorFilterValue {\n  query: string;\n  category: string;\n}\n\ninterface FiltersHeaderProps {\n  state: FontSelectorState;\n}\nexport function FontSelectorFilters({\n  state: {filters, setFilters},\n}: FiltersHeaderProps) {\n  const {trans} = useTrans();\n  return (\n    <div className=\"flex items-center gap-24 mb-24\">\n      <TextField\n        className=\"flex-auto\"\n        value={filters.query}\n        onChange={e => {\n          setFilters({\n            ...filters,\n            query: e.target.value,\n          });\n        }}\n        startAdornment={<SearchIcon />}\n        placeholder={trans(message('Search fonts'))}\n      />\n      <Select\n        className=\"flex-auto\"\n        selectionMode=\"single\"\n        selectedValue={filters.category}\n        onSelectionChange={value => {\n          setFilters({\n            ...filters,\n            category: value as string,\n          });\n        }}\n      >\n        <Item value=\"\">\n          <Trans message=\"All categories\" />\n        </Item>\n        <Item value=\"serif\">\n          <Trans message=\"Serif\" />\n        </Item>\n        <Item value=\"sans-serif\">\n          <Trans message=\"Sans serif\" />\n        </Item>\n        <Item value=\"display\">\n          <Trans message=\"Display\" />\n        </Item>\n        <Item value=\"handwriting\">\n          <Trans message=\"Handwriting\" />\n        </Item>\n        <Item value=\"monospace\">\n          <Trans message=\"Monospace\" />\n        </Item>\n      </Select>\n    </div>\n  );\n}\n","import {useCollator} from './use-collator';\n\ninterface Filter {\n  /** Returns whether a string starts with a given substring. */\n  startsWith(string: string, substring: string): boolean;\n  /** Returns whether a string ends with a given substring. */\n  endsWith(string: string, substring: string): boolean;\n  /** Returns whether a string contains a given substring. */\n  contains(string: string, substring: string): boolean;\n}\n\nexport function useFilter(options?: Intl.CollatorOptions): Filter {\n  const collator = useCollator({\n    usage: 'search',\n    ...options,\n  });\n\n  return {\n    startsWith(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n      return (\n        collator.compare(string.slice(0, substring.length), substring) === 0\n      );\n    },\n    endsWith(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n      return collator.compare(string.slice(-substring.length), substring) === 0;\n    },\n    contains(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n\n      let scan = 0;\n      const sliceLen = substring.length;\n      for (; scan + sliceLen <= string.length; scan++) {\n        const slice = string.slice(scan, scan + sliceLen);\n        if (collator.compare(substring, slice) === 0) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n  };\n}\n","import {FontConfig} from '@common/http/value-lists';\nimport {message} from '@common/i18n/message';\n\nexport const BrowserSafeFonts: FontConfig[] = [\n  {\n    label: message('System'),\n    family:\n      'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"',\n    category: 'sans-serif',\n  },\n  {family: 'Impact, Charcoal, sans-serif', category: 'sans-serif'},\n  {family: 'Arial, Helvetica Neue, Helvetica, sans-serif', category: 'serif'},\n  {family: '\"Comic Sans MS\", cursive, sans-serif', category: 'Handwriting'},\n  {family: 'Century Gothic, sans-serif', category: 'sans-serif'},\n  {family: '\"Courier New\", Courier, monospace', category: 'monospace'},\n  {\n    family: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif',\n    category: 'sans-serif',\n  },\n  {family: '\"Times New Roman\", Times, serif', category: 'serif'},\n  {family: '\"Lucida Console\", Monaco, monospace', category: 'monospace'},\n  {family: '\"Andele Mono\", monospace, sans-serif', category: 'sans-serif'},\n  {family: 'Verdana, Geneva, sans-serif', category: 'sans-serif'},\n  {\n    family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif',\n    category: 'sans-serif',\n  },\n];\n","import {useCallback, useEffect, useMemo, useState} from 'react';\nimport {FontSelectorFilterValue} from '@common/ui/font-selector/font-selector-filters';\nimport {FontConfig, useValueLists} from '@common/http/value-lists';\nimport {useFilter} from '@common/i18n/use-filter';\nimport {BrowserSafeFonts} from '@common/ui/font-picker/browser-safe-fonts';\nimport {chunkArray} from '@common/utils/array/chunk-array';\nimport {loadFonts} from '@common/ui/font-picker/load-fonts';\n\nexport interface FontSelectorState extends UseFontSelectorProps {\n  fonts: FontConfig[];\n  filteredFonts: FontConfig[];\n  pages: FontConfig[][];\n  isLoading: boolean;\n  filters: FontSelectorFilterValue;\n  setFilters: (filters: FontSelectorFilterValue) => void;\n  currentPage: number;\n  setCurrentPage: (page: number) => void;\n}\n\nexport interface UseFontSelectorProps {\n  value?: FontConfig;\n  onChange: (value: FontConfig) => void;\n}\nexport function useFontSelectorState({\n  value,\n  onChange,\n}: UseFontSelectorProps): FontSelectorState {\n  const {data, isLoading} = useValueLists(['googleFonts']);\n  const [currentPage, setCurrentPage] = useState(0);\n\n  const [filters, setFilterState] = useState<FontSelectorFilterValue>({\n    query: '',\n    category: '',\n  });\n  const {contains} = useFilter({\n    sensitivity: 'base',\n  });\n\n  const setFilters = useCallback((filters: FontSelectorFilterValue) => {\n    setFilterState(filters);\n    // reset to first page when searching or changing category\n    setCurrentPage(0);\n  }, []);\n\n  const allFonts = useMemo(() => {\n    return BrowserSafeFonts.concat(data?.googleFonts ?? []);\n  }, [data?.googleFonts]);\n\n  const filteredFonts = useMemo(() => {\n    return allFonts.filter(font => {\n      return (\n        contains(font.family, filters.query) &&\n        (!filters.category ||\n          font.category?.toLowerCase() === filters.category.toLowerCase())\n      );\n    });\n  }, [allFonts, filters, contains]);\n\n  const pages = useMemo(() => {\n    return chunkArray(filteredFonts, 20);\n  }, [filteredFonts]);\n  const fonts = pages[currentPage];\n\n  useEffect(() => {\n    const id = 'font-selector';\n    if (fonts?.length) {\n      loadFonts(fonts, {id});\n    }\n  }, [fonts, currentPage]);\n\n  return {\n    fonts: fonts || [],\n    currentPage,\n    filteredFonts: filteredFonts || [],\n    setCurrentPage,\n    isLoading,\n    filters,\n    setFilters,\n    value,\n    onChange,\n    pages,\n  };\n}\n","import {Trans} from '@common/i18n/trans';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport React from 'react';\nimport {FontSelectorState} from '@common/ui/font-selector/font-selector-state';\n\ninterface FontSelectorPaginationProps {\n  state: FontSelectorState;\n}\nexport function FontSelectorPagination({\n  state: {currentPage = 0, setCurrentPage, filteredFonts, pages},\n}: FontSelectorPaginationProps) {\n  const total = filteredFonts?.length || 0;\n\n  return (\n    <div className=\"flex items-center justify-end gap-24 text-sm mt-30 pt-14 border-t\">\n      {total > 0 && (\n        <div>\n          <Trans\n            message=\":from - :to of :total\"\n            values={{\n              from: currentPage * 20 + 1,\n              to: Math.min((currentPage + 1) * 20, total),\n              total,\n            }}\n          />\n        </div>\n      )}\n      <div className=\"text-muted\">\n        <IconButton\n          disabled={currentPage < 1}\n          onClick={() => {\n            setCurrentPage(Math.max(0, currentPage - 1));\n          }}\n        >\n          <KeyboardArrowLeftIcon />\n        </IconButton>\n        <IconButton\n          disabled={currentPage >= pages.length - 1}\n          onClick={() => {\n            setCurrentPage(currentPage + 1);\n          }}\n        >\n          <KeyboardArrowRightIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport clsx from 'clsx';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport fontImage from './font.svg';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport {FontSelectorFilters} from '@common/ui/font-selector/font-selector-filters';\nimport {\n  FontSelectorState,\n  UseFontSelectorProps,\n  useFontSelectorState,\n} from '@common/ui/font-selector/font-selector-state';\nimport {FontSelectorPagination} from '@common/ui/font-selector/font-selector-pagination';\nimport {FontConfig} from '@common/http/value-lists';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\n\ninterface FontSelectorProps extends UseFontSelectorProps {\n  className?: string;\n}\nexport function FontSelector(props: FontSelectorProps) {\n  const state = useFontSelectorState(props);\n  return (\n    <div className={props.className}>\n      <FontSelectorFilters state={state} />\n      <AnimatePresence initial={false} mode=\"wait\">\n        <FontList state={state} />\n      </AnimatePresence>\n      <FontSelectorPagination state={state} />\n    </div>\n  );\n}\n\ninterface FontListProps {\n  state: FontSelectorState;\n}\nfunction FontList({state}: FontListProps) {\n  const {isLoading, fonts} = state;\n\n  const gridClassName =\n    'grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start';\n\n  if (isLoading) {\n    return <FontListSkeleton className={gridClassName} />;\n  }\n\n  if (!fonts?.length) {\n    return (\n      <IllustratedMessage\n        className=\"mt-60\"\n        size=\"sm\"\n        image={<SvgImage src={fontImage} />}\n        title={<Trans message=\"No matching fonts\" />}\n        description={\n          <Trans message=\"Try another search query or different category\" />\n        }\n      />\n    );\n  }\n\n  return (\n    <m.div key=\"font-list\" {...opacityAnimation} className={gridClassName}>\n      {fonts?.map(font => (\n        <FontButton key={font.family} font={font} state={state} />\n      ))}\n    </m.div>\n  );\n}\n\ninterface FontButtonProps {\n  font: FontConfig;\n  state: FontSelectorState;\n}\nfunction FontButton({font, state: {value, onChange}}: FontButtonProps) {\n  const isActive = value?.family === font.family;\n  const displayName = font.family.split(',')[0].replace(/\"/g, '');\n\n  return (\n    <ButtonBase\n      key={font.family}\n      onClick={() => {\n        onChange(font);\n      }}\n    >\n      <span\n        className={clsx(\n          'flex items-center justify-center text-4xl md:text-5xl border rounded aspect-square hover:bg-hover transition-bg-color',\n          isActive && 'ring-2 ring-primary ring-offset-2'\n        )}\n      >\n        <span style={{fontFamily: font.family}}>Aa</span>\n      </span>\n      <span\n        className={clsx(\n          'block mt-6 text-sm whitespace-nowrap overflow-hidden overflow-ellipsis',\n          isActive && 'text-primary'\n        )}\n      >\n        {font.label ? <Trans {...font.label} /> : displayName}\n      </span>\n    </ButtonBase>\n  );\n}\n\ninterface FontListSkeletonProps {\n  className: string;\n}\nfunction FontListSkeleton({className}: FontListSkeletonProps) {\n  const items = Array.from(Array(20).keys());\n  return (\n    <m.div key=\"font-list-skeleton\" {...opacityAnimation} className={className}>\n      {items.map(index => (\n        <div key={index}>\n          <div className=\"aspect-square\">\n            <Skeleton display=\"block\" variant=\"rect\" />\n          </div>\n          <Skeleton className=\"text-sm mt-6\" />\n        </div>\n      ))}\n    </m.div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {biolinkEditorState} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {useEditorBiolinkId} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  appearance: Biolink['appearance'];\n}\n\nexport function useSaveBiolinkAppearance() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation(\n    () => {\n      const appearance = biolinkEditorState().appearance!;\n      return saveAppearance(biolinkId, {config: appearance});\n    },\n    {\n      onSuccess: () => {\n        biolinkEditorState().setAppearanceIsDirty(false);\n        toast.positive(message('Appearance saved'));\n      },\n      onError: err =>\n        showHttpErrorToast(err, message('Could not save appearance')),\n    }\n  );\n}\n\nfunction saveAppearance(\n  biolinkId: number,\n  appearance: Biolink['appearance']\n): Promise<Response> {\n  return apiClient\n    .post(`biolink/${biolinkId}/appearance`, appearance)\n    .then(r => r.data);\n}\n","import {getInputFieldClassNames} from '@common/ui/forms/input-field/get-input-field-class-names';\nimport React, {Fragment, ReactNode, useId} from 'react';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {HexColorInput} from 'react-colorful';\n\ninterface ColorInputProps {\n  value: string;\n  onChange: (newValue: string) => void;\n  label: ReactNode;\n}\nexport function ColorInput({value, onChange, label}: ColorInputProps) {\n  const style = getInputFieldClassNames({\n    size: 'md',\n    startAppend: <Fragment />,\n  });\n  const id = useId();\n\n  return (\n    <div>\n      <label className={style.label} htmlFor={id}>\n        {label}\n      </label>\n      <div className=\"flex\">\n        <DialogTrigger type=\"popover\">\n          <ButtonBase\n            className=\"w-42 h-42 bg-black rounded-l flex-shrink-0 border\"\n            style={{backgroundColor: value}}\n          />\n          <ColorPickerDialog\n            showInput={false}\n            defaultValue={value}\n            onChange={onChange}\n          />\n        </DialogTrigger>\n        <HexColorInput\n          id={id}\n          autoComplete=\"off\"\n          role=\"textbox\"\n          autoCorrect=\"off\"\n          spellCheck=\"false\"\n          required\n          prefixed\n          className={style.input}\n          color={value}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {Button} from '@common/ui/buttons/button';\nimport {BackgroundSelector} from '@app/dashboard/biolink/biolink-editor/appearance/background-selector/background-selector';\nimport React, {Fragment} from 'react';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {ButtonStyleSelector} from '@app/dashboard/biolink/biolink-editor/appearance/button-style-selector';\nimport {FontSelector as CommonFontSelector} from '@app/common/ui/font-selector/font-selector';\nimport {useSaveBiolinkAppearance} from '@app/dashboard/biolink/biolink-editor/requests/use-save-biolink-appearance';\nimport {BrowserSafeFonts} from '@common/ui/font-picker/browser-safe-fonts';\nimport {ColorInput} from '@app/dashboard/biolink/biolink-editor/appearance/color-input';\nimport {appearanceHeaderClassnames} from '@app/dashboard/biolink/biolink-editor/appearance/header-classnames';\n\nexport function BiolinkAppearanceEditor() {\n  const saveAppearance = useSaveBiolinkAppearance();\n  const isDirty = useBiolinkEditorStore(s => s.appearanceIsDirty);\n\n  return (\n    <Fragment>\n      <header className=\"mb-40\">\n        <h1 className=\"text-2xl mb-4\">\n          <Trans message=\"Custom appearance\" />\n        </h1>\n        <div className=\"text-sm mb-20\">\n          <Trans message=\"Fully customize your Biolink. Change background color or select gradients and images. Choose button style, text color, typeface and more.\" />\n        </div>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          onClick={() => saveAppearance.mutate()}\n          disabled={!isDirty || saveAppearance.isLoading}\n        >\n          <Trans message=\"Save changes\" />\n        </Button>\n      </header>\n      <BackgroundSelector />\n      <ColorSelector />\n      <ButtonStyleSelector className=\"my-60\" />\n      <FontSelector />\n    </Fragment>\n  );\n}\n\nfunction ColorSelector() {\n  const btnConfig = useBiolinkEditorStore(s => s.appearance?.btnConfig);\n  const bgConfig = useBiolinkEditorStore(s => s.appearance?.bgConfig);\n\n  return (\n    <div className=\"my-60\">\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Colors\" />\n      </h2>\n      <div className=\"md:grid grid-cols-3 items-center gap-24\">\n        <ColorInput\n          label={<Trans message=\"Text color\" />}\n          value={bgConfig?.color || '#000'}\n          onChange={newValue => {\n            biolinkEditorState().updateAppearance({\n              bgConfig: {\n                ...bgConfig,\n                color: newValue,\n              },\n            });\n          }}\n        />\n        <ColorInput\n          label={<Trans message=\"Button color\" />}\n          value={btnConfig?.color || '#000'}\n          onChange={newValue => {\n            biolinkEditorState().updateAppearance({\n              btnConfig: {\n                ...btnConfig,\n                color: newValue,\n              },\n            });\n          }}\n        />\n        <ColorInput\n          label={<Trans message=\"Button text color\" />}\n          value={btnConfig?.textColor || '#000'}\n          onChange={newValue => {\n            biolinkEditorState().updateAppearance({\n              btnConfig: {\n                ...btnConfig,\n                textColor: newValue,\n              },\n            });\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction FontSelector() {\n  const currentValue =\n    useBiolinkEditorStore(s => s.appearance?.fontConfig) || BrowserSafeFonts[0];\n  return (\n    <div>\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Font\" />\n      </h2>\n      <CommonFontSelector\n        value={currentValue}\n        onChange={newValue => {\n          biolinkEditorState().updateAppearance({\n            fontConfig: {\n              ...currentValue,\n              ...newValue,\n            },\n          });\n        }}\n      />\n    </div>\n  );\n}\n","import {Tabs} from '@common/ui/tabs/tabs';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {Trans} from '@app/common/i18n/trans';\nimport {TabPanel, TabPanels} from '@common/ui/tabs/tab-panels';\nimport {Fragment, ReactElement, useEffect, useState} from 'react';\nimport {Button} from '@common/ui/buttons/button';\nimport {WidgetsIcon} from '@common/icons/material/Widgets';\nimport {\n  LinkContentItem,\n  linkDialogHiddenFields,\n} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-content-item';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {CreateLinkDialog} from '@app/dashboard/links/dialogs/create-link-dialog';\nimport {BiolinkSettingsForm} from '@app/dashboard/biolink/biolink-editor/biolink-settings-form';\nimport {SelectWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-selector/select-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {NewWidgetDialogContainer} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-selector/new-widget-dialog-container';\nimport {WidgetContentItem} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-content-item';\nimport {LivePreview} from '@app/dashboard/biolink/biolink-editor/live-preview';\nimport {BiolinkAppearanceEditor} from '@app/dashboard/biolink/biolink-editor/appearance/biolink-appearance-editor';\nimport {Link, useParams} from 'react-router-dom';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {BiolinkContentItemLayout} from '@app/dashboard/biolink/biolink-editor/content/biolink-content-item-layout';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {\n  setEditorBiolink,\n  useEditorBiolink,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport notifySvg from '@common/notifications/empty-state/notify.svg';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {LinkIcon} from '@common/icons/material/Link';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\n\nconst TabsMap: Record<string, number> = {\n  content: 0,\n  appearance: 1,\n  settings: 2,\n};\n\nexport function BiolinkEditorPage() {\n  return (\n    <div>\n      <BiolinkEditorHeader />\n      <div className=\"flex gap-60 p-24 container mx-auto\">\n        <BiolinkEditor />\n        <LivePreview />\n      </div>\n    </div>\n  );\n}\n\nfunction BiolinkEditorHeader() {\n  const {biolink} = useEditorBiolink();\n  return (\n    <header className=\"border-b px-10 py-4 flex items-center gap-10 min-h-46\">\n      <LinkIcon className=\"text-muted\" />\n      <AnimatePresence>\n        {biolink && (\n          <m.a\n            key=\"link\"\n            className={LinkStyle}\n            href={biolink?.short_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            {...opacityAnimation}\n          >\n            {removeProtocol(biolink.short_url)}\n          </m.a>\n        )}\n        {biolink && (\n          <m.div {...opacityAnimation} key=\"share-button\" className=\"ml-auto\">\n            <ShareLinkButton variant=\"text\" link={biolink} />\n          </m.div>\n        )}\n      </AnimatePresence>\n    </header>\n  );\n}\n\nfunction BiolinkEditor() {\n  const {biolinkId} = useParams();\n  const {tabName = 'content'} = useParams();\n  const selectedTab = TabsMap[tabName] ?? TabsMap.content;\n  useEditorBiolink();\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, [biolinkId]);\n\n  return (\n    <div className=\"flex-auto min-w-0\">\n      <Tabs overflow=\"overflow-visible\" selectedTab={selectedTab} isLazy>\n        <TabList className=\"sticky top-0 bg dark:bg-alt z-10\">\n          <Tab\n            padding=\"w-140\"\n            elementType={Link}\n            to=\"../content\"\n            relative=\"path\"\n          >\n            <Trans message=\"Content\" />\n          </Tab>\n          <Tab\n            padding=\"w-140\"\n            elementType={Link}\n            to=\"../appearance\"\n            relative=\"path\"\n          >\n            <Trans message=\"Appearance\" />\n          </Tab>\n          <Tab\n            padding=\"w-140\"\n            elementType={Link}\n            to=\"../settings\"\n            relative=\"path\"\n          >\n            <Trans message=\"Settings\" />\n          </Tab>\n        </TabList>\n        <TabPanels className=\"py-20\">\n          <TabPanel>{<BiolinkContent />}</TabPanel>\n          <TabPanel>{<BiolinkAppearanceEditor />}</TabPanel>\n          <TabPanel>\n            <BiolinkSettingsForm />\n          </TabPanel>\n        </TabPanels>\n      </Tabs>\n    </div>\n  );\n}\n\nfunction BiolinkContent() {\n  const {isLoading, status, biolink} = useEditorBiolink();\n  const [activeWidgetDialog, setActiveWidgetDialog] =\n    useState<WidgetType | null>(null);\n\n  let renderedContent: ReactElement;\n\n  if (status === 'success' && !biolink?.content.length) {\n    renderedContent = (\n      <m.div {...opacityAnimation} key=\"no-results\">\n        <IllustratedMessage\n          className=\"mt-60\"\n          image={<SvgImage src={notifySvg} />}\n          title={<Trans message=\"This biolink does not have any content yet\" />}\n        />\n      </m.div>\n    );\n  } else if (isLoading) {\n    renderedContent = <LoadingSkeleton />;\n  } else {\n    renderedContent = <BiolinkItemList biolink={biolink!} />;\n  }\n\n  return (\n    <Fragment>\n      {biolink && (\n        <NewWidgetDialogContainer\n          biolink={biolink}\n          activeWidget={activeWidgetDialog}\n          onOpenChange={isOpen => {\n            if (!isOpen) {\n              setActiveWidgetDialog(null);\n            }\n          }}\n        />\n      )}\n      <div className=\"mb-20\">\n        <AddNewLinkButton />\n        <DialogTrigger\n          type=\"modal\"\n          onClose={(widgetType?: WidgetType) => {\n            if (widgetType) {\n              setActiveWidgetDialog(widgetType);\n            }\n          }}\n        >\n          <Button color=\"primary\" variant=\"outline\" startIcon={<WidgetsIcon />}>\n            <Trans message=\"Add widget\" />\n          </Button>\n          <SelectWidgetDialog />\n        </DialogTrigger>\n      </div>\n      <AnimatePresence initial={false} mode=\"wait\">\n        {renderedContent}\n      </AnimatePresence>\n    </Fragment>\n  );\n}\n\ninterface BiolinkItemListProps {\n  biolink: Biolink;\n}\nfunction BiolinkItemList({biolink}: BiolinkItemListProps) {\n  return (\n    <m.div key=\"content\" {...opacityAnimation}>\n      {biolink?.content.map(contentItem => {\n        const ContentItem =\n          contentItem.model_type === 'biolinkWidget'\n            ? WidgetContentItem\n            : LinkContentItem;\n        return (\n          <ContentItem\n            key={`${contentItem.model_type}-${contentItem.id}`}\n            item={contentItem as never}\n            biolink={biolink}\n          />\n        );\n      })}\n    </m.div>\n  );\n}\n\nfunction AddNewLinkButton() {\n  const {biolink, biolinkId} = useEditorBiolink();\n  const endpoint = `biolink/${biolinkId}/link`;\n\n  const position = biolink?.content.filter(x => x.pinned).length;\n\n  return (\n    <DialogTrigger type=\"modal\">\n      <Button color=\"primary\" variant=\"flat\" className=\"mr-14 min-w-144\">\n        <Trans message=\"Add a link\" />\n      </Button>\n      <CreateLinkDialog\n        endpoint={endpoint}\n        position={position}\n        group={biolink}\n        hiddenFields={linkDialogHiddenFields}\n        showButtonLabelField\n        invalidateQueries={false}\n        onSuccess={(response: {biolink: Biolink}) => {\n          setEditorBiolink(response.biolink);\n        }}\n      />\n    </DialogTrigger>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div key=\"loading-skeleton\" {...opacityAnimation}>\n      {[...Array(4).keys()].map((value, index) => (\n        <BiolinkSkeleton key={index} />\n      ))}\n    </m.div>\n  );\n}\n\nfunction BiolinkSkeleton() {\n  return (\n    <BiolinkContentItemLayout\n      title={<Skeleton className=\"mb-14 text-sm max-w-192\" />}\n      actionRow={<Skeleton className=\"text-xs max-w-288\" />}\n    >\n      <Skeleton className=\"text-xs max-w-400\" />\n      <Skeleton className=\"text-xs max-w-400\" />\n    </BiolinkContentItemLayout>\n  );\n}\n","import {Navigate, RouteObject, useRoutes} from 'react-router-dom';\nimport React from 'react';\nimport {AuthRoute} from '@common/auth/guards/auth-route';\nimport {NotFoundPage} from '@common/ui/not-found-page/not-found-page';\nimport {BelinkDashboardLayout} from './layout/belink-dasbboard-layout';\nimport {AllClicksReportPage} from './all-clicks-report-page';\nimport {LinksDatablePage} from './links/links-datatable-page/links-datatable-page';\nimport {LinkGroupsLinksDatatablePage} from './link-groups/link-group-links-datatable-page/link-group-links-datatable-page';\nimport {LinkGroupsDatatablePage} from './link-groups/link-groups-datatable-page/link-groups-datatable-page';\nimport {LinkGroupClicksReportPage} from '@app/dashboard/link-groups/link-group-clicks-report-page';\nimport {LinkClicksReportPage} from '@app/dashboard/links/link-clicks-report-page';\nimport {DomainsDatatablePage} from '@app/dashboard/custom-domains/domains-datatable-page';\nimport {TrackingPixelsDatablePage} from '@app/dashboard/tracking-pixels/tracking-pixels-datatable-page';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PageEditorLayout} from '@common/admin/custom-pages/editor/page-editor-layout';\nimport {LinkPagesDatatablePage} from '@app/dashboard/link-pages/link-pages-datatable-page';\nimport {LinkOverlaysDatatablePage} from '@app/dashboard/link-overlays/link-overlays-datatable-page';\nimport {CreateLinkOverlayPage} from '@app/dashboard/link-overlays/crupdate/create-link-overlay-page';\nimport {UpdateLinkOverlayPage} from '@app/dashboard/link-overlays/crupdate/update-link-overlay-page';\nimport {BioLinksDatatablePage} from '@app/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-page';\nimport {BiolinkClicksReportPage} from '@app/dashboard/biolink/biolink-clicks-report-page';\nimport {BiolinkEditorPage} from '@app/dashboard/biolink/biolink-editor/biolink-editor-page';\n\nexport const SharedDashboardRoutes = ({forCurrentUser = false}) => {\n  return [\n    // links\n    {\n      path: 'links',\n      element: <LinksDatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'links/:linkId',\n      element: <LinkClicksReportPage />,\n    },\n\n    // biolinks\n    {\n      path: 'biolinks',\n      element: <BioLinksDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'biolinks/:biolinkId',\n      element: <BiolinkClicksReportPage />,\n    },\n    {\n      path: 'biolinks/:biolinkId/edit',\n      element: <Navigate to=\"content\" replace />,\n    },\n    {\n      path: 'biolinks/:biolinkId/edit/:tabName',\n      element: <BiolinkEditorPage />,\n    },\n\n    // groups\n    {\n      path: 'link-groups',\n      element: <LinkGroupsDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'link-groups/:groupId',\n      element: <LinkGroupClicksReportPage />,\n    },\n    {\n      path: 'link-groups/:groupId/links',\n      element: <LinkGroupsLinksDatatablePage />,\n    },\n\n    // domains\n    {\n      path: 'custom-domains',\n      element: <DomainsDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n\n    // tracking pixels\n    {\n      path: 'pixels',\n      element: <TrackingPixelsDatablePage forCurrentUser={forCurrentUser} />,\n    },\n\n    // overlays\n    {\n      path: 'link-overlays',\n      element: <LinkOverlaysDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'link-overlays/new',\n      element: <CreateLinkOverlayPage />,\n    },\n    {\n      path: 'link-overlays/:overlayId/edit',\n      element: <UpdateLinkOverlayPage />,\n    },\n  ];\n};\n\nexport default function DashboardRoutes() {\n  const {workspaceId} = useActiveWorkspaceId();\n  const DashboardRouteConfig: RouteObject[] = [\n    {\n      path: '/',\n      element: (\n        <AuthRoute>\n          <BelinkDashboardLayout />\n        </AuthRoute>\n      ),\n      children: [\n        {index: true, element: <AllClicksReportPage />},\n\n        // link pages\n        {\n          path: 'link-pages',\n          element: <LinkPagesDatatablePage forCurrentUser={!workspaceId} />,\n        },\n        {\n          path: 'link-pages/new',\n          element: (\n            <PageEditorLayout allowSlugEditing={false} endpoint=\"link-page\" />\n          ),\n        },\n        {\n          path: 'link-pages/:pageId/edit',\n          element: (\n            <PageEditorLayout allowSlugEditing={false} endpoint=\"link-page\" />\n          ),\n        },\n\n        ...SharedDashboardRoutes({forCurrentUser: !workspaceId}),\n      ],\n    },\n    {path: '*', element: <NotFoundPage />},\n  ];\n\n  return useRoutes(DashboardRouteConfig);\n}\n"],"file":"assets/dashboard-routes.6d237f77.js"}